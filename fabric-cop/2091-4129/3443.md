<strong>Project</strong>: fabric-cop<br><strong>Branch</strong>: master<br><strong>ID</strong>: 3443<br><strong>Subject</strong>: Add support for TLS and config file enhanced<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 12/20/2016, 4:20:53 PM<br><strong>LastUpdated</strong>: 1/5/2017, 6:58:23 AM<br><strong>CommitMessage</strong>:<br><pre>Add support for TLS and config file enhanced

TLS support for connection between client and COP server,
and COP server and database is now supported.

Simplified the cop server start command by reading the
CA cert and CA key from config rather than command line
parameters.

Cleaned up testcases to remove redundant code

README updated with instruction on how to configure TLS.

https://jira.hyperledger.org/browse/FAB-1383

Change-Id: I2a80b1844bcaa4ab0e2f9c3ec978f647406f99d7
Signed-off-by: Saad Karim <skarim@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/20/2016, 4:20:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/20/2016, 4:21:55 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/196/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/20/2016, 4:26:43 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/196/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/20/2016, 6:13:31 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/20/2016, 6:15:45 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/202/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/20/2016, 6:20:43 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/202/ : SUCCESS</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 12/20/2016, 8:53:40 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(5 comments)

see comments... I am sure that Jonathan and or Gari will also have comments</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 5:39:28 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(4 comments)

for future reference, it will make it easier for us to review if you keep change sets constrained to a single problem.  For example, this should have been multiple smaller change sets:</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 5:42:31 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(hit enter too soon above)
for future reference, it will make it easier for us to review if you keep change sets constrained to a single problem.  For example, this should have been multiple smaller change sets:

1) Add TLS support for the server
2) Add TLS support for database communication
3) Simplify start sequence
4) Refactor ("cleanup testcases to remove redundant code")

Even though the number of total lines changes here was not huge, we still have to check and if the CR focusing on a single task, it makes things easy to review</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/21/2016, 11:11:04 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(8 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/21/2016, 11:11:26 AM<br><strong>Message</strong>: <pre>Patch Set 2:

> (hit enter too soon above)
 > for future reference, it will make it easier for us to review if
 > you keep change sets constrained to a single problem.  For example,
 > this should have been multiple smaller change sets:
 > 
 > 1) Add TLS support for the server
 > 2) Add TLS support for database communication
 > 3) Simplify start sequence
 > 4) Refactor ("cleanup testcases to remove redundant code")
 > 
 > Even though the number of total lines changes here was not huge, we
 > still have to check and if the CR focusing on a single task, it
 > makes things easy to review

Yeah, that make sense. I will keep that in mind going forward.</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 11:32:00 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(3 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/21/2016, 12:07:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(3 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/21/2016, 12:08:58 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 12:10:34 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/204/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 12:15:43 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/204/ : SUCCESS</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 2:00:50 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+1</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/21/2016, 2:40:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 2:41:17 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/207/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 2:45:57 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/207/ : SUCCESS</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 2:58:58 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 4:16:35 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 12/23/2016, 2:01:36 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-2

(7 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/3/2017, 11:32:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/3/2017, 11:32:44 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(6 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 11:33:56 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/223/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 11:44:02 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/223/ : FAILURE</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 1/3/2017, 1:06:20 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(2 comments)</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 1/3/2017, 1:41:34 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(3 comments)

Thanks for these Saad. In the interest of time, now that everybody is back:
1. I agree with Keith's suggestion
2. At the same time - since there is another approved CR that is dependent on this, I'm also happy to merge this, as the README.md will probably require a few more iterations... and we are trying to clear the backlog/dependency chain in fabric-cop.

See my inline comments - if you want to quickly push another patchset, fine. Otherwise, I'll +2 this version for now.</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 1/3/2017, 1:46:08 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2

Pls LMK</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/3/2017, 2:01:18 PM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 1/3/2017, 2:01:29 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+1</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 2:02:26 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/224/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 2:16:01 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/224/ : FAILURE</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/3/2017, 2:28:53 PM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 2:31:19 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/227/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 3:04:29 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/227/ : FAILURE</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/3/2017, 4:23:28 PM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 4:24:44 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/231/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 4:52:32 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/231/ : FAILURE</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 1/3/2017, 6:01:02 PM<br><strong>Message</strong>: <pre>Patch Set 5:

> Build Failed
 > 
 > https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/231/ :
 > FAILURE

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 6:04:30 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/233/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/3/2017, 6:57:59 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/233/ : FAILURE</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 1/4/2017, 9:04:58 AM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/4/2017, 9:07:18 AM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/237/</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 1/4/2017, 9:24:27 AM<br><strong>Message</strong>: <pre>Patch Set 5: -Code-Review

(while the build is in the works)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/4/2017, 9:53:15 AM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/4/2017, 10:46:27 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/237/ : FAILURE</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/4/2017, 11:04:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/4/2017, 11:07:59 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/240/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/4/2017, 11:50:56 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/240/ : FAILURE</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 1/4/2017, 1:07:11 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/4/2017, 1:08:32 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/241/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/4/2017, 1:25:06 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/241/ : SUCCESS</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 1/4/2017, 1:32:10 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 1/4/2017, 1:44:06 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+1</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/5/2017, 6:48:23 AM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 1/5/2017, 6:48:27 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Gari Singh</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/5/2017, 6:49:40 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-merge-x86_64/31/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/5/2017, 6:58:23 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-merge-x86_64/31/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 12/20/2016, 4:20:53 PM<br><strong>UnmergedRevision</strong>: [6d4915a14caa6dd0a1f94bdd2d579b6c7ea59646](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/6d4915a14caa6dd0a1f94bdd2d579b6c7ea59646)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/20/2016, 4:26:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 12/20/2016, 6:13:31 PM<br><strong>UnmergedRevision</strong>: [aa113fe834e16548745bff2972ab3dcfebb6c151](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/aa113fe834e16548745bff2972ab3dcfebb6c151)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 12/20/2016, 8:53:40 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/20/2016, 6:20:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 12/21/2016, 11:32:00 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 12/21/2016, 5:39:28 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [README.md#L60](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/README.md#L60)<br><strong>Comment</strong>: <pre>please limit line length to < 80 chars. Please fix all occurrences.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L60](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/README.md#L60)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [README.md#L192](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/README.md#L192)<br><strong>Comment</strong>: <pre>I assume that this is relative to the location of the binary? Is that the best idea?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L192](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/README.md#L192)<br><strong>Comment</strong>: <pre>Yes, but this is just an example. The user can place cert and key anywhere then specify the file path in the config file.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [README.md#L192](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/README.md#L192)<br><strong>Comment</strong>: <pre>Saad, as an example, it would be better to just put "cop-cert.pem", unless this is part of a running example that really works.  Also note the extra space after "pem" in "../testdata/cop-cert.pem "</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L192](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/README.md#L192)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [cli/client/client_test.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/client/client_test.go#L47)<br><strong>Comment</strong>: <pre>If you are really going to do something like this, I'd almost prefer that you copied the files rather than linking them.  Also, you should be using filepath.Join to instead of doing clientPath+"..."</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/client/client_test.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/client/client_test.go#L47)<br><strong>Comment</strong>: <pre>Yeah, I looked into copying it but go doesn't provide any copy function and so it becomes more complicated to the file the copy over rather than just link it.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/client/client_test.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/client/client_test.go#L47)<br><strong>Comment</strong>: <pre>OK, to confirm: we are not linking these, right?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [cli/cop_test.go#L64](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/cop_test.go#L64)<br><strong>Comment</strong>: <pre>we should not be doing this.  also - if you are going to do something like enrollPath+"/cop_client.json" Go's filepath pkg (e.g. filepath.Join(...))</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/cop_test.go#L64](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/cop_test.go#L64)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/server/dbutil/dbutil.go#L110](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/dbutil/dbutil.go#L110)<br><strong>Comment</strong>: <pre>Let's remove pls.</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [cli/server/factory.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/factory.go#L77)<br><strong>Comment</strong>: <pre>s/didn't/doesn't/</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/factory.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/factory.go#L77)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/server/factory.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/factory.go#L77)<br><strong>Comment</strong>: <pre>I think Chris meant: replace "didn't" with "doesn't" ;-)</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L36](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L36)<br><strong>Comment</strong>: <pre>Please let use a platform independent directory, using TempDir()
https://golang.org/pkg/io/ioutil/#TempDir

Also, let's have a fabric-cop or so as a prefix. Especially as later on this directory is being erased. We don't want collisions here.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L36](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L36)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L77)<br><strong>Comment</strong>: <pre>I'm unclear what this is trying to accomplish</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L77)<br><strong>Comment</strong>: <pre>Link creates newname as a hard link to the oldname file. This is needed cause the client config file contains the location of client cert and key which is needed for a TLS connection. So this client config needs to be "copied" to the home directory which is what is being done here.</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L77)<br><strong>Comment</strong>: <pre>I am unclear WHY it needs to be copied.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L77)<br><strong>Comment</strong>: <pre>The client code looks in the home directory for the client configuration file. This is something a user would create and place there manually. For testing purposes, I am just copying a test config file into the home directory.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L89](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L89)<br><strong>Comment</strong>: <pre>Enroll</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L89](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L89)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L381](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L381)<br><strong>Comment</strong>: <pre>What is the point of this?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L381](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L381)<br><strong>Comment</strong>: <pre>It just to test a code path that is executed when COP_HOME is not set.</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L381](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L381)<br><strong>Comment</strong>: <pre>This is testing ONE code path, and there are in fact, 3 possible paths.
That said, I think that the whole concept is flawed, so whatever. I'll discuss with Gari and Jonathan.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L385](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L385)<br><strong>Comment</strong>: <pre>Let's not hard-code it (again). It is declared at the top, so let's reuse it. If we call TempDir() then let's store its result, etc.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L385](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L385)<br><strong>Comment</strong>: <pre>This is not the same directory path as the one hard coded. That directory will already exist when it hits this code, so I wanted to use a different one to test out the HOME environment variable.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [cli/server/server_test.go#L402](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/cli/server/server_test.go#L402)<br><strong>Comment</strong>: <pre>This is why I suggest to not hard-code the /tmp/home folder.

It is declared at the top, so let's reuse it. If we call TempDir() then let's store its result, etc.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/client.go#L340](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/client.go#L340)<br><strong>Comment</strong>: <pre>What was wrong with the original detailed error, or something along the lines of:
"Failed to get client TLS configuration: %s"</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/client.go#L340](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/client.go#L340)<br><strong>Comment</strong>: <pre>I think you must be looking at an older patch set, in the lastest patch set it is more detailed.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/client.go#L340](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/client.go#L340)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L30](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L30)<br><strong>Comment</strong>: <pre>Call it "ca_certfiles" for consistency</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L30](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L30)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L31)<br><strong>Comment</strong>: <pre>do we really expect multiple key pairs per client?</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L31)<br><strong>Comment</strong>: <pre>yeh, this does not need to be an array</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L31)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L31)<br><strong>Comment</strong>: <pre>In what format do you expect these KeyCertFiles ?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L31)<br><strong>Comment</strong>: <pre>The client TLS config file is just a json file with paths to where cert and key are stored.</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L62](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L62)<br><strong>Comment</strong>: <pre>You should check the return value here (its a boolean) and return an error if you can't load one of the certs.   You could also loop through all the files, collect which ones fail and return all errors as well (but that's up to you as exiting on the first error found is fine as well)</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/tls/tls.go#L62](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/aa113fe834e16548745bff2972ab3dcfebb6c151/lib/tls/tls.go#L62)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 12/21/2016, 12:08:58 PM<br><strong>UnmergedRevision</strong>: [3b3358fa55a6820b271a33467e6d49f8609723f1](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/3b3358fa55a6820b271a33467e6d49f8609723f1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/21/2016, 12:15:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 12/21/2016, 2:00:50 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 12/21/2016, 2:40:08 PM<br><strong>UnmergedRevision</strong>: [eac9e770cee2f8cccabd72ce40eb1392f05563ff](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/eac9e770cee2f8cccabd72ce40eb1392f05563ff)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/21/2016, 2:45:57 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Approved</strong>: 12/23/2016, 2:01:36 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 12/21/2016, 2:58:58 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 1/3/2017, 11:32:34 AM<br><strong>UnmergedRevision</strong>: [590a1bf498082d25923c3d7a0912067e94c6b57c](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/590a1bf498082d25923c3d7a0912067e94c6b57c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/4/2017, 10:46:27 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 1/3/2017, 2:01:29 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [README.md#L57](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/590a1bf498082d25923c3d7a0912067e94c6b57c/README.md#L57)<br><strong>Comment</strong>: <pre>All TLS server info should go in a subsection underneath "Start the COP server" section.  I suggest creating a subsection named similar to "cop.json file format" which has a sample cop.json and perhaps a reference table which describes all fields in the cop.json in more detail.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [README.md#L105](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/590a1bf498082d25923c3d7a0912067e94c6b57c/README.md#L105)<br><strong>Comment</strong>: <pre>As mentioned above, let's move this and other TLS sections underneath "Start the COP server" section in a cop.json subsection.</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 1/4/2017, 11:04:39 AM<br><strong>UnmergedRevision</strong>: [6643773ca17fe709efd919c9c017f8bcc5c09211](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/6643773ca17fe709efd919c9c017f8bcc5c09211)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/4/2017, 11:50:56 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 1/4/2017, 1:07:11 PM<br><strong>GitHubMergedRevision</strong>: [6fc761555ea4522c593aef38996e10f341b1b8af](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/6fc761555ea4522c593aef38996e10f341b1b8af)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/4/2017, 1:25:06 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Approved</strong>: 1/4/2017, 1:32:10 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 1/4/2017, 1:44:06 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 1/5/2017, 6:48:23 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Gari Singh<br><strong>Merged</strong>: 1/5/2017, 6:48:27 AM<br><br></blockquote>