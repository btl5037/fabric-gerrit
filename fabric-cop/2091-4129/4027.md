<strong>Project</strong>: fabric-cop<br><strong>Branch</strong>: master<br><strong>ID</strong>: 4027<br><strong>Subject</strong>: Retrieving Attributes from TCert<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/16/2017, 4:29:50 PM<br><strong>LastUpdated</strong>: 1/19/2017, 7:35:22 AM<br><strong>CommitMessage</strong>:<br><pre>Retrieving Attributes from TCert

This implements FAB 1594
https://jira.hyperledger.org/browse/FAB-1594

File names have been changed.

API has been changed.
New set of APIs have been introduced.

Caller has to instantiate AttributeManager
and call APIs.

Change-Id: I02c7a656febc6446f933e7e5940adb90e12a4a39
Signed-off-by: ASHUTOSH KUMAR <ashutosh_kumar@hotmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/16/2017, 4:29:50 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 4:30:01 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-ppc64le/17/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 4:30:02 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-s390x/21/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 4:30:52 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/333/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 4:38:45 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-cop-verify-ppc64le/17/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-cop-verify-s390x/21/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/333/ : SUCCESS</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/16/2017, 4:45:00 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build fail seems to be related to Java.I am seeing it for the first time.</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 1/16/2017, 5:23:19 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(5 comments)

Hi Ash, prioritizing this as requested. So other than this not building, see some more inline.</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 1/16/2017, 5:36:55 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(13 comments)</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/17/2017, 10:52:34 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(11 comments)</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/17/2017, 11:00:11 AM<br><strong>Message</strong>: <pre>Patch Set 1:

I had slack conversation with Ramesh just now and he told me to ignore s390x and Power build errors. Per him , the build is successful.</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/17/2017, 11:00:47 AM<br><strong>Message</strong>: <pre>Patch Set 1:

I had slack conversation with Ramesh just now and he told me to ignore s390x and Power build errors. Per him , the build is successful from our perspective.</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/18/2017, 3:18:39 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 3:18:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-ppc64le/38/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 3:18:49 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-s390x/39/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 3:19:33 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/351/ (3/3)</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/18/2017, 3:24:52 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(15 comments)

Incorporated comments from Keith Smith and Jonathan Levi. On logging and Error message part , I have followed the pattern of logging and throwing error with same error message which is vogue in other part of TCert code base. Hope , it is OK.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 3:28:35 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-ppc64le/38/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-cop-verify-s390x/39/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/351/ : SUCCESS</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 1/18/2017, 4:35:42 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(3 comments)

did u intend to omit the other files? see my comments below.</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/18/2017, 9:41:34 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 9:41:44 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-ppc64le/41/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 9:41:45 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-s390x/42/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 9:42:29 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/354/ (3/3)</pre><strong>Reviewer</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Reviewed</strong>: 1/18/2017, 9:48:50 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)

Chris , yes I am going to omit clientutil.go and clientutil_test.go files.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 9:52:03 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-cop-verify-s390x/42/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-cop-verify-x86_64/354/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-cop-verify-ppc64le/41/ : SUCCESS</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 1/19/2017, 7:35:22 AM<br><strong>Message</strong>: <pre>Abandoned</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Uploader</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Created</strong>: 1/16/2017, 4:29:50 PM<br><strong>UnmergedRevision</strong>: [36bb040ec61f2c553ce45cd096f014775699c284](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/36bb040ec61f2c553ce45cd096f014775699c284)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2017, 4:38:45 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Approved</strong>: 1/16/2017, 5:23:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 1/16/2017, 5:36:55 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L0](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L0)<br><strong>Comment</strong>: <pre>This is an API used by chaincode.  A better API would be to return an Attributes object from GetAttributesFromTCert.  The Attributes object has two methods:
1) GetNames()
2) GetValue(name string)
The decryption of a value (if encrypted) is done in GetValue.
This is more efficient if cases where chaincode may not need to decrypt all values.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L0](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L0)<br><strong>Comment</strong>: <pre>Keith , I have updated JIRA https://jira.hyperledger.org/browse/FAB-1594 , with your comment.Can you please look into that and see , if it is correct ? Thanks in advance.</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L46)<br><strong>Comment</strong>: <pre>OK, this is a good example to something that I have discussed recently:

Someone calls GetAttributesFromTCert, but it fails. Looking at the returned error, he/she reads "Certificate cannot be created".

Do you see how this (can be) puzzling? I/one would go thinking: "hmmm, all I asked was to retrieve an attribute list and I have provided a certificate... why is COP attempting to create yet another one?"

Do you see what I mean by "the error should be more informative/actionable, whenever/as-much-as possible."</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L46)<br><strong>Comment</strong>: <pre>Do not throw away the original error</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L46)<br><strong>Comment</strong>: <pre>Please look at my comment above. Let me know , if you agree.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L46)<br><strong>Comment</strong>: <pre>Based on my conversation with Keith Smith , I am going to throw error so that caller will catch the error and act upon it.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L46)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L55)<br><strong>Comment</strong>: <pre>Please remove</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L55)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L65](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L65)<br><strong>Comment</strong>: <pre>Don't use Println</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L65](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L65)<br><strong>Comment</strong>: <pre>I was not sure about which log package to use. Will use CFSSL log package.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L65](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L65)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L66](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L66)<br><strong>Comment</strong>: <pre>don't throw away error</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L66](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L66)<br><strong>Comment</strong>: <pre>ok. Will handle error the way I described above.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L66](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L66)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L113](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L113)<br><strong>Comment</strong>: <pre>Be consistent with how error messages are nested elsewhere in cop ... "message: %s", err
Also should include attributeName in this error message for context</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L113](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L113)<br><strong>Comment</strong>: <pre>will do. %v and %s will have same affect , right ? Do you have preference of %v over %s and vice versa ?</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L113](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L113)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L121](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L121)<br><strong>Comment</strong>: <pre>throwing away error</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L121](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L121)<br><strong>Comment</strong>: <pre>Will make change.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L121](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L121)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L131](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L131)<br><strong>Comment</strong>: <pre>Debug</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L131](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L131)<br><strong>Comment</strong>: <pre>Will replace with CFSSL package.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L131](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L131)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L141](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L141)<br><strong>Comment</strong>: <pre>Please remove</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L141](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L141)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L166](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L166)<br><strong>Comment</strong>: <pre>Please keep the capitalization consistent... see what you have just 5 lines above.
No reason to use "Batch"</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L166](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L166)<br><strong>Comment</strong>: <pre>use different error message from previous</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L166](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L166)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L166](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L166)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L177](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L177)<br><strong>Comment</strong>: <pre>error</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L177](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L177)<br><strong>Comment</strong>: <pre>will do.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil.go#L177](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil.go#L177)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L32](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L32)<br><strong>Comment</strong>: <pre>attrs</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L32](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L32)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L40](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L40)<br><strong>Comment</strong>: <pre>== 0 has no effect because of != 2 comparison.  Why not 1?  I only see 1 attr in the pem file.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L40](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L40)<br><strong>Comment</strong>: <pre>There are 2 attributes in PEM file. I was thinking about having check for absence of attributes and if attributes are present , the number of attributes should be 2. I guess , I'll keep !=2.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L40](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L40)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L63](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L63)<br><strong>Comment</strong>: <pre>same as above</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L63](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L63)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L84](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L84)<br><strong>Comment</strong>: <pre>ditto</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L84](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L84)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L110](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L110)<br><strong>Comment</strong>: <pre>ditto</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/clientutil_test.go#L110](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/36bb040ec61f2c553ce45cd096f014775699c284/lib/tcert/clientutil_test.go#L110)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Uploader</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Created</strong>: 1/18/2017, 3:18:39 PM<br><strong>UnmergedRevision</strong>: [9e9a56634d8991edb8fb9ab37496addee6b2b8e9](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/9e9a56634d8991edb8fb9ab37496addee6b2b8e9)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 1/18/2017, 4:35:42 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/18/2017, 3:28:35 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/attribute_manager.go#L50](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/9e9a56634d8991edb8fb9ab37496addee6b2b8e9/lib/tcert/attribute_manager.go#L50)<br><strong>Comment</strong>: <pre>I don't understand why you are handling this error in this manner. Think it should be that we simply wrap the error and return the wrapped error. We shouldn't be logging here. See below, many examples of that pattern eg line 157, 175

if error != nil {
    return fmt.Errorf("... : %s", error)
}</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/attribute_manager.go#L50](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/9e9a56634d8991edb8fb9ab37496addee6b2b8e9/lib/tcert/attribute_manager.go#L50)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/attribute_manager.go#L222](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/9e9a56634d8991edb8fb9ab37496addee6b2b8e9/lib/tcert/attribute_manager.go#L222)<br><strong>Comment</strong>: <pre>I don't understand why you are handling this error in this manner. Think it should be that we simply wrap the error and return the wrapped error. We shouldn't be logging here. See below, many examples of that pattern eg line 157, 175
if error != nil {
    return fmt.Errorf("... : %s", error)
}</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/attribute_manager.go#L222](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/9e9a56634d8991edb8fb9ab37496addee6b2b8e9/lib/tcert/attribute_manager.go#L222)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [lib/tcert/attribute_manager.go#L231](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/9e9a56634d8991edb8fb9ab37496addee6b2b8e9/lib/tcert/attribute_manager.go#L231)<br><strong>Comment</strong>: <pre>same as above.</pre><strong>Commenter</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>CommentLine</strong>: [lib/tcert/attribute_manager.go#L231](https://github.com/hyperledger-gerrit-archive/fabric-cop/blob/9e9a56634d8991edb8fb9ab37496addee6b2b8e9/lib/tcert/attribute_manager.go#L231)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Uploader</strong>: Ashutosh Kumar - ashutosh_kumar@hotmail.com<br><strong>Created</strong>: 1/18/2017, 9:41:34 PM<br><strong>UnmergedRevision</strong>: [4da5767be792e1f73165597e20c39db76eb65186](https://github.com/hyperledger-gerrit-archive/fabric-cop/commit/4da5767be792e1f73165597e20c39db76eb65186)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/18/2017, 9:52:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>