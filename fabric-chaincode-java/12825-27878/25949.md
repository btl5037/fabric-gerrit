<strong>Project</strong>: fabric-chaincode-java<br><strong>Branch</strong>: master<br><strong>ID</strong>: 25949<br><strong>Subject</strong>: [FAB-11752] Fix ChaincodeStub API<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/29/2018, 8:30:35 AM<br><strong>LastUpdated</strong>: 9/2/2018, 4:35:12 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-11752] Fix ChaincodeStub API

Making getString..., putString..., etc methods depricated.
Including fixing samples.

Change-Id: Ib89caeb1e31d4797468a53053ca6c5f1d95d4e47
Signed-off-by: gennady <gennady@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 8:30:35 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:33:59 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-java-verify-x86_64/179/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:36:36 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-java-verify-x86_64/179/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-java-verify-x86_64/179</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/29/2018, 2:38:19 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Apologies if the question is silly, first time having a look at this. Took a look at the JIRA item, but couldn't find context. If this is indeed a fix, what was broken about it?</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 6:05:44 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(12 comments)

> Apologies if the question is silly, first time having a look at this. Took a look at the JIRA item, but couldn't find context. If this is indeed a fix, what was broken about it?

@kostas:
I do not think this is a fix, it's rather hygiene and cleanup, Java has methods overloading, no need to define many function with different names, you can just define function with same name and different parameters set.</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 1:32:03 PM<br><strong>Message</strong>: <pre>Patch Set 1:

@kostas
This is exactly what Artem said, code hygiene. It is mainly Yacov's idea.</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 1:32:41 PM<br><strong>Message</strong>: <pre>Patch Set 1:

> Apologies if the question is silly, first time having a look at
 > this. Took a look at the JIRA item, but couldn't find context. If
 > this is indeed a fix, what was broken about it?

This is exactly what Artem said, code hygiene. It is mainly Yacov's idea.</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 2:10:00 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(5 comments)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 3:13:15 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Fixed. The main problem that corresponding CR in fabric, that use those changes already merged (FAB-11753). I couldn't make chain of commits because different repos :(</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 3:14:29 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/31/2018, 3:19:28 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-java-verify-x86_64/181/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/31/2018, 3:21:41 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-java-verify-x86_64/181/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-java-verify-x86_64/181</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 3:26:36 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Sorry, my mistake, corresponding change in fabric is FAB-11793</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 3:30:18 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)

I'd suggest to cancel this change set and not change public APIs at the moment.</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 8/31/2018, 3:30:29 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 9/2/2018, 3:23:52 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Ok. But we need to rollback https://gerrit.hyperledger.org/r/#/c/25950/ in fabric. Both are connected</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 9/2/2018, 4:35:12 PM<br><strong>Message</strong>: <pre>Abandoned</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 8/29/2018, 8:30:35 AM<br><strong>UnmergedRevision</strong>: [ba464b0d75b08329a89bb24d8ae107054e6fb435](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/commit/ba464b0d75b08329a89bb24d8ae107054e6fb435)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 8:36:36 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L31](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L31)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L31](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L31)<br><strong>Comment</strong>: <pre>Will fix all commetns</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L35](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L35)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L81](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L81)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L87](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L87)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L93](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L93)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L96](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L96)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L127](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-example-maven/src/chaincode/example/SimpleChaincode.java#L127)<br><strong>Comment</strong>: <pre>please delete trailing white spaces.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L303](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L303)<br><strong>Comment</strong>: <pre>although that was part of experimental API's don't we need to mark it as deprecated before removing them?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L303](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L303)<br><strong>Comment</strong>: <pre>I tend to agree, even I don't think we have to do this for experiments feature. It will cost me nothing to make this</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L331](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L331)<br><strong>Comment</strong>: <pre>same question as above.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L286](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L286)<br><strong>Comment</strong>: <pre>how is that possible, i.e. "null" value as channel name? is there a substitution for some default?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L286](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L286)<br><strong>Comment</strong>: <pre>It is mean same channel, we have invokeChaincode(cc, args, channel) and invokeChaincode(cc, args) - means use same channel as invoker runs</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L310](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L310)<br><strong>Comment</strong>: <pre>Why did you rename?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L310](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L310)<br><strong>Comment</strong>: <pre>I want to get reed of all string methods</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L310](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L310)<br><strong>Comment</strong>: <pre>But these are public APIs already. I'm not saying they are good, but still they are public.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L347](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L347)<br><strong>Comment</strong>: <pre>that's not how the previous putState behaved.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L347](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/blob/ba464b0d75b08329a89bb24d8ae107054e6fb435/fabric-chaincode-shim/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L347)<br><strong>Comment</strong>: <pre>It is replacement for putStringState</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 8/31/2018, 3:14:29 PM<br><strong>UnmergedRevision</strong>: [88eeb916bc2ade2628397828030c49059cbfc06d](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-java/commit/88eeb916bc2ade2628397828030c49059cbfc06d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/31/2018, 3:21:41 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 8/31/2018, 3:30:29 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote>