<strong>Project</strong>: fabric-sdk-go<br><strong>Branch</strong>: master<br><strong>ID</strong>: 19485<br><strong>Subject</strong>: [FAB-9009]Cert expiry check<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/20/2018, 2:19:22 PM<br><strong>LastUpdated</strong>: 3/21/2018, 3:26:03 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-9009]Cert expiry check

Change-Id: I9cfc4731a08b265669be504a0fe4d43d0ccdcbd9
Signed-off-by: biljana lukovic <biljana.lukovic@securekey.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Reviewed</strong>: 3/20/2018, 2:19:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2018, 2:19:31 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2078/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2018, 2:23:11 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2170/ (2/2)</pre><strong>Reviewer</strong>: Troy Ronda - troy@troyronda.com<br><strong>Reviewed</strong>: 3/20/2018, 2:29:15 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2018, 2:29:53 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2078/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2078/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2078

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2170/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2170/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2170</pre><strong>Reviewer</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Reviewed</strong>: 3/20/2018, 2:30:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Troy Ronda - troy@troyronda.com<br><strong>Reviewed</strong>: 3/20/2018, 2:54:18 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Reviewed</strong>: 3/20/2018, 5:06:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2018, 5:06:16 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2091/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2018, 5:10:10 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2183/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2018, 5:39:35 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2091/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2091/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2091

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2183/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2183</pre><strong>Reviewer</strong>: Sandra Vrtikapa - sandra.vrtikapa@securekey.com<br><strong>Reviewed</strong>: 3/21/2018, 11:50:31 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(4 comments)</pre><strong>Reviewer</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Reviewed</strong>: 3/21/2018, 2:20:23 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2018, 2:20:30 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2104/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2018, 2:24:15 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2197/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2018, 2:57:30 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2104/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2104

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2197/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2197</pre><strong>Reviewer</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Reviewed</strong>: 3/21/2018, 3:26:03 PM<br><strong>Message</strong>: <pre>Abandoned</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Uploader</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Created</strong>: 3/20/2018, 2:19:22 PM<br><strong>UnmergedRevision</strong>: [4d1cc7f17180ea745048500335144f208d31d43e](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/4d1cc7f17180ea745048500335144f208d31d43e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/20/2018, 2:29:53 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Troy Ronda - troy@troyronda.com<br><strong>CommentLine</strong>: [pkg/context/context.go#L342](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/4d1cc7f17180ea745048500335144f208d31d43e/pkg/context/context.go#L342)<br><strong>Comment</strong>: <pre>this doesn't belong in the context package - should probably be in core/config/endpoint or similar.</pre><strong>Commenter</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>CommentLine</strong>: [pkg/context/context.go#L342](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/4d1cc7f17180ea745048500335144f208d31d43e/pkg/context/context.go#L342)<br><strong>Comment</strong>: <pre>ok</pre><strong>Commenter</strong>: Troy Ronda - troy@troyronda.com<br><strong>CommentLine</strong>: [pkg/context/context.go#L342](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/4d1cc7f17180ea745048500335144f208d31d43e/pkg/context/context.go#L342)<br><strong>Comment</strong>: <pre>actually maybe https://github.com/hyperledger/fabric-sdk-go/blob/master/pkg/client/common/verifier is better.</pre><strong>Commenter</strong>: Troy Ronda - troy@troyronda.com<br><strong>CommentLine</strong>: [pkg/fab/peer/peer.go#L89](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/4d1cc7f17180ea745048500335144f208d31d43e/pkg/fab/peer/peer.go#L89)<br><strong>Comment</strong>: <pre>should check on doing this in the correct time zone (probably UTC).</pre><strong>Commenter</strong>: Troy Ronda - troy@troyronda.com<br><strong>CommentLine</strong>: [pkg/fab/peer/peerendorser.go#L105](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/4d1cc7f17180ea745048500335144f208d31d43e/pkg/fab/peer/peerendorser.go#L105)<br><strong>Comment</strong>: <pre>These checks should happen in the same place as membership checks.
https://github.com/hyperledger/fabric-sdk-go/blob/master/pkg/client/common/verifier/signature.go

Also should be checking the peer's cert in the response (see above package for example).</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Uploader</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Created</strong>: 3/20/2018, 5:06:08 PM<br><strong>UnmergedRevision</strong>: [033c38e6d74ad8039110641864fea5f457ddb282](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/033c38e6d74ad8039110641864fea5f457ddb282)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/20/2018, 5:39:35 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Sandra Vrtikapa - sandra.vrtikapa@securekey.com<br><strong>CommentLine</strong>: [pkg/client/common/verifier/signature.go#L65](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/033c38e6d74ad8039110641864fea5f457ddb282/pkg/client/common/verifier/signature.go#L65)<br><strong>Comment</strong>: <pre>We should separate cases when cert is expired and when cert is not valid until later date. 
This utility method can be called CheckCertDates() and return an error in case that:
1."Certificate provided has expired"
2."Certificate provided not valid until later date"
Also, this method should be moved to different common utility since it is shared between TLS cert check and enrollment cert check.</pre><strong>Commenter</strong>: Sandra Vrtikapa - sandra.vrtikapa@securekey.com<br><strong>CommentLine</strong>: [pkg/fab/channel/membership/membership.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/033c38e6d74ad8039110641864fea5f457ddb282/pkg/fab/channel/membership/membership.go#L47)<br><strong>Comment</strong>: <pre>Return error</pre><strong>Commenter</strong>: Sandra Vrtikapa - sandra.vrtikapa@securekey.com<br><strong>CommentLine</strong>: [pkg/fab/channel/membership/membership.go#L49](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/033c38e6d74ad8039110641864fea5f457ddb282/pkg/fab/channel/membership/membership.go#L49)<br><strong>Comment</strong>: <pre>Return error</pre><strong>Commenter</strong>: Sandra Vrtikapa - sandra.vrtikapa@securekey.com<br><strong>CommentLine</strong>: [pkg/fab/peer/peer.go#L59](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/033c38e6d74ad8039110641864fea5f457ddb282/pkg/fab/peer/peer.go#L59)<br><strong>Comment</strong>: <pre>Return error</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Uploader</strong>: Biljana Lukovic - biljana.lukovic@securekey.com<br><strong>Created</strong>: 3/21/2018, 2:20:23 PM<br><strong>UnmergedRevision</strong>: [12a99f315b58f541bc8d5e1a4eb43eae29d57efc](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/12a99f315b58f541bc8d5e1a4eb43eae29d57efc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/21/2018, 2:57:30 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>