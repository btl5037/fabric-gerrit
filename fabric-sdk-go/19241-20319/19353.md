<strong>Project</strong>: fabric-sdk-go<br><strong>Branch</strong>: master<br><strong>ID</strong>: 19353<br><strong>Subject</strong>: [FAB-8949] Add Close() to discovery, selection services<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/18/2018, 11:40:31 AM<br><strong>LastUpdated</strong>: 3/18/2018, 1:53:36 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-8949] Add Close() to discovery, selection services

Change-Id: I92af6c8d09140b736f03c6528ffc39ead6878e8d
Signed-off-by: Divyank Katira <Divyank.Katira@securekey.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Reviewed</strong>: 3/18/2018, 11:40:31 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 11:40:43 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2014/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 11:42:09 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2107/ (2/2)</pre><strong>Reviewer</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>Reviewed</strong>: 3/18/2018, 11:52:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:10:45 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2014/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2014

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2107/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2107</pre><strong>Reviewer</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Reviewed</strong>: 3/18/2018, 12:29:27 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:29:38 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2015/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:30:43 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2108/ (2/2)</pre><strong>Reviewer</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Reviewed</strong>: 3/18/2018, 12:31:43 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:31:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2016/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:32:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2015/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2015/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2015

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2108/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2108/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2108</pre><strong>Reviewer</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>Reviewed</strong>: 3/18/2018, 12:33:05 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:33:11 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2109/ (2/2)</pre><strong>Reviewer</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Reviewed</strong>: 3/18/2018, 12:36:56 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:37:03 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2017/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:37:18 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2109/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2109/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2109

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2016/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2016/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2016</pre><strong>Reviewer</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>Reviewed</strong>: 3/18/2018, 12:37:48 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 12:38:23 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2110/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 1:13:50 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-s390x/2017/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-s390x/2017

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-verify-x86_64/2110/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-verify-x86_64/2110</pre><strong>Reviewer</strong>: Firas Qutishat - firas.qutishat@securekey.com<br><strong>Reviewed</strong>: 3/18/2018, 1:17:36 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Firas Qutishat - firas.qutishat@securekey.com<br><strong>Reviewed</strong>: 3/18/2018, 1:17:38 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Firas Qutishat</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2018, 1:53:36 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-merge-s390x/472/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-merge-s390x/472

https://jenkins.hyperledger.org/job/fabric-sdk-go-tests-merge-x86_64/523/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-go-tests-merge-x86_64/523</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Divyank Katira - Divyank.Katira@securekey.com<br><strong>Uploader</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Created</strong>: 3/18/2018, 11:40:31 AM<br><strong>UnmergedRevision</strong>: [f2d5d4933d3d01512fc2f1698669cc7e14b67bfe](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/f2d5d4933d3d01512fc2f1698669cc7e14b67bfe)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/18/2018, 12:10:45 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>CommentLine</strong>: [pkg/client/common/discovery/staticdiscovery/staticdiscovery.go#L94](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/f2d5d4933d3d01512fc2f1698669cc7e14b67bfe/pkg/client/common/discovery/staticdiscovery/staticdiscovery.go#L94)<br><strong>Comment</strong>: <pre>This provider/service doesn't have any resources to close - can we just leave this function empty?</pre><strong>Commenter</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>CommentLine</strong>: [pkg/client/common/selection/staticselection/staticselection.go#L53](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/f2d5d4933d3d01512fc2f1698669cc7e14b67bfe/pkg/client/common/selection/staticselection/staticselection.go#L53)<br><strong>Comment</strong>: <pre>Can we leave this empty since there are no resources to close?</pre><strong>Commenter</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>CommentLine</strong>: [pkg/common/providers/fab/provider.go#L45](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/f2d5d4933d3d01512fc2f1698669cc7e14b67bfe/pkg/common/providers/fab/provider.go#L45)<br><strong>Comment</strong>: <pre>I wonder if it would be better to have another interface (e.g. Closable) that defines the method Close() and the providers can check if the provider/service implements Close() (what lazy map does). It would be less intrusive than mandating that every implementation must implement Close whether they need to or not. Also, if we every want to replace the close mechanism then we wouldn't need to change the interfaces again.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Divyank Katira - Divyank.Katira@securekey.com<br><strong>Uploader</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Created</strong>: 3/18/2018, 12:29:27 PM<br><strong>UnmergedRevision</strong>: [32c6a0457d7a40f41b2071b48aa672940e62a934](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/32c6a0457d7a40f41b2071b48aa672940e62a934)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/18/2018, 12:32:11 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>CommentLine</strong>: [pkg/client/common/selection/dynamicselection/dynamicselection.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/blob/32c6a0457d7a40f41b2071b48aa672940e62a934/pkg/client/common/selection/dynamicselection/dynamicselection.go#L46)<br><strong>Comment</strong>: <pre>This can be simplified if refs was []*selectionService. That way you don't have to check if the SelectionService implements Close(): you know it does.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Divyank Katira - Divyank.Katira@securekey.com<br><strong>Uploader</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Created</strong>: 3/18/2018, 12:31:43 PM<br><strong>UnmergedRevision</strong>: [50bf74c25c9a2372752e1106dbeb2ef1ff0d5e7f](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/50bf74c25c9a2372752e1106dbeb2ef1ff0d5e7f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/18/2018, 12:37:18 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Divyank Katira - Divyank.Katira@securekey.com<br><strong>Uploader</strong>: Divyank Katira - divyanktk@gmail.com<br><strong>Created</strong>: 3/18/2018, 12:36:56 PM<br><strong>GitHubMergedRevision</strong>: [6ab71379d83c14965778c9c4f951e2256e40e83b](https://github.com/hyperledger-gerrit-archive/fabric-sdk-go/commit/6ab71379d83c14965778c9c4f951e2256e40e83b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/18/2018, 1:13:50 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Firas Qutishat - firas.qutishat@securekey.com<br><strong>Approved</strong>: 3/18/2018, 1:17:36 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Firas Qutishat<br><strong>Merged</strong>: 3/18/2018, 1:17:38 PM<br><br><strong>Approver</strong>: Bob Stasyszyn - bob.stasyszyn@securekey.com<br><strong>Approved</strong>: 3/18/2018, 12:37:48 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>