<strong>Project</strong>: fabric-samples<br><strong>Branch</strong>: master<br><strong>ID</strong>: 14323<br><strong>Subject</strong>: [FAB-5898] porting samples to node.js chaincode<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 10/8/2017, 10:41:46 PM<br><strong>LastUpdated</strong>: 10/18/2017, 7:13:20 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-5898] porting samples to node.js chaincode

Fabric 1.1 supports javascript chaincode. This changeset
addresses porting of the golang chaincode to node.js
chiancode and the corresponding README files

Change-Id: Iae24e713f16ab3508fe0cc18ee062ffa412b8ba6
Signed-off-by: ratnakar <asara.ratnakar@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Reviewed</strong>: 10/8/2017, 10:41:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2017, 10:45:06 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/101/</pre><strong>Reviewer</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Reviewed</strong>: 10/8/2017, 10:47:52 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2017, 10:48:39 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/101/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/101/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-byfn-verify-x86_64/101</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2017, 10:51:18 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/102/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2017, 11:25:06 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/102/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-byfn-verify-x86_64/102</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 10/12/2017, 4:51:02 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/13/2017, 12:50:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(14 comments)</pre><strong>Reviewer</strong>: Ry Jones - ry@linux.com<br><strong>Reviewed</strong>: 10/13/2017, 1:26:32 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(1 comment)

fix commit message</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 10/15/2017, 3:58:30 PM<br><strong>Message</strong>: <pre>Removed Code-Review+2 by Jim Zhang <jim_the_matrix@hotmail.com>
</pre><strong>Reviewer</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Reviewed</strong>: 10/15/2017, 9:12:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Reviewed</strong>: 10/15/2017, 9:13:08 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(14 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/15/2017, 9:15:24 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/114/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/15/2017, 9:33:35 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/114/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-byfn-verify-x86_64/114</pre><strong>Reviewer</strong>: Ry Jones - ry@linux.com<br><strong>Reviewed</strong>: 10/17/2017, 3:32:08 PM<br><strong>Message</strong>: <pre>Removed reviewer Ry Jones.</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/17/2017, 8:22:46 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 10/18/2017, 7:13:18 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 10/18/2017, 7:13:20 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jim Zhang</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Uploader</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Created</strong>: 10/8/2017, 10:41:46 PM<br><strong>UnmergedRevision</strong>: [7fc5d11997e409a8418d25275f35d5d1b6473642](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/7fc5d11997e409a8418d25275f35d5d1b6473642)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/8/2017, 10:48:39 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Uploader</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Created</strong>: 10/8/2017, 10:47:52 PM<br><strong>UnmergedRevision</strong>: [d8c51b7d109520512d24bb498022453805576528](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/d8c51b7d109520512d24bb498022453805576528)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/8/2017, 11:25:06 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 10/13/2017, 12:50:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Ry Jones - ry@linux.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L7](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528//COMMIT_MSG#L7)<br><strong>Comment</strong>: <pre>Do not merge with this in the commit message</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/README.md#L29](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/README.md#L29)<br><strong>Comment</strong>: <pre>May add.

For each of these options, you may choose to run with chaincode written in golang or in node.js.</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/README.md#L29](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/README.md#L29)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/README.md#L85](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/README.md#L85)<br><strong>Comment</strong>: <pre>How about mentioning the "-l <language>" option here?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/README.md#L85](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/README.md#L85)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/README.md#L152](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/README.md#L152)<br><strong>Comment</strong>: <pre>How about:

*chaincodeType* must be set to **node** when node.js chaincode is used and *chaincodePath* must be set to the location of the node.js chaincode.  What is the proper location of the chaincodePath?  How do I know what to set it to?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/README.md#L152](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/README.md#L152)<br><strong>Comment</strong>: <pre>Updated as per your suggestion.

If the chaincode type is golang, then this path must be fully qualified package name.
For example in this case it is "github.com/example_cc"

where GOPATH is set to $PWD/artifacts
So the actual path on the system will be something like following: 
GOPATH + '/src/' + 'github.com/example_cc'

More details on chaincodePath can be obtained from https://fabric-sdk-node.github.io/global.html#ChaincodeInstallRequest

For node.js chiancode ,The path must be the location of the source code.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/app/install-chaincode.js#L32](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/app/install-chaincode.js#L32)<br><strong>Comment</strong>: <pre>This could just be "NODE" :-)</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/app/install-chaincode.js#L32](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/app/install-chaincode.js#L32)<br><strong>Comment</strong>: <pre>silly me :D

This is no more required</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/app/install-chaincode.js#L33](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/app/install-chaincode.js#L33)<br><strong>Comment</strong>: <pre>Does this mean that chaincodePath can never be an absolute path?  Wouldn't we want to allow this?  If not, is that documented?  Relative to what?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/app/install-chaincode.js#L33](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/app/install-chaincode.js#L33)<br><strong>Comment</strong>: <pre>For golang chaincode, this parameter must be the fully qualified package name (https://fabric-sdk-node.github.io/global.html#ChaincodeInstallRequest), where as for nodejs chaincode it is the absolute/relative path of the source code.

I changed this to accept the absolute path from the REST call to avoid this extra check for a specific language.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L4](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L4)<br><strong>Comment</strong>: <pre>chaincode</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L4](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L4)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L10)<br><strong>Comment</strong>: <pre>I know engineStrict is valid, but is engine-strict also needed here?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L10)<br><strong>Comment</strong>: <pre>This is required. I have deleted engineStrict

In fact engine-strict is valid.
engineStrict has been removed in npm 3.0.0.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L14](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L14)<br><strong>Comment</strong>: <pre>I assume this means the latest unstable release in master?
Will this be changed later?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L14](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/artifacts/src/github.com/example_cc/node/package.json#L14)<br><strong>Comment</strong>: <pre>Yes Keith,  latest unstable release is  in master.
later, This will be changed to the released version.

ex: v1.1-alpha</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/package.json#L28](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/package.json#L28)<br><strong>Comment</strong>: <pre>Same questions on "unstable"</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/package.json#L28](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/package.json#L28)<br><strong>Comment</strong>: <pre>This will be later changed to the released version.
ex: v1.1-alpha</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/testAPIs.sh#L21](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/testAPIs.sh#L21)<br><strong>Comment</strong>: <pre>chaincode</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/testAPIs.sh#L21](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/testAPIs.sh#L21)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/testAPIs.sh#L40](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/testAPIs.sh#L40)<br><strong>Comment</strong>: <pre>just change $LANGUAGE to lowercase and then compare to lowercase in the case statements, to allow "Node" or "Golang"</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [balance-transfer/testAPIs.sh#L40](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/balance-transfer/testAPIs.sh#L40)<br><strong>Comment</strong>: <pre>Good catch. Thank you.
Updated.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [chaincode/chaincode_example02/node/package.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/chaincode/chaincode_example02/node/package.json#L10)<br><strong>Comment</strong>: <pre>Is this needed?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [chaincode/chaincode_example02/node/package.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/chaincode/chaincode_example02/node/package.json#L10)<br><strong>Comment</strong>: <pre>Yes.

rather removed engineStrict which is not relevant anymore.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [chaincode/marbles02/node/package.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/chaincode/marbles02/node/package.json#L10)<br><strong>Comment</strong>: <pre>Needed?</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [chaincode/marbles02/node/package.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/chaincode/marbles02/node/package.json#L10)<br><strong>Comment</strong>: <pre>This is needed.
removed engineStrict</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [first-network/byfn.sh#L50](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/first-network/byfn.sh#L50)<br><strong>Comment</strong>: <pre>chaincode</pre><strong>Commenter</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>CommentLine</strong>: [first-network/byfn.sh#L50](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/d8c51b7d109520512d24bb498022453805576528/first-network/byfn.sh#L50)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Uploader</strong>: Ratnakar Asara - asara.ratnakar@gmail.com<br><strong>Created</strong>: 10/15/2017, 9:12:30 PM<br><strong>GitHubMergedRevision</strong>: [44c204d8b68514a652826bb20b38f72ef1233d74](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/44c204d8b68514a652826bb20b38f72ef1233d74)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/15/2017, 9:33:35 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 10/17/2017, 8:22:46 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 10/18/2017, 7:13:18 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jim Zhang<br><strong>Merged</strong>: 10/18/2017, 7:13:20 PM<br><br></blockquote>