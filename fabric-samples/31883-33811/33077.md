<strong>Project</strong>: fabric-samples<br><strong>Branch</strong>: release-1.4<br><strong>ID</strong>: 33077<br><strong>Subject</strong>: [FAB-16344] Upgrade scripts for v1.4.3<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/21/2019, 9:32:34 AM<br><strong>LastUpdated</strong>: 8/23/2019, 7:29:34 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-16344] Upgrade scripts for v1.4.3

Signed-off-by: bharadwajambati1 <bharadwaj.ambati1@ibm.com>
Change-Id: Icd4eb98e7953288cc51577a7952b5680997934c7
</pre><h1>Comments</h1><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 9:32:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 9:32:43 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/498/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 9:38:21 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/498/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/498</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 10:15:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 10:15:44 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/499/</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 10:18:19 AM<br><strong>Message</strong>: <pre>Removed reviewer Scott Zwierzynski.</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 10:18:21 AM<br><strong>Message</strong>: <pre>Removed reviewer Naga Venkata Sai Surya Teja Lanka.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 10:20:43 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/499/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/499</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 3:39:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 5:06:43 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 5:06:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/500/</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 5:07:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 5:10:19 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/500/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/500</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 1:28:26 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 1:28:35 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/501/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 1:30:22 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/501/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/501</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 1:30:31 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 1:30:40 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/502/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 1:33:58 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/502/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/502</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 10:20:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 10:20:30 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/504/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 10:27:19 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/504/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/504</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 12:02:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 12:03:09 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/506/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 12:07:38 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/506/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/506</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 6:18:55 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 11:22:08 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 11:22:16 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/509/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 11:29:09 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-samples-verify-x86_64/509/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-verify-x86_64/509</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 11:59:56 AM<br><strong>Message</strong>: <pre>Patch Set 8:

(2 comments)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 6:57:17 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1 Code-Review+2

Tested, works.

The Verify job failure is being addressed in https://gerrit.hyperledger.org/r/#/c/fabric-samples/+/33172/. Manually verifying.</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 6:57:20 PM<br><strong>Message</strong>: <pre>Removed Verified-1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 6:57:21 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by David Enyeart</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 6:57:28 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-samples-merge-x86_64/133/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 7:29:34 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-samples-merge-x86_64/133/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-samples-merge-x86_64/133</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/21/2019, 9:32:34 AM<br><strong>UnmergedRevision</strong>: [1b7de569a7498e35eae7107376e5aea2f8fd0491](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/1b7de569a7498e35eae7107376e5aea2f8fd0491)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 9:38:21 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/21/2019, 10:15:34 AM<br><strong>UnmergedRevision</strong>: [dcb1819df6c3772b2830acaca664636f21fc00c4](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/dcb1819df6c3772b2830acaca664636f21fc00c4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 10:20:43 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [first-network/scripts/upgrade_to_v14.sh#L54](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/dcb1819df6c3772b2830acaca664636f21fc00c4/first-network/scripts/upgrade_to_v14.sh#L54)<br><strong>Comment</strong>: <pre>capabilities.json and channel_capabilities.json does not distinguish the files very well.

I'd recommend either
capabilities142.json / capabilities143.json
or
capabilities_channel.json / capabilities_orderer.json / capabilities_application.json

With the former approach, we'd have to create new json files each release.
With the latter approach, we'd have to update the release in the three json files for each release that has a capability update.

After we finalize this, we'll also need to update the upgrade doc accordingly.</pre><strong>Commenter</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>CommentLine</strong>: [first-network/scripts/upgrade_to_v14.sh#L54](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/dcb1819df6c3772b2830acaca664636f21fc00c4/first-network/scripts/upgrade_to_v14.sh#L54)<br><strong>Comment</strong>: <pre>Added all the capabilities in one file and upgraded the script</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/21/2019, 5:06:43 PM<br><strong>UnmergedRevision</strong>: [50f75534b349b84ab5a013aefec1d940419d02cb](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/50f75534b349b84ab5a013aefec1d940419d02cb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 5:10:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/22/2019, 1:28:26 AM<br><strong>UnmergedRevision</strong>: [38b706758252040068b20b11a57d33ed7190889c](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/38b706758252040068b20b11a57d33ed7190889c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 1:30:22 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/22/2019, 1:30:31 AM<br><strong>UnmergedRevision</strong>: [f9fc299b9a5501d053e1f98f58b25375512a55f8](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/f9fc299b9a5501d053e1f98f58b25375512a55f8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 1:33:58 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/22/2019, 10:20:23 AM<br><strong>UnmergedRevision</strong>: [cc07059749ff5541a503b2d7be63a06bbc1152ad](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/cc07059749ff5541a503b2d7be63a06bbc1152ad)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 10:27:19 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/22/2019, 12:02:59 PM<br><strong>UnmergedRevision</strong>: [779256a66b1a87992286dd0912b44a5fe369a50c](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/779256a66b1a87992286dd0912b44a5fe369a50c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 12:07:38 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [first-network/byfn.sh#L264](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/779256a66b1a87992286dd0912b44a5fe369a50c/first-network/byfn.sh#L264)<br><strong>Comment</strong>: <pre>delete trailing blanks</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [first-network/byfn.sh#L264](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/779256a66b1a87992286dd0912b44a5fe369a50c/first-network/byfn.sh#L264)<br><strong>Comment</strong>: <pre>this is unexpected; why are we adding this, and removing CHANNEL_NAME?</pre><strong>Commenter</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>CommentLine</strong>: [first-network/byfn.sh#L264](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/779256a66b1a87992286dd0912b44a5fe369a50c/first-network/byfn.sh#L264)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>CommentLine</strong>: [first-network/byfn.sh#L264](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/779256a66b1a87992286dd0912b44a5fe369a50c/first-network/byfn.sh#L264)<br><strong>Comment</strong>: <pre>We are not removing channel name. We are exporting the system channel name to an env variable(CH_NAME) before running the upgrade, instead of changing SYS_CHANNEL in the .env file</pre></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 8/23/2019, 11:22:08 AM<br><strong>GitHubMergedRevision</strong>: [a4460a9947e9fb5962f2cbbb30e137e6168a8ab4](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/a4460a9947e9fb5962f2cbbb30e137e6168a8ab4)<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 8/23/2019, 6:57:17 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: David Enyeart<br><strong>Merged</strong>: 8/23/2019, 6:57:21 PM<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 8/23/2019, 6:57:17 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>