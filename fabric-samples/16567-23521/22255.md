<strong>Project</strong>: fabric-samples<br><strong>Branch</strong>: master<br><strong>ID</strong>: 22255<br><strong>Subject</strong>: [FAB-6600] Sample chaincode for private data<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 5/24/2018, 8:09:31 AM<br><strong>LastUpdated</strong>: 6/3/2018, 5:34:26 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-6600] Sample chaincode for private data

Marbles02 chaincode updated to utilize private
data collections on all ledger APIs.

To run the sample, follow the instructions
in FAB-10231. An official tutorial will follow.

Change-Id: Id9b3dbae8ab62afe81ee8d116b7bd4efc0213933
Signed-off-by: David Enyeart <enyeart@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2018, 8:09:31 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2018, 8:11:49 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/436/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2018, 8:35:40 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/436/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-byfn-verify-x86_64/436</pre><strong>Reviewer</strong>: Pam Andrejko - pama@ibm.com<br><strong>Reviewed</strong>: 5/24/2018, 8:52:19 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 5/25/2018, 3:22:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/25/2018, 3:29:48 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 5/28/2018, 2:39:56 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 5/30/2018, 4:22:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 5/30/2018, 4:24:03 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/30/2018, 4:24:25 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/441/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/30/2018, 4:44:28 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/441/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-byfn-verify-x86_64/441</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 6/2/2018, 7:05:12 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/2/2018, 7:06:49 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/443/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/2/2018, 7:31:50 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/443/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-byfn-verify-x86_64/443</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 6/2/2018, 7:42:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/2/2018, 7:46:09 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/444/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/2/2018, 8:07:12 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-verify-x86_64/444/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-byfn-verify-x86_64/444</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 6/3/2018, 8:33:57 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 6/3/2018, 5:08:13 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 6/3/2018, 5:08:16 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Artem Barger</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/3/2018, 5:34:26 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-byfn-merge-x86_64/136/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-byfn-merge-x86_64/136</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Uploader</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Created</strong>: 5/24/2018, 8:09:31 AM<br><strong>UnmergedRevision</strong>: [386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 5/28/2018, 2:39:56 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/24/2018, 8:35:40 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [chaincode/marbles02_private/collections_config.json#L6](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac/chaincode/marbles02_private/collections_config.json#L6)<br><strong>Comment</strong>: <pre>Why did we change these values to 0? I was using the values of 1,2 respectively in the tutorial.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [chaincode/marbles02_private/collections_config.json#L6](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac/chaincode/marbles02_private/collections_config.json#L6)<br><strong>Comment</strong>: <pre>I thought people may use this example in other networks or on a single peer, and if the endorsing peer can't 'push' disseminate the private data to at least the requiredPeerCount, the endorsement would fail.  So dissemination policy of '0' ensures that endorsement always works. When used on a network with multiple peers, all the committing peers that didn't get the private data at dissemination time would 'pull' the private data at commit time.

In a real production network, you would want some data redundancy and therefore would set requiredPeerCount to your required redundancy threshold, and set maxPeerCount to a larger number for best-effort dissemination.  And then any authorized peer that still didn't have the private data at commit time would attempt to pull at that time.  I'll plan on increasing at least the maxPeerCount so that both push and pull can be demonstrated (although it would only be visible to end users through analysis of debug trace).</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [chaincode/marbles02_private/collections_config.json#L6](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac/chaincode/marbles02_private/collections_config.json#L6)<br><strong>Comment</strong>: <pre>+1</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [chaincode/marbles02_private/go/marbles_chaincode_private.go#L2](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac/chaincode/marbles02_private/go/marbles_chaincode_private.go#L2)<br><strong>Comment</strong>: <pre>Please use SPDX header... note, this prose is just plain wrong;-)</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [chaincode/marbles02_private/go/marbles_chaincode_private.go#L2](https://github.com/hyperledger-gerrit-archive/fabric-samples/blob/386059b1e4b6c12bb9f67a76e2ad0a1db6e904ac/chaincode/marbles02_private/go/marbles_chaincode_private.go#L2)<br><strong>Comment</strong>: <pre>Copy/paste problem... replaced with SPDX header.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Uploader</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Created</strong>: 5/30/2018, 4:22:14 PM<br><strong>UnmergedRevision</strong>: [5d790dbe27fccd7e9bf3873ebca3039c6a9b5752](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/5d790dbe27fccd7e9bf3873ebca3039c6a9b5752)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/30/2018, 4:44:28 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Uploader</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Created</strong>: 6/2/2018, 7:05:12 AM<br><strong>UnmergedRevision</strong>: [aa0ea0c4dd2123de626d28e7fb8c816a90ee844d](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/aa0ea0c4dd2123de626d28e7fb8c816a90ee844d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/2/2018, 7:31:50 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Uploader</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Created</strong>: 6/2/2018, 7:42:23 AM<br><strong>GitHubMergedRevision</strong>: [5956178406ca44800687aee2f3afbd92606ec330](https://github.com/hyperledger-gerrit-archive/fabric-samples/commit/5956178406ca44800687aee2f3afbd92606ec330)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 6/3/2018, 8:33:57 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/2/2018, 8:07:12 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 6/3/2018, 5:08:13 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Artem Barger<br><strong>Merged</strong>: 6/3/2018, 5:08:16 PM<br><br></blockquote>