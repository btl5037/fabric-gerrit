<strong>Project</strong>: fabric-sdk-node<br><strong>Branch</strong>: master<br><strong>ID</strong>: 2485<br><strong>Subject</strong>: Adding CouchDB KeyValueStore Implementation<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/15/2016, 9:23:08 AM<br><strong>LastUpdated</strong>: 1/17/2017, 2:10:12 PM<br><strong>CommitMessage</strong>:<br><pre>Adding CouchDB KeyValueStore Implementation

Introducing an alternative KeyValueStore implementation
with CouchDB.  With this change, the KeyValueStore needs
to be promise based, so calls to get the store constructor will
return a promise.  Unit tests are updated to conform to the new
promise based KeyValueStore.

Patch set 5:  Fix merge conflicts.
Patch set 6:  Fix lint errors.
Patch set 7:  Fix tests to use promise based KeyValueStore.
Patch set 8:  For gulp test (tests.js), comment out end-to-end
which currently fails intermittently on step2.
Patch set 9:  Fix review comments and rebase.

Fixes FAB-155

Change-Id: I33b8beef45299f9ac96c771655ce67c45a067685
Signed-off-by: Anna D Derbakova <adderbak@us.ibm.com>
Signed-off-by: cdaughtr <cdaughtr@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2016, 9:23:08 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2016, 9:24:04 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/78/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2016, 9:26:56 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/78/ : FAILURE</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2016, 11:04:26 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 11/15/2016, 11:05:47 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(2 comments)

I think the control of the key value store should be fully available from the configuration and not require user code changes.</pre><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2016, 11:08:11 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2016, 11:20:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2016, 11:21:48 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2016, 11:36:04 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/87/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2016, 11:37:18 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/88/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2016, 11:38:56 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/87/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2016, 11:40:18 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/88/ : FAILURE</pre><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2016, 12:02:35 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2016, 12:02:41 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/91/</pre><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2016, 12:05:23 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2016, 12:06:02 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/91/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 11/17/2016, 3:27:18 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(7 comments)</pre><strong>Reviewer</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2016, 6:28:46 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 11/18/2016, 10:46:21 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)

sorry missed a spot earlier. see my comment below inline.</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 11/24/2016, 7:13:56 AM<br><strong>Message</strong>: <pre>Patch Set 4:

any plans to rebase?</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 1/6/2017, 8:57:22 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Gari, Caroline Daughtrey has taken this from where Anya left off in order to rebase and finish it off</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 1/13/2017, 5:47:26 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/13/2017, 5:48:19 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/255/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/13/2017, 5:51:25 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/255/ : FAILURE</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 1/13/2017, 6:16:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/13/2017, 6:17:42 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/256/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/13/2017, 6:21:25 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/256/ : SUCCESS</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 2:42:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 2:43:24 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/258/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 2:45:58 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/258/ : SUCCESS</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 3:53:29 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 3:54:22 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/259/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 3:57:33 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/259/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 1/17/2017, 12:53:33 AM<br><strong>Message</strong>: <pre>Patch Set 8:

(8 comments)

overall looking good and thorough! see my comments below for a few straightforward change recommendations.</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 1/17/2017, 6:21:10 AM<br><strong>Message</strong>: <pre>Patch Set 8:

also, please rebase now that 4019 has been merged</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 1/17/2017, 12:24:27 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 12:25:31 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/267/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 12:29:04 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/267/ : SUCCESS</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 1/17/2017, 1:43:18 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(7 comments)</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 1/17/2017, 2:05:34 PM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 2:05:50 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jim Zhang</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 2:06:47 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-x86_64/76/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 2:10:12 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-x86_64/76/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Created</strong>: 11/15/2016, 9:23:08 AM<br><strong>UnmergedRevision</strong>: [a7a690d7f3f67b73500fdd23c4e4aafc529dbc08](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/15/2016, 9:26:56 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Approved</strong>: 11/15/2016, 11:05:47 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L38](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/README.md#L38)<br><strong>Comment</strong>: <pre>fix spelling for 'excercises' and 'impelmentations'</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L38](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/README.md#L38)<br><strong>Comment</strong>: <pre>Fixed in patch set 3.</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L53](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/README.md#L53)<br><strong>Comment</strong>: <pre>Insure should be ensure.</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L53](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/README.md#L53)<br><strong>Comment</strong>: <pre>Fixed in patch set 3.</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L64](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/README.md#L64)<br><strong>Comment</strong>: <pre>Insure should be ensure.</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [README.md#L64](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/README.md#L64)<br><strong>Comment</strong>: <pre>Fixed in patch set 3.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L45](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/lib/impl/CouchDBKeyValueStore.js#L45)<br><strong>Comment</strong>: <pre>I think that all options should also be able to available from the config and be able to be overridden by the options passed in here. We should not require a code change to applications when they want to change settings.</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L45](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/lib/impl/CouchDBKeyValueStore.js#L45)<br><strong>Comment</strong>: <pre>As we discussed, I added a /test/fixtures/couchdb.json file that now contains all the CouchDB specific settings. Take a look. Thanks!</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [lib/utils.js#L53](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/lib/utils.js#L53)<br><strong>Comment</strong>: <pre>Why not just control this with the one config setting (key-value-store).
Keep in mind that the all config settings can be set by the default config file or user files, or environment, or command line, or user sets programmatically.</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [lib/utils.js#L53](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7a690d7f3f67b73500fdd23c4e4aafc529dbc08/lib/utils.js#L53)<br><strong>Comment</strong>: <pre>This is now removed from this file. The KVS_IMPL environment variable is still being used within the ca-tests.js as I need it to determine if I am working with a file or a database, as I'm renaming the target for the last test given they run one after the other.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Created</strong>: 11/17/2016, 11:08:11 AM<br><strong>UnmergedRevision</strong>: [7614822491b673f4430996f36b5e3592a0b267e3](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/7614822491b673f4430996f36b5e3592a0b267e3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2016, 11:38:56 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Created</strong>: 11/17/2016, 11:20:53 AM<br><strong>UnmergedRevision</strong>: [3b44519b8ba30aef0c9d03f8c4bd96086de730f4](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/3b44519b8ba30aef0c9d03f8c4bd96086de730f4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2016, 11:40:18 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Created</strong>: 11/17/2016, 12:02:35 PM<br><strong>UnmergedRevision</strong>: [a7b4259fef8120af64955793577a2d264f2e397a](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/a7b4259fef8120af64955793577a2d264f2e397a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2016, 12:06:02 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [README.md#L86](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/README.md#L86)<br><strong>Comment</strong>: <pre>this needs to be "COUCHDB_IP_ADDR = <CouchDB_IP_Address>" to work</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L42](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L42)<br><strong>Comment</strong>: <pre>should also include userId and password for a secured instance. even though couchdb allows for them to be included in the url, from API design point of view it's better to allow them to be set with properties in the options so both styles are supported</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L62](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L62)<br><strong>Comment</strong>: <pre>given that this represents host:port, calling it "url" would be better</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L62](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L62)<br><strong>Comment</strong>: <pre>I wanted to make it URL as it makes more sense, but the reason I had kept path was because the file based KeyValStore used options.path and we are driving with the same test... and the test case uses path. I'll see if i can massage the test case.</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L63](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L63)<br><strong>Comment</strong>: <pre>"db_name" would be better?</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L63](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L63)<br><strong>Comment</strong>: <pre>yes, will fix.</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L75](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L75)<br><strong>Comment</strong>: <pre>self._name</pre><strong>Commenter</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L75](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L75)<br><strong>Comment</strong>: <pre>Agree, will fix.</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L86](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L86)<br><strong>Comment</strong>: <pre>self._name</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L86](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L86)<br><strong>Comment</strong>: <pre>the store can be used to store any arbitrary data the SDK may choose to use later. for instance the crypto suite can use it to store private keys (which is part of FAB-1108)</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [lib/impl/CouchDBKeyValueStore.js#L90](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/a7b4259fef8120af64955793577a2d264f2e397a/lib/impl/CouchDBKeyValueStore.js#L90)<br><strong>Comment</strong>: <pre>self._name</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 1/13/2017, 5:47:26 PM<br><strong>UnmergedRevision</strong>: [d2224cb8c1d31ca85c3a78b93fca079ed43f66ec](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/d2224cb8c1d31ca85c3a78b93fca079ed43f66ec)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/13/2017, 5:51:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 1/13/2017, 6:16:37 PM<br><strong>UnmergedRevision</strong>: [11a8a391cb473cd7284ed872a52384031bd531d5](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/11a8a391cb473cd7284ed872a52384031bd531d5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/13/2017, 6:21:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 1/16/2017, 2:42:42 PM<br><strong>UnmergedRevision</strong>: [17853fdaef3ee9c4e19318978a3b0ec603767f09](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/17853fdaef3ee9c4e19318978a3b0ec603767f09)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2017, 2:45:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 1/16/2017, 3:53:29 PM<br><strong>UnmergedRevision</strong>: [6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2017, 3:57:33 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [README.md#L114](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/README.md#L114)<br><strong>Comment</strong>: <pre>remove this mention. should instead explain that configurable settings are encapsulated in test/fixtures/couchdb.json, and can be overridden with environment variables or command parameters as usual.</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [hfc/lib/Client.js#L335](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/Client.js#L335)<br><strong>Comment</strong>: <pre>this should not be needed since "newKeyValueStore()" already returns a promise</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [hfc/lib/Client.js#L335](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/Client.js#L335)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L65](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L65)<br><strong>Comment</strong>: <pre>since "utils.newKeyValueStore()" always returns a promise now, this can be changed such that "this._store" is checked for "null" value in the _getKeyValueStore() method and set there when value is null</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L65](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L65)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L224](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L224)<br><strong>Comment</strong>: <pre>related to the comment above, this should not be needed. instead check for "null" value and attempt to construct a default file base store</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L224](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/impl/CryptoSuite_ECDSA_AES.js#L224)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [hfc/lib/utils.js#L415](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/utils.js#L415)<br><strong>Comment</strong>: <pre>should not need this since "newKeyValueStore()" always returns a promise</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [hfc/lib/utils.js#L415](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/hfc/lib/utils.js#L415)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [test/unit/chain-fabriccop-tests.js#L52](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/test/unit/chain-fabriccop-tests.js#L52)<br><strong>Comment</strong>: <pre>use testUser/user1 instead to avoid conflict when running this before/after the other tests</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [test/unit/chain-fabriccop-tests.js#L52](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/test/unit/chain-fabriccop-tests.js#L52)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [test/unit/couchdb-fabriccop-tests.js#L31](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/test/unit/couchdb-fabriccop-tests.js#L31)<br><strong>Comment</strong>: <pre>this is no longer needed in the latest impl</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [test/unit/couchdb-fabriccop-tests.js#L31](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/test/unit/couchdb-fabriccop-tests.js#L31)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [test/unit/couchdb-fabriccop-tests.js#L97](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/test/unit/couchdb-fabriccop-tests.js#L97)<br><strong>Comment</strong>: <pre>use admin2/adminpw2 from testconfig.json to avoid conflict with other tests that use "admin"</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [test/unit/couchdb-fabriccop-tests.js#L97](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6d8ffd11d841c8b8a433eed63f7f17a9ed84e6f7/test/unit/couchdb-fabriccop-tests.js#L97)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Anna Derbakova - adderbak@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 1/17/2017, 12:24:27 PM<br><strong>GitHubMergedRevision</strong>: [1dcc5fbd57f3245273295efbd6eae1575998056b](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/1dcc5fbd57f3245273295efbd6eae1575998056b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/17/2017, 12:29:04 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 1/17/2017, 2:05:34 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jim Zhang<br><strong>Merged</strong>: 1/17/2017, 2:05:50 PM<br><br></blockquote>