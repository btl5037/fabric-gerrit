<strong>Project</strong>: fabric-sdk-node<br><strong>Branch</strong>: master<br><strong>ID</strong>: 7277<br><strong>Subject</strong>: [FAB-1770] NodeSDK - Add verify proposal<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/16/2017, 12:46:08 PM<br><strong>LastUpdated</strong>: 3/21/2017, 6:44:33 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-1770] NodeSDK - Add verify proposal

Part 1 - Add utility methods to Chain that will allow users
to verify the endorsement results. Verification will check
that that all write sets are the same between each
of the responses. Will check the signature to be sure
it was signed by the endorsing peer. And in part 2
it will validate the trust of the endorsing peer.

Change-Id: If4f626b6c38abba629b8f40bf4b821dbda4f8a2a
Signed-off-by: Bret Harrison <beharrison@nc.rr.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/16/2017, 12:46:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2017, 12:46:15 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/169/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2017, 12:47:02 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/697/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2017, 12:57:40 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/169/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/697/ : SUCCESS</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 3/16/2017, 4:25:11 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

every change set should have a JIRA</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/20/2017, 1:43:26 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 1:43:37 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/181/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 1:44:21 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/709/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 1:54:30 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/181/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/709/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 3/20/2017, 7:29:47 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(12 comments)

see comments below, functionality-wise I was able to successfully test it against the latest fabric</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/21/2017, 5:43:16 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(12 comments)

Comments addressed</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/21/2017, 6:07:54 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:08:05 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/184/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:08:51 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/712/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:20:43 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/184/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/712/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 3/21/2017, 6:31:37 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:31:42 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jim Zhang</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:31:50 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-s390x/59/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:32:52 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-x86_64/230/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 6:44:33 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-x86_64/230/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-s390x/59/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Uploader</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Created</strong>: 3/16/2017, 12:46:08 PM<br><strong>UnmergedRevision</strong>: [5f2ea559ed8b6fe445e22e108984d15d8dc908ab](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/5f2ea559ed8b6fe445e22e108984d15d8dc908ab)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 3/16/2017, 4:25:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2017, 12:57:40 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Uploader</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Created</strong>: 3/20/2017, 1:43:26 PM<br><strong>UnmergedRevision</strong>: [5ad25cac70c1fa4df5d35b549acb4870e0d90d5f](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/20/2017, 1:54:30 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 3/20/2017, 7:29:47 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1927](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1927)<br><strong>Comment</strong>: <pre>should be a bit more specific here since it's an important aspect: "trusted root certificates for the channel"</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1927](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1927)<br><strong>Comment</strong>: <pre>typo: had</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1927](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1927)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1927](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1927)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1929](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1929)<br><strong>Comment</strong>: <pre>"proposal endorsement's signer"</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1929](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1929)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1930](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1930)<br><strong>Comment</strong>: <pre>"endorsement signature matches the signer's claimed identity"</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1930](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1930)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1933](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1933)<br><strong>Comment</strong>: <pre>"endorser certificate"</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1933](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1933)<br><strong>Comment</strong>: <pre>"signature over the proposal, endorsement result and endorser certificate"</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1933](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1933)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1933](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1933)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1955](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1955)<br><strong>Comment</strong>: <pre>endorser identity's organization</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1955](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1955)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1960](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1960)<br><strong>Comment</strong>: <pre>use the standard MSP API method "deserializeIdentity()", see comments to "buildIdentity()" in msp.js</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1960](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1960)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1998](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1998)<br><strong>Comment</strong>: <pre>"...chaincode execution" would be more informative here</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/Chain.js#L1998](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/Chain.js#L1998)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/api.js#L105](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/api.js#L105)<br><strong>Comment</strong>: <pre>repeated, should be deleted</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/api.js#L105](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/api.js#L105)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/api.js#L106](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/api.js#L106)<br><strong>Comment</strong>: <pre>"... or the key object itself if "storeKey" argument is false"</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/api.js#L106](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/api.js#L106)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/msp/msp.js#L125](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/msp/msp.js#L125)<br><strong>Comment</strong>: <pre>instead of adding a new method, please modify the "deserializeIdentity()" method instead, there's no need for both to exist</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [fabric-client/lib/msp/msp.js#L125](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/5ad25cac70c1fa4df5d35b549acb4870e0d90d5f/fabric-client/lib/msp/msp.js#L125)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Uploader</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Created</strong>: 3/21/2017, 6:07:54 PM<br><strong>GitHubMergedRevision</strong>: [f3be9c11a87844f9687a9b0a34b22dc3e04b092e](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/f3be9c11a87844f9687a9b0a34b22dc3e04b092e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/21/2017, 6:20:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 3/21/2017, 6:31:37 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jim Zhang<br><strong>Merged</strong>: 3/21/2017, 6:31:42 PM<br><br></blockquote>