<strong>Project</strong>: fabric-sdk-node<br><strong>Branch</strong>: master<br><strong>ID</strong>: 8905<br><strong>Subject</strong>: FAB-2923 Use cryptoSuite param instead of options<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 5/3/2017, 12:52:53 PM<br><strong>LastUpdated</strong>: 5/10/2017, 1:26:06 AM<br><strong>CommitMessage</strong>:<br><pre>FAB-2923 Use cryptoSuite param instead of options

If an app needs special settings for the cryptoSuite,
the app can create the cryptoSuite on the User,
user newCryptoSuite(setting, KVSImplClass, opts),
then pass the cryptoSuite to FabricCAClient instead
of passing the options needed to create the cryptoSuite.

If no special settings are needed, the cryptoSuite
and state store will be created using default options.

Change-Id: I6f682d531fe70ce6d29790c0d35b06956e12441f
Signed-off-by: cdaughtr <cdaughtr@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/3/2017, 12:52:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 12:54:34 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/947/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 1:08:07 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/416/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 1:20:03 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/416/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/947/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 5/4/2017, 1:32:02 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(9 comments)</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/4/2017, 5:49:44 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(8 comments)

Most is done, but still working on test failures.</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 5/4/2017, 10:57:59 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/5/2017, 8:33:27 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/8/2017, 7:10:11 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2017, 7:10:21 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/442/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2017, 7:13:03 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/973/ (2/2)</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/8/2017, 7:14:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

*** Block.js tests *** has a failure.  Not sure if the test needs to be changed.  Seems to have been introduced with last change set from Bret where the logging level was changed from warn to debug.

not ok 4 Failed to warn logging message about using the "MSP" policy
 type 
at test/unit/block.js:82:5</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2017, 7:33:29 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/442/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/973/ : FAILURE</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/9/2017, 10:29:21 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 10:29:40 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/444/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 10:34:35 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/975/ (2/2)</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/9/2017, 10:40:25 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 10:40:36 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/445/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 10:44:06 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/976/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 10:56:10 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/444/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/975/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 11:03:33 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/445/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/976/ : FAILURE</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/9/2017, 12:09:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 12:09:38 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/450/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 12:14:06 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/981/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 12:34:21 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/450/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/981/ : FAILURE</pre><strong>Reviewer</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Reviewed</strong>: 5/9/2017, 1:53:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 2:04:19 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/983/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 2:13:21 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/452/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 2:25:05 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/452/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/983/ : FAILURE</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 5/9/2017, 11:18:28 PM<br><strong>Message</strong>: <pre>Patch Set 7: Patch Set 6 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 11:18:37 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/459/ (1/2)</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 5/9/2017, 11:18:43 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 11:21:05 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/990/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2017, 11:39:33 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/459/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/990/ : FAILURE</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 5/10/2017, 12:33:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 12:33:23 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/460/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 12:34:20 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/991/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 12:53:26 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-s390x/460/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-verify-x86_64/991/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 5/10/2017, 12:58:38 AM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 12:58:49 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jim Zhang</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 12:58:58 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-s390x/121/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:00:35 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-x86_64/295/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:26:06 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-s390x/121/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-sdk-node-merge-x86_64/295/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 5/3/2017, 12:52:53 PM<br><strong>UnmergedRevision</strong>: [6f3d755941cdb7a2efcb3d9adb38700730804c77](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/6f3d755941cdb7a2efcb3d9adb38700730804c77)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/3/2017, 1:20:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 5/4/2017, 1:32:02 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-ca-client/lib/FabricCAClientImpl.js#L49](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-ca-client/lib/FabricCAClientImpl.js#L49)<br><strong>Comment</strong>: <pre>a little better description of "defaults" would be very helpful here:

If not specified, an instance of {@link CryptoSuite} will be constructed based on the current configuration settings:
- crypto-hsm: use an implementation for Hardware Security Module (if set to true) or software-based key management (if set to false)
- crypto-keysize: security level, or key size, to use with the digital signature public key algorithm. Currently ECDSA is supported and the valid key sizes are 256 and 384
- crypto-hash-algo: hashing algorithm
- key-value-store: some CryptoSuite implementation requires a key store to persist private keys. A {@link CryptoKeyStore} is provided for this purpose, which can be used on top of any implementation of the {@link KeyValueStore} interface, such as a file-based store or a database-based one. The specific implementation is determined by the value of this configuration setting</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-ca-client/lib/FabricCAClientImpl.js#L49](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-ca-client/lib/FabricCAClientImpl.js#L49)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L74](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L74)<br><strong>Comment</strong>: <pre>we want to allow crypto suite to be constructed by the application and set on the client instance, if the app wants a non-default crypto suite. so we still need these methods</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L74](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L74)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L959](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L959)<br><strong>Comment</strong>: <pre>we want to allow crypto suite to be constructed by the application and set on the client instance, if the app wants a non-default crypto suite. so we don't want to ask for opts here but instead:
- check if the _cryptoSuite has been set, if so, use it
- if not set, simply use the defaults to construct one

so that we can eliminate the "keyStoreOpts" param from the method argument</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L959](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L959)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L988](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L988)<br><strong>Comment</strong>: <pre>as discussed above, should just new up a default one here</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L988](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L988)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L1024](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L1024)<br><strong>Comment</strong>: <pre>use a setter method instead</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/Client.js#L1024](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/Client.js#L1024)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L151](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L151)<br><strong>Comment</strong>: <pre>this method should be moved up to the Client.js and FabricCAClientImpl so it becomes a top-level API for applications to use, such that a new instance can be set on the client, a User, etc.</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L151](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L151)<br><strong>Comment</strong>: <pre>Client - done.

But cryptoSuite is already parameter on FabricCAClientImpl constructor, so it doesn't make sense to have a newCryptoSuite there also.</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L151](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L151)<br><strong>Comment</strong>: <pre>we still need it there in FabricCAClientImpl as a convenient method to construct a new instance without having to require('fabric-ca-client/lib/impl/CryptoSuite_ECDSA_AES.js').

FabricCAClientImpl is the top-level class for the fabric-ca-client package, equivalent of the Client class for the fabric-client package.

doing this would allow app code like this to be possible:

 var CAClient = require('fabric-ca-client');
 var crypto = CAClient.newCryptoSuite({software: false, keysize: 384});
 var client = new CAClient(url, tls, caname, crypto);</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L151](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L151)<br><strong>Comment</strong>: <pre>Ok, that makes sense now.  Will do.</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L250](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L250)<br><strong>Comment</strong>: <pre>now that we require the crypto suite to be explicitly managed by the application code, the persisted user should not save the 'opts' object for the crypto suite. the application would be responsible for ensuring the crypto suite instance is able to properly handle the User bytes</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L250](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L250)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L256](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L256)<br><strong>Comment</strong>: <pre>same as above, should not attempt to construct a custom cryptosuite here. if _cryptoSuite was not set, just construct a default one</pre><strong>Commenter</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L256](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L256)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>CommentLine</strong>: [fabric-client/lib/User.js#L314](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/blob/6f3d755941cdb7a2efcb3d9adb38700730804c77/fabric-client/lib/User.js#L314)<br><strong>Comment</strong>: <pre>as above, remove "opts" from persistence</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 5/8/2017, 7:10:11 PM<br><strong>UnmergedRevision</strong>: [d4a1d526116407e9529dce3598e86a91c74c0390](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/d4a1d526116407e9529dce3598e86a91c74c0390)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/8/2017, 7:33:29 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 5/9/2017, 10:29:21 AM<br><strong>UnmergedRevision</strong>: [2a0df4bab2cdeb354aeed64a815b0d1497a9d66d](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/2a0df4bab2cdeb354aeed64a815b0d1497a9d66d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2017, 10:56:10 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 5/9/2017, 10:40:25 AM<br><strong>UnmergedRevision</strong>: [2e9a341db9baaeab17c619317a0721a14bc51fca](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/2e9a341db9baaeab17c619317a0721a14bc51fca)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2017, 11:03:33 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 5/9/2017, 12:09:30 PM<br><strong>UnmergedRevision</strong>: [c152a02549b1aa6ed93f5da677b2609b95d05048](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/c152a02549b1aa6ed93f5da677b2609b95d05048)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2017, 12:34:21 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Created</strong>: 5/9/2017, 1:53:48 PM<br><strong>UnmergedRevision</strong>: [457c09ff6e2619f45c44744628b9d2f3cb9317e5](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/457c09ff6e2619f45c44744628b9d2f3cb9317e5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2017, 2:25:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Created</strong>: 5/9/2017, 11:18:28 PM<br><strong>UnmergedRevision</strong>: [e639343a3915ea218ec8ee04e8d804ac95cc09a6](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/e639343a3915ea218ec8ee04e8d804ac95cc09a6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2017, 11:39:33 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 5/9/2017, 11:18:43 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Caroline Daughtrey - cdaughtr@us.ibm.com<br><strong>Uploader</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Created</strong>: 5/10/2017, 12:33:16 AM<br><strong>GitHubMergedRevision</strong>: [983cbd5529fe65bd04a519edc61fbbc6971615ba](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/983cbd5529fe65bd04a519edc61fbbc6971615ba)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/10/2017, 12:53:26 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 5/10/2017, 12:58:38 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jim Zhang<br><strong>Merged</strong>: 5/10/2017, 12:58:48 AM<br><br></blockquote>