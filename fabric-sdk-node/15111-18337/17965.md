<strong>Project</strong>: fabric-sdk-node<br><strong>Branch</strong>: master<br><strong>ID</strong>: 17965<br><strong>Subject</strong>: [FAB-8329]Fix parameter in transaction proposal request<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Yuki Kondo - Yuki.Kondo@hal.hitachi.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/15/2018, 5:58:30 PM<br><strong>LastUpdated</strong>: 2/28/2018, 10:41:11 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-8329]Fix parameter in transaction proposal request

Some transaction proposal requests have unnecessary or missing
parameters.

1. fabric-sdk-node/fabric-client/lib/Channel.js

The following functions have “chainId” in request objects.
However, “chainId” is not used to call sendTransactionProposal.
This parameter should be removed.
- queryInfo
- queryBlockByHash
- queryBlock
- queryTransaction
- queryInstantiatedChaincodes
- queryByChaincode

In addition, queryBlock doesn’t have the value of “signer” in
ChaincodeInvokeRequest. Signer generated by previous step should
be added to the request object.

2. fabric-sdk-node/test/integration/events.js
   fabric-sdk-node/test/integration/eventutil.js

createRequest has unnecessary parameters - “channel” and “user”.
These parameters should be removed.

This CR fixes parameters in request objects correctly.

Change-Id: I243984c7479d3a1e3a3cfdd2e1f8005983f5ab6f
Signed-off-by: Yuki Kondo <yuki.kondo@hal.hitachi.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Yuki Kondo - Yuki.Kondo@hal.hitachi.com<br><strong>Reviewed</strong>: 2/15/2018, 5:58:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 5:58:38 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/197/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 6:01:07 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/289/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 6:02:23 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/372/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 6:19:24 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/289/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/289/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node-vulnerable-tests-x86_64/289

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/372/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-x86_64/372

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/197/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-s390x/197</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 7:47:14 PM<br><strong>Message</strong>: <pre>Patch Set 1: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/198/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 7:48:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/290/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 7:48:42 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/373/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 8:05:46 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/290/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/290/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node-vulnerable-tests-x86_64/290

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/373/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-x86_64/373

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/198/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-s390x/198</pre><strong>Reviewer</strong>: Yuki Kondo - Yuki.Kondo@hal.hitachi.com<br><strong>Reviewed</strong>: 2/15/2018, 8:13:45 PM<br><strong>Message</strong>: <pre>Patch Set 1:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 8:13:55 PM<br><strong>Message</strong>: <pre>Patch Set 1: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/199/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 8:16:25 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/291/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 8:16:39 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/374/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 8:32:15 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/291/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-node-vulnerable-tests-x86_64/291/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node-vulnerable-tests-x86_64/291

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/374/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-x86_64/374

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/199/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-s390x/199</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2018, 10:09:29 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-x86_64/374/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-x86_64/374

https://jenkins.hyperledger.org/job/fabric-sdk-node8-verify-s390x/199/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-verify-s390x/199</pre><strong>Reviewer</strong>: Ry Jones - ry@linux.com<br><strong>Reviewed</strong>: 2/15/2018, 10:10:54 PM<br><strong>Message</strong>: <pre>Removed Verified+1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 2/20/2018, 10:11:08 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1 Code-Review+2</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 2/20/2018, 10:11:14 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Bret Harrison</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2018, 10:11:31 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-merge-s390x/54/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2018, 10:13:50 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-node8-merge-x86_64/119/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2018, 10:31:43 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-node8-merge-x86_64/119/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-sdk-node8-merge-x86_64/119/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-merge-x86_64/119

https://jenkins.hyperledger.org/job/fabric-sdk-node8-merge-s390x/54/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-sdk-node8-merge-s390x/54</pre><strong>Reviewer</strong>: David Liu - david-khala@hotmail.com<br><strong>Reviewed</strong>: 2/28/2018, 10:41:11 PM<br><strong>Message</strong>: <pre>Patch Set 1:

One small comment 
as in ES6 or nodejs8 this syntax is supported 
========
var a = 'foo', 
    b = 42, 
    c = {};

// Shorthand property names (ES2015)
var o = {a, b, c};
========
So simply {sign} is OK instead of {sign:sign}</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yuki Kondo - yuki.kondo@hal.hitachi.com<br><strong>Uploader</strong>: Yuki Kondo - Yuki.Kondo@hal.hitachi.com<br><strong>Created</strong>: 2/15/2018, 5:58:30 PM<br><strong>GitHubMergedRevision</strong>: [5b9b75ec3f19e8c98777b2543d26ceec166f01af](https://github.com/hyperledger-gerrit-archive/fabric-sdk-node/commit/5b9b75ec3f19e8c98777b2543d26ceec166f01af)<br><br><strong>Approver</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Approved</strong>: 2/20/2018, 10:11:08 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Bret Harrison<br><strong>Merged</strong>: 2/20/2018, 10:11:14 AM<br><br><strong>Approver</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Approved</strong>: 2/20/2018, 10:11:08 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>