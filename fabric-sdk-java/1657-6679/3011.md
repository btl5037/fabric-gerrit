<strong>Project</strong>: fabric-sdk-java<br><strong>Branch</strong>: master<br><strong>ID</strong>: 3011<br><strong>Subject</strong>: Enable signature and encryption for transaction<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: dian fu - fudian@wanda.cn<br><strong>Assignee</strong>:<br><strong>Created</strong>: 12/6/2016, 7:09:58 AM<br><strong>LastUpdated</strong>: 12/16/2016, 5:43:13 PM<br><strong>CommitMessage</strong>:<br><pre>Enable signature and encryption for transaction

https://jira.hyperledger.org/browse/FAB-1284

Currently, the transaction created by the Java
SDK isn't signed and the transaction content isn't encrypted.

Change-Id: Ic7d7e85faf3999955dc69179d81083f6142a5ac6
Signed-off-by: dianfu <fudian@wanda.cn>
</pre><h1>Comments</h1><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/6/2016, 7:09:58 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Ry Jones - ry@linux.com<br><strong>Reviewed</strong>: 12/6/2016, 10:01:34 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(1 comment)

update commit message</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/6/2016, 7:25:25 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Reviewed</strong>: 12/6/2016, 8:20:50 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(52 comments)</pre><strong>Reviewer</strong>: Satheesh Kathamuthu - satheesh.ceg@gmail.com<br><strong>Reviewed</strong>: 12/7/2016, 8:38:14 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(9 comments)

Dian, I think you are trying to do too many things in one patch. Please split your change and submit one for each logical change.</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/9/2016, 2:43:36 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Reviewed</strong>: 12/9/2016, 3:21:17 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(13 comments)

Hi Dian, this is much better. Please address the comments (most of them were raised earlier but not addressed). If you think you cannot address a comment for a reason, please reply to that comment so that we know you have considered that comment.

Thanks</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/9/2016, 3:53:46 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/9/2016, 3:55:33 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(60 comments)</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/9/2016, 4:36:58 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/9/2016, 4:37:37 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(12 comments)</pre><strong>Reviewer</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Reviewed</strong>: 12/12/2016, 1:38:23 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review-1

(6 comments)

Hi Dian,
 We are getting close I guess, just few more points and then we are done.</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/12/2016, 2:43:01 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: dian fu - fudian@wanda.cn<br><strong>Reviewed</strong>: 12/12/2016, 2:45:33 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(6 comments)</pre><strong>Reviewer</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Reviewed</strong>: 12/15/2016, 8:13:17 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2</pre><strong>Reviewer</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>Reviewed</strong>: 12/16/2016, 5:43:08 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 5:43:13 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Pardha Vishnumolakala</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: dian fu - fudian@wanda.cn<br><strong>Uploader</strong>: dian fu - fudian@wanda.cn<br><strong>Created</strong>: 12/6/2016, 7:09:58 AM<br><strong>UnmergedRevision</strong>: [e58fa029e551ce1d1088f549f4b88a52f353991c](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/e58fa029e551ce1d1088f549f4b88a52f353991c)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: dian fu - fudian@wanda.cn<br><strong>Uploader</strong>: dian fu - fudian@wanda.cn<br><strong>Created</strong>: 12/6/2016, 7:25:25 PM<br><strong>UnmergedRevision</strong>: [6392fc9a15909be956904d138b43b9e29e6a82c8](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/6392fc9a15909be956904d138b43b9e29e6a82c8)<br><br><strong>Approver</strong>: Satheesh Kathamuthu - satheesh.ceg@gmail.com<br><strong>Approved</strong>: 12/7/2016, 8:38:14 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Approved</strong>: 12/6/2016, 8:20:50 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/stats/Average.java#L1](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/stats/Average.java#L1)<br><strong>Comment</strong>: <pre>Please submit a separate patch for stats</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/stats/Average.java#L1](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/stats/Average.java#L1)<br><strong>Comment</strong>: <pre>OK.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/stats/Rate.java#L1](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/stats/Rate.java#L1)<br><strong>Comment</strong>: <pre>Please submit a separate patch for stats</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/stats/Rate.java#L1](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/stats/Rate.java#L1)<br><strong>Comment</strong>: <pre>OK.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/stats/ResponseTime.java#L19](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/stats/ResponseTime.java#L19)<br><strong>Comment</strong>: <pre>Please submit a separate patch for stats</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/stats/ResponseTime.java#L19](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/stats/ResponseTime.java#L19)<br><strong>Comment</strong>: <pre>OK.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L27](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L27)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L27](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L27)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55)<br><strong>Comment</strong>: <pre>Not relevant to TCert feature</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55)<br><strong>Comment</strong>: <pre>This has something to do with TCert feature, as with TCert enabled, CryptoException may be thrown, we should process it.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55)<br><strong>Comment</strong>: <pre>We had a check on chain == null and this patch removes that check. Please make sure the chain/context.getChain is not null before proceeding</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L55)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L8](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L8)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L8](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L8)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L14](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L14)<br><strong>Comment</strong>: <pre>Please remove the trailing spaces</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L14](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/InvocationTransactionBuilder.java#L14)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L9](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L9)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L9](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L9)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L16](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L16)<br><strong>Comment</strong>: <pre>Please remove trailing spaces</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L16](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/QueryTransactionBuilder.java#L16)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/Transaction.java#L19](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/Transaction.java#L19)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/Transaction.java#L19](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/Transaction.java#L19)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L33](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L33)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L33](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L33)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L39](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L39)<br><strong>Comment</strong>: <pre>Please remove the trailing spaces</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L39](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionBuilder.java#L39)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L69](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L69)<br><strong>Comment</strong>: <pre>member could be null, please validate and return error</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L69](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L69)<br><strong>Comment</strong>: <pre>This is irrelevant to this patch. We can fix it in another patch.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L70](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L70)<br><strong>Comment</strong>: <pre>Chain could be null, please validate</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L70](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L70)<br><strong>Comment</strong>: <pre>This is irrelevant to this patch. We can fix it in another patch.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L139](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L139)<br><strong>Comment</strong>: <pre>Please remove trailing spaces</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L139](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L139)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L140](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L140)<br><strong>Comment</strong>: <pre>Can we just use local variable instead of member variable?</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L140](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L140)<br><strong>Comment</strong>: <pre>Member variable makes it possible to use the same tcert for all transactions in the same TransactionContext. This is the same with the nodejs sdk.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L143](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L143)<br><strong>Comment</strong>: <pre>How is this a ChainCode exception? Please change it to TCert...Exception</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L143](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L143)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L175](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L175)<br><strong>Comment</strong>: <pre>How is this a ChainCode exception? Please change it to TCert...Exception</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L175](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L175)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210)<br><strong>Comment</strong>: <pre>How is this a ChainCode exception? Please change it to TCert...Exception</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/proto/api.proto#L10](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/api.proto#L10)<br><strong>Comment</strong>: <pre>Please revert this change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/proto/api.proto#L10](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/api.proto#L10)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/proto/devops.proto#L10](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/devops.proto#L10)<br><strong>Comment</strong>: <pre>Please revert proto changes</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/proto/devops.proto#L10](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/devops.proto#L10)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/proto/events.proto#L23](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/events.proto#L23)<br><strong>Comment</strong>: <pre>Please revert package change, and submit a separate patch for events including the proto</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/proto/events.proto#L23](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/events.proto#L23)<br><strong>Comment</strong>: <pre>OK. Make sense.</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/proto/fabric.proto#L8](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/fabric.proto#L8)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/proto/fabric.proto#L8](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/fabric.proto#L8)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/proto/server_admin.proto#L10](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/server_admin.proto#L10)<br><strong>Comment</strong>: <pre>Please revert the package change</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/proto/server_admin.proto#L10](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/main/proto/server_admin.proto#L10)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric/sdk/PeerClientTest.java#L33](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/test/java/org/hyperledger/fabric/sdk/PeerClientTest.java#L33)<br><strong>Comment</strong>: <pre>Please send separate patch for events</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric/sdk/PeerClientTest.java#L33](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/6392fc9a15909be956904d138b43b9e29e6a82c8/src/test/java/org/hyperledger/fabric/sdk/PeerClientTest.java#L33)<br><strong>Comment</strong>: <pre>OK. Make sense.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: dian fu - fudian@wanda.cn<br><strong>Uploader</strong>: dian fu - fudian@wanda.cn<br><strong>Created</strong>: 12/9/2016, 2:43:36 AM<br><strong>UnmergedRevision</strong>: [8c0353e92e2b7851a6a96f918ca5dd93a79e1e5a](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/8c0353e92e2b7851a6a96f918ca5dd93a79e1e5a)<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: dian fu - fudian@wanda.cn<br><strong>Uploader</strong>: dian fu - fudian@wanda.cn<br><strong>Created</strong>: 12/9/2016, 3:53:46 AM<br><strong>UnmergedRevision</strong>: [c2f803b6aea2274dfc2638f4d072f5e748d242de](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/c2f803b6aea2274dfc2638f4d072f5e748d242de)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: dian fu - fudian@wanda.cn<br><strong>Uploader</strong>: dian fu - fudian@wanda.cn<br><strong>Created</strong>: 12/9/2016, 4:36:58 AM<br><strong>UnmergedRevision</strong>: [85e2ce1e6f123325fa02f9563ea232bc94d44dd5](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/85e2ce1e6f123325fa02f9563ea232bc94d44dd5)<br><br><strong>Approver</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Approved</strong>: 12/12/2016, 1:38:23 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L50](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L50)<br><strong>Comment</strong>: <pre>Please check for null on context.getChain() before using its methods</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L50](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/DeployTransactionBuilder.java#L50)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L141](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L141)<br><strong>Comment</strong>: <pre>This is not a good pattern where you invoke a method which sets a variable and then you rely on that variable. If getMyTCert() should need this.tcert, that is fine, but caller code should be modified like this:
TCert tcert = getMyTCert();
if (tcert == null) {
...
}

OR 
if (getMyTCert() == null) {
}</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L141](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L141)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L145](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L145)<br><strong>Comment</strong>: <pre>What happens when security is not enabled? getMyTCert() does not fetch tcerts when security is disabled and returns null in which case this block will throw exception</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L145](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L145)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L177](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L177)<br><strong>Comment</strong>: <pre>same as on line 141-145</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L177](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L177)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210)<br><strong>Comment</strong>: <pre>same as on line 141-145</pre><strong>Commenter</strong>: dian fu - fudian@wanda.cn<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/85e2ce1e6f123325fa02f9563ea232bc94d44dd5/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L210)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: dian fu - fudian@wanda.cn<br><strong>Uploader</strong>: dian fu - fudian@wanda.cn<br><strong>Created</strong>: 12/12/2016, 2:43:01 AM<br><strong>GitHubMergedRevision</strong>: [aeee72c7bbf9808353ccef92dd0d8cc8a0567d67](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/aeee72c7bbf9808353ccef92dd0d8cc8a0567d67)<br><br><strong>Approver</strong>: Muhammad Altaf - muhammada@fast.au.fujitsu.com<br><strong>Approved</strong>: 12/15/2016, 8:13:17 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Pardha Vishnumolakala<br><strong>Merged</strong>: 12/16/2016, 5:43:13 PM<br><br><strong>Approver</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>Approved</strong>: 12/16/2016, 5:43:08 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>