<strong>Project</strong>: fabric-sdk-java<br><strong>Branch</strong>: fabric_v1<br><strong>ID</strong>: 4789<br><strong>Subject</strong>: [FAB-1827] Verify proposal response sig<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/24/2017, 3:20:45 PM<br><strong>LastUpdated</strong>: 1/25/2017, 3:50:58 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-1827] Verify proposal response sig

cryptographically verify a peer's ProposalResponse
signature.

Change-Id: I468c539d4b48b48eaabc5b9c8bcd09dc25fa376c
Signed-off-by: tuand27613 <tdang@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 1/24/2017, 3:20:45 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 3:21:40 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/40/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 3:22:58 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/40/ : SUCCESS</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 1/24/2017, 3:26:54 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 3:27:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/41/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 3:29:05 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/41/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 1/24/2017, 5:25:41 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

the "verify()" method in CryptoPrimitives should have a set of headless tests that don't require the End2endIT.java (which needs a target network)

eventually we should cleanup CryptoPrimitives so it's an implementation of a common interface (see api.CryptoSuite in node.js SDK) but we can leave that for a bit later</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 1/25/2017, 8:41:12 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(6 comments)</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 1/25/2017, 11:01:47 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 1/25/2017, 11:02:14 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(4 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 11:02:44 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/43/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 11:03:58 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/43/ : SUCCESS</pre><strong>Reviewer</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Reviewed</strong>: 1/25/2017, 3:50:55 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 3:50:58 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jim Zhang</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: tuand27613 - tdang@us.ibm.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 1/24/2017, 3:20:45 PM<br><strong>UnmergedRevision</strong>: [5ba7244f543cebe292c0949d48453c33282f6996](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/5ba7244f543cebe292c0949d48453c33282f6996)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/24/2017, 3:22:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: tuand27613 - tdang@us.ibm.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 1/24/2017, 3:26:54 PM<br><strong>UnmergedRevision</strong>: [370e9284dd7153bad12eaa9c28b11bf181e6e846](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/370e9284dd7153bad12eaa9c28b11bf181e6e846)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/24/2017, 3:29:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 1/24/2017, 5:25:41 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [README.md#L34](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/README.md#L34)<br><strong>Comment</strong>: <pre>I assume these are later commits than what is being changed ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [README.md#L34](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/README.md#L34)<br><strong>Comment</strong>: <pre>yes. I pulled fabric after I rebased from fabric_v1</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L32](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L32)<br><strong>Comment</strong>: <pre>this not really needed.</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L41](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L41)<br><strong>Comment</strong>: <pre>Can we have boolean verifyDone ---  set to false.  Immediately return if set to true,  Right after that set it to true.
Not likely but like to have that safety :)</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L41](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L41)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L55](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L55)<br><strong>Comment</strong>: <pre>Log an error here please need to know this happened even if unlikely</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L55](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L55)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L59](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/ProposalResponse.java#L59)<br><strong>Comment</strong>: <pre>this not really needed</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L111](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L111)<br><strong>Comment</strong>: <pre>Can we print out what certificate is at issue ?  If this is running with many peers /users how will we know which is having an issue ?
Should we log the full stack trace so we know were it originated from ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L111](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/370e9284dd7153bad12eaa9c28b11bf181e6e846/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L111)<br><strong>Comment</strong>: <pre>I'll print out the cert.

Don't think printing the stack trace helps as that still doesn't give us any context.
We'll need log messages either in proposalResponse or application code to determine context</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: tuand27613 - tdang@us.ibm.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 1/25/2017, 11:01:47 AM<br><strong>GitHubMergedRevision</strong>: [09f0b9ac63a25891e9834be2389b9d7ce91e0487](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/09f0b9ac63a25891e9834be2389b9d7ce91e0487)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2017, 11:03:58 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jim Zhang - jim_the_matrix@hotmail.com<br><strong>Approved</strong>: 1/25/2017, 3:50:55 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jim Zhang<br><strong>Merged</strong>: 1/25/2017, 3:50:58 PM<br><br></blockquote>