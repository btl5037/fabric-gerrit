<strong>Project</strong>: fabric-sdk-java<br><strong>Branch</strong>: WIP_fabric_v1<br><strong>ID</strong>: 3251<br><strong>Subject</strong>: FAB-1204 Implement support for COP in Java sdk 1.0<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 12/13/2016, 7:31:50 AM<br><strong>LastUpdated</strong>: 12/13/2016, 5:30:29 PM<br><strong>CommitMessage</strong>:<br><pre>FAB-1204 Implement support for COP in Java sdk 1.0

Change-Id: Ieba60d02a08e86d9ad5f3883681261be116c779f
Signed-off-by: rickr <cr22rc@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 12/13/2016, 7:31:50 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>Reviewed</strong>: 12/13/2016, 2:11:41 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review+2

(8 comments)

Merging for now.. Please go through the comments and address them.</pre><strong>Reviewer</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>Reviewed</strong>: 12/13/2016, 2:11:45 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 12/13/2016, 2:11:55 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Pardha Vishnumolakala</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 12/13/2016, 5:27:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 12/13/2016, 5:30:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

What do we want to safe configuration ?  Properties files? This is not something we should store in key value store.</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Uploader</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Created</strong>: 12/13/2016, 7:31:50 AM<br><strong>GitHubMergedRevision</strong>: [b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe)<br><br><strong>Approver</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>Approved</strong>: 12/13/2016, 2:11:41 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Pardha Vishnumolakala<br><strong>Merged</strong>: 12/13/2016, 2:11:55 PM<br><br><strong>Approver</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>Approved</strong>: 12/13/2016, 2:11:45 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L0](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L0)<br><strong>Comment</strong>: <pre>Let's move away from static exceptions to Runtime Exceptions</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L67](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L67)<br><strong>Comment</strong>: <pre>The following 4 variables should be configurable

COP_BASEPATH
COP_ENROLLMENBASE
DEFAULT_SECURITY_LEVEL
DEFAULT_HASH_ALGORITHM

SDK can ship with configuration file with default settings.
Application should be able to override them.</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L67](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L67)<br><strong>Comment</strong>: <pre>I agree on the DEFAULT_SECURITY_LEVEL and DEFAULT_HASH_ALGORITHM
The others do not make sense to change because they are set by the COP Server</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L91](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L91)<br><strong>Comment</strong>: <pre>Refactor the validations into a separate function. This will make it easy to understand and maintain</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L186](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L186)<br><strong>Comment</strong>: <pre>Refactor the validations into a separate function. This will make it easy to understand and maintain</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L219](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L219)<br><strong>Comment</strong>: <pre>successfull enrolling is informative. switch the logging level to info</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L222](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L222)<br><strong>Comment</strong>: <pre>Log error "Failed to enroll user"  and the reason for failure</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L285](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/MemberServicesCOPImpl.java#L285)<br><strong>Comment</strong>: <pre>Let's do explicit checks for errors/success..
and log them..
Throw exception in case of errors or unknown status codes</pre><strong>Commenter</strong>: Pardha Vishnumolakala - psaradhi@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L235](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/b64d622f0606ae2a69df0cb81a58c8a0c7bda8fe/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L235)<br><strong>Comment</strong>: <pre>hardcoded parameters</pre></blockquote>