<strong>Project</strong>: fabric-sdk-java<br><strong>Branch</strong>: master<br><strong>ID</strong>: 6763<br><strong>Subject</strong>: [FAB-2563] make crypto pluggable<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/2/2017, 4:40:24 PM<br><strong>LastUpdated</strong>: 3/6/2017, 4:36:04 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-2563] make crypto pluggable

Define a crypto interface for key gen, signing
and verification methods.

Allow for pluggable implementations using this
interface

Update CryptoPrimitives to be the default
implemention of the crypto interface and make it
get its configuration settings from the SDK rather
than hardcoding them.

Change-Id: I0c4812249b40d75ab1bd118aae3288d380aa83ab
Signed-off-by: tuand27613 <tuan.dang.27613@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/2/2017, 4:40:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/2/2017, 4:43:25 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/199/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/2/2017, 4:56:28 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/199/ : SUCCESS</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/3/2017, 4:39:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/3/2017, 4:39:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/205/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/3/2017, 4:48:44 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/205/ : SUCCESS</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/3/2017, 4:58:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/3/2017, 4:59:55 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/206/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/3/2017, 5:12:08 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/206/ : SUCCESS</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/3/2017, 5:42:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/3/2017, 5:42:43 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/207/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/3/2017, 5:52:42 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/207/ : SUCCESS</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/5/2017, 3:39:04 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(10 comments)

Get rid of bouncycastle in SDKUtil</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 12:12:40 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 12:13:37 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/229/</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 12:14:29 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(10 comments)

SDKUtils is using its hash() in some of the other methods.

Suggest we clean up SDKUtils as a separate work item.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 12:26:12 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/229/ : SUCCESS</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 1:18:38 PM<br><strong>Message</strong>: <pre>Patch Set 6: Patch Set 5 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 1:19:39 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/231/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 1:34:00 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/231/ : SUCCESS</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 2:20:44 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(4 comments)

Still thinking how can set this default and get different strengths/hash algorithm with a single string ?</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 2:58:05 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(4 comments)

I see the flow for setting and varying the crypto settings as :

1. system wide defaults in Config. 
2. getCryptoSuite() and assign CryptoSuite instances to HFClient,Peer,User, whatever
3. Each CryptoSuite instance starts off with default config
4. If needed, call setProperties() or setSecLevel() or setHashAlg() to modify</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 3:11:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 3:12:50 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/236/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 3:23:51 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/236/ : SUCCESS</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/6/2017, 4:23:23 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 4:23:35 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Rick Rine</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 4:24:28 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-merge-x86_64/23/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/6/2017, 4:36:04 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-merge-x86_64/23/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 3/2/2017, 4:40:24 PM<br><strong>UnmergedRevision</strong>: [ca04c307c2923d6cd35b33b7eca7274d396f7f79](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/ca04c307c2923d6cd35b33b7eca7274d396f7f79)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/2/2017, 4:56:28 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 3/3/2017, 4:39:04 PM<br><strong>UnmergedRevision</strong>: [1ab77d7c135385cb488345f43182be79869be8aa](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/1ab77d7c135385cb488345f43182be79869be8aa)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/3/2017, 4:48:44 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 3/3/2017, 4:58:59 PM<br><strong>UnmergedRevision</strong>: [46f61c7aea0279d1a5623239a8b0d74cad620c6d](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/46f61c7aea0279d1a5623239a8b0d74cad620c6d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/3/2017, 5:12:08 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 3/3/2017, 5:42:00 PM<br><strong>UnmergedRevision</strong>: [eff284be3578916e45292b15bceddf207f64068a](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/eff284be3578916e45292b15bceddf207f64068a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/3/2017, 5:52:42 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Approved</strong>: 3/5/2017, 3:39:04 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [config.properties#L1](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/config.properties#L1)<br><strong>Comment</strong>: <pre>Ok so this gives us fine level control but maybe more than we need.  
I think  we need two encryption levels 256 and 384
And I get the one I want with a 
setCryptParms("SHA2_256") ?

org.hyperledger.fabric.sdk.crypto.SHA2_256.hash_algorithm = SHA2
org.hyperledger.fabric.sdk.crypto.SHA2_256.asymmetric_key_type = EC
org.hyperledger.fabric.sdk.crypto.SHA2_256.key_agreement_algorithm = ECDH

org.hyperledger.fabric.sdk.crypto.SHA2_384.hash_algorithm = SHA2
org.hyperledger.fabric.sdk.crypto.SHA2_384.asymmetric_key_type = EC
org.hyperledger.fabric.sdk.crypto.SHA2_384.key_agreement_algorithm = ECDH</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [config.properties#L1](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/config.properties#L1)<br><strong>Comment</strong>: <pre>I'm leaving in here the ones that are actually being used when dealing with peer/fabric-ca

I moved the rest back into CryptoPrimitives</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/Chain.java#L136](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/Chain.java#L136)<br><strong>Comment</strong>: <pre>easy rename to cryptoSuite ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/Chain.java#L136](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/Chain.java#L136)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L35](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L35)<br><strong>Comment</strong>: <pre>crypotSuite?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L35](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L35)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesFabricCAImpl.java#L127](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/MemberServicesFabricCAImpl.java#L127)<br><strong>Comment</strong>: <pre>cryptoSuite</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/MemberServicesFabricCAImpl.java#L127](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/MemberServicesFabricCAImpl.java#L127)<br><strong>Comment</strong>: <pre>This one I'd keep as cryptoPrimitives as we're using some cryptoPrimitives specific methods</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L669](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L669)<br><strong>Comment</strong>: <pre>How do I set security level here ? how does this work with setProperties ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L669](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L669)<br><strong>Comment</strong>: <pre>You can now call setSecLevel/setHashAlgo() directly in CryptoPrimitives or use setProperties in CryptoSuite. 

actual setting code is the same in both cases</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L670](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L670)<br><strong>Comment</strong>: <pre>can we make this now a CryptoException?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L670](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoPrimitives.java#L670)<br><strong>Comment</strong>: <pre>made it an InvalidArgumentException</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L34](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L34)<br><strong>Comment</strong>: <pre>init does two things sets strength/hash and loadCerts 
can we load the certs when we load the class ?
set strength/hash algo on some setSeProperties
Trying to remove this init.</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L34](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L34)<br><strong>Comment</strong>: <pre>I have this so that the constructor doesn't throw an exception. Also, the factory doesn't have to deal with calling constructors with different sets of arguments.

This seems to be the default for other factories, that is getInstance() then setxxxproperty</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L86](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L86)<br><strong>Comment</strong>: <pre>I don't get this method  here we are just falling through to the default case not the default type name "DEFAULT".  
shouldn't default: throw an exception?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L86](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L86)<br><strong>Comment</strong>: <pre>I wanted cryptoprimitives to always be the default... rewrote the switch code and added comments to make it a bit clearer</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L288](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L288)<br><strong>Comment</strong>: <pre>hash throws and Exception  ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L288](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L288)<br><strong>Comment</strong>: <pre>well , cryptoSuite.hash() was throwing an exception ... fixed in the interface</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric/sdkintegration/End2endIT.java#L111](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/test/java/org/hyperledger/fabric/sdkintegration/End2endIT.java#L111)<br><strong>Comment</strong>: <pre>why do we need to get it then and init do a init ?  Couldn't the setCryptoSuite do the init ? In any case it would seem you should get the suite from the factory then just do the init and setCryptoSuite</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric/sdkintegration/End2endIT.java#L111](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/eff284be3578916e45292b15bceddf207f64068a/src/test/java/org/hyperledger/fabric/sdkintegration/End2endIT.java#L111)<br><strong>Comment</strong>: <pre>moved the init() to inside setCryptoSuite</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 3/6/2017, 12:12:40 PM<br><strong>UnmergedRevision</strong>: [2359aadc6f2232ac7e6021f78d9c5eec8bee2705](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/2359aadc6f2232ac7e6021f78d9c5eec8bee2705)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/6/2017, 12:26:12 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Created</strong>: 3/6/2017, 1:18:38 PM<br><strong>UnmergedRevision</strong>: [61b781098025513fc0b9420d35c82f04609c3ce0](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/61b781098025513fc0b9420d35c82f04609c3ce0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/6/2017, 1:34:00 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L67](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L67)<br><strong>Comment</strong>: <pre>why public ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L67](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/main/java/org/hyperledger/fabric/sdk/HFClient.java#L67)<br><strong>Comment</strong>: <pre>in case Peer/Orderer/Transaction ever need to get to the client's crypto settings</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L89](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L89)<br><strong>Comment</strong>: <pre>I see no way another implementer could/should update this class.  So for now just have a getCryptoSuite()  that returns the default.  Later we can always implement this method.</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L89](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/main/java/org/hyperledger/fabric/sdk/security/CryptoSuite.java#L89)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L293](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L293)<br><strong>Comment</strong>: <pre>Move back to constructor no need to test txid</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L293](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/main/java/org/hyperledger/fabric/sdk/transaction/TransactionContext.java#L293)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric/sdk/security/CryptoPrimitivesTest.java#L48](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/test/java/org/hyperledger/fabric/sdk/security/CryptoPrimitivesTest.java#L48)<br><strong>Comment</strong>: <pre>Should we be testing with CryptoSuite interface now ?</pre><strong>Commenter</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric/sdk/security/CryptoPrimitivesTest.java#L48](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/61b781098025513fc0b9420d35c82f04609c3ce0/src/test/java/org/hyperledger/fabric/sdk/security/CryptoPrimitivesTest.java#L48)<br><strong>Comment</strong>: <pre>We test the implementing class, including methods that are not included in the interface.

The compiler takes care of verifying the "implements" part so we don't have to do anything there</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Uploader</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Created</strong>: 3/6/2017, 3:11:53 PM<br><strong>GitHubMergedRevision</strong>: [7067b810e32a85a12bd3b3ae52b865be4491a5a0](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/7067b810e32a85a12bd3b3ae52b865be4491a5a0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/6/2017, 3:23:51 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Approved</strong>: 3/6/2017, 4:23:23 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Rick Rine<br><strong>Merged</strong>: 3/6/2017, 4:23:35 PM<br><br></blockquote>