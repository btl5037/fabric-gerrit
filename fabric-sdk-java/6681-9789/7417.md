<strong>Project</strong>: fabric-sdk-java<br><strong>Branch</strong>: master<br><strong>ID</strong>: 7417<br><strong>Subject</strong>: [FAB-2753] complete Farbic CA api re-enroll/revoke<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Cong Honglei - conghonglei@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/24/2017, 7:32:30 AM<br><strong>LastUpdated</strong>: 3/27/2017, 8:54:50 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-2753] complete Farbic CA api re-enroll/revoke

complete re-enroll/revoke api.
re-enroll is to get new enrollment cert from CA server,
revoke is to revoke one enrollment cert or revoke one user (including
all his certs)

Change-Id: I817039d81411bd5c4ca3be96d6dcfe766c54bc0d
Signed-off-by: conghonglei <conghonglei@wanda.cn>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Cong Honglei - conghonglei@gmail.com<br><strong>Reviewed</strong>: 3/24/2017, 7:32:30 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/24/2017, 7:33:35 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/346/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/24/2017, 7:52:09 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/346/ : SUCCESS</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/24/2017, 12:05:40 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(4 comments)

Thanks very much for this! There are some things you need to address see comments below. Most important is that the tests you provided need to be run with a server (fabric_ca)  So they need to be moved to a new package/class that will make sure they only run during integration tests.</pre><strong>Reviewer</strong>: Cong Honglei - conghonglei@gmail.com<br><strong>Reviewed</strong>: 3/26/2017, 10:09:31 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:03:58 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/373/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:24:54 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/373/ : FAILURE</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/27/2017, 8:51:31 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(4 comments)

Test don't run when doing.
mvn  failsafe:integration-test -DskipITs=false

see comments why</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/27/2017, 5:25:13 PM<br><strong>Message</strong>: <pre>Patch Set 2:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 5:26:10 PM<br><strong>Message</strong>: <pre>Patch Set 2: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/385/</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/27/2017, 5:26:37 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Hi your going to need to rebase this.
see changes done in other methods for SSL</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 5:37:52 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-sdk-java-verify-x86_64/385/ : SUCCESS</pre><strong>Reviewer</strong>: Cong Honglei - conghonglei@gmail.com<br><strong>Reviewed</strong>: 3/27/2017, 8:54:50 PM<br><strong>Message</strong>: <pre>Abandoned

rebase failed by typo, replaced with new review</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: conghonglei - conghonglei@wanda.cn<br><strong>Uploader</strong>: Cong Honglei - conghonglei@gmail.com<br><strong>Created</strong>: 3/24/2017, 7:32:30 AM<br><strong>UnmergedRevision</strong>: [a5e4074024576e65cebacc597d6a16a0b6d6e61a](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/a5e4074024576e65cebacc597d6a16a0b6d6e61a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/24/2017, 7:52:09 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Approved</strong>: 3/24/2017, 12:05:40 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric/sdk/Enrollment.java#L48](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/a5e4074024576e65cebacc597d6a16a0b6d6e61a/src/main/java/org/hyperledger/fabric/sdk/Enrollment.java#L48)<br><strong>Comment</strong>: <pre>We already have private and public .. can we not create the Keypair from that ?</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric_ca/sdk/HFCAClientTest.java#L111](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/a5e4074024576e65cebacc597d6a16a0b6d6e61a/src/test/java/org/hyperledger/fabric_ca/sdk/HFCAClientTest.java#L111)<br><strong>Comment</strong>: <pre>These test need a server they need  to be moved to their on Class
that class needs to have a special name with IT on the end
Like org.hyperledger.fabric.sdkcaintegration.HFCAClientTESTIT.java</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric_ca/sdk/HFCAClientTest.java#L134](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/a5e4074024576e65cebacc597d6a16a0b6d6e61a/src/test/java/org/hyperledger/fabric_ca/sdk/HFCAClientTest.java#L134)<br><strong>Comment</strong>: <pre>Need to have an assert that an exception is not expected.</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric_ca/sdk/HFCAClientTest.java#L140](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/a5e4074024576e65cebacc597d6a16a0b6d6e61a/src/test/java/org/hyperledger/fabric_ca/sdk/HFCAClientTest.java#L140)<br><strong>Comment</strong>: <pre>Same as above .. please move both of these to that class</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: conghonglei - conghonglei@wanda.cn<br><strong>Uploader</strong>: Cong Honglei - conghonglei@gmail.com<br><strong>Created</strong>: 3/26/2017, 10:09:31 PM<br><strong>UnmergedRevision</strong>: [47e5c27aac6c183579f4b81fdb073df5804db3b3](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/commit/47e5c27aac6c183579f4b81fdb073df5804db3b3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/27/2017, 5:37:52 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Approved</strong>: 3/27/2017, 8:51:31 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/main/java/org/hyperledger/fabric_ca/sdk/HFCAClient.java#L392](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/47e5c27aac6c183579f4b81fdb073df5804db3b3/src/main/java/org/hyperledger/fabric_ca/sdk/HFCAClient.java#L392)<br><strong>Comment</strong>: <pre>Would be nice if the error message had the user's name</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric_ca/sdkintegration/HFCAClientEnrollIT.java#L28](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/47e5c27aac6c183579f4b81fdb073df5804db3b3/src/test/java/org/hyperledger/fabric_ca/sdkintegration/HFCAClientEnrollIT.java#L28)<br><strong>Comment</strong>: <pre>The test is not running because of this. Remove this line</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric_ca/sdkintegration/HFCAClientEnrollIT.java#L32](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/47e5c27aac6c183579f4b81fdb073df5804db3b3/src/test/java/org/hyperledger/fabric_ca/sdkintegration/HFCAClientEnrollIT.java#L32)<br><strong>Comment</strong>: <pre>use user2 instead.</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [src/test/java/org/hyperledger/fabric_ca/sdkintegration/HFCAClientEnrollIT.java#L110](https://github.com/hyperledger-gerrit-archive/fabric-sdk-java/blob/47e5c27aac6c183579f4b81fdb073df5804db3b3/src/test/java/org/hyperledger/fabric_ca/sdkintegration/HFCAClientEnrollIT.java#L110)<br><strong>Comment</strong>: <pre>remove static class so it runs</pre></blockquote>