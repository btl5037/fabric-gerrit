<strong>Project</strong>: fabric-ca<br><strong>Branch</strong>: master<br><strong>ID</strong>: 11759<br><strong>Subject</strong>: [FAB-5389] gencsr command for fabric-ca-client<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 7/19/2017, 2:35:40 PM<br><strong>LastUpdated</strong>: 8/16/2017, 5:41:34 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-5389] gencsr command for fabric-ca-client

Adding a gencsr command to fabric-ca-client for [FAB-5389]
to generate certificate signing requests and to write them
to a file without any interaction with the fabric-ca-server.

This allows the user to send ceritificate signing requests to
an external CA for private keys generated by the BCCSP for
the msp directory.

Change-Id: Id17b56c122d82875a3cfb0d2332e8cacd26b0eea
Signed-off-by: Jonathan Patchell <Jonathan.Patchell@gemalto.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 7/19/2017, 2:35:40 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/19/2017, 2:35:47 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1310/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/19/2017, 2:36:35 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1305/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/19/2017, 2:42:30 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1310/ : FAILURE

Logs: https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1310

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1305/ : FAILURE

Logs: https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1305</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 7/24/2017, 11:30:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/24/2017, 11:30:39 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1370/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/24/2017, 11:33:46 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1365/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/24/2017, 11:39:19 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1370/ : FAILURE

Logs: https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1370

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1365/ : FAILURE

Logs: https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1365</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 7/24/2017, 12:12:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/24/2017, 12:12:15 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1375/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/24/2017, 12:14:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1372/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/24/2017, 12:38:36 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1375/ : SUCCESS

Logs: https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1375

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1372/ : SUCCESS

Logs: https://logs.hyperledger.org/jobbuilder/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1372</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 7/27/2017, 1:03:25 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

(10 comments)</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 7/28/2017, 3:31:12 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/28/2017, 4:18:42 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1464/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/28/2017, 4:21:46 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1477/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/28/2017, 5:05:58 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1464/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1464

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1477/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1477</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 8/6/2017, 7:12:07 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(1 comment)

Jonathan, one more small usability change</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 8/10/2017, 3:26:29 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2017, 3:26:36 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1556/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2017, 3:30:16 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1552/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2017, 3:46:00 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1552/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1552

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1556/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1556</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 8/14/2017, 10:33:40 AM<br><strong>Message</strong>: <pre>Patch Set 6: Patch Set 5 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2017, 10:33:47 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1576/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2017, 10:37:56 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1572/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2017, 10:48:24 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1572/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1572

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1576/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1576</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 8/14/2017, 5:05:55 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2017, 5:06:02 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1585/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2017, 5:10:06 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1581/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2017, 5:35:04 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1581/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1581

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1585/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1585</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 8/14/2017, 7:45:27 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 8/15/2017, 11:08:28 AM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review-1

(2 comments)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 8/15/2017, 1:39:34 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 8/15/2017, 3:28:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2017, 3:28:59 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1606/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2017, 3:30:54 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1602/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2017, 3:54:16 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1602/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1602

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1606/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1606</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 8/15/2017, 4:07:11 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+1</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 8/15/2017, 4:50:26 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Reviewed</strong>: 8/15/2017, 5:07:15 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2017, 5:07:59 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1612/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2017, 5:08:03 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1607/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2017, 5:34:51 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/1607/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/1607

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/1612/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/1612</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 8/16/2017, 8:44:59 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 8/16/2017, 5:41:28 PM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 8/16/2017, 5:41:34 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Binh Nguyen</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 7/19/2017, 2:35:40 PM<br><strong>UnmergedRevision</strong>: [797995c37e572c0ed04a82c61e17ecb77ccbcd60](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/797995c37e572c0ed04a82c61e17ecb77ccbcd60)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/19/2017, 2:42:30 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/command.go#L30](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/797995c37e572c0ed04a82c61e17ecb77ccbcd60/cmd/fabric-ca-client/command.go#L30)<br><strong>Comment</strong>: <pre>Could you use the atom editor with goplus plugin?  This will automatically format the code consistently.  I can see from this that you must be using an editor which doesn't format that same.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 7/24/2017, 11:30:32 AM<br><strong>UnmergedRevision</strong>: [cd816673ff1dab2bcb2a32acaa17b86de94f2a90](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/cd816673ff1dab2bcb2a32acaa17b86de94f2a90)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/24/2017, 11:39:19 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 7/24/2017, 12:12:08 PM<br><strong>UnmergedRevision</strong>: [855daf4f44dc1b5ca94e8b188edeaaad0abb1b48](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/24/2017, 12:38:36 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 7/27/2017, 1:03:25 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/config.go#L386](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/config.go#L386)<br><strong>Comment</strong>: <pre>Type "Invalid" ... but I also think this error message needs more context.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/main.go#L89](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/main.go#L89)<br><strong>Comment</strong>: <pre>add comma</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/main.go#L89](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/main.go#L89)<br><strong>Comment</strong>: <pre>spelling ... "comman" -> "comma"</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/main.go#L94](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/main.go#L94)<br><strong>Comment</strong>: <pre>I think it is better to add "csr.cn" as a command specific flag for gencsr and leave this as it is.  So the following would show the flag.
# fabric-ca-client gencsr --help</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/main_test.go#L323](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/main_test.go#L323)<br><strong>Comment</strong>: <pre>I think it should recognize space or comma separator, but let's use comma to separate in tests since that is what the docs say.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/main_test.go#L343](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/main_test.go#L343)<br><strong>Comment</strong>: <pre>Could you add negative test case(s)?  For example, recognize invalid names in the new "csr.names" value, like:
   --csr.names "C=CA,O=Org1,Foo=Bar"</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/main_test.go#L344](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/cmd/fabric-ca-client/main_test.go#L344)<br><strong>Comment</strong>: <pre>Recommend changing to "defer os.Remove(defYaml)" and move towards top</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/clientconfig.go#L100](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/lib/clientconfig.go#L100)<br><strong>Comment</strong>: <pre>Recommend creating this directory if it doesn't exist as we do elsewhere.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/clientconfig.go#L112](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/855daf4f44dc1b5ca94e8b188edeaaad0abb1b48/lib/clientconfig.go#L112)<br><strong>Comment</strong>: <pre>Add log.Infof similar to:
   log.Infof("Stored CSR at %s", csrFile)</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 7/28/2017, 3:31:12 PM<br><strong>UnmergedRevision</strong>: [bddd577a12ea078a14952424dab751e3adf73266](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/bddd577a12ea078a14952424dab751e3adf73266)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/28/2017, 5:05:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 8/6/2017, 7:12:07 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/clientconfig.go#L90](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/bddd577a12ea078a14952424dab751e3adf73266/lib/clientconfig.go#L90)<br><strong>Comment</strong>: <pre>Recommend
  "CSR common name not specified; use '--csr.cn' flag"
to give better directions when they forget to use.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 8/10/2017, 3:26:29 PM<br><strong>UnmergedRevision</strong>: [9182e306b2eb8b0d6aac09c823571c30ac5a679d](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/9182e306b2eb8b0d6aac09c823571c30ac5a679d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/10/2017, 3:46:00 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 8/14/2017, 10:33:40 AM<br><strong>UnmergedRevision</strong>: [d8998f7fb038237c7ac6a0b549414021600a92c5](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/d8998f7fb038237c7ac6a0b549414021600a92c5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2017, 10:48:24 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 8/14/2017, 5:05:55 PM<br><strong>UnmergedRevision</strong>: [776c4d03cc88d5dbed2543bd97a3a6be80f7ca7f](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/776c4d03cc88d5dbed2543bd97a3a6be80f7ca7f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2017, 5:35:04 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 8/14/2017, 7:45:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Approved</strong>: 8/15/2017, 11:08:28 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [lib/client_test.go#L681](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/776c4d03cc88d5dbed2543bd97a3a6be80f7ca7f/lib/client_test.go#L681)<br><strong>Comment</strong>: <pre>I prefer function names in the larger test file to have a tag like

TestCLIGenCSR()

That provides a way to isolate test runs to a particular file in the package, e.g.
go test -v -run TestCLI
go test -v -run TestSRV</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [lib/client_test.go#L700](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/776c4d03cc88d5dbed2543bd97a3a6be80f7ca7f/lib/client_test.go#L700)<br><strong>Comment</strong>: <pre>If you're willing to delete the suggested lines in clientconfig.go and add the following tests, we can get 100% coverage for this function. 

Not to be a pain, but letting a few slip here and there makes it tough to catch up later (speaking from experience :-)

        // Error cases
        // Fail to write file
        config.CSR.CN = strings.Repeat("a", 260)
        err = config.GenCSR(homeDir)
        t.Logf("ClientConfig.GenCSR error %v", err)
        if err == nil {
                t.Error("ClientConfig.GenCSR should have failed due to invalid filename")
        }

        // Fail to gen key
        config.CSR = api.CSRInfo{
                CN: "TestGenCSR",
                KeyRequest: &csr.BasicKeyRequest{
                        A: "dsa",
                        S: 256,
                },
        }
        err = config.GenCSR(homeDir)
        t.Logf("ClientConfig.GenCSR error %v", err)
        if err == nil {
                t.Error("ClientConfig.GenCSR should have failed due to unsupported algorithm")
        }

        // Fail to init client
        config.MSPDir = string(make([]byte, 1))
        err = config.GenCSR(homeDir)
        t.Logf("ClientConfig.GenCSR error %v", err)
        if err == nil {
                t.Error("ClientConfig.GenCSR should have failed to init client")
        }</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [lib/clientconfig.go#L105](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/776c4d03cc88d5dbed2543bd97a3a6be80f7ca7f/lib/clientconfig.go#L105)<br><strong>Comment</strong>: <pre>I think 100-105 can be safely deleted. client.Init() sets up the key and certs directory.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [lib/clientconfig.go#L111](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/776c4d03cc88d5dbed2543bd97a3a6be80f7ca7f/lib/clientconfig.go#L111)<br><strong>Comment</strong>: <pre>108-111 cn be safely deleted. client.Init()sets up the key and certs directory. I compiled and tested this change on my system and it validates this conclusion.</pre></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 8/15/2017, 3:28:51 PM<br><strong>UnmergedRevision</strong>: [8e162514d94502f786f72438063f170b2af816e5](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/8e162514d94502f786f72438063f170b2af816e5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/15/2017, 3:54:16 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Approved</strong>: 8/15/2017, 4:07:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/clientconfig.go#L100](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8e162514d94502f786f72438063f170b2af816e5/lib/clientconfig.go#L100)<br><strong>Comment</strong>: <pre>A nit, but for conciseness, consolidate to:
   csrFile := path.Join(client.Config.MSPDir, "signcerts", fmt.Sprintf("%s.csr, c.CSR.CN))</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Uploader</strong>: Jonathan Patchell - Jonathan.Patchell@gemalto.com<br><strong>Created</strong>: 8/15/2017, 5:07:15 PM<br><strong>GitHubMergedRevision</strong>: [77f76df7f3c2bd9afd3c2fff685fe767aab8f366](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/77f76df7f3c2bd9afd3c2fff685fe767aab8f366)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/15/2017, 5:34:51 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 8/16/2017, 5:41:28 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Binh Nguyen<br><strong>Merged</strong>: 8/16/2017, 5:41:34 PM<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 8/16/2017, 8:44:59 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>