<strong>Project</strong>: fabric-ca<br><strong>Branch</strong>: master<br><strong>ID</strong>: 14525<br><strong>Subject</strong>: [FAB-5726] 5. Support 'modify' for dynamic config<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 10/14/2017, 8:02:41 PM<br><strong>LastUpdated</strong>: 11/7/2017, 4:30:29 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-5726] 5. Support 'modify' for dynamic config

The ability to dynamically modify identities and/or
affiliations to the fabric-ca server is now
supported from the fabric-ca-client.

Change-Id: I222699126d9f08f04cdc0dabd721ccf2a57d890f
Signed-off-by: Saad Karim <skarim@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/14/2017, 8:02:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2017, 8:02:51 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2063/ (1/2)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/14/2017, 8:03:26 PM<br><strong>Message</strong>: <pre>Patch Set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2017, 8:03:36 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2064/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2017, 8:06:41 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2045/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2017, 8:49:55 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2064/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2064

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2045/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2045</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/16/2017, 12:59:49 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/16/2017, 1:14:26 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2048/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/16/2017, 1:26:07 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2067/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/16/2017, 1:45:36 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2067/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2067/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2067

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2048/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2048/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2048</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/16/2017, 4:14:01 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/16/2017, 4:14:07 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2070/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/16/2017, 4:17:53 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2051/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/16/2017, 5:03:47 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2070/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2070

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2051/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2051</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/17/2017, 12:46:02 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(3 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/19/2017, 12:18:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/19/2017, 12:18:34 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/19/2017, 12:18:35 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2102/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/19/2017, 12:21:20 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2083/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/19/2017, 12:52:24 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2102/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2102

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2083/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2083</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/23/2017, 10:31:20 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/23/2017, 10:31:27 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2135/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/23/2017, 10:44:30 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2107/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/23/2017, 11:44:05 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2135/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2135

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2107/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2107</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/23/2017, 5:49:51 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

(9 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/25/2017, 10:03:26 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/25/2017, 10:03:29 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(9 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/25/2017, 10:03:37 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2138/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/25/2017, 10:07:35 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2110/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/25/2017, 10:38:55 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2138/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2138

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2110/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2110</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2017, 4:30:29 PM<br><strong>Message</strong>: <pre>Abandoned</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/14/2017, 8:02:41 PM<br><strong>UnmergedRevision</strong>: [6e0f7f9a65f2e350d552c5d77b7040d31d58c7ae](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/6e0f7f9a65f2e350d552c5d77b7040d31d58c7ae)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/14/2017, 8:03:26 PM<br><strong>UnmergedRevision</strong>: [5064d752e8c63372bb5e7678ae0ff2b2a383cb48](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/5064d752e8c63372bb5e7678ae0ff2b2a383cb48)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/14/2017, 8:49:55 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/16/2017, 12:59:49 PM<br><strong>UnmergedRevision</strong>: [b16af38d83ea55aafa67be22a4b68fccf2b86d51](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/b16af38d83ea55aafa67be22a4b68fccf2b86d51)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/16/2017, 1:45:36 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/16/2017, 4:14:01 PM<br><strong>UnmergedRevision</strong>: [f165115865e1054d60df2bf5fd664cd9622697de](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f165115865e1054d60df2bf5fd664cd9622697de)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/16/2017, 5:03:47 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 10/17/2017, 12:46:02 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [docs/source/users-guide.rst#L1428](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f165115865e1054d60df2bf5fd664cd9622697de/docs/source/users-guide.rst#L1428)<br><strong>Comment</strong>: <pre>Need to document who can modify an affiliation, or actually need to do this for each of these add/modify/remove affiliation/identity commands.  We also need to add this
same info to the fabric CA security overview google doc.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/users-guide.rst#L1428](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f165115865e1054d60df2bf5fd664cd9622697de/docs/source/users-guide.rst#L1428)<br><strong>Comment</strong>: <pre>Done. We talk about authorization related failures in doc higher up, I expanded on that a bit more.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L286](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f165115865e1054d60df2bf5fd664cd9622697de/lib/dbaccessor.go#L286)<br><strong>Comment</strong>: <pre>Let's support multiple attributes to be modified with a
single command.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L286](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f165115865e1054d60df2bf5fd664cd9622697de/lib/dbaccessor.go#L286)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L258](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f165115865e1054d60df2bf5fd664cd9622697de/lib/serverdynamicconfig.go#L258)<br><strong>Comment</strong>: <pre>For add, modify, and remove identity, we need to make
sure the same access checks are made as are made for
register user.  Where are these checks made?  I'm
probably missing them.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L258](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f165115865e1054d60df2bf5fd664cd9622697de/lib/serverdynamicconfig.go#L258)<br><strong>Comment</strong>: <pre>Done. The main check that the caller is a registrar was being done in the processIdentity function, but I moved the authorization logic to a separate function now called performIdentityAuthCheck. It checks that it is a registrar, has proper role type, and proper affiliation.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/19/2017, 12:18:28 PM<br><strong>UnmergedRevision</strong>: [a2253bc435d6ec2ef4abe7ac0a1a0bc155fd6ee3](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/a2253bc435d6ec2ef4abe7ac0a1a0bc155fd6ee3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/19/2017, 12:52:24 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/23/2017, 10:31:20 AM<br><strong>UnmergedRevision</strong>: [4e479c8142b9050af55f77bf884ad617242cee77](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/4e479c8142b9050af55f77bf884ad617242cee77)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/23/2017, 11:44:05 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 10/23/2017, 5:49:51 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [docs/source/users-guide.rst#L1445](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/docs/source/users-guide.rst#L1445)<br><strong>Comment</strong>: <pre>Replace with the following ...

If you would like to remove an affiliation while automatically removing all identities associated with that affiliation, you must specify the `--force` option of the `fabric-ca-client servercfg` command and the `cfg.identities.allowremove` option of the `fabric-ca-server start` command.  Any identities that are removed as part of the affiliation removal will also have their certificates revoked.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/users-guide.rst#L1445](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/docs/source/users-guide.rst#L1445)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [docs/source/users-guide.rst#L1525](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/docs/source/users-guide.rst#L1525)<br><strong>Comment</strong>: <pre>Pls fix grammar</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/users-guide.rst#L1525](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/docs/source/users-guide.rst#L1525)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L308](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/dbaccessor.go#L308)<br><strong>Comment</strong>: <pre>Revisit this logic</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L308](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/dbaccessor.go#L308)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L435](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/dbaccessor.go#L435)<br><strong>Comment</strong>: <pre>Pls double check that this is correct as we discussed
or should it be "\.%"?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L435](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/dbaccessor.go#L435)<br><strong>Comment</strong>: <pre>I don't think we need to escape the dot, I tried this both manually and changing it here. Escaping the dot does not remove the sub affiliations. I did expand on an already existing test case in serverdynamicconfig_test to make sure that appropriate affiliations are getting removed and not getting removed.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L222](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L222)<br><strong>Comment</strong>: <pre>Add a check and return error if len(modifyRequest) != 2</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L222](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L222)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L226](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L226)<br><strong>Comment</strong>: <pre>Add another check before this</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L226](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L226)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L230](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L230)<br><strong>Comment</strong>: <pre>Pls use GetUser instead of GetUserInfo</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L230](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L230)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L247](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L247)<br><strong>Comment</strong>: <pre>newAuthErr

All permission violations should result in a 401 error, which newAuthErr handles</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L247](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L247)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L255](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L255)<br><strong>Comment</strong>: <pre>This could be an "else" or make these update checks into a switch.
What values of update do we support here?
Do we need to error out if it is an unknown value?
Do we allow modifying attributes through this code path?
If so, we would need additional auth checks, right?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverdynamicconfig.go#L255](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/4e479c8142b9050af55f77bf884ad617242cee77/lib/serverdynamicconfig.go#L255)<br><strong>Comment</strong>: <pre>Done. Changed into a switch. Unknown value is checked in dbaccessor.go in the ModifyIdentity function. Modifying attributes 
does follow this code path, I added a check to see the caller is authorized to modify an identity's attributes.</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/25/2017, 10:03:26 AM<br><strong>UnmergedRevision</strong>: [b17f72a4baf3e7a740bb6c8a31fc271772edf868](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/b17f72a4baf3e7a740bb6c8a31fc271772edf868)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/25/2017, 10:38:55 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>