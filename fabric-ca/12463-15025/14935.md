<strong>Project</strong>: fabric-ca<br><strong>Branch</strong>: master<br><strong>ID</strong>: 14935<br><strong>Subject</strong>: [FAB-6647] 2. Maintain backwards compatibility<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 10/27/2017, 7:02:25 PM<br><strong>LastUpdated</strong>: 12/8/2017, 7:06:57 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-6647] 2. Maintain backwards compatibility

Need to maintain backwards compatibility for any
functionality that is added that affect functionality
of current users.

Version checks are made on the server configuration file,
server executable, and database version. Based on the versions
it is determined if a migration is needed of existing identities
to work with the latest release of fabric-ca-server.

Adds logic that will update existing registrar's in the database
to have the 'hf.Registrar.Attributes' attribute with a value of '*'.

Change-Id: I2f8bd7a610900fc4487966f9eeea7b2b1fc68d4c
Signed-off-by: Saad Karim <skarim@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/27/2017, 7:02:25 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/27/2017, 7:02:34 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2157/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/27/2017, 7:06:14 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2129/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/27/2017, 7:37:25 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2157/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2157

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2129/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2129</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/30/2017, 11:38:13 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(8 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/30/2017, 4:04:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2017, 4:04:14 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2161/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2017, 4:05:06 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2133/ (2/2)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/30/2017, 4:05:55 PM<br><strong>Message</strong>: <pre>Patch Set 3: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2017, 4:06:04 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2162/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2017, 4:06:57 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2161/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2161/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2161

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2133/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2133/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2133</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2017, 4:06:58 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2134/ (2/2)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 10/30/2017, 4:07:09 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(8 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2017, 4:38:35 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2162/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-s390x/2162

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2134/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-1/fabric-ca-verify-x86_64/2134</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/31/2017, 11:57:54 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 10/31/2017, 11:58:25 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/1/2017, 12:40:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/1/2017, 12:40:07 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2017, 12:40:37 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2155/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2017, 12:41:19 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2183/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2017, 1:16:17 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2183/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2183/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2183

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2155/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2155/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2155</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/1/2017, 2:08:40 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2017, 2:08:47 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2156/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2017, 2:12:27 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2184/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2017, 2:44:09 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2184/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2184

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2156/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2156</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/2/2017, 3:00:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6: Patch Set 5 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/2/2017, 3:00:56 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2199/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/2/2017, 3:05:40 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2171/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/2/2017, 3:46:23 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2199/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2199

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2171/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2171</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 11/3/2017, 8:21:12 AM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

(3 comments)</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 11/3/2017, 9:43:42 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2017, 12:00:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2017, 12:00:56 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(5 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2017, 12:00:57 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2236/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2017, 12:00:57 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2207/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2017, 12:40:35 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2207/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2207/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2207

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2236/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2236</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/9/2017, 9:55:18 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2017, 9:55:26 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2244/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2017, 9:59:20 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2215/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2017, 10:55:36 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2244/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2244

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2215/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2215</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2017, 12:26:44 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:26:54 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2308/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:28:55 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2278/ (2/2)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2017, 12:28:56 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10: Patch Set 9 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:29:04 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2311/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:29:07 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2308/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2308/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2308

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2278/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2278/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2278</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:29:52 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2281/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 1:18:08 PM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2311/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2311/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2311

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2281/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2281/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2281</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2017, 2:21:32 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 2:21:40 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2319/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 2:23:15 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2289/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 2:56:21 PM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2319/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2319

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2289/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2289</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/21/2017, 10:03:33 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2017, 10:03:45 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2345/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2017, 10:06:50 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2317/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2017, 10:53:50 PM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2345/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2345

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2317/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2317</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 11/22/2017, 9:49:44 AM<br><strong>Message</strong>: <pre>Patch Set 12: Code-Review-1

(6 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/27/2017, 12:55:02 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2017, 12:55:13 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2352/ (1/2)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/27/2017, 12:55:17 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(4 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2017, 12:59:25 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2323/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2017, 1:45:44 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2352/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2352

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2323/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2323</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 11/29/2017, 2:15:09 PM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review-1

(10 comments)</pre><strong>Reviewer</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>Reviewed</strong>: 11/30/2017, 10:44:54 AM<br><strong>Message</strong>: <pre>Patch Set 13:

(12 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/30/2017, 2:46:41 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(21 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/30/2017, 2:46:45 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/30/2017, 2:46:56 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2371/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/30/2017, 2:51:31 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2342/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/30/2017, 4:49:57 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2342/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2342/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2342

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2371/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2371/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2371</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/30/2017, 5:27:39 PM<br><strong>Message</strong>: <pre>Patch Set 14:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/30/2017, 5:27:48 PM<br><strong>Message</strong>: <pre>Patch Set 14: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2374/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/30/2017, 5:29:13 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2345/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/30/2017, 7:12:55 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2345/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2345/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2345

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2374/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2374/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2374</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 12/1/2017, 10:41:01 AM<br><strong>Message</strong>: <pre>Patch Set 14:

revalidate</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 12/1/2017, 10:46:42 AM<br><strong>Message</strong>: <pre>Uploaded patch set 15: Patch Set 14 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/1/2017, 10:46:50 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2376/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/1/2017, 10:47:29 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2347/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/1/2017, 12:01:51 PM<br><strong>Message</strong>: <pre>Patch Set 15: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2347/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2347

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2376/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2376</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 12/3/2017, 7:58:47 PM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review+2</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/8/2017, 7:04:02 AM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review+2

(1 comment)

I'm worried that there might be issues if there is a large number of users in the database so I think we need a system test somewhere for that but for now I'll +2</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/8/2017, 7:06:57 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Gari Singh</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/27/2017, 7:02:25 PM<br><strong>UnmergedRevision</strong>: [1fd0286a37142c8b64d9aa02a9c87c35dc218a50](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/1fd0286a37142c8b64d9aa02a9c87c35dc218a50)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/27/2017, 7:37:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 10/30/2017, 11:38:13 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [docs/source/clientconfig.rst#L53](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/docs/source/clientconfig.rst#L53)<br><strong>Comment</strong>: <pre>Why was this needed?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/clientconfig.rst#L53](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/docs/source/clientconfig.rst#L53)<br><strong>Comment</strong>: <pre>This needs further investigation. This originates from https://gerrit.hyperledger.org/r/#/c/14023/

The CR above affects the client configuration, so docs need to be updated. However, it doesn't seem like the CR updated the doc and I got a failure on my local machine. Need to investigate why CI did not fail with missing doc changes. I have removed this change for now.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1075](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1075)<br><strong>Comment</strong>: <pre>Add function comment</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1075](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1075)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1080](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1080)<br><strong>Comment</strong>: <pre>Change to:
  "Current versions: server=%s, database=%s, configFile=%s"</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1080](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1080)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1095](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1095)<br><strong>Comment</strong>: <pre>I don't think we need the serverVersion at all.
We know the server version based on the code.
I think this logic should be similar to this pseudocode:

if dbVersion < v1.1.0 {
    err := ca.migrateDBto1_1_0()
}</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1095](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1095)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1167](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1167)<br><strong>Comment</strong>: <pre>Only do this for the identities that have the hf.Registrar.Roles attribute.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1167](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1167)<br><strong>Comment</strong>: <pre>Yes, this is only being done for identities that have 'hf.Registrar.Roles' this check is made above in line 1150.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1167](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1167)<br><strong>Comment</strong>: <pre>duh, yep, i missed it :-)</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1167](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ca.go#L1167)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ldap/client.go#L355](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ldap/client.go#L355)<br><strong>Comment</strong>: <pre>Return not supported error</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ldap/client.go#L355](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/ldap/client.go#L355)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/spi/userregistry.go#L50](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/spi/userregistry.go#L50)<br><strong>Comment</strong>: <pre>Change to return []api.Attribute to be consistent
with SetAttributes.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/spi/userregistry.go#L50](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/spi/userregistry.go#L50)<br><strong>Comment</strong>: <pre>I think this should be handled in a separate changeset. Making this change affects a lot of other code, especially code related to tcerts. It would end up introducing a lot of unrelated changes to this changeset. There is already a WIP CR that is going to address this: https://gerrit.hyperledger.org/r/#/c/14741/</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/spi/userregistry.go#L50](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/spi/userregistry.go#L50)<br><strong>Comment</strong>: <pre>OK, but let's make the jira for the WIP CR block the jira
for this CR.  I don't want v1.1 to have this inconsistency
in the APIs.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/spi/userregistry.go#L50](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/lib/spi/userregistry.go#L50)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L114](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/scripts/fvt/backwards_comp_test.sh#L114)<br><strong>Comment</strong>: <pre>Use case statement with error default here and below</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L114](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/1fd0286a37142c8b64d9aa02a9c87c35dc218a50/scripts/fvt/backwards_comp_test.sh#L114)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/30/2017, 4:04:03 PM<br><strong>UnmergedRevision</strong>: [52a3f0c2ffecc5f9383c23e6b6bc4fd32bcc231e](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/52a3f0c2ffecc5f9383c23e6b6bc4fd32bcc231e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2017, 4:06:57 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 10/30/2017, 4:05:55 PM<br><strong>UnmergedRevision</strong>: [91163c346bf911e639805de7258b1b0437833b95](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/91163c346bf911e639805de7258b1b0437833b95)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2017, 4:38:35 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 10/31/2017, 11:58:25 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/1/2017, 12:40:00 PM<br><strong>UnmergedRevision</strong>: [dbe838c06ca607a8a6008c16e5dd74a42267178a](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/dbe838c06ca607a8a6008c16e5dd74a42267178a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/1/2017, 1:16:17 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/1/2017, 2:08:40 PM<br><strong>UnmergedRevision</strong>: [25145f2363386cc1718aade6cf182860bfc455b6](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/25145f2363386cc1718aade6cf182860bfc455b6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/1/2017, 2:44:09 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/2/2017, 3:00:46 PM<br><strong>UnmergedRevision</strong>: [40d0188be430bd0563ecb90531e521275404216f](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/40d0188be430bd0563ecb90531e521275404216f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/2/2017, 3:46:23 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 11/3/2017, 8:21:12 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L694](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/ca.go#L694)<br><strong>Comment</strong>: <pre>I think these names can be improved, to make it more
readable.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L694](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/ca.go#L694)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L701](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/ca.go#L701)<br><strong>Comment</strong>: <pre>We've already made this comparison in checkVersions</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L701](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/ca.go#L701)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L712](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/ca.go#L712)<br><strong>Comment</strong>: <pre>Let's step thru this again and consider how the next
upgrade might look.  For example, consider 3 transitions:
1.0.0 -> 1.1.0 for this release, and 2 others for next
release: 
1.1.0 -> 1.2.0 and 1.0.0 -> 1.2.0.

I said the following in an earlier comment, but
looks like it was lost.
-------------------------------------------

I think this logic should be similar to this pseudocode:

if dbVersion < v1.1.0 {
    err := ca.migrateDBto1_1_0()
}</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L712](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/ca.go#L712)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L480](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/dbaccessor.go#L480)<br><strong>Comment</strong>: <pre>We could have a single GetAttributes call which returns
all attributes if attrNames is nil.  This requires
getting rid of tcert.Attribute, which I think
https://gerrit.hyperledger.org/r/#/c/14741/
does, so maybe this should be based on that.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L480](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/dbaccessor.go#L480)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L502](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/dbaccessor.go#L502)<br><strong>Comment</strong>: <pre>Do we always want to merge attributes?
If this is really what we want, we should rename this function.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/dbaccessor.go#L502](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/40d0188be430bd0563ecb90531e521275404216f/lib/dbaccessor.go#L502)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/8/2017, 12:00:48 PM<br><strong>UnmergedRevision</strong>: [08b5e3dc0a9846914a2b5abdbf7ee47fd5e76434](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/08b5e3dc0a9846914a2b5abdbf7ee47fd5e76434)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2017, 12:40:35 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L595](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/08b5e3dc0a9846914a2b5abdbf7ee47fd5e76434/lib/ca.go#L595)<br><strong>Comment</strong>: <pre>I think it is a little cleaner to just call
ca.loadUsers() with no args and do comparisons inside
loadUsers since that is the only place it is used.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L696](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/08b5e3dc0a9846914a2b5abdbf7ee47fd5e76434/lib/ca.go#L696)<br><strong>Comment</strong>: <pre>dbCheck</pre></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/9/2017, 9:55:18 AM<br><strong>UnmergedRevision</strong>: [e57f2464edd9ce83ca1aa42835af95da31196b7a](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/e57f2464edd9ce83ca1aa42835af95da31196b7a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/9/2017, 10:55:36 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/16/2017, 12:26:44 PM<br><strong>UnmergedRevision</strong>: [cd6ecf2d507294e29ffe7d1b105a0c3c51020d68](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/cd6ecf2d507294e29ffe7d1b105a0c3c51020d68)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2017, 12:29:07 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/16/2017, 12:28:56 PM<br><strong>UnmergedRevision</strong>: [f01f506106157eb5d5e7de4cfc40bf671845c760](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f01f506106157eb5d5e7de4cfc40bf671845c760)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2017, 1:18:08 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/16/2017, 2:21:32 PM<br><strong>UnmergedRevision</strong>: [52d2f1549dbb00e4ece87c9ff5d4396025074c6d](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/52d2f1549dbb00e4ece87c9ff5d4396025074c6d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2017, 2:56:21 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/21/2017, 10:03:33 PM<br><strong>UnmergedRevision</strong>: [5b04542e389ec26a668565f9e22fc78057e6d572](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/5b04542e389ec26a668565f9e22fc78057e6d572)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/21/2017, 10:53:50 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 11/22/2017, 9:49:44 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/server.go#L53](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/server.go#L53)<br><strong>Comment</strong>: <pre>Let's delete this.  It is going to be difficult to remember to update this each release.  I won't matter except for the go SDK which consumes this as a library.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/server.go#L53](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/server.go#L53)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/server.go#L822](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/server.go#L822)<br><strong>Comment</strong>: <pre>Adding mycmd (fabric-ca/cmd) as a dependency means the go SDK will have to vendor that package also.  I think we should create a fabric-ca/lib/version package which contains what is currently in fabric-ca/cmd and the version.go and version-test.go.
And this function is also moved to lib/version package and becomes:

// Get returns the current version of the fabric-ca library
func Get() string {
   if Version == "" {
      panic("Version is not set for fabric-ca library")
   }
   return Version
}</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/server.go#L822](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/server.go#L822)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverregister.go#L185](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/serverregister.go#L185)<br><strong>Comment</strong>: <pre>This these are the levels from the config file, right?  Shouldn't this be ca.server.levels.Identity?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverregister.go#L185](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/serverregister.go#L185)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/test-util.go#L114](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/test-util.go#L114)<br><strong>Comment</strong>: <pre>This should use the value of lib/version/Version unless it is not set, in which case let's just use "1.1.0" as the default for this test.  Be sure to comment that this is only used when we run "go test" directly in this package.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/test-util.go#L114](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5b04542e389ec26a668565f9e22fc78057e6d572/lib/test-util.go#L114)<br><strong>Comment</strong>: <pre>Done. This is actually the value that comes from the configuration file. But I have set it to "1.1.0".</pre></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/27/2017, 12:55:02 PM<br><strong>UnmergedRevision</strong>: [9d2bd849e838efd3abe5e83163e3876e69b22846](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/9d2bd849e838efd3abe5e83163e3876e69b22846)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/27/2017, 1:45:44 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 11/29/2017, 2:15:09 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1109](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1109)<br><strong>Comment</strong>: <pre>if there is a failure after migrating few users, some users are migrated and some are not...database will be in inconsistent state.  

Similarly, if all the users are updated but fails to update levels in the database (below). What happens in that case.

Can we not make all these changes in a transaction to make it atomic?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1109](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1109)<br><strong>Comment</strong>: <pre>Talked with Keith about this, and we decided it is okay to allow partial migration.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1115](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1115)<br><strong>Comment</strong>: <pre>Don't think you need this inner loop, and clearer w/o</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1115](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1115)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1130](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1130)<br><strong>Comment</strong>: <pre>This function seems to be doing more than checking config levels, i.e. it initializes ca.server.levels and ca.levels.  Either change the name or split it, and adding some comments would be helpful.</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1130](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1130)<br><strong>Comment</strong>: <pre>function comment: "this function returns an error if the version specified in the configuration file is greater than server version"</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1130](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1130)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1130](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1130)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1133](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1133)<br><strong>Comment</strong>: <pre>If this is not always true, does that mean you are initializing ca.server.levels some place else?  If no, then no need to check for nil; if yes, then we have duplicate code.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1133](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1133)<br><strong>Comment</strong>: <pre>Done. This is not needed.</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1140](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1140)<br><strong>Comment</strong>: <pre>typo "version"</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1140](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1140)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1148](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1148)<br><strong>Comment</strong>: <pre>This seems to be the only part that is checking the config level</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1177](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1177)<br><strong>Comment</strong>: <pre>migrateUserToLevel1

wow, what a nit :-)</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1177](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1177)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1181](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1181)<br><strong>Comment</strong>: <pre>Don't ignore error</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1181](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1181)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1183](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1183)<br><strong>Comment</strong>: <pre>Same here</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca.go#L1183](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca.go#L1183)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [lib/ca_test.go#L767](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca_test.go#L767)<br><strong>Comment</strong>: <pre>function comment please that explains what this test does</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca_test.go#L767](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca_test.go#L767)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca_test.go#L768](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca_test.go#L768)<br><strong>Comment</strong>: <pre>Set
   dir := "migrationTest"
and then use 'dir'</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca_test.go#L768](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca_test.go#L768)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/ca_test.go#L771](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca_test.go#L771)<br><strong>Comment</strong>: <pre>path.Join(dir, "fabric-ca-server.db")</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/ca_test.go#L771](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/ca_test.go#L771)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [lib/server.go#L111](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/server.go#L111)<br><strong>Comment</strong>: <pre>an info message that prints the server version would be useful</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/server.go#L111](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/server.go#L111)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [lib/server.go#L116](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/server.go#L116)<br><strong>Comment</strong>: <pre>should this also be info message?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/server.go#L116](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/server.go#L116)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/spi/userregistry.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/spi/userregistry.go#L55)<br><strong>Comment</strong>: <pre>adds, updates, or deletes attributes</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/spi/userregistry.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/lib/spi/userregistry.go#L55)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L87](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L87)<br><strong>Comment</strong>: <pre>this block is exactly the block above at line 74</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L87](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L87)<br><strong>Comment</strong>: <pre>Must have come from a bad cherry-pick.</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L218](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L218)<br><strong>Comment</strong>: <pre>is it the version or level? seems like you are creating a database with level 9 for all types ..this test will fail when mapped level to a CA version is equal to or greater than 9?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L218](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L218)<br><strong>Comment</strong>: <pre>It's suppose to be level. It will fail because the levels that map to the server version are lower than the levels of the database. Can't use an older version of the server with a new version/level of the database.</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L249](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L249)<br><strong>Comment</strong>: <pre>better message as to why it should have failed</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L249](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L249)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L256](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L256)<br><strong>Comment</strong>: <pre>can u pls rephrase this comment</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L256](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L256)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L264](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L264)<br><strong>Comment</strong>: <pre>better message why this is a error condition...error should have started successfully when levels in the database are less than levels mapped to server version..something to that effect</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L264](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L264)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: AnilKumar Ambati - aambati@hotmail.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L283](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L283)<br><strong>Comment</strong>: <pre>same here...descriptive message</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/backwards_comp_test.sh#L283](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9d2bd849e838efd3abe5e83163e3876e69b22846/scripts/fvt/backwards_comp_test.sh#L283)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/30/2017, 2:46:45 PM<br><strong>UnmergedRevision</strong>: [f2b6803a36b00a6b038c802e7696c506fa920fcd](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f2b6803a36b00a6b038c802e7696c506fa920fcd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/30/2017, 7:12:55 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 12/1/2017, 10:46:42 AM<br><strong>GitHubMergedRevision</strong>: [f187f3dde3066a46d1100a57acacb16e18e0b2ee](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f187f3dde3066a46d1100a57acacb16e18e0b2ee)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/1/2017, 12:01:51 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 12/3/2017, 7:58:47 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 12/8/2017, 7:04:02 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Gari Singh<br><strong>Merged</strong>: 12/8/2017, 7:06:57 AM<br><br><h2>Comments</h2><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [lib/ca.go#L1100](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f187f3dde3066a46d1100a57acacb16e18e0b2ee/lib/ca.go#L1100)<br><strong>Comment</strong>: <pre>this worries me because there might be a ton of users.  the good news is that there likely are not a ton of production systems out there</pre></blockquote>