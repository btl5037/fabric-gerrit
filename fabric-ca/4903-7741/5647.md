<strong>Project</strong>: fabric-ca<br><strong>Branch</strong>: master<br><strong>ID</strong>: 5647<br><strong>Subject</strong>: Added docker-compose for running fvt tests<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/7/2017, 12:13:33 PM<br><strong>LastUpdated</strong>: 2/16/2017, 11:46:38 AM<br><strong>CommitMessage</strong>:<br><pre>Added docker-compose for running fvt tests

Change-Id: I74067c3c9c81b83be40001b5314badeaf4d729c1
Signed-off-by: rennman <eabailey@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/7/2017, 12:13:33 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/7/2017, 12:13:42 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/132/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/7/2017, 12:13:46 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/129/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/7/2017, 12:15:55 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/129/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/7/2017, 12:23:48 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/129/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/129/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/132/ : SUCCESS</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 2/7/2017, 2:55:19 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/7/2017, 4:19:38 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 2/7/2017, 6:57:10 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/7/2017, 7:36:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/7/2017, 7:36:46 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/133/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/7/2017, 7:37:27 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/130/ (2/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/7/2017, 7:38:05 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 2/7/2017, 7:46:04 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 2:11:43 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/130/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 2:18:09 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/130/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/130/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/133/ : SUCCESS</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 2/8/2017, 9:28:31 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: John Harrison - harrijk63@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 11:07:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(2 comments)

There are issues here when it comes to working with Z or P.  Using an x86 based docker image here will cause failures on the Z and P platforms.</pre><strong>Reviewer</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>Reviewed</strong>: 2/9/2017, 4:52:08 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(2 comments)

I agree with John, this will not work on P and Z</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/9/2017, 10:03:40 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

This work needs to consider P/Z platforms.  Recommend basing on one of our various base[os|jvm|image] as appropriate</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 2/9/2017, 12:36:01 PM<br><strong>Message</strong>: <pre>Patch Set 2: -Code-Review

Noted - then let's not merge these then. Let me know how/if I can assist.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/9/2017, 3:16:24 PM<br><strong>Message</strong>: <pre>Patch Set 3: Published edit on patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/9/2017, 3:16:31 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/144/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/9/2017, 3:17:14 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/141/ (2/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/9/2017, 3:18:16 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Yeah, I'm testing this out now with the fabric baseimage using the constructs in the Makefile.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/9/2017, 4:32:16 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/139/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/9/2017, 4:38:36 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/139/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/141/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/144/ : SUCCESS</pre><strong>Reviewer</strong>: John Harrison - harrijk63@gmail.com<br><strong>Reviewed</strong>: 2/9/2017, 9:46:20 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

(2 comments)

An x86-based Docker image (phusion/baseimage:latest) is still being used in this patch set and will not work with Z or P.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/10/2017, 4:25:25 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 4:26:13 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/153/ (1/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/10/2017, 4:29:40 PM<br><strong>Message</strong>: <pre>Patch Set 4:

I update the Makefile duplicating the construct used to make the fabric-ca image. I did not add the image to the docker target, since it's too time-consuming to add the extra tooling to the test image. It would be nice if the packages were already bundled into the/a/some base image somewhere.


For my own convenience, I did publish the x86 version to dockerhub as 
rennman/fabric-ca-fvt</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 5:02:43 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/156/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 10:32:16 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/151/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 10:34:13 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/151/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/153/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/156/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 10:35:27 PM<br><strong>Message</strong>: <pre>Patch Set 4: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/153/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 10:37:18 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/153/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/156/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/153/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 2/11/2017, 8:31:32 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Hi Allen, do you want to take another look at this when you have a moment?</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/12/2017, 11:22:20 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

I need more time to review the Makefile changes.  They look suboptimal but I will give it a more indepth pass tomorrow.</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 7:39:56 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(7 comments)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 11:04:16 AM<br><strong>Message</strong>: <pre>Patch Set 5: Published edit on patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 11:04:22 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/160/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 11:07:02 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/157/ (2/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 11:10:59 AM<br><strong>Message</strong>: <pre>Patch Set 6: Published edit on patch set 5.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 11:12:19 AM<br><strong>Message</strong>: <pre>Patch Set 7: Published edit on patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 11:14:55 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/158/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 11:15:13 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/159/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 11:23:43 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/161/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 11:26:41 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/162/ (2/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 12:01:21 PM<br><strong>Message</strong>: <pre>Patch Set 8: Published edit on patch set 7.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 12:02:41 PM<br><strong>Message</strong>: <pre>Patch Set 9: Published edit on patch set 8.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 12:04:20 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(8 comments)

@greg I have answered all comments and attempted to simplify the Makefile</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 12:05:11 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/163/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 12:09:44 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/164/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 12:15:54 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/166/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 12:17:29 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/167/ (2/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 1:24:10 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 1:25:05 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/165/ (1/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 1:47:29 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 1:48:53 PM<br><strong>Message</strong>: <pre>Patch Set 12: Published edit on patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 1:54:58 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/167/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 1:55:06 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/168/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:02:04 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/156/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:02:08 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/157/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:02:14 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/158/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:05:10 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/156/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/157/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/160/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:05:19 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/158/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/159/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/162/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:05:20 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/157/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/158/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/161/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:06:34 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/168/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:11:14 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/162/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:12:27 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/163/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:12:44 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/164/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:13:03 PM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/164/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/165/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/168/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:13:11 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/162/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/163/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/166/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:13:12 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/166/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:13:50 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/167/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:14:23 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/163/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/164/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/167/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 2:18:32 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:18:40 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/168/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:19:32 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/169/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:22:05 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/170/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:23:45 PM<br><strong>Message</strong>: <pre>Patch Set 11: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/166/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/167/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/170/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:23:46 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/171/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:25:21 PM<br><strong>Message</strong>: <pre>Patch Set 12: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/167/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/168/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/171/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:32:37 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/172/ (3/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 2:36:50 PM<br><strong>Message</strong>: <pre>Patch Set 13:

I didn't understand the use of 'image-path-map'. For the target 'build/image/%/$(DUMMY)' (the only reference to 'image-path-map'), 'image-path-map.$(TARGET)' effectively resolves to '$(TARGET)', so I don't understand the redundancy. I naively removed it and everything still builds. What am I missing?

I simplified the 'build/image/%/payload' target by more wildcarding.

Also, I wanted to deleted the target, 'build/image/$(PROJECT_NAME)-fvt/payload:',  altogether -- but because of the '$^' reference in the 'build/image/%/payload' target recipe, I was forced to include at least one prerequisite. Of the possibles solutions to the multiple potential copy errors -- 
1) ignore them # this is a bad precedent
2) add conditional logic based on the target # too unwieldy
3) add a default bogus pre-req (the 'start.sh' script) and include the certificate files in the images source directory

3 seemed the simplest, so I have added the certs to this change set.  Though technically not required at the moment, it might come in handy.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 2:42:10 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/168/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/169/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/172/ : SUCCESS</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 3:24:39 PM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review-1

(10 comments)

Closer, thank you.  Bear with me.</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 3:26:42 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Please see this as an example of how the payload thing was supposed to work.  It became somewhat lost in the CA tree because the CA tree stripped most things away until recently.

https://github.com/hyperledger/fabric/blob/master/Makefile#L196</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 3:29:36 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(1 comment)</pre><strong>Reviewer</strong>: John Harrison - harrijk63@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 10:15:23 PM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review-1

(1 comment)

locale-gen does not reside within the hyperledger/fabric-baseimage.</pre><strong>Reviewer</strong>: John Harrison - harrijk63@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 10:21:29 PM<br><strong>Message</strong>: <pre>Patch Set 13: -Code-Review

(2 comments)</pre><strong>Reviewer</strong>: John Harrison - harrijk63@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 10:21:42 PM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review-1</pre><strong>Reviewer</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 5:29:11 AM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 1:32:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 1:32:46 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/174/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 1:33:29 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/175/ (3/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 1:35:19 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(15 comments)

Finshed changes and pushed new code.

Note that this impacts the over-all build of the fabric executables. I verified all works in my environment. To address Makefile comments @greg, I strayed over the fence and edited the fabric-ca's Dockfile too.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 1:51:38 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/174/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/178/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/175/ : SUCCESS</pre><strong>Reviewer</strong>: John Harrison - harrijk63@gmail.com<br><strong>Reviewed</strong>: 2/14/2017, 1:57:10 PM<br><strong>Message</strong>: <pre>Patch Set 14: Code-Review-1

I took a look at the latest z (s390x) verify job output for patch set #14 and it looks like the z setup is still having issues. Postgres 9.4 is installed on z and some of your commands assume 9.5 is installed.

13:40:15 Step 20 : RUN su $PGUSER -c "/usr/lib/postgresql/9.5/bin/initdb -D $PGDATA" && sed -i "s/\(^[[:blank:]]*\)#*\(hot_standby[[:blank:]]*= *\).*/\1\2on/" $PGDATA/postgresql.conf && su $PGUSER -c "/usr/lib/postgresql/9.5/bin/pg_ctl start -D $PGDATA" && sleep 10 && psql -U postgres -h localhost -c "ALTER USER $PGUSER WITH PASSWORD '$PGPASSWORD';"
13:40:15  ---> Running in 3fd8c21c86da
13:40:17 [91mbash: /usr/lib/postgresql/9.5/bin/initdb: No such file or directory
13:40:17 [0mThe command '/bin/sh -c su $PGUSER -c "/usr/lib/postgresql/9.5/bin/initdb -D $PGDATA" && sed -i "s/\(^[[:blank:]]*\)#*\(hot_standby[[:blank:]]*= *\).*/\1\2on/" $PGDATA/postgresql.conf && su $PGUSER -c "/usr/lib/postgresql/9.5/bin/pg_ctl start -D $PGDATA" && sleep 10 && psql -U postgres -h localhost -c "ALTER USER $PGUSER WITH PASSWORD '$PGPASSWORD';"' returned a non-zero code: 127
13:40:17 make: *** [build/image/fabric-ca-fvt/.dummy-s390x-0.7.0-snapshot-5a37b5e] Error 1
13:40:17 Build step 'Execute shell' marked build as failure
13:40:17 [ssh-agent] Stopped.

*******
Also, I'm not sure if this is an issue or not, but thought I'd paste it in here too:

13:39:37 Setting up postgresql-9.4 (9.4.10-0+deb8u1) ...
13:39:37 Error: The locale requested by the environment is invalid.
13:39:37 Error: could not create default cluster. Please create it manually with
13:39:37 
13:39:37   pg_createcluster 9.4 main --start
13:39:37 
13:39:37 or a similar command (see 'man pg_createcluster').
13:39:37 update-alternatives: using /usr/share/postgresql/9.4/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode
13:39:37 No PostgreSQL clusters exist; see "man pg_createcluster" ... (warning).</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/14/2017, 3:51:46 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(2 comments)

This is shaping up nicely.  Thank you for making all of those edits.  Few more comments.</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 4:44:19 PM<br><strong>Message</strong>: <pre>Patch Set 14:

(1 comment)</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/14/2017, 5:44:12 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(1 comment)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2017, 3:52:10 PM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2017, 3:52:18 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/185/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2017, 3:55:12 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/186/ (3/3)</pre><strong>Reviewer</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2017, 4:05:29 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Ok, John was kind enough to loan me a system so I could test out the z path and fix the postgres install. Thank goodness...messy. The z image and the x image are not based on the same distro, so it was hit and miss until I could look at it directly.

I modified the setlocale mechanism which was not working on z. The new process is more manual, but reliable.

Regarding postgres versioning, this is not my preferred solution, but I couldn't do it more minimally. I created a PGVER variable in the Makefile that propagates to the Dockerfile. I don't really think this low level of detail needs to be in the Makefile, but I have to account for it somewhere and the Dockerfile is the reasonable choice. I cannot set an ENV conditionally in the Dockerfile itself based on the tag, hence, Makefile. It could get passed with the --build-arg, but again, an app version seems too trival to include there. I just re-used the TAG contruct.

Honestly, having all the platforms running the same base distro would be infinitely better.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2017, 4:21:51 PM<br><strong>Message</strong>: <pre>Patch Set 15: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/185/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/186/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/189/ : SUCCESS</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/16/2017, 11:06:06 AM<br><strong>Message</strong>: <pre>Patch Set 14:

(1 comment)</pre><strong>Reviewer</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Reviewed</strong>: 2/16/2017, 11:06:11 AM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review+2</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 2/16/2017, 11:25:07 AM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review+2

Trying to adopt the policy of "test as soon as we can, so that we have enough iterations with the proposed code".... a.k.a "If you fail, fail fast", in other words, similar to what Greg suggests, let's see what happens with this (as we can always revert).</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 11:25:12 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jonathan Levi (HACERA)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 11:25:19 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-merge-ppc64le/25/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 11:26:15 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-merge-x86_64/26/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 11:46:38 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-merge-s390x/28/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-merge-ppc64le/25/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-merge-x86_64/26/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/7/2017, 12:13:33 PM<br><strong>UnmergedRevision</strong>: [8d95b844e1f937856ba3addedc88c06406dd2ed8](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/8d95b844e1f937856ba3addedc88c06406dd2ed8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/7/2017, 12:23:48 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L1](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/Dockerfile#L1)<br><strong>Comment</strong>: <pre>what's this image?</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L1](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/Dockerfile#L1)<br><strong>Comment</strong>: <pre>Stripped down ubuntu image without all the sysvinit baggage.
https://hub.docker.com/r/phusion/baseimage/</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/README.md#L7](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/README.md#L7)<br><strong>Comment</strong>: <pre>maybe I am not up to speed on my docker-compose commands, but aren't we missing a yaml file?</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/README.md#L7](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/README.md#L7)<br><strong>Comment</strong>: <pre>docker-compose.yml is the default.</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/README.md#L7](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/README.md#L7)<br><strong>Comment</strong>: <pre>yes, but there is no docker-compose.yml in the changeset</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/README.md#L7](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/README.md#L7)<br><strong>Comment</strong>: <pre>Touché</pre><strong>Commenter</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>CommentLine</strong>: [scripts/fvt/README.md#L7](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/8d95b844e1f937856ba3addedc88c06406dd2ed8/scripts/fvt/README.md#L7)<br><strong>Comment</strong>: <pre>;-)</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/7/2017, 7:36:37 PM<br><strong>UnmergedRevision</strong>: [32c72ab4752bce45cb41c4d930ed4f36dd215ea7](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/32c72ab4752bce45cb41c4d930ed4f36dd215ea7)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 2/7/2017, 7:46:04 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/8/2017, 2:18:09 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Approved</strong>: 2/9/2017, 10:03:40 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: John Harrison - harrijk63@gmail.com<br><strong>Approved</strong>: 2/8/2017, 11:07:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>Approved</strong>: 2/9/2017, 4:52:08 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L1](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/32c72ab4752bce45cb41c4d930ed4f36dd215ea7/scripts/fvt/Dockerfile#L1)<br><strong>Comment</strong>: <pre>This is an x86 based docker image and will not work with Z or P.</pre><strong>Commenter</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L1](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/32c72ab4752bce45cb41c4d930ed4f36dd215ea7/scripts/fvt/Dockerfile#L1)<br><strong>Comment</strong>: <pre>Can we use platform specific docker image like hyperledger/fabric-baseimage as base image ?</pre><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L4](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/32c72ab4752bce45cb41c4d930ed4f36dd215ea7/scripts/fvt/Dockerfile#L4)<br><strong>Comment</strong>: <pre>This will not work with Z or P</pre><strong>Commenter</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>CommentLine</strong>: [scripts/fvt/docker-compose.yml#L10](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/32c72ab4752bce45cb41c4d930ed4f36dd215ea7/scripts/fvt/docker-compose.yml#L10)<br><strong>Comment</strong>: <pre>Can we kindly remove this empty line ?</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/9/2017, 3:16:24 PM<br><strong>UnmergedRevision</strong>: [52fc686eb23aea2c6c57f7e1299ec55429c47b9c](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/52fc686eb23aea2c6c57f7e1299ec55429c47b9c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/9/2017, 4:38:36 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: John Harrison - harrijk63@gmail.com<br><strong>Approved</strong>: 2/9/2017, 9:46:20 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L1](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/52fc686eb23aea2c6c57f7e1299ec55429c47b9c/scripts/fvt/Dockerfile#L1)<br><strong>Comment</strong>: <pre>Same issue as patch set #1.  This is an x86 based Docker image and will not work with Z or P.</pre><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [scripts/fvt/Dockerfile#L4](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/52fc686eb23aea2c6c57f7e1299ec55429c47b9c/scripts/fvt/Dockerfile#L4)<br><strong>Comment</strong>: <pre>ditto</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/10/2017, 4:25:25 PM<br><strong>UnmergedRevision</strong>: [ed0ecb07348acd050a736ffd6a345079f5ddc1c9](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/ed0ecb07348acd050a736ffd6a345079f5ddc1c9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/10/2017, 10:37:18 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Approved</strong>: 2/12/2017, 11:22:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L22](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L22)<br><strong>Comment</strong>: <pre>Minor nit: Whitespace damage</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L22](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L22)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L52](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L52)<br><strong>Comment</strong>: <pre>Why not just add to IMAGES?</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L52](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L52)<br><strong>Comment</strong>: <pre>I did that initially, but because in the current iteration, I'm having to apt-get a bunch of dependencies, it takes a while to build the test image. I thought that for someone who wasn't interested in building the fabric-ca-fvt image, this mas a minor inconvenience. Our main objective is to build a test image for CI.
That being said, if the required applications already existed in the base image, I would have no objection to this scheme.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L66](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L66)<br><strong>Comment</strong>: <pre>If in $(IMAGES), drop this clause</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L66](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L66)<br><strong>Comment</strong>: <pre>See above.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L90](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L90)<br><strong>Comment</strong>: <pre>Please templatize fabric-ca rule rather than replicate the logic three times.  This is what the image-path-map feature was meant to assist with.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L90](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L90)<br><strong>Comment</strong>: <pre>I inherited this. This is what is currently in master; however, I'll attempt to fix it with some assistance.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L124](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L124)<br><strong>Comment</strong>: <pre>Drop this clause, it is covered by the generic payload rule</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L124](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L124)<br><strong>Comment</strong>: <pre>ok</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L143](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L143)<br><strong>Comment</strong>: <pre>Adding new variable is fine, but wouldnt just simple "_ARCH_" be most appropriate.  The _BASE_ in _BASE_TAG_ refers to the notion of base image.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L143](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/Makefile#L143)<br><strong>Comment</strong>: <pre>In my original iteration (which did not exploit the fabric baseimage) I was required to download golang and this was a nascent (since aborted) attempt to distinguish arch as resolved in fabric (e.g. x86) from that expressed in the go packages (amd). I'll delete since I don't need it now.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>It seems odd to me to have both ENTRYPOINT and CMD.  Was this intentional?</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ed0ecb07348acd050a736ffd6a345079f5ddc1c9/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>Yes; start.sh starts the db servers and cannot (easily) be over-ridden. CMD on the other hand is merely a convenience for starting the tests. It can be simply over-ridden in order to start the container w/o running the tests, e.g. to inspect the environment, or make code changes. This is described in the README.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 11:04:16 AM<br><strong>UnmergedRevision</strong>: [bcd735b527e577673463c3465b9c549e57b73a61](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/bcd735b527e577673463c3465b9c549e57b73a61)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:05:10 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 11:10:59 AM<br><strong>UnmergedRevision</strong>: [782aae93d1cb6734e320469067e5c7e68c2ba91d](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/782aae93d1cb6734e320469067e5c7e68c2ba91d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:05:20 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 11:12:19 AM<br><strong>UnmergedRevision</strong>: [58afd95f3af25d65fa378272c3897043c2f13b1a](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/58afd95f3af25d65fa378272c3897043c2f13b1a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:05:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L89](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/58afd95f3af25d65fa378272c3897043c2f13b1a/Makefile#L89)<br><strong>Comment</strong>: <pre>I substituted the new client and sever stanzas with a generic block. I did not attempt to absorb original fabric-ca target, presuming it to be deprecated.</pre></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 12:01:21 PM<br><strong>UnmergedRevision</strong>: [c9ae459fc877e10a713dee940785c1a778207d02](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/c9ae459fc877e10a713dee940785c1a778207d02)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:13:11 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 12:02:41 PM<br><strong>UnmergedRevision</strong>: [f4e712ddb58fb7fd0a6d56cd0e2d51d6226f0572](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f4e712ddb58fb7fd0a6d56cd0e2d51d6226f0572)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:14:23 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 1:24:10 PM<br><strong>UnmergedRevision</strong>: [26f2e58558384b3db8836b8df74a974c9c4514d3](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/26f2e58558384b3db8836b8df74a974c9c4514d3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:13:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 1:47:29 PM<br><strong>UnmergedRevision</strong>: [e670b1d1a12f10c30dd542cc505d5f38e143711f](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/e670b1d1a12f10c30dd542cc505d5f38e143711f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:23:45 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 1:48:53 PM<br><strong>UnmergedRevision</strong>: [224cd8fe5d4dd594f7624dfdb8580485a12d1c00](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/224cd8fe5d4dd594f7624dfdb8580485a12d1c00)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:25:21 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/13/2017, 2:18:32 PM<br><strong>UnmergedRevision</strong>: [ec2ab4e12a0f2cc3aa13363b730d347e63479975](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/ec2ab4e12a0f2cc3aa13363b730d347e63479975)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 2:42:10 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Approved</strong>: 2/13/2017, 3:24:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: John Harrison - harrijk63@gmail.com<br><strong>Approved</strong>: 2/13/2017, 10:21:42 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>Approved</strong>: 2/14/2017, 5:29:11 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L51](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L51)<br><strong>Comment</strong>: <pre>Change this to 

IMAGES = $(PROJECT_NAME) $(PROJECT_NAME)-fvt</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L51](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L51)<br><strong>Comment</strong>: <pre>Done. (as originally conceived -- although this can take some time, depending on the relative bandwidth and strength of the host)</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L52](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L52)<br><strong>Comment</strong>: <pre>drop this</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L52](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L52)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L53](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L53)<br><strong>Comment</strong>: <pre>add

path-map.fabric-ca := ./
path.map.fabric-ca-client := ./cmd/fabric-ca-client
path.map.fabric-ca-server := ./cmd/fabric-ca-server</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L53](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L53)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L63](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L63)<br><strong>Comment</strong>: <pre>drop this</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L63](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L63)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L82](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L82)<br><strong>Comment</strong>: <pre>forgot to add: drop lines 82-85 and add three rules

fabric-ca: bin/fabric-ca
fabric-ca-client: bin/fabric-ca-client
fabric-ca-server: bin/fabric-ca-server

These will then work in conjunction with the bin/% rule below</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L82](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L82)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L87](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L87)<br><strong>Comment</strong>: <pre>change this line to

bin/%</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L87](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L87)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L88](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L88)<br><strong>Comment</strong>: <pre>drop this, and use ${@F} instead of $(TARGET) in the remaining rules</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L88](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L88)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L90](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L90)<br><strong>Comment</strong>: <pre>replace "./cmd/$(TARGET)" with "path-map.${@F}"</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L90](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L90)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L118](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L118)<br><strong>Comment</strong>: <pre>This whole section is not really what was intended.  It is not entirely your fault...the original images/fabric-ca/*.pem thing slipped past my review and I never got around to cleaning it up.  What I would suggest is  you follow what was done for build/sampleconfig.tar.bz2 and do the pem packaging in a similar way.  This rule should not do anything other than mkdir+cp $^ $@</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L118](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L118)<br><strong>Comment</strong>: <pre>Done. I modified the cert processing to create a tar file with the certificates. This required also modifying - and simplify...thanks - the fabric-ca Dockerfile.in as well. I verified that it workd in my env, but you might want to take a look-see. Hopefully, this is what you intended.

I removed the certs from the fvt image, as I don't really need them. It only requires the start.sh script, so I'm just leaving the src file as the only prereq.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L127](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L127)<br><strong>Comment</strong>: <pre>This is fine:  image-path-map was a leftover from an earlier CA when the name translation was not deterministic.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L127](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L127)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Krishna Harsha Voora - krishvoor@in.ibm.com<br><strong>CommentLine</strong>: [Makefile#L146](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L146)<br><strong>Comment</strong>: <pre>Having docker-fvt as a dependency for fvt-tests, would assure respective docker-image is in place.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [Makefile#L146](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/Makefile#L146)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L5](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L5)<br><strong>Comment</strong>: <pre>Once everything is working, I would go back in and clean up all unwanted commented out statements in this file.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L5](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L5)<br><strong>Comment</strong>: <pre>Done. I did intend to do that thanks. I just wanted to keep track of how I originally installed things that I might need.</pre><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L17](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L17)<br><strong>Comment</strong>: <pre>When testing this on z Systems, the following error was encountered:
Step 11 : RUN locale-gen en_US.UTF-8 && echo 'LANG="en_US.UTF-8"' > /etc/default/locale
 ---> Running in d2d8258ce8cd
/bin/sh: 1: locale-gen: not found
The command '/bin/sh -c locale-gen en_US.UTF-8 && echo 'LANG="en_US.UTF-8"' > /etc/default/locale' returned a non-zero code: 127</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L17](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L17)<br><strong>Comment</strong>: <pre>Done, as per below.</pre><strong>Commenter</strong>: John Harrison - harrijk63@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L20](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L20)<br><strong>Comment</strong>: <pre>I would move these lines after the WORKDIR statement and append "&& apt-get -y install locales" to the "apt-get -y update" statement to ensure that locale-gen is installed on all platforms.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L20](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L20)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>I still do not understand why you have both ENTRYPOINT and CMD.  This strikes me as wrong but I might be misunderstanding.  Can you clarify?</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>I always want to start postgres and mysql, regardless. The ENTRYPOINT script provides that. Granted the --entrypoint option provides an override, but I feel that it's consistent with this rationale: 

"The ENTRYPOINT of an image is similar to a COMMAND because it specifies what executable to run when the container starts, but it is (purposely) more difficult to override. The ENTRYPOINT gives a container its default nature or behavior..."

Considering I *usually* want to run 'make fvt-tests', CMD defaults to that. In those instances where I don't want to run 'make fvt-tests', I just pass an alternate CMD to docker run as the last arg, e.g. a interactive shell. If I were to lump them all together in the same CMD, any interactive invocation of the container using a CMD override would fail to start the DB daemons.

Essentially, ENTRYPOINT is providing the environment, while CMD is providing the behavior.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>What I meant specifically is that the documentation implies that ENTRYPOINT and CMD are mutually exclusive:

https://docs.docker.com/engine/reference/builder/#entrypoint

In particular:

"... ENTRYPOINT, ... will override all elements specified using CMD"

Therefore, I was surprised to see them used together.  Does this mean that your default execution is effectively running "./script make fvt-tests"?  Is this what you wanted?  Maybe I am just misunderstanding either the doc or your usage.</pre><strong>Commenter</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>OK, so that's actually my point:

"Command line arguments to docker run <image> will be *appended* after all elements in an exec form ENTRYPOINT..."

appended, not replace...e.g. in this configuration, 'make fvt-tests' (the default CMD value) will be appended to 'start.sh'

"[Command line arguments to docker run <image>]...will override all elements specified using CMD..."  [but not ENTRYPOINT]

To override the default action (make 'fvt-tests') pass something else as the last arg to docker run

docker run -ti <image> bash

the CMD from the Dockerfile will not execute, but the 'start.sh' from ENTRYPOINT will.

The bottom line is that I always want start.sh to execute, regardless of what the user passes as the command-line CMD argument.</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [images/fabric-ca-fvt/Dockerfile.in#L65](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/ec2ab4e12a0f2cc3aa13363b730d347e63479975/images/fabric-ca-fvt/Dockerfile.in#L65)<br><strong>Comment</strong>: <pre>Ok, it wasnt obvious this was the intent but I see what you are doing now.</pre></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/14/2017, 1:32:37 PM<br><strong>UnmergedRevision</strong>: [5a37b5e85b496e40fde14e9d028289b21fcb1e37](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/5a37b5e85b496e40fde14e9d028289b21fcb1e37)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2017, 1:51:38 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: John Harrison - harrijk63@gmail.com<br><strong>Approved</strong>: 2/14/2017, 1:57:10 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L140](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5a37b5e85b496e40fde14e9d028289b21fcb1e37/Makefile#L140)<br><strong>Comment</strong>: <pre>I suspect you can apply one further DRY optimization here, such as how I did this on fabric:

https://github.com/hyperledger/fabric/blob/32b772ce949c3f6b2b6db1b2c7389b51eaedb385/Makefile#L225</pre><strong>Commenter</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>CommentLine</strong>: [Makefile#L140](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/5a37b5e85b496e40fde14e9d028289b21fcb1e37/Makefile#L140)<br><strong>Comment</strong>: <pre>Upon further consideration, because of the path wrangling and the fact that there are only currently two variations, it's probably best to leave this as is for now.</pre></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Uploader</strong>: Allen Bailey - eabailey@us.ibm.com<br><strong>Created</strong>: 2/15/2017, 3:52:10 PM<br><strong>GitHubMergedRevision</strong>: [2ff7ba5b646512eb18101e22adce7f86705d1d6e](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/2ff7ba5b646512eb18101e22adce7f86705d1d6e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/15/2017, 4:21:51 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Greg Haskins - gregory.haskins@gmail.com<br><strong>Approved</strong>: 2/16/2017, 11:06:11 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Approved</strong>: 2/16/2017, 11:25:07 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jonathan Levi (HACERA)<br><strong>Merged</strong>: 2/16/2017, 11:25:12 AM<br><br></blockquote>