<strong>Project</strong>: fabric-ca<br><strong>Branch</strong>: master<br><strong>ID</strong>: 21581<br><strong>Subject</strong>: [FAB-7238] Vendor certificate printing package<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 5/8/2018, 3:18:17 PM<br><strong>LastUpdated</strong>: 5/14/2018, 2:28:55 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-7238] Vendor certificate printing package

Vendoring package that prints certificate in
OpenSSL format.

Change-Id: I3512d20e5f14021c0c18b2494d048074b36cc321
Signed-off-by: Saad Karim <skarim@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 5/8/2018, 3:18:17 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2018, 3:18:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2993/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2018, 3:20:15 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2927/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2018, 3:20:21 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/282/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2018, 3:20:32 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/54/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/8/2018, 3:45:36 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2993/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/2993/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/2993

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2927/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2927/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2927

https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/282/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-end-2-end-x86_64/282

https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/54/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-rtd-verify-job/54</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 5/9/2018, 10:05:43 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Patch Set 1 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 10:05:53 AM<br><strong>Message</strong>: <pre>Patch Set 2: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3000/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 10:07:33 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2933/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 10:07:38 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/289/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 10:08:30 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/57/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 10:51:08 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3000/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/3000

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2933/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2933

https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/289/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-end-2-end-x86_64/289

https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/57/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-rtd-verify-job/57</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 5/9/2018, 11:39:50 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Patch Set 2 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 11:39:59 AM<br><strong>Message</strong>: <pre>Patch Set 3: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3003/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 11:41:43 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2936/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 11:41:50 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/292/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 11:41:53 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/58/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2018, 12:26:40 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3003/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/3003

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2936/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2936

https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/292/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-end-2-end-x86_64/292

https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/58/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-rtd-verify-job/58</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 5/10/2018, 9:09:59 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

Saad, since this is a small amount of code and it is really best to customize this code for fabric-ca, I recommend not vendoring but just copy-n-paste.  As long as you copy the LICENSE also, I believe it is fine but you should verify.  See the 1st answer here for example: https://softwareengineering.stackexchange.com/questions/234437/bsd-mit-license-changes-when-copy-pasting-a-function-from-another-bsd-mit-licens</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 5/10/2018, 4:39:05 PM<br><strong>Message</strong>: <pre>Patch Set 3:

> Patch Set 3: Code-Review-1
> 
> Saad, since this is a small amount of code and it is really best to customize this code for fabric-ca, I recommend not vendoring but just copy-n-paste.  As long as you copy the LICENSE also, I believe it is fine but you should verify.  See the 1st answer here for example: https://softwareengineering.stackexchange.com/questions/234437/bsd-mit-license-changes-when-copy-pasting-a-function-from-another-bsd-mit-licens

I'm confused, is the code being vendored modified in any way?</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 5/11/2018, 4:44:20 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

it's unclear to me why we actually need this package in the first place?</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 5/11/2018, 10:46:05 AM<br><strong>Message</strong>: <pre>Patch Set 3:

> Patch Set 3:
> 
> > Patch Set 3: Code-Review-1
> > 
> > Saad, since this is a small amount of code and it is really best to customize this code for fabric-ca, I recommend not vendoring but just copy-n-paste.  As long as you copy the LICENSE also, I believe it is fine but you should verify.  See the 1st answer here for example: https://softwareengineering.stackexchange.com/questions/234437/bsd-mit-license-changes-when-copy-pasting-a-function-from-another-bsd-mit-licens
> 
> I'm confused, is the code being vendored modified in any way?

We wanted to display one thing a different way than how this package displays it, so if we don't vendor and just copy the code we could more easily just modify what we need to change and then display the certificate in the format we want.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 5/11/2018, 10:47:10 AM<br><strong>Message</strong>: <pre>Patch Set 3:

> Patch Set 3: Code-Review-1
> 
> it's unclear to me why we actually need this package in the first place?

I wanted to print the certificates in OpenSSL format, and I found this package that did exactly what I needed so rather than writing duplicate code I thought best to just vendor it.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 5/11/2018, 12:35:15 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2018, 12:35:22 PM<br><strong>Message</strong>: <pre>Patch Set 4: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3026/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2018, 12:37:02 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/67/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2018, 12:37:24 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2958/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2018, 12:38:04 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/313/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2018, 1:20:37 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/3026/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-s390x/3026

https://jenkins.hyperledger.org/job/fabric-ca-rtd-verify-job/67/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-rtd-verify-job/67

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/2958/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-x86_64/2958

https://jenkins.hyperledger.org/job/fabric-ca-verify-end-2-end-x86_64/313/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-verify-end-2-end-x86_64/313</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 5/14/2018, 9:46:16 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Gari, the "fabric-ca-client certificate list" command prints certificate information in the same way that "fabric-ca-client identity list" prints identity information and "fabric-ca-client affiliation list" prints affiliation info.  This is useful for someone who needs to inspect any part of the certificate (issuer, attributes, expiration, etc) without having to write the PEM-encoded certificate to disk and then use openssl to print it.

Chris, the plan was to modify this code so that we print the AKI and serial number fields in the same format expected by the revoke command.  Today, if they print with openssl, they have to convert the fields to a different format to revoke a certificate which is not user-friendly.  Thinking more about this though, instead of updating the format of these fields, we will investigate whether we can make the revoke command accept the openssl format in a backwards compatible way.  If we can, then there would be no need to update the package and we would just vendor it.</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 5/14/2018, 12:07:39 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

We are able enhance revoke to recognize the openssl-formatted AKI and serial, so that will be done under a different change set.  I now approve of vendoring this package.</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 5/14/2018, 1:23:51 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 5/14/2018, 1:23:54 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Gari Singh</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2018, 2:28:55 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-merge-end-2-end-x86_64/42/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-merge-end-2-end-x86_64/42

https://jenkins.hyperledger.org/job/fabric-ca-merge-x86_64/457/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-merge-x86_64/457

https://jenkins.hyperledger.org/job/fabric-ca-merge-s390x/455/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-ca-merge-s390x/455</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 5/8/2018, 3:18:17 PM<br><strong>UnmergedRevision</strong>: [e22ff68aae8a56cf411ea2683180812b52f1fde5](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/e22ff68aae8a56cf411ea2683180812b52f1fde5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/8/2018, 3:45:36 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 5/9/2018, 10:05:43 AM<br><strong>UnmergedRevision</strong>: [133edd656649bb0e044278f7590d85ff2bb15031](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/133edd656649bb0e044278f7590d85ff2bb15031)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2018, 10:51:08 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 5/9/2018, 11:39:50 AM<br><strong>UnmergedRevision</strong>: [439f9b128d8bfd60afa63e44f042d528475cbf76](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/439f9b128d8bfd60afa63e44f042d528475cbf76)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2018, 12:26:40 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 5/10/2018, 9:09:59 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 5/11/2018, 4:44:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 5/11/2018, 12:35:15 PM<br><strong>GitHubMergedRevision</strong>: [f616de8cdb13e2bb848203e94fbba9ac479ef3d7](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f616de8cdb13e2bb848203e94fbba9ac479ef3d7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/11/2018, 1:20:37 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 5/14/2018, 12:07:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 5/14/2018, 1:23:51 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Gari Singh<br><strong>Merged</strong>: 5/14/2018, 1:23:54 PM<br><br></blockquote>