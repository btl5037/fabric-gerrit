<strong>Project</strong>: fabric-ca<br><strong>Branch</strong>: master<br><strong>ID</strong>: 7803<br><strong>Subject</strong>: [FAB-2896] Directing traffic to specific CAs<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 4/6/2017, 11:18:00 AM<br><strong>LastUpdated</strong>: 4/27/2017, 11:23:40 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-2896] Directing traffic to specific CAs

This change-set is in a series of change-sets
to support multiple CAs. Traffic can now be directed
to a specific CA by providing the name of the CA in
the request to the server.

When using CA as intermediate you may specify
the parent server URL along with the name of
the CA to connect to with parent server.

Please note, a good chunk of lines come from
adding files in testdata folder to support
test cases where reading from config files
is required.

Next change-set will add support for cacount option
that will generate x number of default CAs.

Change-Id: I99ce151b46b1367d7f2e0fa1bf04f16f67145ff7
Signed-off-by: Saad Karim <skarim@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/6/2017, 11:18:00 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 11:18:07 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/512/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 11:21:01 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/508/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 11:32:36 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/516/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/508/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/512/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/6/2017, 4:42:21 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 4:42:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/525/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 4:42:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/521/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 4:43:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/517/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 4:55:04 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/525/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/517/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/521/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/6/2017, 5:38:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 5:38:22 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/523/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 5:39:18 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/519/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/6/2017, 5:54:55 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/527/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/519/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/523/ : SUCCESS</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 4/8/2017, 4:36:50 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

(4 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/12/2017, 9:44:50 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(4 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/12/2017, 9:45:26 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 9:45:35 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/576/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 9:47:05 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/572/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 10:08:51 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/580/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 10:14:50 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/580/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/572/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/576/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/20/2017, 1:10:56 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2017, 1:11:06 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/632/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2017, 1:14:41 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/636/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2017, 1:16:01 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/628/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2017, 1:52:41 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/636/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/628/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/632/ : SUCCESS</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 4/20/2017, 2:54:57 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review-1

(24 comments)</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 4/21/2017, 11:31:23 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(1 comment)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2017, 1:08:12 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 1:08:21 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/649/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 1:11:40 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/641/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 1:33:00 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/649/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/641/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/645/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2017, 1:58:38 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(20 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2017, 2:28:49 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Resolving merge conflict...</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2017, 2:29:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 2:32:41 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/647/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 2:33:30 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/651/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 2:34:55 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/655/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 2:46:36 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/655/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/647/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/651/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2017, 3:03:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:03:59 PM<br><strong>Message</strong>: <pre>Patch Set 8: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/660/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:07:50 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/652/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:15:42 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/656/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:29:08 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/652/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/660/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/656/ : SUCCESS</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2017, 3:34:18 PM<br><strong>Message</strong>: <pre>Patch Set 8:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:34:29 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/658/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:34:29 PM<br><strong>Message</strong>: <pre>Patch Set 8: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/662/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:38:55 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/654/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 3:53:58 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/662/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/654/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/658/ : SUCCESS</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 4/21/2017, 5:09:02 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+1

(2 comments)

A couple of minor suggestions, but +1</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 4/25/2017, 4:26:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 4:26:59 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/685/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 4:28:09 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/677/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 4:46:05 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-ca-verify-s390x/685/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-ppc64le/681/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-ca-verify-x86_64/677/ : SUCCESS</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 4/26/2017, 11:09:15 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+1</pre><strong>Reviewer</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Reviewed</strong>: 4/26/2017, 3:57:04 PM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 4/27/2017, 11:23:37 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 4/27/2017, 11:23:40 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Christopher Ferris</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/6/2017, 11:18:00 AM<br><strong>UnmergedRevision</strong>: [a3bcf559462416b4ef2b25be9f71b8b7b554b141](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/a3bcf559462416b4ef2b25be9f71b8b7b554b141)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/6/2017, 11:32:36 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/6/2017, 4:42:21 PM<br><strong>UnmergedRevision</strong>: [91182e8f89887836108225b9f77a1bcbfd8fc28e](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/91182e8f89887836108225b9f77a1bcbfd8fc28e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/6/2017, 4:55:04 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/6/2017, 5:38:14 PM<br><strong>UnmergedRevision</strong>: [fcb149fae096cc9a1f416636b8c8121806c0b3ba](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/fcb149fae096cc9a1f416636b8c8121806c0b3ba)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/6/2017, 5:54:55 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 4/8/2017, 4:36:50 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/identity.go#L66](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/identity.go#L66)<br><strong>Comment</strong>: <pre>1) I guess log.Info rather than log.Debug is OK, but just thinking
2) Change "client requested" to "client request" here and in all other places
3) Let's define a constant called "defaultCAName" and use that everywhere instead of repeating "ca" everywhere</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/identity.go#L66](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/identity.go#L66)<br><strong>Comment</strong>: <pre>1) Yeah, I felt like this is information that we can expose at the Info level.
So that way if no caname is specified, a user knows what CA the request was sent to.
2) Done
3) Have one created already. Missed using it here.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/server.go#L306](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/server.go#L306)<br><strong>Comment</strong>: <pre>Unless I'm missing something, this will break everyone because we no longer recognize any of the previous endpoints (e.g. "/enroll" without a CA.  

I thought we had decided to keep this simple and just support routing based on the CAName in the request body.  I think that is best.  Let's just have one way of routing (by CAName in the request body) and not change the URLs at all, well except for changing "GET /info" to "POST /cainfo" because there are no SDKs using the "GET /info" endpoint yet.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/server.go#L306](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/server.go#L306)<br><strong>Comment</strong>: <pre>Ok. I thought we had discussed having different URLs, must have misunderstood. Will change.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L72](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/serverauth.go#L72)<br><strong>Comment</strong>: <pre>ah, there is a constant already.
I also wonder if it would have been easier/safer to just define
   DefaultCAName = ""
That is, use the empty string as the default CA name.
Just a thought</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L72](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/serverauth.go#L72)<br><strong>Comment</strong>: <pre>I thought we always wanted there to be CA name</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverenroll.go#L42](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/serverenroll.go#L42)<br><strong>Comment</strong>: <pre>If we route to the proper CA based on the request body, there is no need to pass the caName to handlers.  That is, the handlers remain per-server rather than per-CA, so none of these changes should be required.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverenroll.go#L42](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/fcb149fae096cc9a1f416636b8c8121806c0b3ba/lib/serverenroll.go#L42)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/12/2017, 9:45:26 AM<br><strong>UnmergedRevision</strong>: [2a77c600cc72a1eef900f14934dc873de89f7110](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/2a77c600cc72a1eef900f14934dc873de89f7110)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/12/2017, 10:14:50 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/20/2017, 1:10:56 PM<br><strong>UnmergedRevision</strong>: [f42c7b907a3e7b436b8629d06b17bdc7c6660386](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/f42c7b907a3e7b436b8629d06b17bdc7c6660386)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2017, 1:52:41 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 4/20/2017, 2:54:57 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [api/net.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/api/net.go#L48)<br><strong>Comment</strong>: <pre>We need a CAName in this also.
We don't need it in any others because the CAName is in the included structure from client.go.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [api/net.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/api/net.go#L48)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/enroll.go#L72](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/cmd/fabric-ca-client/enroll.go#L72)<br><strong>Comment</strong>: <pre>Let's make CAName part of the client config, so wouldn't be passed as extra parm here</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [cmd/fabric-ca-client/enroll.go#L72](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/cmd/fabric-ca-client/enroll.go#L72)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/client.go#L168](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/client.go#L168)<br><strong>Comment</strong>: <pre>We should just the request w/o a CA name from the client and it should choose the default name on the server.  The default name on the server may not be "DefaultCAName".  In fact, the default CA name is the domain name by default.
Anyway, let the server decide the default CA name.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/client.go#L407](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/client.go#L407)<br><strong>Comment</strong>: <pre>Question: Why return the response body when there is a 404? 
Comment: It would be generally good to add comments so anyone looking at the code would know why when we do things that aren't obvious ... at least not to me :-)</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/client.go#L407](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/client.go#L407)<br><strong>Comment</strong>: <pre>Indeed, now I can't recall why I needed to do this. But, I encountered a scenario where I was getting an unmarshalling related error. I don't remember how I reproduced it. I will remove this for now as it is not directly related. If I can reproduce again, I will fix in separate change set.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/client_test.go#L0](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/client_test.go#L0)<br><strong>Comment</strong>: <pre>Are there any non-default CA tests?</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/identity.go#L67](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L67)<br><strong>Comment</strong>: <pre>ditto - handle default CA on server</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/identity.go#L67](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L67)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/identity.go#L97](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L97)<br><strong>Comment</strong>: <pre>ditto - handle default CA on server</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/identity.go#L97](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L97)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/identity.go#L134](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L134)<br><strong>Comment</strong>: <pre>ditto - handle default CA on server</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/identity.go#L134](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L134)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/identity.go#L153](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L153)<br><strong>Comment</strong>: <pre>ditto - handle default CA on server</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/identity.go#L153](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/identity.go#L153)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/server.go#L260](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/server.go#L260)<br><strong>Comment</strong>: <pre>We shouldn't need to check this twice, right?  Here and below.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/server.go#L260](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/server.go#L260)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/server.go#L275](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/server.go#L275)<br><strong>Comment</strong>: <pre>I don't think we should error out here.  Let's create a utility function in lib to get the default CA name based on the domain name (or hostname if no dots).  It can be used here and also in cmd/fabric-ca-server</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/server.go#L275](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/server.go#L275)<br><strong>Comment</strong>: <pre>My bad.  I thought this was in Start (didn't expand view), but since it is in loadCA, is absolutely correct.</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L54](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L54)<br><strong>Comment</strong>: <pre>Delete this.  There is one handler per server endpoint shared by all CAs, so this will be overwritten by each request and cause concurrency issues.  We need to pass the CA name along with the request.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L54](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L54)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L96](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L96)<br><strong>Comment</strong>: <pre>if req.CAName = "" {
   req.CAName = ah.server.CA.Config.CA.Name
}</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L96](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L96)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L100](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L100)<br><strong>Comment</strong>: <pre>CA '%s' does not exist</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L100](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L100)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L101](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L101)<br><strong>Comment</strong>: <pre>I recommend storing the CA name associated with the request in a request header:
   r.Header.Set(caHdrName, caName)
and then get the name in the other handlers by:
   r.Header.Get(caHdrName)</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverauth.go#L101](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverauth.go#L101)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverenroll.go#L57](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverenroll.go#L57)<br><strong>Comment</strong>: <pre>delete ... one instance of this used by multiple requests for different CAs, so is a concurrency problem</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverenroll.go#L57](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverenroll.go#L57)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverenroll.go#L103](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverenroll.go#L103)<br><strong>Comment</strong>: <pre>pull from HTTP header</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverenroll.go#L103](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverenroll.go#L103)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverinfo.go#L71](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverinfo.go#L71)<br><strong>Comment</strong>: <pre>just get ca name from header</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverinfo.go#L71](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverinfo.go#L71)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverregister.go#L38](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverregister.go#L38)<br><strong>Comment</strong>: <pre>ditto ... delete</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverregister.go#L38](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverregister.go#L38)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverregister.go#L70](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverregister.go#L70)<br><strong>Comment</strong>: <pre>get from header</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverregister.go#L70](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverregister.go#L70)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/serverrevoke.go#L45](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverrevoke.go#L45)<br><strong>Comment</strong>: <pre>ditto ... delete</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/serverrevoke.go#L45](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/serverrevoke.go#L45)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/servertcert.go#L39](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/servertcert.go#L39)<br><strong>Comment</strong>: <pre>ditto ... delete</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/servertcert.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/servertcert.go#L77)<br><strong>Comment</strong>: <pre>get from header</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [lib/servertcert.go#L77](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/lib/servertcert.go#L77)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [testdata/ca/intermediateca/ca2/fabric-ca-server-config.yaml#L64](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/testdata/ca/intermediateca/ca2/fabric-ca-server-config.yaml#L64)<br><strong>Comment</strong>: <pre>This shouldn't be needed and would prefer that you guarantee that the DBs from ca1 and ca2 don't overlap.  They should be in the same directory as the ca specific file and so should not overlap.  Not sure if your test case validates the location of the DB or not, but would be good to do.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [testdata/ca/intermediateca/ca2/fabric-ca-server-config.yaml#L64](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/f42c7b907a3e7b436b8629d06b17bdc7c6660386/testdata/ca/intermediateca/ca2/fabric-ca-server-config.yaml#L64)<br><strong>Comment</strong>: <pre>I do validate location of DB, this is more to test the ability to override default CA configuration using a custom CA config file.</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/21/2017, 1:08:12 PM<br><strong>UnmergedRevision</strong>: [bf0e0722db9dc9aa8ff6eb7923409e306e39886f](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/bf0e0722db9dc9aa8ff6eb7923409e306e39886f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 1:33:00 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/21/2017, 2:29:24 PM<br><strong>UnmergedRevision</strong>: [44fa153a0b8d6133a87d0d47e95c1b866dbe6671](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/44fa153a0b8d6133a87d0d47e95c1b866dbe6671)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 2:46:36 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/21/2017, 3:03:48 PM<br><strong>UnmergedRevision</strong>: [9abea11906567c6e50fbfcbbec719d16eef2500c](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/9abea11906567c6e50fbfcbbec719d16eef2500c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 3:53:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 4/21/2017, 5:09:02 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/client.go#L177](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9abea11906567c6e50fbfcbbec719d16eef2500c/lib/client.go#L177)<br><strong>Comment</strong>: <pre>2 small things:
1) Pass by reference by getting address of struct
2) A style thing, but seems to generally init within constructor as follows:

	reqNet := &api.EnrollmentRequestNet{
		CAName: req.CAName,
                Hosts: signer.SplitHosts(req.Hosts),
                Request: string(csrPEM),
                Profile: req.Profile,
                Label: req.Label,
	}</pre><strong>Commenter</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>CommentLine</strong>: [lib/identity.go#L119](https://github.com/hyperledger-gerrit-archive/fabric-ca/blob/9abea11906567c6e50fbfcbbec719d16eef2500c/lib/identity.go#L119)<br><strong>Comment</strong>: <pre>Same as previous comment</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 4/25/2017, 4:26:51 PM<br><strong>GitHubMergedRevision</strong>: [c1319448d0a056682b01dfe3bcc11aced9e9fd64](https://github.com/hyperledger-gerrit-archive/fabric-ca/commit/c1319448d0a056682b01dfe3bcc11aced9e9fd64)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 4/27/2017, 11:23:37 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Christopher Ferris<br><strong>Merged</strong>: 4/27/2017, 11:23:40 AM<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/25/2017, 4:46:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Keith Smith - keithsmithlfid@gmail.com<br><strong>Approved</strong>: 4/26/2017, 3:57:04 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>