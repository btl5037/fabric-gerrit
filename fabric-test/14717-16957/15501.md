<strong>Project</strong>: fabric-test<br><strong>Branch</strong>: master<br><strong>ID</strong>: 15501<br><strong>Subject</strong>: [FAB-6997] Automation scripts for OTE testcases<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/15/2017, 4:40:04 PM<br><strong>LastUpdated</strong>: 11/17/2017, 10:55:14 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-6997] Automation scripts for OTE testcases

Automation scripts for running orderer performance tests (v1.1)
using OTE. Submitting a basic testcase (FAB-6996) to OTE and
fixing README.md and ote.go.

Change-Id: Idea548396906893b4667a5a41902cb58b7f16af4
Signed-off-by: Surya <suryalnvs@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/15/2017, 4:40:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2017, 4:42:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/502/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2017, 6:02:16 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/502/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/502</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2017, 9:25:54 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(9 comments)</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2017, 8:40:19 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(6 comments)

I added the TPS calculations and reporting, and we need to set the result string since it will be standard for all the ote tests.</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 12:41:44 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 12:43:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 12:45:13 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 12:47:12 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:47:28 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/507/</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 12:48:34 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(11 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 12:49:40 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/507/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/507/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/507</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 2:18:21 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 2:22:41 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/509/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 3:40:03 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/509/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/509</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2017, 8:21:10 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

(2 comments)

This should finish it!</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 9:19:11 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 9:20:14 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/16/2017, 9:22:18 PM<br><strong>Message</strong>: <pre>Patch Set 8: Patch Set 7 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 9:22:49 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/513/</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2017, 10:15:47 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review-1

(3 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2017, 10:45:22 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/513/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/513</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/17/2017, 9:14:31 AM<br><strong>Message</strong>: <pre>Patch Set 8:

(3 comments)</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/17/2017, 9:17:19 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:19:07 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/514/</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/17/2017, 9:21:06 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10: Patch Set 9 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:21:22 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/516/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:21:22 AM<br><strong>Message</strong>: <pre>Patch Set 9: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/514/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/514/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/514</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:23:15 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/516/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/516/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/516</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/17/2017, 9:23:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:23:23 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/517/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:24:49 AM<br><strong>Message</strong>: <pre>Patch Set 11: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/517/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/517/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/517</pre><strong>Reviewer</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Reviewed</strong>: 11/17/2017, 9:42:17 AM<br><strong>Message</strong>: <pre>Patch Set 12: Patch Set 11 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 9:44:38 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/519/</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2017, 10:01:21 AM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1 Code-Review+2</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 11/17/2017, 10:02:31 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Scott Zwierzynski</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 10:03:08 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/99/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/17/2017, 10:55:14 AM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/519/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/519</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/15/2017, 4:40:04 PM<br><strong>UnmergedRevision</strong>: [e85aa44205a15e31f7cb59bec08528b6c644d6ac](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/e85aa44205a15e31f7cb59bec08528b6c644d6ac)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/15/2017, 6:02:16 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 11/15/2017, 9:25:54 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/runDailyTestSuite.sh#L32](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/runDailyTestSuite.sh#L32)<br><strong>Comment</strong>: <pre>I apologize for telling you something different, earlier, but I just realized all the xml output files are prefixed with "results_". So we should do that too. Also, I got confused finding the correct test scripts names. Please replace this line with the following:

py.test -v --junitxml results_orderer_ote.xml orderer_ote.py

and accordingly rename file tests_ote.py to orderer_ote.py</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/runDailyTestSuite.sh#L32](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/runDailyTestSuite.sh#L32)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L0](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L0)<br><strong>Comment</strong>: <pre>rename to orderer_ote.py</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L0](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L0)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L10](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L10)<br><strong>Comment</strong>: <pre>insert line:
TEST_PASS_STRING = "RESULT=PASS"</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L10](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L10)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L21](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L21)<br><strong>Comment</strong>: <pre>The pass/fail goal of this test is simply to send and receive transactions where appropriate. The TPS is a bonus. I would say it more directly and emphasize it this way (what do you think - does it read well to you?):

Using one broadcast client thread per channel per orderer,
send 30000 transactions through the ordering service, and
verify delivery using an equal number of deliver clients.
Refer to the logs to also see the TPS throughput rate.</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L21](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L21)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L23](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L23)<br><strong>Comment</strong>: <pre>In a cluttered directory, it would be better to name this with "ote" prefix. The fact that it is a .log file implies it is output, so... let's try this:
"ote_FAB-6996.log"</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L23](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L23)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L24](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L24)<br><strong>Comment</strong>: <pre>This is actually fine, but I wanted to point out that something is not right, and I am not sure where the problem is. I notice that, whenever I retype this to say "./runote.sh -t" without a testcase name or someting like ".runote.sh -hello", then there is never anything printed in "result" and thus the log file is empty. I thought we would see the error and the printHelp message in there. However, I noticed the errors are visible on the screen when I run it here or when I execute runote.sh on the command line, so it is enough for debugging and test development. Therefore, it is not a big deal, and actually is OK to just ignore this comment (unless it bugs you). 

But, since you have gone to the trouble to catch any errors from the shell script, I thought I should tell you it is not working!</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L24](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L24)<br><strong>Comment</strong>: <pre>Typically, We are writing the errors to standard out but not to the log file as mentioned in the stderr=subprocess.STDOUT</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L29](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L29)<br><strong>Comment</strong>: <pre>TEST_PASS_STRING</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [regression/daily/tests_ote.py#L29](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/regression/daily/tests_ote.py#L29)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L747](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L747)<br><strong>Comment</strong>: <pre>, testDuration int64)</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L881](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L881)<br><strong>Comment</strong>: <pre>insert:
        var overallTPS int64 = 0
        if testDuration > 0 {
                overallTPS = numTxToSendTotal / testDuration
                logger(fmt.Sprintf("THROUGHPUT TPS = %d , %s using batchSize=%d numChannels=%d numOrdsInNtwk=%d ordType=%s numKafkaBrokers=%d", overallTPS, testname, batchSize, numChannels, numOrdsInNtwk, ordererType, numKBrokers))
                logger(fmt.Sprintf("TPS - Overall Transactions per second %9d", overallTPS))
                logger(fmt.Sprintf("TPS per channel                       %9d", numTxToSendTotal / int64(numChannels) / testDuration))
                logger(fmt.Sprintf("TPS per orderer                       %9d", numTxToSendTotal / int64(numOrdsInNtwk) / testDuration))
                logger(fmt.Sprintf("BPS - Overall Blocks per second       %9d", totalBlockRecv[0] / testDuration))
                logger(fmt.Sprintf("BPS per channel                       %9d", totalBlockRecv[0] / int64(numChannels) / testDuration))
                logger(fmt.Sprintf("BPS per orderer                       %9d", totalBlockRecv[0] / int64(numOrdsInNtwk) / testDuration))
        }</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L881](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L881)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L883](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L883)<br><strong>Comment</strong>: <pre>insert:
 TPS=%d</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L883](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L883)<br><strong>Comment</strong>: <pre>insert:
, overallTPS</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L883](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L883)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L883](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/ote.go#L883)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/runote.sh#L22](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/runote.sh#L22)<br><strong>Comment</strong>: <pre>Replace all tabs in this file, and any trailing whitespaces</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/runote.sh#L22](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/runote.sh#L22)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/runote.sh#L27](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/runote.sh#L27)<br><strong>Comment</strong>: <pre>no need to try to print the optarg here; it is not working. Also the getopts prints the relevant error message already, so here we can just echo "Invalid option" and then call printHelp.
We need to keep this case because, although getopts flags errors, it does not cause the script to exit, and we of course want to exit when any error occurs.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/runote.sh#L27](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/runote.sh#L27)<br><strong>Comment</strong>: <pre>I am not sure what this redirection does for us, based on how we are executing it, I see no effect. I think we can delete it.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/runote.sh#L33](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/e85aa44205a15e31f7cb59bec08528b6c644d6ac/tools/OTE/runote.sh#L33)<br><strong>Comment</strong>: <pre>when getopts runs, it catches the error where -t needs an argument, so we do not need this case.

(The prior case is needed only to catch and call printHelp to exit upon errors.)</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 12:41:44 PM<br><strong>UnmergedRevision</strong>: [3a110e9e6744500fea641935bd68e374b31e1205](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/3a110e9e6744500fea641935bd68e374b31e1205)<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 12:43:42 PM<br><strong>UnmergedRevision</strong>: [525b58dec2adca1d5ba25d792963f0bea3efb21e](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/525b58dec2adca1d5ba25d792963f0bea3efb21e)<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 12:45:13 PM<br><strong>UnmergedRevision</strong>: [286f2a60a8ab4e4ce732ae0a2643583941c4c579](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/286f2a60a8ab4e4ce732ae0a2643583941c4c579)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 12:47:12 PM<br><strong>UnmergedRevision</strong>: [f12b392ac23d11b9c55d3c74dda3a9089a0cbb62](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/f12b392ac23d11b9c55d3c74dda3a9089a0cbb62)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2017, 12:49:40 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 2:18:21 PM<br><strong>UnmergedRevision</strong>: [c495404f3a82d2fcb8ba124869f05a504e97bd39](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/c495404f3a82d2fcb8ba124869f05a504e97bd39)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2017, 3:40:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 11/16/2017, 8:21:10 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L884](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c495404f3a82d2fcb8ba124869f05a504e97bd39/tools/OTE/ote.go#L884)<br><strong>Comment</strong>: <pre>logger(fmt.Sprintf(" TOTAL TIME (send first --> receive last) = %d", testDuration))</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L884](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c495404f3a82d2fcb8ba124869f05a504e97bd39/tools/OTE/ote.go#L884)<br><strong>Comment</strong>: <pre>added this line as a debug line to see what value is getting into testDuration, will remove this.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1304](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c495404f3a82d2fcb8ba124869f05a504e97bd39/tools/OTE/ote.go#L1304)<br><strong>Comment</strong>: <pre>do not add waitSecs. That time is already included within recoveryDuration.</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1304](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c495404f3a82d2fcb8ba124869f05a504e97bd39/tools/OTE/ote.go#L1304)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 9:19:11 PM<br><strong>UnmergedRevision</strong>: [3fe6f46b19e55d4602bb63be88cc69af87aebc24](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/3fe6f46b19e55d4602bb63be88cc69af87aebc24)<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/16/2017, 9:22:18 PM<br><strong>UnmergedRevision</strong>: [6a4392c968f8de7ee214f8137cd1de6ef6566ebe](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/6a4392c968f8de7ee214f8137cd1de6ef6566ebe)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2017, 10:45:22 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 11/16/2017, 10:15:47 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1290](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/6a4392c968f8de7ee214f8137cd1de6ef6566ebe/tools/OTE/ote.go#L1290)<br><strong>Comment</strong>: <pre>delete comment line</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1290](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/6a4392c968f8de7ee214f8137cd1de6ef6566ebe/tools/OTE/ote.go#L1290)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1291](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/6a4392c968f8de7ee214f8137cd1de6ef6566ebe/tools/OTE/ote.go#L1291)<br><strong>Comment</strong>: <pre>no need for this semicolon</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1291](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/6a4392c968f8de7ee214f8137cd1de6ef6566ebe/tools/OTE/ote.go#L1291)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1303](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/6a4392c968f8de7ee214f8137cd1de6ef6566ebe/tools/OTE/ote.go#L1303)<br><strong>Comment</strong>: <pre>:= sendDuration + recoveryDuration - idleCount

This has been bothering me. We need to SUBTRACT idleCouunt, so we discount any extra time we waited without receiving another message. (Scenario: we lost a TX, and never received all of them and waited for no reason until batchTimeout+30.) 

Note: idleCount will be zero if we waited 10 extra secs for the batchtimeout to trigger the last block, and finally received a message which made our sendTotal==recvTotal. Of course, in that scenario, our TPS would include those 10 secs and therefore look lower than expected, but that's just the way it is.</pre><strong>Commenter</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>CommentLine</strong>: [tools/OTE/ote.go#L1303](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/6a4392c968f8de7ee214f8137cd1de6ef6566ebe/tools/OTE/ote.go#L1303)<br><strong>Comment</strong>: <pre>Initially I thought the same and had waitSecs here. Now it makes sense to have idleCount here.</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/17/2017, 9:17:19 AM<br><strong>UnmergedRevision</strong>: [b7c695456502af2ebe383ca5a26ee6e0f7f6783a](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/b7c695456502af2ebe383ca5a26ee6e0f7f6783a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2017, 9:21:22 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/17/2017, 9:21:06 AM<br><strong>UnmergedRevision</strong>: [9ba783ab40c1bdd209eb9f429967ff78aefa0271](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/9ba783ab40c1bdd209eb9f429967ff78aefa0271)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2017, 9:23:15 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/17/2017, 9:23:17 AM<br><strong>UnmergedRevision</strong>: [54cf1724ecb40aeaeb4712baf59c5cf1d402c864](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/54cf1724ecb40aeaeb4712baf59c5cf1d402c864)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2017, 9:24:49 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Uploader</strong>: Naga Venkata Sai Surya Teja Lanka - suryalnvs@gmail.com<br><strong>Created</strong>: 11/17/2017, 9:42:17 AM<br><strong>GitHubMergedRevision</strong>: [e3a512b5f4fde2663d7d6050f0bc1ff1b7bc93b0](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/e3a512b5f4fde2663d7d6050f0bc1ff1b7bc93b0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/17/2017, 10:55:14 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 11/17/2017, 10:01:21 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Scott Zwierzynski<br><strong>Merged</strong>: 11/17/2017, 10:02:31 AM<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 11/17/2017, 10:01:21 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>