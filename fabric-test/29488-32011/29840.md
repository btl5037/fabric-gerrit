<strong>Project</strong>: fabric-test<br><strong>Branch</strong>: master<br><strong>ID</strong>: 29840<br><strong>Subject</strong>: [FAB-14046] automation of orderer onboarding<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/5/2019, 11:04:15 AM<br><strong>LastUpdated</strong>: 3/13/2019, 5:06:23 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-14046] automation of orderer onboarding

Automation script for onboarding and removing an orderer

Change-Id: I512408990bc34161a4d4c7c17da5cb86c527ac02
Signed-off-by: bharadwajambati1 <bharadwaj.ambati1@ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 3/5/2019, 11:04:15 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/5/2019, 11:07:18 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2616/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/5/2019, 11:51:01 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2616/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/2616</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 8:48:20 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 3/8/2019, 2:34:44 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/8/2019, 2:40:45 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2629/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/8/2019, 3:22:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2629/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/2629</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 3/9/2019, 2:00:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(9 comments)</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 3/11/2019, 4:09:31 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Commit message was updated.</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 3/11/2019, 4:10:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Commit message was updated.</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 3/11/2019, 4:12:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/11/2019, 4:16:16 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2631/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/11/2019, 4:56:52 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2631/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/2631</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 3/11/2019, 5:47:50 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review-1

(2 comments)</pre><strong>Reviewer</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 4:04:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 4:09:01 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2651/</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 4:22:00 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1 Code-Review+2</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 4:22:04 PM<br><strong>Message</strong>: <pre>Patch Set 7: Patch Set 6 was rebased</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 4:22:14 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Scott Zwierzynski</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 4:24:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/2652/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 4:25:31 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/606/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 5:06:23 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/606/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-merge-x86_64/606</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 3/5/2019, 11:04:15 AM<br><strong>UnmergedRevision</strong>: [44c5d9477f40624234c5c586afa09d36290ee597](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/44c5d9477f40624234c5c586afa09d36290ee597)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/5/2019, 11:51:01 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/7/2019, 8:48:20 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L89](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/44c5d9477f40624234c5c586afa09d36290ee597/tools/PTE/CITest/scenarios/PTECIutils.sh#L89)<br><strong>Comment</strong>: <pre>There is a lot of code here being added, and much of it has nothing to do with this changeset. It looks like you got mixed up with your branching or rebasing, and now a lot of other PTE code appears here (which should be submitted with another PTE update).</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 3/8/2019, 2:34:44 PM<br><strong>UnmergedRevision</strong>: [c421b420812692a0a39b10c6ada109c4b0829f8d](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/c421b420812692a0a39b10c6ada109c4b0829f8d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/8/2019, 3:22:11 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/9/2019, 2:00:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L90](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L90)<br><strong>Comment</strong>: <pre>rename AddOrderer</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L91](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L91)<br><strong>Comment</strong>: <pre>It is not clear what this means. WHAT is supposed to be at this location?
Maybe it would help if we provide an example (line 97).</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L97](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L97)<br><strong>Comment</strong>: <pre>Since we are not also adding another script that calls this function, I think we should provide an actual example. Add something like:

# Example:
#      source PTECIutils.sh
#      AddOrderer  a  b  c  d  e</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L99](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L99)<br><strong>Comment</strong>: <pre>Can we rename this to

AddOrderer</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L112](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L112)<br><strong>Comment</strong>: <pre>SendToOrdererName</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L112](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L112)<br><strong>Comment</strong>: <pre>SendToOrdererIP</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L181](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L181)<br><strong>Comment</strong>: <pre>RemoveOrderer</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L188](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L188)<br><strong>Comment</strong>: <pre>SendToOrdererIP</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L188](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/c421b420812692a0a39b10c6ada109c4b0829f8d/tools/PTE/CITest/scenarios/PTECIutils.sh#L188)<br><strong>Comment</strong>: <pre>SendToOrdererName</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 3/11/2019, 4:09:31 AM<br><strong>UnmergedRevision</strong>: [07f3ce04a8b306b3e76e8a6dab8f86e5a691b7cb](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/07f3ce04a8b306b3e76e8a6dab8f86e5a691b7cb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/8/2019, 3:22:11 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/9/2019, 2:00:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 3/11/2019, 4:10:39 AM<br><strong>UnmergedRevision</strong>: [ea7e6e2708a2f0bed9ea1fb2d4811bcb1a2e0111](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/ea7e6e2708a2f0bed9ea1fb2d4811bcb1a2e0111)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/8/2019, 3:22:11 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/9/2019, 2:00:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 3/11/2019, 4:12:17 AM<br><strong>UnmergedRevision</strong>: [ebea2e1ea37d38325e5580e9b37b4fe79842c45c](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/ebea2e1ea37d38325e5580e9b37b4fe79842c45c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/11/2019, 4:56:52 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/11/2019, 5:47:50 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L91](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/ebea2e1ea37d38325e5580e9b37b4fe79842c45c/tools/PTE/CITest/scenarios/PTECIutils.sh#L91)<br><strong>Comment</strong>: <pre>Change to the following (but please break it up into multiple lines that are not too long):

# $1: RAFT base directory. When run on personal vLaunch, this is the directory (e.g. raft-quality) relative to .../PTE/CITest/scenarios/, or optionally the absolute path. When run on k8s from cello-launcher, this is the directory name (e.g. raft-quality) relative to ~/cello/src/agent/ansible/vars/.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/CITest/scenarios/PTECIutils.sh#L99](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/ebea2e1ea37d38325e5580e9b37b4fe79842c45c/tools/PTE/CITest/scenarios/PTECIutils.sh#L99)<br><strong>Comment</strong>: <pre>change to:

AddOrderer raft-quality testorgchannel1 169.60.99.43 orderer1st-ordererorg1 orderer4th-ordererorg2</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Created</strong>: 3/13/2019, 4:04:00 PM<br><strong>UnmergedRevision</strong>: [3f7151a6a0f109c748c62ca8db727cf9192e3d98](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/3f7151a6a0f109c748c62ca8db727cf9192e3d98)<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/13/2019, 4:22:00 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/13/2019, 4:22:00 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Bharadwaj Ambati - bharadwaj.ambati1@ibm.com<br><strong>Uploader</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Created</strong>: 3/13/2019, 4:22:04 PM<br><strong>GitHubMergedRevision</strong>: [305984ae809aad958d7ea50e11ebec8612d5e558](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/305984ae809aad958d7ea50e11ebec8612d5e558)<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/13/2019, 4:22:00 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Scott Zwierzynski<br><strong>Merged</strong>: 3/13/2019, 4:22:14 PM<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 3/13/2019, 4:22:00 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>