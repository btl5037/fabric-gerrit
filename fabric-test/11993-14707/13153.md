<strong>Project</strong>: fabric-test<br><strong>Branch</strong>: master<br><strong>ID</strong>: 13153<br><strong>Subject</strong>: [FAB-6034] PTE fabric-test repo init<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 9/5/2017, 1:55:08 PM<br><strong>LastUpdated</strong>: 9/8/2017, 2:18:33 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-6034] PTE fabric-test repo init

Change-Id: Icea55465691ce32ee5b92467f405af871fb3135c
Signed-off-by: Dongming <dming@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 9/5/2017, 1:55:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/5/2017, 4:11:23 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(6 comments)

Throughout the file, almost every directory path .../hyperledger/fabric/... that you provide should be changed to say .../hyperledger/fabric-test/fabric/...

And we need to rewrite the entire "Setup" section. PTE is now part of fabric-test, and all the other repositories are submodules inside fabric-test, e.g.:
 fabric-test/fabric
 fabric-test/fabric-ca
 fabric-test/fabric-sdk-node
We will need to change your instructions; instead of saying to go clone other repositories, we must say to update git submodules
Please refer to instructions inside ...fabric-test/README.md

Also, the directory paths of the userInputs/ cna contain examples, but the userInputs for tests and other files may need to change, because I don't think we want all testers to put all tests here under the tools/PTE/ directory. Instead they should be elsewhere. Let's discuss.</pre><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 9/6/2017, 2:47:27 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/7/2017, 12:14:44 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(10 comments)

I added comments mostly for the readme file. 

Do all these scripts work as is? (They look good, but I did not run any tests.)</pre><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 9/7/2017, 3:53:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 10:58:55 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 1:06:24 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 1:52:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 1:54:33 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 1:58:52 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 2:18:14 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Dongming verified, as follows:
+ followed the instructions in the setup section to install sdk-node, then cp PTE into fabric-test/fabric-sdk-node/test
+ used NL to create a network (3 orderers, 3 channels, 6 orgs, 2 peers/org, 3 kafka, 3 zookeepers, 3 ca)
+ then use PTE to create channel, join channel, install chaincode, instantiate chaincode
+ then use PTE driver to do query and invokes successfully
+ used SCFiles and userInputs, as submitted

Next week, he will be making more changes to both NL and PTE so they can be used together more easily with default settings, taking into account that both tools now reside inside fabric-test.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 9/8/2017, 2:18:33 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Scott Zwierzynski</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 9/5/2017, 1:55:08 PM<br><strong>UnmergedRevision</strong>: [37fd52ce3d10538d47c4f604ab3d9e096ea94ef9](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9)<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 9/5/2017, 4:11:23 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L83](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9/tools/PTE/README.md#L83)<br><strong>Comment</strong>: <pre>delete these lines</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L115](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9/tools/PTE/README.md#L115)<br><strong>Comment</strong>: <pre>delete lines</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L122](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9/tools/PTE/README.md#L122)<br><strong>Comment</strong>: <pre>need new example, because alpha2 info is useless</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L131](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9/tools/PTE/README.md#L131)<br><strong>Comment</strong>: <pre>modify line to delete -alpha2</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L143](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9/tools/PTE/README.md#L143)<br><strong>Comment</strong>: <pre>delete lines. PTE is inside fabric-test repository now!</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L649](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/37fd52ce3d10538d47c4f604ab3d9e096ea94ef9/tools/PTE/README.md#L649)<br><strong>Comment</strong>: <pre>Let's remove the -alpha2 and provide an example for v1.0.0</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 9/6/2017, 2:47:27 PM<br><strong>UnmergedRevision</strong>: [2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232)<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 9/7/2017, 12:14:44 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L25](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L25)<br><strong>Comment</strong>: <pre>Can we say a bit more here? Something like the following (or whatever is accurate):
; compares number of transactions sent versus the events received, and validates blockchain contents after last transaction</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L87](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L87)<br><strong>Comment</strong>: <pre>How about we say "Obtain" instead of 'checkout'?
And maybe add the "(Optional)" at the end of this line.
And move the next line 88 "- fabric" down below line 94.
Then this section (3.) will read better because it will consist of this line 87 along with three subsections - one for downloading images, and one for building yourself, and one for stating that you could run PTE against existing network. A little spacing/reformatting might be needed.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L97](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L97)<br><strong>Comment</strong>: <pre>why do you say this (and line 102, below) is optional? If they have chosen this path, to build their own images, then they must make.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L105](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L105)<br><strong>Comment</strong>: <pre>Remove this segment, and this is where we can say:
"Optionally, you may choose to skip this step of obtaining images, if you are planning to run PTE against" ...</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L175](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L175)<br><strong>Comment</strong>: <pre>How to control transaction execution:</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L178](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L178)<br><strong>Comment</strong>: <pre>Are you trying to say this? Is this accurate? Number these.

1. If they are both zero, it runs forever.
2. If runDur is non-zero, then nRequest is ignored.
3. To use non-zero value for nRequest, be sure to set runDur to 0.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/README.md#L500](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/README.md#L500)<br><strong>Comment</strong>: <pre>Append: 
To use this, you must set runDur to zero.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/SCFiles/config-chan1-TLS.json#L77](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/SCFiles/config-chan1-TLS.json#L77)<br><strong>Comment</strong>: <pre>I noticed ordererID is the same for both peer orgs. Is that correct?</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/SCFiles/config-chan1.json#L10](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/SCFiles/config-chan1.json#L10)<br><strong>Comment</strong>: <pre>Is this (grpc instead of grpcs) the only thing different in this non-TLS version from  the TLS file? Is it correct below where we use the tls_cacerts and .../tslcacerts/tlsca.example.com-cert.pem ?</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/PTE/pte_mgr.sh#L4](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/2a8ab6ccf24e3f51a37d33850ff1c6cefc6d8232/tools/PTE/pte_mgr.sh#L4)<br><strong>Comment</strong>: <pre>change to pte_mgr.sh on these 2 lines.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 9/7/2017, 3:53:24 PM<br><strong>UnmergedRevision</strong>: [ee25c842e17fef991c0b1c7d886ba715a58641cc](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/ee25c842e17fef991c0b1c7d886ba715a58641cc)<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 9/8/2017, 10:58:55 AM<br><strong>UnmergedRevision</strong>: [310622410239289cbfe078b34c16530c7655329c](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/310622410239289cbfe078b34c16530c7655329c)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 9/8/2017, 1:52:14 PM<br><strong>GitHubMergedRevision</strong>: [57d13c0fa6709bec319120497f4a87b825c224e0](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/57d13c0fa6709bec319120497f4a87b825c224e0)<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 9/8/2017, 1:54:33 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Scott Zwierzynski<br><strong>Merged</strong>: 9/8/2017, 2:18:33 PM<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 9/8/2017, 1:58:52 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>