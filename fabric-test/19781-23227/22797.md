<strong>Project</strong>: fabric-test<br><strong>Branch</strong>: master<br><strong>ID</strong>: 22797<br><strong>Subject</strong>: [FAB-10554] NL supports v1.2 capability<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 6/5/2018, 3:28:36 PM<br><strong>LastUpdated</strong>: 6/6/2018, 1:27:59 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-10554] NL supports v1.2 capability

Change-Id: I5fde599dc51a42bb668cfe99d159472a8daf5df7
Signed-off-by: Dongming <dming@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 6/5/2018, 3:28:36 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/5/2018, 3:33:03 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/1356/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/5/2018, 5:06:56 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/1356/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/1356</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 6/5/2018, 9:14:15 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(2 comments)

Couple nits. Also, run some tests to make sure you don't break any existing testcases with these changes.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 6/5/2018, 9:17:13 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Reviewed</strong>: 6/6/2018, 10:30:55 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2018, 10:35:44 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/1363/</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 6/6/2018, 11:40:53 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2

(1 comment)

LGTM. The anchor peers (as defined by CORE_PEER_GOSSIP_EXTERNALENDPOINT) are probably not necessary to define in the initial configtx.yml - and certainly we do not need to send config updates to set them.</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 6/6/2018, 11:43:16 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 6/6/2018, 11:43:21 AM<br><strong>Message</strong>: <pre>Patch Set 3: Patch Set 2 was rebased</pre><strong>Reviewer</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Reviewed</strong>: 6/6/2018, 11:43:27 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Scott Zwierzynski</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2018, 11:46:09 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/1364/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2018, 11:47:12 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/313/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2018, 12:57:05 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-verify-x86_64/1364/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-verify-x86_64/1364</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2018, 1:27:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-test-merge-x86_64/313/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-test-merge-x86_64/313</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 6/5/2018, 3:28:36 PM<br><strong>UnmergedRevision</strong>: [7ee016ba23173022aa87b71e958911da6d694772](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/7ee016ba23173022aa87b71e958911da6d694772)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/5/2018, 5:06:56 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 6/5/2018, 9:14:15 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/NL/configtx.yaml-in#L125](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/7ee016ba23173022aa87b71e958911da6d694772/tools/NL/configtx.yaml-in#L125)<br><strong>Comment</strong>: <pre>Are you sure you want majority, instead of ANY? I think using MAJORITY requires multiple admin signatures on any configuration request, whenever you have more than one orderer Org. Do your scripts use multiple orderer orgs, or just one? 

If PTE does not and will not use this anyways, then I can withdraw my question/comment. (I am thinking you might generate your own yaml file including your own policy defns instead of using these defaults.)

Ditto for other policies below.</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/NL/json2yml.js#L1012](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/7ee016ba23173022aa87b71e958911da6d694772/tools/NL/json2yml.js#L1012)<br><strong>Comment</strong>: <pre>If 1013 is correct, then you don't need this line, right?</pre><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/NL/networkLauncher.sh#L318](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/7ee016ba23173022aa87b71e958911da6d694772/tools/NL/networkLauncher.sh#L318)<br><strong>Comment</strong>: <pre>Actually I am a little confused. Why do we have to do this? If we put the V1_2 capability in the config file which is used to bring up the network, then we shouldn't have to do this. Or maybe I don't fully understand everything.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Dongming Hwang - dongming@ibm.com<br><strong>Created</strong>: 6/6/2018, 10:30:55 AM<br><strong>UnmergedRevision</strong>: [7c7355d67d512f4bebc045e0c07302295aad3eb8](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/7c7355d67d512f4bebc045e0c07302295aad3eb8)<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 6/6/2018, 11:40:53 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 6/6/2018, 11:43:16 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>CommentLine</strong>: [tools/NL/networkLauncher.sh#L312](https://github.com/hyperledger-gerrit-archive/fabric-test/blob/7c7355d67d512f4bebc045e0c07302295aad3eb8/tools/NL/networkLauncher.sh#L312)<br><strong>Comment</strong>: <pre>I agree we should comment out this section. It is used in the e2e scripts because they do not expose the IP addresses as external endpoints for a peer in each org upon initialization, and thus create this config update to add anchor peers. This is only needed if you want to set or change the anchor peers, which are useful for peers to communicate BETWEEN organizations. From PTE perspective, we do not really care which peers are anchor peers.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Dongming - dming@us.ibm.com<br><strong>Uploader</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Created</strong>: 6/6/2018, 11:43:21 AM<br><strong>GitHubMergedRevision</strong>: [022c5ef69974d712bf0fb48556f68aca202ed997](https://github.com/hyperledger-gerrit-archive/fabric-test/commit/022c5ef69974d712bf0fb48556f68aca202ed997)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2018, 12:57:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 6/6/2018, 11:40:53 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Scott Zwierzynski<br><strong>Merged</strong>: 6/6/2018, 11:43:27 AM<br><br><strong>Approver</strong>: Scott Zwierzynski - scottz@us.ibm.com<br><strong>Approved</strong>: 6/6/2018, 11:43:16 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote>