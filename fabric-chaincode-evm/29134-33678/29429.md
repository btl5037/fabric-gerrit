<strong>Project</strong>: fabric-chaincode-evm<br><strong>Branch</strong>: master<br><strong>ID</strong>: 29429<br><strong>Subject</strong>: [FAB-14258] getCode doesn't error on empty acct<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/20/2019, 6:13:55 PM<br><strong>LastUpdated</strong>: 3/13/2019, 11:53:40 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-14258] getCode doesn't error on empty acct

 - When getCode is called in the evmcc with a contract address that does
 not exist it does not error and returns empty bytes
 - pull out getCode tests to its own context
 - Add test for malformed address for getCode

Change-Id: If3ea8210ee018d12090239b8253819e4a4915f15
Signed-off-by: Swetha Repakula <srepaku@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 6:13:55 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2019, 6:14:04 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/212/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2019, 6:25:58 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/212/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/212</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:21:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)

I think some copy and paste errors.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:27:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:40:31 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)

confused on how this works.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 8:04:52 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 11:45:19 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)

I feel like it's underconstrained in terms of setup, but it probably isn't it's just outside of my view when reading it.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 12:31:42 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 12:43:04 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 6:24:54 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)

still needs some fix.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/25/2019, 4:03:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/25/2019, 4:03:22 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/226/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/25/2019, 4:04:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/25/2019, 4:14:46 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/226/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/226</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/25/2019, 7:38:45 PM<br><strong>Message</strong>: <pre>Patch Set 3:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/25/2019, 7:38:52 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/229/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/25/2019, 7:51:03 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/229/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/229</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 1:44:49 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)

I'm confused, I'll come back.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 5:05:59 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+1

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 5:12:09 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 9:21:30 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)

I think I understand now.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/8/2019, 12:09:41 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/12/2019, 3:37:48 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2

(2 comments)

seems okay overall.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/13/2019, 11:40:05 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/13/2019, 11:40:08 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jay Guo</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 11:53:40 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-merge-x86_64/38/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-merge-x86_64/38</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/20/2019, 6:13:55 PM<br><strong>UnmergedRevision</strong>: [edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/20/2019, 6:25:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L188](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L188)<br><strong>Comment</strong>: <pre>seems like this should be moved into a context like the others.
for consistency.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L188](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L188)<br><strong>Comment</strong>: <pre>The way its structured here, this test case is the most generic case. If we pulled it out into its own context I am not sure what that context would be other than what it currently is. The other two afterwards are more unique situations which is why I think they require a context. But since there is only one test case for each it is a less clear whether they require a before each.  But in this file we have arranged it so that the before each sets up the arguments that are being passed into the stub, I created separate before each rather than making them into one it.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L188](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L188)<br><strong>Comment</strong>: <pre>ya i guess, it seems like we're always setting the stub get args, so why not collapse it all into an It() for each of these 3 cases, or they should all match by having a context. it's not a blocker, it's just irritating.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L188](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L188)<br><strong>Comment</strong>: <pre>There are no hard and fast rules, which I think also makes this a little more difficult. I try to read the contexts and its into a sentence and do what makes sense. Like every time I say "when" i think of that as a context and anything with an action/result becomes an it. So here the sentence would be something like "when a contract is already deployed, when getCode is invoked, it will return the runtime bytecode of the contract" 

The next two tests require some more "setup" so I create a new context for them.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L188](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L188)<br><strong>Comment</strong>: <pre>I can't see that in the diff by default, so I didn't get that. Should write an emacs mode that collects these up and puts it in the mode line.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>what does this represent?

same as shim.ok below?

oh, it's an address.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>its a random address</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>what ensures that there's nothing backing that address?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>I think since the address is generated from a user address and a sequence number its highly unlikely that the address would be the one suggested here.  Saying that, maybe this test case and the one below should be pulled up into the higher level invoke describe because in that situation no addresses have been created so anything queried does not exist.

I will make that change</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>I understand that it shouldn't match anything, but where shouldn't it match anything? I feel like we need to program something to respond to 00000000, but I'm not sure what, stub.getState?
I guess cause it's empty way up at the top it works? I feel like we should be explicitly setting it to return nil or empty bytes or something, rather than rely on whatever it's set to at the time. It feels much too spooky for me to follow in this context. (not Context, but context, I need a new word for context now?)</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>getState and putstate are basically accessors for the map that is used to imitate the ledger. we can do it so we explicitly say that GetState returns empty response to any address given.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>Actually if we do that, it negates one of the upper contexts that says that a contract has been deployed. I might create CR before this to refactor the tests so we have some better organization.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L192](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L192)<br><strong>Comment</strong>: <pre>it overwrites the getargs in the surrounding context as well. but it would be good for me if there was something that either makes sure the address doesn't exist, or explicitly sets "getState(0000000) returns nil, or whatever it needs to do.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L204](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L204)<br><strong>Comment</strong>: <pre>malformed because not a number?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L204](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L204)<br><strong>Comment</strong>: <pre>yes, also cause it is not in hex</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L207)<br><strong>Comment</strong>: <pre>does error?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L207)<br><strong>Comment</strong>: <pre>yup, copy paste error. good catch.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/edd4285a17c0f3b0cdc2c166641f57ba7fa4e14e/evmcc/evmcc_test.go#L207)<br><strong>Comment</strong>: <pre>still needs fix.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/25/2019, 4:03:14 PM<br><strong>UnmergedRevision</strong>: [08f8b73c4911a407fffd016d18187fcd05548758](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/08f8b73c4911a407fffd016d18187fcd05548758)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/25/2019, 4:14:46 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/25/2019, 4:04:30 PM<br><strong>GitHubMergedRevision</strong>: [8d1c5aebefbb69fd3dd44400e350661f35ec8b97](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/8d1c5aebefbb69fd3dd44400e350661f35ec8b97)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/25/2019, 7:51:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 3/13/2019, 11:40:05 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jay Guo<br><strong>Merged</strong>: 3/13/2019, 11:40:08 PM<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 3/12/2019, 3:37:48 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L142](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L142)<br><strong>Comment</strong>: <pre>shouldn't this be in a context.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L142](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L142)<br><strong>Comment</strong>: <pre>not necessarily, because there is no situation that is specific to this working</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L142](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L142)<br><strong>Comment</strong>: <pre>I don't understand.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L284](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L284)<br><strong>Comment</strong>: <pre>don't we need to stub getstate before this?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L284](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L284)<br><strong>Comment</strong>: <pre>getState is programmed in the BeforeEach at the very top</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L284](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L284)<br><strong>Comment</strong>: <pre>The empty map? I guess those by default return a zero value?

I'd feel more comfortable if we intentionally programmed it to return nothing.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L284](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L284)<br><strong>Comment</strong>: <pre>Why would returning nothing be different from querying an empty map. The empty map is closer to the actual functionality, which is why I like it better.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L284](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L284)<br><strong>Comment</strong>: <pre>I think it could be confusing.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L303](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L303)<br><strong>Comment</strong>: <pre>does this need the simple storage?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc_test.go#L303](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/8d1c5aebefbb69fd3dd44400e350661f35ec8b97/evmcc/evmcc_test.go#L303)<br><strong>Comment</strong>: <pre>the simple storage example is in the tests case above around line 150</pre></blockquote>