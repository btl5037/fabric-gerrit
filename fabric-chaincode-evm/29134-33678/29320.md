<strong>Project</strong>: fabric-chaincode-evm<br><strong>Branch</strong>: master<br><strong>ID</strong>: 29320<br><strong>Subject</strong>: [FAB-14191] Create httpserver in Fab3 constructor<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/14/2019, 11:27:04 PM<br><strong>LastUpdated</strong>: 3/13/2019, 11:44:45 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-14191] Create httpserver in Fab3 constructor

 - This separates the creation of the http server from starting the
 server to listen and serve
 - Shutdown checks for a nil http server before trying to shutdown the
 http server
 - Tests in fab3_test.go are restructured

Change-Id: I9e8754ee4be76d99d0909058bd7212044b151456
Signed-off-by: Swetha Repakula <srepaku@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/14/2019, 11:27:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2019, 11:27:11 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/160/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2019, 11:33:54 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/160/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/160</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/14/2019, 11:36:23 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2019, 11:36:31 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/161/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2019, 11:52:23 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/161/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/161</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 12:37:52 AM<br><strong>Message</strong>: <pre>Patch Set 3: Commit message was updated.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 2:08:51 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(4 comments)

Need to find a better way to diff this before I can ok.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 5:06:30 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 5:12:35 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)

I still don't understand the unstated rules for describe vs context vs whatever.

I see some more than just structural changes.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 5:21:50 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 5:23:05 PM<br><strong>Message</strong>: <pre>Patch Set 3:

The only other change that isn't structural is adding a tests for the corresponding code change which i thought is assumed but if you want it to be more explicit in the commit message I can</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/18/2019, 5:51:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2019, 5:51:14 PM<br><strong>Message</strong>: <pre>Patch Set 4: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/188/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2019, 6:08:53 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/188/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/188</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 2/19/2019, 10:41:17 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/19/2019, 1:37:31 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5: Patch Set 4 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/19/2019, 1:37:41 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/195/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/19/2019, 1:48:39 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/195/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/195</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:14:36 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(5 comments)

found a diff mode that kind of makes less work to read.

still not sure why to use a separate describe.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:21:49 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(5 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:25:36 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(3 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:33:06 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(1 comment)

some of my comments don't look like they were on the right lines. I'm confused by what I wrote.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 7:34:44 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(1 comment)

fixed one. others seem okay, but I'm not 100% sure we have the same diffs to look at.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 12:55:20 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(4 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 4:58:45 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/21/2019, 4:58:52 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/222/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/21/2019, 5:11:29 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/222/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/222</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/28/2019, 5:04:11 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/28/2019, 5:04:22 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/230/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/28/2019, 5:18:40 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/230/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/230</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/5/2019, 1:25:55 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/5/2019, 1:26:03 PM<br><strong>Message</strong>: <pre>Patch Set 8: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/241/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/5/2019, 1:38:46 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/241/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/241</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 4:59:12 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2

(2 comments)

looks good now.

either something clicked in my head, or the diff changed so I understand it now. 

Thanks for your patience. :-)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/13/2019, 11:35:00 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/13/2019, 11:35:04 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jay Guo</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 11:44:45 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-merge-x86_64/37/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-merge-x86_64/37</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/14/2019, 11:27:04 PM<br><strong>UnmergedRevision</strong>: [8c415cdecf248be05f5100ece8a0cdba072be696](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/8c415cdecf248be05f5100ece8a0cdba072be696)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2019, 11:33:54 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/14/2019, 11:36:23 PM<br><strong>UnmergedRevision</strong>: [65e0185a62019260c6c3db629f381d319d233e2a](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/65e0185a62019260c6c3db629f381d319d233e2a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2019, 11:52:23 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/15/2019, 12:37:52 AM<br><strong>UnmergedRevision</strong>: [5fefeb01d4ddeb96385a688a9ace61530fa595f1](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/5fefeb01d4ddeb96385a688a9ace61530fa595f1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2019, 11:52:23 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L13](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1//COMMIT_MSG#L13)<br><strong>Comment</strong>: <pre>hard to review the huge diff. I think it's mostly indentation? 

why shove it all into the same describe?

I don't think the huge diff is worth the minor setup duplication. pull it out into a function?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L13](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1//COMMIT_MSG#L13)<br><strong>Comment</strong>: <pre>The change was for organization not avoiding duplication. The error cases should still be under the fab3 describe block. The new test that was added wasn't going to introduce any.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L13](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1//COMMIT_MSG#L13)<br><strong>Comment</strong>: <pre>wasn't going to introduce any what?

I don't see why they need to be in the same describe block.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L13](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1//COMMIT_MSG#L13)<br><strong>Comment</strong>: <pre>wasn't going to introduce any code duplication.

They are in the same describe block because they are all describing the behavior of fab3.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3.go#L21](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3.go#L21)<br><strong>Comment</strong>: <pre>exposing for the tests?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3.go#L21](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3.go#L21)<br><strong>Comment</strong>: <pre>yes and no. I am okay with changing this so they are back to private. With them being private, there is no real way to say that the HTTPServer is nil. But with it public you can. Test wise it won't change much.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3.go#L21](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3.go#L21)<br><strong>Comment</strong>: <pre>ya, just making sure. Struct doesn't have any documentation, so I wanted to make sure it was for tests, rather than anything else.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3.go#L24](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3.go#L24)<br><strong>Comment</strong>: <pre>any more and we should have a config</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L185](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3_test.go#L185)<br><strong>Comment</strong>: <pre>why get rid of the logging?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L185](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3_test.go#L185)<br><strong>Comment</strong>: <pre>I changed it into a comment</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L209](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3_test.go#L209)<br><strong>Comment</strong>: <pre>this I think is the only new part? 

I don't think this is worth testing, but sure.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L209](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5fefeb01d4ddeb96385a688a9ace61530fa595f1/fab3/fab3_test.go#L209)<br><strong>Comment</strong>: <pre>Yes this is the only new part. The rest of the changes are just moving the test cases into one describe block. 
I specifically am testing for this because of the flakes we have been getting in ci</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/18/2019, 5:51:08 PM<br><strong>UnmergedRevision</strong>: [1c7b47970f9f9af13d9026d5a46891d68038ae81](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/1c7b47970f9f9af13d9026d5a46891d68038ae81)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/18/2019, 6:08:53 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 2/19/2019, 10:41:17 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/19/2019, 1:37:31 PM<br><strong>UnmergedRevision</strong>: [fd7116cbb25d76cf371afb846de2b72893b9d9c3](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/fd7116cbb25d76cf371afb846de2b72893b9d9c3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/19/2019, 1:48:39 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 2/19/2019, 10:41:17 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L168](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L168)<br><strong>Comment</strong>: <pre>the "comment shoudl be fails" should have been here.
not sure why it got bound to L#178 instead of L#168.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L178)<br><strong>Comment</strong>: <pre>comment should be fails?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L178)<br><strong>Comment</strong>: <pre>no the fails part is more what the comment would be in the it.
The context is like setting up the situation. The port that is being requested is already bound to something</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L178)<br><strong>Comment</strong>: <pre>to me it reads as visual noise, especially when it puts the actions out of order.

I realize it's supposed to be "okay, here's the context for all the tests that follow", but when it's one test, I've not yet acquired the skill of seeing 
BEFORE
AFTER
IT.

I see
BIND THE PORT
UNBIND THE PORT
??????</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L178)<br><strong>Comment</strong>: <pre>in general i like to have before each and after each when the setup or the cleanup is more than a couple lines. I think It blocks should be the one action or situation you are testing.  This is how I like to structure my tests cases, but when it's single tests cases its harder to follow that pattern always.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L182](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L182)<br><strong>Comment</strong>: <pre>these comments seem useless from the one context.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L182](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L182)<br><strong>Comment</strong>: <pre>Are you saying you want me to remove the comment? I just converted the By statements into comments because I thought they seemed more useful when looking at the tests but not as output thats printed during test runs.
I am okay with removing them.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L182](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L182)<br><strong>Comment</strong>: <pre>I like debug output, print or remove.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L182](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L182)<br><strong>Comment</strong>: <pre>sure</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L189](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L189)<br><strong>Comment</strong>: <pre>these comments seem useless from the one context.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L189](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L189)<br><strong>Comment</strong>: <pre>Same comment as above.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L198](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L198)<br><strong>Comment</strong>: <pre>why go through the before each + after each + it for one test case? Cant we shove it all in the one it?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L198](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L198)<br><strong>Comment</strong>: <pre>Before each is used to set up what the context describes as the the situation. The after each is more like if the test fails, I want a separation that ensures that the listener is closed.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L198](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L198)<br><strong>Comment</strong>: <pre>after each is like a defer?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L198](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L198)<br><strong>Comment</strong>: <pre>i don't know if the after each is implemented like a defer, but yes after each is called regardless of the outcome of the it unless there is a panic somewhere I think</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L207)<br><strong>Comment</strong>: <pre>why go through the before each + after each + it 
for one test case? Cant we shove it all in the one it?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L207)<br><strong>Comment</strong>: <pre>we can combine it into 

  It("does not error when being shutdown when Fab3 has no HTTP Server")

I thought this format was cleaner and easier to understand. I like to use the before each in a context to set up the context.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L207)<br><strong>Comment</strong>: <pre>I think it's just visual noise when the context is so small.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L207](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/fd7116cbb25d76cf371afb846de2b72893b9d9c3/fab3/fab3_test.go#L207)<br><strong>Comment</strong>: <pre>I will combine the before each and the it. I want to keep the context because of the way it reads.</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/21/2019, 4:58:45 PM<br><strong>UnmergedRevision</strong>: [9bb31cb36852d543ebb6f5e24c258326c0b8474a](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/9bb31cb36852d543ebb6f5e24c258326c0b8474a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/21/2019, 5:11:29 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/28/2019, 5:04:11 PM<br><strong>UnmergedRevision</strong>: [effe4e6eb585d3ebbdd2473752a86c0e0297a821](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/effe4e6eb585d3ebbdd2473752a86c0e0297a821)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/28/2019, 5:18:40 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 3/5/2019, 1:25:55 PM<br><strong>GitHubMergedRevision</strong>: [135fc8e31091b30a798e26d741ceb56ab062e6d5](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/135fc8e31091b30a798e26d741ceb56ab062e6d5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/5/2019, 1:38:46 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 3/13/2019, 11:35:00 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jay Guo<br><strong>Merged</strong>: 3/13/2019, 11:35:04 PM<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 3/7/2019, 4:59:12 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L46](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/135fc8e31091b30a798e26d741ceb56ab062e6d5/fab3/fab3_test.go#L46)<br><strong>Comment</strong>: <pre>from here, we're ready to be started.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/fab3_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/135fc8e31091b30a798e26d741ceb56ab062e6d5/fab3/fab3_test.go#L178)<br><strong>Comment</strong>: <pre>everything above looks good.</pre></blockquote>