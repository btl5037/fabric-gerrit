<strong>Project</strong>: fabric-chaincode-evm<br><strong>Branch</strong>: master<br><strong>ID</strong>: 27321<br><strong>Subject</strong>: [FAB-10789] EVM bytecode events are emitted<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/1/2018, 11:55:32 PM<br><strong>LastUpdated</strong>: 12/16/2018, 9:20:23 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-10789] EVM bytecode events are emitted

 - the events are emitted as a single Fabric event for the transaction
 - When querying getTransactionReceipt, relevant event information will
 also be returned as a log

Change-Id: I4c7590e0e6ca4d7cbed90cea9ed282c324f5c70c
Signed-off-by: Swetha Repakula <srepaku@us.ibm.com>
Signed-off-by: Morgan Bauer <mbauer@us.ibm.com>
Signed-off-by: A V Lakshmy <cs16b101@smail.iitm.ac.in>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Reviewed</strong>: 11/1/2018, 11:55:32 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2018, 11:55:41 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/226/</pre><strong>Reviewer</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Reviewed</strong>: 11/1/2018, 11:58:02 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2018, 11:58:04 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/226/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/226/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/226</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/1/2018, 11:58:11 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/227/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/2/2018, 12:07:00 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/227/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/227</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2018, 2:08:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 2:08:54 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/240/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 2:12:15 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/240/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/240</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2018, 3:23:16 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 3:23:26 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/241/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2018, 3:26:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 3:26:15 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/241/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/241</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 3:26:20 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/242/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 3:34:38 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/242/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/242</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2018, 3:35:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 3:35:11 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/243/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2018, 3:40:03 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/243/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/243</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2018, 1:11:52 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(5 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/12/2018, 3:47:17 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/27/2018, 1:43:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2018, 1:43:23 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/279/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/27/2018, 1:45:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2018, 1:45:58 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/279/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/279</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2018, 1:46:03 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/280/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/27/2018, 1:58:16 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/280/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/280</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 11/28/2018, 7:19:24 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+1

(11 comments)

needs some comments, code looks good. Only nits.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 1:42:34 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)

another suggestion</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 1:52:35 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 2:42:04 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)

I did not expect that response.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 3:26:11 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 5:23:08 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 11/30/2018, 2:46:46 PM<br><strong>Message</strong>: <pre>Patch Set 8:

I have manually verified the event logs show up. 

+2</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 12/3/2018, 4:42:05 AM<br><strong>Message</strong>: <pre>Patch Set 8:

(2 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/3/2018, 2:33:32 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/3/2018, 6:36:15 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/4/2018, 11:16:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/4/2018, 11:16:31 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/307/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/4/2018, 11:29:52 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/307/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/307</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/5/2018, 1:49:10 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 4:00:25 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(3 comments)

since it used to call respPayload directly, I'm going to return it directly, but we'll have to look at the `to` field, because I think it'll return "0x" which is not valid.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 4:05:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/6/2018, 4:05:32 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/324/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/6/2018, 4:20:03 PM<br><strong>Message</strong>: <pre>Patch Set 10: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/324/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/324</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 4:53:29 PM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review+1

(2 comments)

Code looks like its in good shape. Only thing left is to add status and it will be ready</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 9:32:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/6/2018, 9:32:51 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/325/</pre><strong>Reviewer</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Reviewed</strong>: 12/6/2018, 9:35:55 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(2 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 9:38:11 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/6/2018, 9:46:14 PM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/325/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/325</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 10:08:16 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/6/2018, 10:08:26 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/326/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 10:08:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/6/2018, 10:24:09 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/326/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/326</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/6/2018, 11:11:09 PM<br><strong>Message</strong>: <pre>Patch Set 14: Code-Review+2

(1 comment)

I think this has enough content in it.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/7/2018, 1:26:10 AM<br><strong>Message</strong>: <pre>Patch Set 14:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/7/2018, 1:26:18 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/327/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/7/2018, 1:40:16 AM<br><strong>Message</strong>: <pre>Patch Set 14: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/327/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/327</pre><strong>Reviewer</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Reviewed</strong>: 12/7/2018, 8:44:40 PM<br><strong>Message</strong>: <pre>Patch Set 14:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/8/2018, 2:33:43 PM<br><strong>Message</strong>: <pre>Patch Set 14:

(1 comment)</pre><strong>Reviewer</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Reviewed</strong>: 12/8/2018, 8:04:44 PM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2018, 8:04:54 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/328/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2018, 8:19:11 PM<br><strong>Message</strong>: <pre>Patch Set 15: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/328/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/328</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/10/2018, 4:26:37 PM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review+2</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 12/14/2018, 11:24:07 AM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review+1

(3 comments)

some nits</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/14/2018, 11:24:30 AM<br><strong>Message</strong>: <pre>Uploaded patch set 16.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 11:24:38 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/329/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/14/2018, 11:32:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 17.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 11:32:23 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/330/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 11:32:24 AM<br><strong>Message</strong>: <pre>Patch Set 16: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/329/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/329</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 12/14/2018, 11:33:54 AM<br><strong>Message</strong>: <pre>Patch Set 17:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/14/2018, 11:34:05 AM<br><strong>Message</strong>: <pre>Uploaded patch set 18.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 11:34:06 AM<br><strong>Message</strong>: <pre>Patch Set 17: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/330/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/330</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 11:34:13 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/331/</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 12/14/2018, 11:38:18 AM<br><strong>Message</strong>: <pre>Patch Set 18: Code-Review+2

LGTM, wait for green CI</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 11:47:46 AM<br><strong>Message</strong>: <pre>Patch Set 18: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/331/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/331</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/14/2018, 3:30:46 PM<br><strong>Message</strong>: <pre>Patch Set 18: Code-Review+2</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 12/14/2018, 3:30:54 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Swetha Repakula</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/14/2018, 3:46:34 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-merge-master-x86_64/41/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-merge-master-x86_64/41</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 12/16/2018, 9:20:23 PM<br><strong>Message</strong>: <pre>Patch Set 18:

(2 comments)

Final result is okay.</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Created</strong>: 11/1/2018, 11:55:32 PM<br><strong>UnmergedRevision</strong>: [eb1277f153f38af8e68e15b367a8ff612aa1d4bc](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/eb1277f153f38af8e68e15b367a8ff612aa1d4bc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/1/2018, 11:58:04 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Created</strong>: 11/1/2018, 11:58:02 PM<br><strong>UnmergedRevision</strong>: [23d112650073cb99ec78c287d2e3752911635c41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/23d112650073cb99ec78c287d2e3752911635c41)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/2/2018, 12:07:00 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 11/7/2018, 2:08:46 PM<br><strong>UnmergedRevision</strong>: [38a4b4474a5d557ccdb0334dda31e0b45ff685d7](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/38a4b4474a5d557ccdb0334dda31e0b45ff685d7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2018, 2:12:15 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L95](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/38a4b4474a5d557ccdb0334dda31e0b45ff685d7/fabproxy/ethservice.go#L95)<br><strong>Comment</strong>: <pre>We need to add the json tags for these so that we can force camelcase and first letter lowercase.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L107](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/38a4b4474a5d557ccdb0334dda31e0b45ff685d7/fabproxy/ethservice.go#L107)<br><strong>Comment</strong>: <pre>Add json tags.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L210](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/38a4b4474a5d557ccdb0334dda31e0b45ff685d7/fabproxy/ethservice.go#L210)<br><strong>Comment</strong>: <pre>What is the status supposed to represent? I thought this was looking to see if the transaction was still pending or not.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L255](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/38a4b4474a5d557ccdb0334dda31e0b45ff685d7/fabproxy/ethservice.go#L255)<br><strong>Comment</strong>: <pre>We should refactor some of the pieces in getTransactionByHash so that the logic for getting this piece of information is in one place.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L258](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/38a4b4474a5d557ccdb0334dda31e0b45ff685d7/fabproxy/ethservice.go#L258)<br><strong>Comment</strong>: <pre>Let's remove this field, since this is hardcoded to "mined" and Fabric has no concept of mining.</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 11/7/2018, 3:23:16 PM<br><strong>UnmergedRevision</strong>: [bd1edad4c6f90ae9751b3f01b5837b2e3fe4577f](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/bd1edad4c6f90ae9751b3f01b5837b2e3fe4577f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2018, 3:26:15 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 11/7/2018, 3:26:14 PM<br><strong>UnmergedRevision</strong>: [f24ce92437f325bbd941a23e00fae3d01cd2c2bb](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/f24ce92437f325bbd941a23e00fae3d01cd2c2bb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2018, 3:34:38 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 11/7/2018, 3:35:03 PM<br><strong>UnmergedRevision</strong>: [f4a8a8f8fc056b9878142bd4b000329abea07a8e](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/f4a8a8f8fc056b9878142bd4b000329abea07a8e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2018, 3:40:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L247](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f4a8a8f8fc056b9878142bd4b000329abea07a8e/fabproxy/ethservice.go#L247)<br><strong>Comment</strong>: <pre>We need to encode this before passing to back to the user.</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 11/27/2018, 1:43:16 AM<br><strong>UnmergedRevision</strong>: [3670ea02c0b33e31f1317116c86e05afa763aed4](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/3670ea02c0b33e31f1317116c86e05afa763aed4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/27/2018, 1:45:58 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 11/27/2018, 1:45:56 AM<br><strong>UnmergedRevision</strong>: [141ed8b66c8bfb90c5d13cff9043d501aa5876e0](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/141ed8b66c8bfb90c5d13cff9043d501aa5876e0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/27/2018, 1:58:16 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 11/28/2018, 7:19:24 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>This struct/module needs a comment about how it's implementing burrow/event.Publisher interface.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>A more explicit and easier thing to do is to add a type assertion.

```
var _ event.Publisher = &EventManager{}
```</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>I prefer the comment than the type assertion.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>why? 

I would think you would prefer it, it cannot get out of date and it's something checked at compile-time.

If we make a refactor and something breaks, we get a warning now of something to go look at.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>If we want a failure specific to that, I would say add a test in the event manager unit tests testing that assertion. But even without that the evmcc will not compile and its corresponding tests will show that problem.

I always saw interfaces as an implicit thing in go, so if we want to be more explicit I rather a test than a type assertion.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>You are correct, interfaces are implicit, which is confusing if there's no label saying why we named these functions and have these parameters.

The type assertion is a way to make explicit the implicit.

A test isn't necessarily run, whereas compiling the code is always done.

An assignment assertion provides both documentation that can't get out of date, and the enforcement of a contract in the appropriate context. A test is out of context when looking at the code. 

A test does not prevent someone from looking at the `Publish` method below and thinking, as I initially did, "Why does it take 'interface{}' instead of the events.EventDataLog type directly?" and attempting to 'fix-it' without realizing that it's an external constraint. A type assertion declares intent as code.

I need something in the context. Comment or type assertion is fine, a test is not, tho I would welcome a test.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>Maybe I'm missing something, but I think with `vm.SetPublisher(evmgr)` in evmcc.go, if interface if out-of-date, compilation would fail anyway without explicit type assertion?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>You are correct. Morgan wants something more explicit in this package.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>Yup, but that's not in this package, where this code is.

It's happenstance that it would be a check, when I feel we can be much more declarative in the context of the code itself.</pre><strong>Commenter</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>CommentLine</strong>: [event/event.go#L19](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L19)<br><strong>Comment</strong>: <pre>In Burrow, when a log event is emitted, the EVM puts together the event information and creates an event object. Later, the Publisher of the vm object calls the Publish() function, which stores the emitted event in the event cache. In the invoke() function of `evmcc.go`, we introduce our own Publisher into the vm object, and in this package, we define our own Publish interface. So, when Burrow tries to Publish a log event, the Publish() corresponding to our Publisher will be called, and we can get access to those events.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L40](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L40)<br><strong>Comment</strong>: <pre>return the error directly instead of binding it to the existing err variable.

return evmgr.stub.....</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L41)<br><strong>Comment</strong>: <pre>Can clean this whole clause up as:
```
	if len(evmgr.EventCache) > 0 {
		if payload, err := json.Marshal(evmgr.EventCache); err != nil {
			return fmt.Errorf("Failed to marshal event messages: %s", err.Error())
		} else {
			return evmgr.stub.SetEvent(eventName, payload)
		}
	}

```
If you want.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [event/event.go#L41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L41)<br><strong>Comment</strong>: <pre>or
```
	if len(evmgr.EventCache) == 0 {
		return nil
	}

	payload, err := json.Marshal(evmgr.EventCache)
	if err != nil {
		return fmt.Errorf("Failed to marshal event messages: %s", err.Error())
	}

	return evmgr.stub.SetEvent(eventName, payload)
```
so we don't have nested if-else</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L41)<br><strong>Comment</strong>: <pre>ooh, that's good. I like if-guards.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event.go#L55)<br><strong>Comment</strong>: <pre>same as above for these if statements, can be all made as inline ifs.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event_test.go#L68](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event_test.go#L68)<br><strong>Comment</strong>: <pre>good test</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event_test.go#L90](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event_test.go#L90)<br><strong>Comment</strong>: <pre>mismatch is byte vs string?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event_test.go#L103](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event_test.go#L103)<br><strong>Comment</strong>: <pre>this test makes me question why Publish takes an `interface{}` instead of the `*events.EventDataLog` directly.

our event.EventManager is fullfilling the burrow/event.Publisher interface, and that takes `interface{}`.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event_test.go#L177](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/event/event_test.go#L177)<br><strong>Comment</strong>: <pre>We're not actually testing the `(nil string)` case, so we should remove it. This is testing the case where the internal `SetEvent` fails.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc.go#L140](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/evmcc/evmcc.go#L140)<br><strong>Comment</strong>: <pre>this line needs a comment.

We're getting the first eight bytes of the encoded version of the input.

From `Flush`, I can see that this the event name, EVM events names are always 8bytes, I guess?</pre><strong>Commenter</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>CommentLine</strong>: [evmcc/evmcc.go#L140](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/evmcc/evmcc.go#L140)<br><strong>Comment</strong>: <pre>The argument we pass to Flush() is supposed to be an indication of the name of the event. For this, we are using the hash of the function name which led to the emission of the events, which is nothing but the first 8 bytes of the ‘input’ argument.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [evmcc/evmcc.go#L140](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/evmcc/evmcc.go#L140)<br><strong>Comment</strong>: <pre>Yes, I recall some of this now. Swetha told me about some of the details when I ran it. Thanks.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L90](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/fabproxy/ethservice.go#L90)<br><strong>Comment</strong>: <pre>I removed status from here because I did not want to mislead users to think transactions were mined. However after further investigating, I think we should add it back since remix uses that to determine whether to show logs or not.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L90](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/fabproxy/ethservice.go#L90)<br><strong>Comment</strong>: <pre>Being Mined is the equivalent of "here's the consensus'd block", so while we don't want to confuse people about that status because there is no mining, we're bound by what the rpc called the field, not what it actually represents.

I concur with adding it back if it seems that tools will use it to determine if a block is "finished".</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L90](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/fabproxy/ethservice.go#L90)<br><strong>Comment</strong>: <pre>We should add back Status which expects a 0x0 or a 0x1. We can link it to the transaction being marked as valid or invalid</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L137](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/fabproxy/ethservice.go#L137)<br><strong>Comment</strong>: <pre>looks good, matches spec of log object

https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_getfilterchanges</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L278](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/141ed8b66c8bfb90c5d13cff9043d501aa5876e0/fabproxy/ethservice.go#L278)<br><strong>Comment</strong>: <pre>similiarly to how topics was changed,

```
		txLogs := []Log{}
```</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 12/4/2018, 11:16:19 PM<br><strong>UnmergedRevision</strong>: [23a4683a9f90a532a3917f10c07eff4f6afc6736](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/23a4683a9f90a532a3917f10c07eff4f6afc6736)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/4/2018, 11:29:52 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L265](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/23a4683a9f90a532a3917f10c07eff4f6afc6736/fabproxy/ethservice.go#L265)<br><strong>Comment</strong>: <pre>should we check that respPayload itself is non-nil, or expect that it always comes from the method called above?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L638](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/23a4683a9f90a532a3917f10c07eff4f6afc6736/fabproxy/ethservice.go#L638)<br><strong>Comment</strong>: <pre>I'm wondering if these two should include the responsePayload instead of nil, if there is no error.</pre></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 12/6/2018, 4:05:22 PM<br><strong>UnmergedRevision</strong>: [4b83a3eae29e32b71926f4382de7d4ec48f609ee](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/4b83a3eae29e32b71926f4382de7d4ec48f609ee)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/6/2018, 4:20:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 12/6/2018, 4:53:29 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L253](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/4b83a3eae29e32b71926f4382de7d4ec48f609ee/fabproxy/ethservice.go#L253)<br><strong>Comment</strong>: <pre>remove commented line. We want to add Status not Type</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice_test.go#L557](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/4b83a3eae29e32b71926f4382de7d4ec48f609ee/fabproxy/ethservice_test.go#L557)<br><strong>Comment</strong>: <pre>Remove this comment. We will attack logs bloom in a future patch</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/6/2018, 9:32:42 PM<br><strong>UnmergedRevision</strong>: [8e4f0a50257743aa5f22e9b204993641752a74a0](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/8e4f0a50257743aa5f22e9b204993641752a74a0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/6/2018, 9:46:14 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/6/2018, 9:38:11 PM<br><strong>UnmergedRevision</strong>: [b116cf384034b9f7017774de7976389a47abcb22](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/b116cf384034b9f7017774de7976389a47abcb22)<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/6/2018, 10:08:16 PM<br><strong>UnmergedRevision</strong>: [498901b548c7ed5700f5e4631244a9a1d8f9829c](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/498901b548c7ed5700f5e4631244a9a1d8f9829c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/6/2018, 10:24:09 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/6/2018, 10:08:59 PM<br><strong>UnmergedRevision</strong>: [b69c9c1f405a77b73bd9033b30a674c5a460b4e6](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/b69c9c1f405a77b73bd9033b30a674c5a460b4e6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/7/2018, 1:40:16 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 12/6/2018, 11:11:09 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L255](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b69c9c1f405a77b73bd9033b30a674c5a460b4e6/fabproxy/ethservice.go#L255)<br><strong>Comment</strong>: <pre>This is printing 0x0x... as the transaction hash, so we could change it to `receipt.TransactionHash` instead</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice.go#L255](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b69c9c1f405a77b73bd9033b30a674c5a460b4e6/fabproxy/ethservice.go#L255)<br><strong>Comment</strong>: <pre>Good catch! do you want to push an updated patch with that change?</pre></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Created</strong>: 12/8/2018, 8:04:44 PM<br><strong>UnmergedRevision</strong>: [9b6e039123256407954d9e0bfecc92c397d3e29e](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/9b6e039123256407954d9e0bfecc92c397d3e29e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/8/2018, 8:19:11 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 12/14/2018, 11:24:07 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 12/10/2018, 4:26:37 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [event/event.go#L22](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/9b6e039123256407954d9e0bfecc92c397d3e29e/event/event.go#L22)<br><strong>Comment</strong>: <pre>unused</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [event/event.go#L43](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/9b6e039123256407954d9e0bfecc92c397d3e29e/event/event.go#L43)<br><strong>Comment</strong>: <pre>maybe get rid of nesting if:
```
	if len(evmgr.EventCache) == 0 {
		return nil
	}

	payload, err := json.Marshal(evmgr.EventCache)
	if err != nil {
		return fmt.Errorf("Failed to marshal event messages: %s", err.Error())
	}

	return evmgr.stub.SetEvent(eventName, payload)
```</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fabproxy/ethservice_test.go#L360](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/9b6e039123256407954d9e0bfecc92c397d3e29e/fabproxy/ethservice_test.go#L360)<br><strong>Comment</strong>: <pre>unused</pre></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/14/2018, 11:24:30 AM<br><strong>UnmergedRevision</strong>: [69d72add3e7f7e84168e62d32dfda78103216014](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/69d72add3e7f7e84168e62d32dfda78103216014)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/14/2018, 11:32:24 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/14/2018, 11:32:17 AM<br><strong>UnmergedRevision</strong>: [c3fa2e860ea9140f4d804fae0ff4d8df283aae73](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/c3fa2e860ea9140f4d804fae0ff4d8df283aae73)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/14/2018, 11:34:06 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [event/event.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/c3fa2e860ea9140f4d804fae0ff4d8df283aae73/event/event.go#L31)<br><strong>Comment</strong>: <pre>(I shouted at Swetha for this)</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L31](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/c3fa2e860ea9140f4d804fae0ff4d8df283aae73/event/event.go#L31)<br><strong>Comment</strong>: <pre>no shouting allowed. be nice.</pre></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Lakshmy Ayalur Vedpuriswar - cs16b101@smail.iitm.ac.in<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 12/14/2018, 11:34:05 AM<br><strong>GitHubMergedRevision</strong>: [6bb84934f92006875fed8258d154cf0a15c537ef](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/6bb84934f92006875fed8258d154cf0a15c537ef)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/14/2018, 11:47:46 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 12/14/2018, 11:38:18 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 12/14/2018, 3:30:46 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Swetha Repakula<br><strong>Merged</strong>: 12/14/2018, 3:30:54 PM<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [event/event.go#L18](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/6bb84934f92006875fed8258d154cf0a15c537ef/event/event.go#L18)<br><strong>Comment</strong>: <pre>I'm disappointing we never got the assertion or the comment.</pre></blockquote>