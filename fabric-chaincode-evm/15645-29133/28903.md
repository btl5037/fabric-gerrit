<strong>Project</strong>: fabric-chaincode-evm<br><strong>Branch</strong>: master<br><strong>ID</strong>: 28903<br><strong>Subject</strong>: [FAB-13385] fab3 can be configured with flags<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/22/2019, 6:25:19 PM<br><strong>LastUpdated</strong>: 2/1/2019, 3:28:44 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-13385] fab3 can be configured with flags

 - PORT can no longer to be used to configure fab3 and will be replaced
 by FAB3_PORT
 - use cobra manage cli
 - use viper to manage environment variables and flags
 - flags will override environment variables
 - port will default to 5000
 - ccid will default to `evmcc`
 - cobra is added as a constraint
 - viper since pulled in from fabric-sdk-go and fabric is an override
 - fab3 tests now use a singular network and run multiple tests against
 the same network

Change-Id: I52e9232ecf0f773d3d185fb00f2c6dd5b9de0b27
Signed-off-by: Swetha Repakula <srepaku@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 6:25:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 6:25:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/45/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 6:40:28 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/45/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/45</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 7:16:17 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 8:45:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 8:46:04 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/47/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 9:04:54 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/47/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/47</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 2:47:02 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(6 comments)

reading this everything looks all out of order and makes me wonder why it can't be combined in one or two functions. 

I think I need to look at the existing sdk or fabric code to see match up what they're doing to this. Was that code used as a guide to set this up?</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 4:11:13 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(6 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 4:35:47 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(6 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 5:12:26 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 5:12:33 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/50/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 5:15:37 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(4 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 5:33:19 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/50/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/50</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:12:06 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:12:09 PM<br><strong>Message</strong>: <pre>Removed Code-Review+2 by Morgan Bauer <mbauer@us.ibm.com>
</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:14:36 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

There's a strange binding issue.

If the uppercase version of any of the flags is set, it's preferred over FAB3_whatever

This also shows me the need for some debug output of "what does the program have each var bound to?"

I was trying to run this in my shell, using the env vars, but it was picking up USER in preference to FAB3_USER

The same thing happens with ORG being preferred over FAB3_ORG.

USER is often set by a shell, so most of the time it'll be the username, or root.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:28:05 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)

maybe the issue? Why do we want automatic binding?</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:39:04 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:41:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 6:41:56 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/53/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 6:51:39 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 7:00:22 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/53/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/53</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 4:22:10 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(3 comments)

wondering why PORT is singled out, but otherwise seems fine enough.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 5:21:55 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(2 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 5:53:47 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+1

(1 comment)

Now I disagree.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 6:26:22 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 6:41:21 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 6:41:30 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/65/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 6:45:26 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/65/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/65</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 4:40:20 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 4:40:29 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/70/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 4:45:46 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/70/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/70</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 4:51:07 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 4:51:14 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/72/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 4:56:01 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/72/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/72</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 5:27:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 5:27:10 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/74/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 5:40:44 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/74/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/74</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 6:43:41 PM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review-1

(7 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 6:58:36 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 6:58:46 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/75/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 7:14:38 PM<br><strong>Message</strong>: <pre>Patch Set 10: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/75/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/75</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 7:46:22 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(6 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/29/2019, 8:01:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 8:01:07 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/78/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2019, 8:15:03 PM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/78/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/78</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 1/31/2019, 2:56:33 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+1

LGTM, but needs to be rebased</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 2:16:09 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 2:16:17 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/89/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 2:28:58 PM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/89/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/89</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 2:29:18 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 2:29:28 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/91/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 2:45:01 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/91/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/91</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 2/1/2019, 12:09:32 AM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review+2</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 12:38:44 AM<br><strong>Message</strong>: <pre>Patch Set 13:

(4 comments)

I think this should be split up, but I'll rubber stamp it if you want.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 2:46:31 PM<br><strong>Message</strong>: <pre>Patch Set 13: Code-Review+2</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 2:50:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/1/2019, 2:50:35 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/100/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/1/2019, 3:06:09 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/100/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/100</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 3:14:34 PM<br><strong>Message</strong>: <pre>Patch Set 14: Code-Review+2</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 3:28:38 PM<br><strong>Message</strong>: <pre>Patch Set 14: Code-Review+2

good enough, I'd rather have it in than not have it in.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 3:28:44 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Morgan Bauer</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/22/2019, 6:25:19 PM<br><strong>UnmergedRevision</strong>: [9ce6f46b69946ea53e12c89057d9b6b12dfd6dcd](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/9ce6f46b69946ea53e12c89057d9b6b12dfd6dcd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 6:40:28 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/22/2019, 7:16:17 PM<br><strong>UnmergedRevision</strong>: [deb5ba7c46fc22df724c79576485c2b2f8e3c353](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/deb5ba7c46fc22df724c79576485c2b2f8e3c353)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 6:40:28 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/22/2019, 8:45:53 PM<br><strong>UnmergedRevision</strong>: [bda37884e568106e5355e5e439891be7801261b1](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/bda37884e568106e5355e5e439891be7801261b1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 9:04:54 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L15](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1//COMMIT_MSG#L15)<br><strong>Comment</strong>: <pre>this makes me wonder if there are flags exposed by sdk that we should be reusing.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L15](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1//COMMIT_MSG#L15)<br><strong>Comment</strong>: <pre>fabric-sdk-go uses it for the config file. i don't think there is any commanline part fo the sdk.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L42](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L42)<br><strong>Comment</strong>: <pre>I really, really, really do not like inits.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L42](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L42)<br><strong>Comment</strong>: <pre>This is recommended way of doing things from the cobra documentation. Why do you not like that? where would you rather have it? We could do it in main, but I don't see much difference.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L42](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L42)<br><strong>Comment</strong>: <pre>If someone ever imports this package, these get run at startup.

Even if there is nothing publicly exported, someone can still import the package.

I'd prefer it was a function we explicitly call at the start. Can we name this initFlags and call it right before fab3.Execute?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L42](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L42)<br><strong>Comment</strong>: <pre>I don't think someone importing this is an issue. 

But I did make it into initFlags and called it in main.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L47)<br><strong>Comment</strong>: <pre>so no backwards compatibility in env vars. This is fine, we're already breaking the release with the burrow update, among other things.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L47)<br><strong>Comment</strong>: <pre>we are going to lose backwards compatibility with the fab3 change.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L47](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L47)<br><strong>Comment</strong>: <pre>OK.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>Does this read capitalized PORT?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>yes it will read PORT as the env variable</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>Looked it up, second is optional arg that is the all caps version of first arg unless overridden as above. Thanks.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L68](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L68)<br><strong>Comment</strong>: <pre>This is the only time I see FAB3_PORT, how is that being set?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L68](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L68)<br><strong>Comment</strong>: <pre>copy paste typo. should be changed to PORT</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L125](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L125)<br><strong>Comment</strong>: <pre>should we tackle setting up flags for the logger as we're making this change?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L125](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L125)<br><strong>Comment</strong>: <pre>lets make a new jira for that</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L125](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L125)<br><strong>Comment</strong>: <pre>OK.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L134](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L134)<br><strong>Comment</strong>: <pre>shouldn't this be at the top?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L134](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/main.go#L134)<br><strong>Comment</strong>: <pre>deleted this line in the next patch. we don't need logger declared outside of runFab3</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/root.go#L7](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/root.go#L7)<br><strong>Comment</strong>: <pre>why does this exist?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/root.go#L7](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/fabproxy/cmd/root.go#L7)<br><strong>Comment</strong>: <pre>whoops accidentally added this. will remove in the next patch.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/helpers/runners.go#L23](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/integration/helpers/runners.go#L23)<br><strong>Comment</strong>: <pre>This is going to be a conflict with the fab3 change. We should merge this patch in after the fab3 change.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/helpers/runners.go#L23](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/bda37884e568106e5355e5e439891be7801261b1/integration/helpers/runners.go#L23)<br><strong>Comment</strong>: <pre>are you saying wait for 28590 ?</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/23/2019, 5:12:26 PM<br><strong>UnmergedRevision</strong>: [5c40ffdc1fd7ae4812df1d8199abab5349a95ef8](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/5c40ffdc1fd7ae4812df1d8199abab5349a95ef8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/23/2019, 5:33:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 1/23/2019, 6:14:36 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [Gopkg.toml#L18](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5c40ffdc1fd7ae4812df1d8199abab5349a95ef8/Gopkg.toml#L18)<br><strong>Comment</strong>: <pre>what happened to putting the version first?

granted I vastly prefer it this way, but we seem to continue to want it the other way.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [Gopkg.toml#L18](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5c40ffdc1fd7ae4812df1d8199abab5349a95ef8/Gopkg.toml#L18)<br><strong>Comment</strong>: <pre>this time i used dep to add the dependency. ill switch it.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L49](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5c40ffdc1fd7ae4812df1d8199abab5349a95ef8/fabproxy/cmd/main.go#L49)<br><strong>Comment</strong>: <pre>I don't think we want this line.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L49](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/5c40ffdc1fd7ae4812df1d8199abab5349a95ef8/fabproxy/cmd/main.go#L49)<br><strong>Comment</strong>: <pre>i think you are right. bindenv should be enough.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/23/2019, 6:41:46 PM<br><strong>UnmergedRevision</strong>: [420f5d6ed144ee749c0f53618c3eaa4e53b2c93a](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/23/2019, 7:00:22 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 1/25/2019, 5:53:47 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L9](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a//COMMIT_MSG#L9)<br><strong>Comment</strong>: <pre>to</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>There's a SetEnvPrefix that I'm not sure we should use.
It would mean we could have only the first arg version, but would result in FAB3_PORT.

Looking at it now, I'm not sure why we're singling out PORT as a non-prefixed env-var.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>Yup, I initially used SetEnvPrefix, but did not want FAB3_PORT, so switched to writing out the environment variables we want.

I used PORT because that seems to be the standard in the container world, like docker and cf set the PORT variable for applications to read and use.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>That sounds like a CF specific thing.

Neither docker nor kube do that without being asked specifically to do so, either at container start or container construction.

Were this to be exposed to another pod as a service in kube, the automatically populated env-var would be ${SERVICENAME}_PORT, so I think we should change it to FAB3_PORT. 

I wonder if the prefix is configurable at runtime. Could have a USERX_FAB3, or a FAB3_DEV & FAB3_PROD. Not sure how many of these we'd want to run at one time. We don't publish a container at this time, but we should strongly consider it in lieu of, or in addition to a binary.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a/fabproxy/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>I don't think it is a CF specific thing. I may be wrong about docker, but PORT being used as an environment variable is a common practice.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L73](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a/fabproxy/cmd/main.go#L73)<br><strong>Comment</strong>: <pre>good comment</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/cmd/main.go#L101](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/420f5d6ed144ee749c0f53618c3eaa4e53b2c93a/fabproxy/cmd/main.go#L101)<br><strong>Comment</strong>: <pre>comment meant for the next commit</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/25/2019, 6:41:21 PM<br><strong>UnmergedRevision</strong>: [700149fc1b004bc63eed154ba3d8cd8958038787](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/700149fc1b004bc63eed154ba3d8cd8958038787)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2019, 6:45:26 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/29/2019, 4:40:20 PM<br><strong>UnmergedRevision</strong>: [b5b5dbcab81a9bdbc7bb4d461b89963fa17c54af](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/b5b5dbcab81a9bdbc7bb4d461b89963fa17c54af)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2019, 4:45:46 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/29/2019, 4:51:07 PM<br><strong>UnmergedRevision</strong>: [06b413a222cda20c50c118cd129d88e7ff1a5fc2](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/06b413a222cda20c50c118cd129d88e7ff1a5fc2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2019, 4:56:01 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/29/2019, 5:27:03 PM<br><strong>UnmergedRevision</strong>: [d8bc6815ff9758e7ae90a02fb0b98eec73980ee8](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2019, 5:40:44 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 1/29/2019, 6:43:41 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/cmd/main.go#L39](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/fab3/cmd/main.go#L39)<br><strong>Comment</strong>: <pre>Let's make a config struct instead of globals.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/cmd/main.go#L39](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/fab3/cmd/main.go#L39)<br><strong>Comment</strong>: <pre>I feel like a config is slightly overkill for what we are doing.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/fab3/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>I can go several different ways on this. The final argument I come back to is self consistency. Let's name them all FAB3. It's explicit and differentiated and consistent. And maybe write it down in a dev-guide somewhere. 


list of thoughts I have on seeing this block.

Is port what we're listening on? Does it have to be free?

Is port what we're connecting to? Why is this port called port and not fabric_port?

I recall some ports are due to the framework they use, where something using tomcat might have a CATALINA_PORT cause that's the framework it's using.

If we connected to a database we might have a DATABASE_PORT, but if we were in a larger system that might be used by the database to know what to bind and for everything else to know what to connect to.

I think expecting PORT only works if running a program in a place where it is the only thing running. A container, a single-tenant VM, etc.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/cmd/main.go#L48](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/fab3/cmd/main.go#L48)<br><strong>Comment</strong>: <pre>I am not worried about the ambiguity about port. I think people understand that the port provided should be the port they expect Fab3 to listen to. That is also included in the help message as to what it is. And in situations with larger systems, users have the ability to use the port flag if there is a collision in the environment variable naming. 
And typically examples like CATALINA_PORT and DATABASE_PORT are read by the larger system and it is up to that orchestrator to pass that information to the service. In our case we only have one port that is configurable.

I have deployed fab3 to a CF environment before and being able to run it using the PORT variable provided is a nice feature, which was the reason I made it PORT versus FABPROXY_PORT when I first included the environment variable. I agree that we don't need to follow practices that were used in CF, but I do not think the fact that it is used in CF should be a reason not to do it.

With that all being said, while I prefer PORT over FAB3_PORT, if this is the only blocker to the patch I will make the change.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L20](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_configuration_test.go#L20)<br><strong>Comment</strong>: <pre>these tests and all the execing indicate to me that we have way too much coupling between our program and it's configuration. It should be fairly straightforward to test that config does what it says. I think we need a config struct/package and to test that.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L20](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_configuration_test.go#L20)<br><strong>Comment</strong>: <pre>I think our configuration is not complicated enough to require a config package especially since we don't use it after we start our program. I also don't foresee our configuration to change significantly in the future either. I have also changed the test suite so the network is only brought up once for the entire fab3 test suite and everything is run using the same network.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L27](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_configuration_test.go#L27)<br><strong>Comment</strong>: <pre>Is this to avoid fab3 ports conflicting?

Why can't we give it 0? Auto-assign.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L27](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_configuration_test.go#L27)<br><strong>Comment</strong>: <pre>Yes it is to avoid port conflicts. In these set of tests yes 0 could work. In other tests we would have difficulty in figuring out the port Fab3 was running.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L52](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_configuration_test.go#L52)<br><strong>Comment</strong>: <pre>this seems like a needlessly strict coupling to logger output. Why isn't "not crashed" enough here?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L52](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_configuration_test.go#L52)<br><strong>Comment</strong>: <pre>The reason I use logging because its not easy to understand that the fab3 successfully started running versus it hasn't started running. Both of which would be covered by it has not crashed.

This seemed a like a simpler approach then having to send a request to fab3 to ensure that it was running.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_suite_test.go#L100](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_suite_test.go#L100)<br><strong>Comment</strong>: <pre>needs polling interval.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L111](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_test.go#L111)<br><strong>Comment</strong>: <pre>why is this code movement part of this change?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L111](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/d8bc6815ff9758e7ae90a02fb0b98eec73980ee8/integration/fab3/fab3_test.go#L111)<br><strong>Comment</strong>: <pre>This test suite now will bring up a single network and run all the fab3 integration tests against it. Otherwise every test that we add would cause a new network to need to come up. This also opens us the possibility of running these tests in parallel.</pre></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/29/2019, 6:58:36 PM<br><strong>UnmergedRevision</strong>: [56a2f4ed3e66177eee48d1781580115a83906522](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/56a2f4ed3e66177eee48d1781580115a83906522)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2019, 7:14:38 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/29/2019, 8:01:00 PM<br><strong>UnmergedRevision</strong>: [232795d3de0fc85f90c16a6300409d7e0ed00e17](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/232795d3de0fc85f90c16a6300409d7e0ed00e17)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2019, 8:15:03 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 1/31/2019, 2:56:33 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/31/2019, 2:16:09 PM<br><strong>UnmergedRevision</strong>: [de2fce3fa42de00b7c9f9c74384cf559aa7ebcea](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/de2fce3fa42de00b7c9f9c74384cf559aa7ebcea)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/31/2019, 2:28:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 1/31/2019, 2:29:18 PM<br><strong>UnmergedRevision</strong>: [4817ec85be1c559f995418864188b98bea33fa9e](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/4817ec85be1c559f995418864188b98bea33fa9e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/31/2019, 2:45:01 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 2/1/2019, 12:09:32 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 2/1/2019, 2:46:31 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L52](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/4817ec85be1c559f995418864188b98bea33fa9e/integration/fab3/fab3_configuration_test.go#L52)<br><strong>Comment</strong>: <pre>let's check for the port since we know it.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L72](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/4817ec85be1c559f995418864188b98bea33fa9e/integration/fab3/fab3_configuration_test.go#L72)<br><strong>Comment</strong>: <pre>let's check for the port since we know it.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L99](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/4817ec85be1c559f995418864188b98bea33fa9e/integration/fab3/fab3_configuration_test.go#L99)<br><strong>Comment</strong>: <pre>let's check for the port since we know it.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_configuration_test.go#L186](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/4817ec85be1c559f995418864188b98bea33fa9e/integration/fab3/fab3_configuration_test.go#L186)<br><strong>Comment</strong>: <pre>this confused me at first, can you add 'because they default' or something?</pre></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 2/1/2019, 2:50:28 PM<br><strong>GitHubMergedRevision</strong>: [95b572bcd464ee878b4496cd3f9d184b5cf87e9d](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/95b572bcd464ee878b4496cd3f9d184b5cf87e9d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/1/2019, 3:06:09 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 2/1/2019, 3:14:34 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 2/1/2019, 3:28:38 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Morgan Bauer<br><strong>Merged</strong>: 2/1/2019, 3:28:44 PM<br><br></blockquote>