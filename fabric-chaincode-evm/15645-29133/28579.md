<strong>Project</strong>: fabric-chaincode-evm<br><strong>Branch</strong>: master<br><strong>ID</strong>: 28579<br><strong>Subject</strong>: [FAB-13168] Cleanup Makefile and scripts<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/9/2019, 10:18:20 AM<br><strong>LastUpdated</strong>: 1/9/2019, 11:27:38 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-13168] Cleanup Makefile and scripts

Also fixed a couple of errors found by go vet

Patch-set #2: added a couple of missing changes

Change-Id: Ibf70f9a408f68bbd1b1d616098fb777a8efa1fd7
Signed-off-by: Arnaud J Le Hors <lehors@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 10:18:20 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 10:18:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/350/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 10:39:40 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-master-x86_64/350/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-master-x86_64/350</pre><strong>Reviewer</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 1:54:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 1:54:39 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/2/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 2:04:49 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-2

(5 comments)

can we scrap the linter script and move it into the makefile?

we don't run it, and to me it has a very strange setup.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 2:09:19 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/2/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/2</pre><strong>Reviewer</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 2:43:07 PM<br><strong>Message</strong>: <pre>Patch Set 2:

> (5 comments)
 > 
 > can we scrap the linter script and move it into the makefile?
 > 
 > we don't run it, and to me it has a very strange setup.

This is a fair question but you guys need to decide what approach you want to take. I assumed you wanted to stick to the fabric one from which all this was inherited. If that's not what you want to do, there are many different ways this can be done for sure. I'm not personally fond of those scripts myself so it's not like I'm going to lie on the tracks if you want to get rid of them. :-)</pre><strong>Reviewer</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 3:01:23 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(3 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 3:52:02 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(1 comment)

Only the typo in golinter.sh needs a change. Otherwise looks good to me. I am okay following Fabric practices with gofmt etc.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 7:16:20 PM<br><strong>Message</strong>: <pre>Patch Set 3: Published edit on patch set 2.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 7:16:31 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2

(3 comments)

edited and lgtm</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 7:16:32 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/15/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 7:32:19 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/15/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/15</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 11:11:15 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 11:11:16 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Swetha Repakula</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/9/2019, 11:27:38 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-merge-x86_64/3/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-merge-x86_64/3</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Uploader</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Created</strong>: 1/9/2019, 10:18:20 AM<br><strong>UnmergedRevision</strong>: [866f9c0dc73748aace501e7069000be4206c23c9](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/866f9c0dc73748aace501e7069000be4206c23c9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/9/2019, 10:39:40 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Uploader</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Created</strong>: 1/9/2019, 1:54:28 PM<br><strong>UnmergedRevision</strong>: [cfae26330c997972d49439191a3b3ee9092b58c3](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/cfae26330c997972d49439191a3b3ee9092b58c3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/9/2019, 2:09:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 1/9/2019, 3:52:02 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 1/9/2019, 2:04:49 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice_test.go#L1086](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/fabproxy/ethservice_test.go#L1086)<br><strong>Comment</strong>: <pre>these changes are results of gofmt simplify</pre><strong>Commenter</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice_test.go#L1086](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/fabproxy/ethservice_test.go#L1086)<br><strong>Comment</strong>: <pre>Yes, that's what fabric uses. This relates to my question about whether you want to align with fabric or not, and to what extent.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fabproxy/ethservice_test.go#L1086](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/fabproxy/ethservice_test.go#L1086)<br><strong>Comment</strong>: <pre>yup, just stating what each piece of the pr is doing. this is how I review, I leave comments that are not necessarily actionable.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [scripts/changelog.sh#L14](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/changelog.sh#L14)<br><strong>Comment</strong>: <pre>we don't appear to have ever used this, and have no changelog.</pre><strong>Commenter</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>CommentLine</strong>: [scripts/changelog.sh#L14](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/changelog.sh#L14)<br><strong>Comment</strong>: <pre>that's because you've never had an official release yet. In fabric it's used at every release to automatically generate the CHANGELOG from the git history. Pretty handy.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [scripts/changelog.sh#L14](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/changelog.sh#L14)<br><strong>Comment</strong>: <pre>I agree with Arnaud. This will become useful once we start making releases</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [scripts/changelog.sh#L14](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/changelog.sh#L14)<br><strong>Comment</strong>: <pre>lololol, I can't wait for our first release.

When is v1.4.0 fabric tag coming?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [scripts/golinter.sh#L13](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/golinter.sh#L13)<br><strong>Comment</strong>: <pre>why do we go through these directories individually instead of pointing the tools at the whole thing?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [scripts/golinter.sh#L17](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/golinter.sh#L17)<br><strong>Comment</strong>: <pre>extra 'e' in evm</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [scripts/golinter.sh#L41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/golinter.sh#L41)<br><strong>Comment</strong>: <pre>also confused about running gofmt & goimports.

I guess gofmt has the 'simplify' command.</pre><strong>Commenter</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>CommentLine</strong>: [scripts/golinter.sh#L41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/golinter.sh#L41)<br><strong>Comment</strong>: <pre>I have to admit not to have questioned any of this. You're free to disagree with whomever decided to do this for fabric. :-)</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [scripts/golinter.sh#L41](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/cfae26330c997972d49439191a3b3ee9092b58c3/scripts/golinter.sh#L41)<br><strong>Comment</strong>: <pre>ya, I might fix it up in the future. changes look fine now.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Arnaud J Le Hors - lehors@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/9/2019, 7:16:20 PM<br><strong>GitHubMergedRevision</strong>: [7d7ccb9736af05ab3a5635eb575f495969820b6a](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/7d7ccb9736af05ab3a5635eb575f495969820b6a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/9/2019, 7:32:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 1/9/2019, 11:11:15 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Swetha Repakula<br><strong>Merged</strong>: 1/9/2019, 11:11:16 PM<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 1/9/2019, 7:16:31 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>