<strong>Project</strong>: fabric-chaincode-evm<br><strong>Branch</strong>: master<br><strong>ID</strong>: 28949<br><strong>Subject</strong>: FAB-13630 minimum eth_getLogs implementation<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/24/2019, 3:56:51 PM<br><strong>LastUpdated</strong>: 3/19/2019, 9:37:07 PM<br><strong>CommitMessage</strong>:<br><pre>FAB-13630 minimum eth_getLogs implementation

 - new service method
 - updated mock
 - GetLogsArgs for input data structure
   - ignored address, topic, blockhash filter args
 - pull all matching logs out
 - checking validity of transaction, and skipping
 - cleanup godoc output by moving generate above
 - regenerate with new version of counterfeiter
 - refactor to create getChannelHeaderandPayloadFromBlockdata
 - refactor to move the event unmarshalling into getChaincodeEvents
 - add SimpleStorageWithLog contract for testing

Change-Id: I59dd84431280fe710b28e35d33f23e3a4ebc169a
Signed-off-by: Morgan Bauer <mbauer@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/24/2019, 3:56:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2019, 3:56:58 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/54/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/24/2019, 3:57:36 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2019, 4:18:06 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/54/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/54</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 3:33:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 3:33:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/60/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 3:34:12 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 3:34:13 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/60/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/60</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 3:34:19 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/61/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 3:40:32 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/61/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/61</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/25/2019, 9:26:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 9:26:07 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/67/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2019, 9:32:34 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/67/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/67</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/28/2019, 7:20:23 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/28/2019, 7:20:34 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/68/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/28/2019, 7:25:54 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/68/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/68</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/30/2019, 6:04:57 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/30/2019, 6:05:06 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/83/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/30/2019, 6:08:40 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/83/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/83</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/30/2019, 9:40:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/30/2019, 9:40:13 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/84/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/30/2019, 9:44:51 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/84/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/84</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/30/2019, 10:35:50 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/30/2019, 10:35:59 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/85/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/30/2019, 10:51:32 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/85/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/85</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 1:13:40 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 1:13:50 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/86/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 1:29:47 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/86/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/86</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 1/31/2019, 1:39:51 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Run VerifyBuild</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 11:14:52 AM<br><strong>Message</strong>: <pre>Patch Set 10:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 11:15:03 AM<br><strong>Message</strong>: <pre>Patch Set 10: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/87/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 11:29:43 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/87/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/87</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 6:01:21 PM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review-1

(9 comments)

I think code wise it is pretty much ready. I think we should refactor so we don't duplicate parts of the code. I also think we need more test cases. Even adding a test to Fab3 would also be good.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 6:50:41 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(9 comments)

should I special case the genesis block? There can never be evm information in it. It exists in the channel before the evmcc is ever even installed.

follow up has some interesting changes. 
https://gerrit.hyperledger.org/r/29095


Needs to be easier to make a jira for refactorings.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 1/31/2019, 8:55:27 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 8:55:37 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/96/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/31/2019, 9:11:13 PM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/96/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/96</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 2/1/2019, 2:50:36 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(7 comments)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 2:38:46 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(6 comments)

gonna make some changes</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 2:53:13 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 3:03:50 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/1/2019, 3:04:00 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/102/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/1/2019, 3:11:04 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/1/2019, 3:18:00 PM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/102/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/102</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 2:31:16 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 2:31:23 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/109/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 2:43:35 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/109/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/109</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 7:52:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 7:52:25 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/115/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 7:55:57 PM<br><strong>Message</strong>: <pre>Uploaded patch set 15: Patch Set 14 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 7:55:59 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/115/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/115</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 7:56:05 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/117/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 8:00:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 16.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:00:39 PM<br><strong>Message</strong>: <pre>Patch Set 15: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/117/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/117</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:00:45 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/119/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:07:08 PM<br><strong>Message</strong>: <pre>Patch Set 16: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/119/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/119</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 8:12:00 PM<br><strong>Message</strong>: <pre>Patch Set 16:

flake on downloading 
/reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:12:11 PM<br><strong>Message</strong>: <pre>Patch Set 16: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/121/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:30:09 PM<br><strong>Message</strong>: <pre>Patch Set 16: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/121/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/121</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 8:40:38 PM<br><strong>Message</strong>: <pre>Patch Set 16:

/reverify
I think there is something fishy in the test setup


17:26:45 ------------------------------
17:26:45 •! Panic [0.603 seconds]
17:26:45 Fab3 [It] implements the ethereum json rpc api 
17:26:45 /w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/fab3/fab3_test.go:73
17:26:45 
17:26:45   Test Panicked
17:26:45   runtime error: invalid memory address or nil pointer dereference
17:26:45   /opt/go/go1.10.4.linux.amd64/src/runtime/panic.go:502
17:26:45 
17:26:45   Full Stack Trace
17:26:45   	/opt/go/go1.10.4.linux.amd64/src/runtime/panic.go:502 +0x24a
17:26:45   github.com/hyperledger/fabric-chaincode-evm/integration/fab3.glob..func6.3()
17:26:45   	/w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/fab3/fab3_test.go:79 +0x314
17:26:45   github.com/hyperledger/fabric-chaincode-evm/vendor/github.com/onsi/ginkgo/internal/leafnodes.(*runner).runSync(0xc4200cccc0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)
17:26:45   	/w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/fab3/fab3_suite_test.go:27 +0xfe
17:26:45   testing.tRunner(0xc4202040f0, 0x14806d8)
17:26:45   	/opt/go/go1.10.4.linux.amd64/src/testing/testing.go:777 +0x16e
17:26:45   created by testing.(*T).Run
17:26:45   	/opt/go/go1.10.4.linux.amd64/src/testing/testing.go:824 +0x565
17:26:45   
17:26:45 ------------------------------</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:40:46 PM<br><strong>Message</strong>: <pre>Patch Set 16: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/124/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 8:57:26 PM<br><strong>Message</strong>: <pre>Patch Set 16: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/124/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/124</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/7/2019, 4:12:27 PM<br><strong>Message</strong>: <pre>Patch Set 16:

(17 comments)

We need some integration tests in fab3 for GetLogs.
There are a couple more test cases needed in the unit tests for get logs.

The rest of the comments are about cleanup in terms of error handling and suggestions on making our debug logging cleaner.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/8/2019, 3:13:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 17.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2019, 3:14:09 PM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/133/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2019, 3:34:06 PM<br><strong>Message</strong>: <pre>Patch Set 17: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/133/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/133</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/8/2019, 8:09:32 PM<br><strong>Message</strong>: <pre>Uploaded patch set 18.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2019, 8:09:42 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/136/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/8/2019, 8:10:27 PM<br><strong>Message</strong>: <pre>Patch Set 16:

(8 comments)

added some more unit tests, having difficulty running the integration tests locally.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2019, 8:13:52 PM<br><strong>Message</strong>: <pre>Patch Set 18: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/136/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/136</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/8/2019, 8:16:45 PM<br><strong>Message</strong>: <pre>Uploaded patch set 19: Patch Set 18 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2019, 8:16:52 PM<br><strong>Message</strong>: <pre>Patch Set 19: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/140/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2019, 8:35:18 PM<br><strong>Message</strong>: <pre>Patch Set 19: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/140/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/140</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/11/2019, 2:10:23 PM<br><strong>Message</strong>: <pre>Patch Set 19:

I don't know how to debug this

reverify


17:35:17 [91m[e][[fab3-Org2-User2][0m {"level":"info","ts":1549676075.189795,"logger":"fab3","caller":"cmd/main.go:153","msg":"Fab3 has exited"}
17:35:17 [32m[o][[fab3-Org2-User2][0m  [fabsdk/util] 2019/02/09 01:34:37 UTC - lazyref.(*Reference).refreshValue -> WARN Error - initializer returned error: QueryBlockConfig failed: queryChaincode failed: Multiple errors occurred: 
17:35:17 [32m[o][[fab3-Org2-User2][0m Transaction processing for endorser [localhost:30013]: Endorser Client Status Code: (2) CONNECTION_FAILED. Description: dialing connection timed out [localhost:30013]
17:35:17 [32m[o][[fab3-Org2-User2][0m Transaction processing for endorser [localhost:30018]: Endorser Client Status Code: (2) CONNECTION_FAILED. Description: dialing connection timed out [localhost:30018]. Will retry again later
17:35:17 [32m[o][[fab3-Org2-User2][0m  [fabsdk/util] 2019/02/09 01:34:53 UTC - lazyref.(*Reference).refreshValue -> WARN Error - initializer returned error: error calling discover service send: Multiple errors occurred: 
17:35:17 [32m[o][[fab3-Org2-User2][0m From target: localhost:30003: could not connect to localhost:30003: dialing connection timed out [localhost:30003]
17:35:17 [32m[o][[fab3-Org2-User2][0m From target: localhost:30018: could not connect to localhost:30018: dialing connection timed out [localhost:30018]. Will retry again later
17:35:17 [32m[o][[fab3-Org2-User2][0m  [fabsdk/util] 2019/02/09 01:34:53 UTC - lazyref.(*Reference).refreshValue -> WARN Error - initializer returned error: error calling discover service send: Multiple errors occurred: 
17:35:17 [32m[o][[fab3-Org2-User2][0m From target: localhost:30013: could not connect to localhost:30013: dialing connection timed out [localhost:30013]
17:35:17 [32m[o][[fab3-Org2-User2][0m From target: localhost:30003: could not connect to localhost:30003: dialing connection timed out [localhost:30003]
17:35:17 [32m[o][[fab3-Org2-User2][0m From target: localhost:30018: could not connect to localhost:30018: dialing connection timed out [localhost:30018]
17:35:17 [32m[o][[fab3-Org2-User2][0m From target: localhost:30008: could not connect to localhost:30008: dialing connection timed out [localhost:30008]. Will retry again later
17:35:17 
17:35:17 ------------------------------
17:35:17 • Failure in Spec Teardown (AfterEach) [167.676 seconds]
17:35:17 Web3 Integration [AfterEach] web3 can deploy and interact with smart contracts 
17:35:17 /w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/web3/web3_test.go:112
17:35:17 
17:35:17   Timed out after 30.001s.
17:35:17   Expected
17:35:17       <<-chan error | len:0, cap:1>: 0xc42041e840
17:35:17   to receive something.
17:35:17 
17:35:17   /w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/web3/web3_test.go:107
17:35:17 ------------------------------</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 2:10:33 PM<br><strong>Message</strong>: <pre>Patch Set 19: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/144/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 2:28:51 PM<br><strong>Message</strong>: <pre>Patch Set 19: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/144/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/144</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/11/2019, 5:44:44 PM<br><strong>Message</strong>: <pre>Uploaded patch set 20.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 5:44:51 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/149/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 6:01:39 PM<br><strong>Message</strong>: <pre>Patch Set 20: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/149/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/149</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/11/2019, 6:48:48 PM<br><strong>Message</strong>: <pre>Patch Set 19:

same flake

reverify



11:28:49 [91m[e][34m[OrdererOrg.orderer][0m [34m2019-02-11 19:28:15.186 UTC [orderer.common.server] handleSignals -> INFO 02f[0m Received signal: 15 (terminated)
11:28:49 [91m[e][[fab3-Org1-User1][0m {"level":"info","ts":1549913296.0840046,"logger":"fab3","caller":"cmd/main.go:153","msg":"Fab3 has exited"}
11:28:49 [32m[o][[fab3-Org1-User1][0m  [fabsdk/fab] 2019/02/11 19:28:16 UTC - client.(*Client).close -> WARN Received error from disconnect request: connection already closed
11:28:49 [91m[e][[fab3-Org2-User2][0m {"level":"info","ts":1549913296.5856082,"logger":"fab3","caller":"cmd/main.go:153","msg":"Fab3 has exited"}
11:28:49 [32m[o][[fab3-Org2-User2][0m  [fabsdk/util] 2019/02/11 19:28:28 UTC - lazyref.(*Reference).refreshValue -> WARN Error - initializer returned error: QueryBlockConfig failed: queryChaincode failed: Multiple errors occurred: 
11:28:49 [32m[o][[fab3-Org2-User2][0m Transaction processing for endorser [localhost:30018]: Endorser Client Status Code: (2) CONNECTION_FAILED. Description: dialing connection timed out [localhost:30018]
11:28:49 [32m[o][[fab3-Org2-User2][0m Transaction processing for endorser [localhost:30013]: Endorser Client Status Code: (2) CONNECTION_FAILED. Description: dialing connection timed out [localhost:30013]. Will retry again later
11:28:49 [32m[o][[fab3-Org2-User2][0m  [fabsdk/util] 2019/02/11 19:28:34 UTC - lazyref.(*Reference).refreshValue -> WARN Error - initializer returned error: error calling discover service send: Multiple errors occurred: 
11:28:49 [32m[o][[fab3-Org2-User2][0m From target: localhost:30013: could not connect to localhost:30013: dialing connection timed out [localhost:30013]
11:28:49 [32m[o][[fab3-Org2-User2][0m From target: localhost:30003: could not connect to localhost:30003: dialing connection timed out [localhost:30003]. Will retry again later
11:28:49 [32m[o][[fab3-Org2-User2][0m  [fabsdk/util] 2019/02/11 19:28:34 UTC - lazyref.(*Reference).refreshValue -> WARN Error - initializer returned error: error calling discover service send: Multiple errors occurred: 
11:28:49 [32m[o][[fab3-Org2-User2][0m From target: localhost:30003: could not connect to localhost:30003: dialing connection timed out [localhost:30003]
11:28:49 [32m[o][[fab3-Org2-User2][0m From target: localhost:30013: could not connect to localhost:30013: dialing connection timed out [localhost:30013]
11:28:49 [32m[o][[fab3-Org2-User2][0m From target: localhost:30018: could not connect to localhost:30018: dialing connection timed out [localhost:30018]
11:28:49 [32m[o][[fab3-Org2-User2][0m From target: localhost:30008: could not connect to localhost:30008: dialing connection timed out [localhost:30008]. Will retry again later
11:28:49 
11:28:49 ------------------------------
11:28:49 • Failure in Spec Teardown (AfterEach) [166.872 seconds]
11:28:49 Web3 Integration [AfterEach] web3 can deploy and interact with smart contracts 
11:28:49 /w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/web3/web3_test.go:112
11:28:49 
11:28:49   Timed out after 30.001s.
11:28:49   Expected
11:28:49       <<-chan error | len:0, cap:1>: 0xc4205a2900
11:28:49   to receive something.
11:28:49 
11:28:49   /w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/web3/web3_test.go:107
11:28:49 ------------------------------
11:28:49 
11:28:49 
11:28:49 Summarizing 1 Failure:
11:28:49 
11:28:49 [Fail] Web3 Integration [AfterEach] web3 can deploy and interact with smart contracts 
11:28:49 /w/workspace/fabric-chaincode-evm-verify-x86_64/gopath/src/github.com/hyperledger/fabric-chaincode-evm/integration/web3/web3_test.go:107
11:28:49 
11:28:49 Ran 1 of 1 Specs in 199.461 seconds
11:28:49 FAIL! -- 0 Passed | 1 Failed | 0 Pending | 0 Skipped
11:28:49 --- FAIL: TestWeb3 (199.46s)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 6:48:57 PM<br><strong>Message</strong>: <pre>Patch Set 19: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/151/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 7:05:45 PM<br><strong>Message</strong>: <pre>Patch Set 19: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/151/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/151</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 1:55:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 21: Patch Set 20 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2019, 1:55:19 PM<br><strong>Message</strong>: <pre>Patch Set 21: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/169/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2019, 1:59:12 PM<br><strong>Message</strong>: <pre>Patch Set 21: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/169/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/169</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 5:23:23 PM<br><strong>Message</strong>: <pre>Uploaded patch set 22.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2019, 5:23:32 PM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/174/</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/15/2019, 5:36:08 PM<br><strong>Message</strong>: <pre>Patch Set 22:

(11 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2019, 5:36:32 PM<br><strong>Message</strong>: <pre>Patch Set 22: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/174/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/174</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/18/2019, 3:13:06 PM<br><strong>Message</strong>: <pre>Uploaded patch set 23.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2019, 3:13:18 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/177/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/18/2019, 3:23:32 PM<br><strong>Message</strong>: <pre>Patch Set 23:

might want to edit the contract to both have more events, and have some indexed and some non-indexed.

maybe an anonymous event to have a log with no topics.

might need a case for this later when we do topic matching, so it can be left for then.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2019, 3:27:30 PM<br><strong>Message</strong>: <pre>Patch Set 23: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/177/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/177</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/19/2019, 1:16:05 PM<br><strong>Message</strong>: <pre>Patch Set 23:

(4 comments)

I think the integration test needs one more check.
I think its reasonable to make the contract more complex as the functionality of getLogs evolves.

The last thing left is how we should format the debug logs</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/19/2019, 4:25:15 PM<br><strong>Message</strong>: <pre>Patch Set 23:

(4 comments)

futzing with the logs a bit.

added some more tests info. found another bug.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/19/2019, 4:27:25 PM<br><strong>Message</strong>: <pre>Uploaded patch set 24.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/19/2019, 4:27:33 PM<br><strong>Message</strong>: <pre>Patch Set 24:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/199/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/19/2019, 4:44:25 PM<br><strong>Message</strong>: <pre>Patch Set 24: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/199/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/199</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/19/2019, 5:09:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 25.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/19/2019, 5:10:03 PM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/202/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/19/2019, 5:28:08 PM<br><strong>Message</strong>: <pre>Patch Set 25: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/202/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/202</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/20/2019, 4:40:39 PM<br><strong>Message</strong>: <pre>Uploaded patch set 26.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2019, 4:40:51 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/207/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/20/2019, 5:00:54 PM<br><strong>Message</strong>: <pre>Patch Set 26: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/207/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/207</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 2/21/2019, 10:43:58 PM<br><strong>Message</strong>: <pre>Patch Set 26: Code-Review+2

(6 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 11:05:19 PM<br><strong>Message</strong>: <pre>Patch Set 26: Code-Review+1

(7 comments)

I think the code is good. One question left about the "earliest" as a block parameter. A couple nits on naming and one more suggestion for the test.

I really like the new test added to fab3</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 11:07:05 PM<br><strong>Message</strong>: <pre>Patch Set 26:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 11:19:26 PM<br><strong>Message</strong>: <pre>Patch Set 26:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 2/21/2019, 11:29:16 PM<br><strong>Message</strong>: <pre>Patch Set 26:

(4 comments)

need to make one more pass on  whatever the current version is. too many comments on too many other versions for tonight.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 2:27:34 PM<br><strong>Message</strong>: <pre>Patch Set 26:

(6 comments)

incoming</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 2:28:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 27.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/7/2019, 2:28:48 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/245/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/7/2019, 2:42:47 PM<br><strong>Message</strong>: <pre>Patch Set 27: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/245/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/245</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 5:02:49 PM<br><strong>Message</strong>: <pre>Patch Set 27:

(1 comment)

We need to check that the transactions in the block are evm transactions before we dive into the payload, otherwise we error out before checking every transaction.

Another question this raised was should we error if a transaction results in an error or should we go on to the next tx?</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 5:24:58 PM<br><strong>Message</strong>: <pre>Patch Set 27:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 7:26:59 PM<br><strong>Message</strong>: <pre>Patch Set 27:

(2 comments)

w.r.t. Another question this raised was should we error if a transaction results in an error or should we go on to the next tx?

I think we've been bailing with error return on all of the functions where we iterate over a sequence of blocks or txns.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 8:06:46 PM<br><strong>Message</strong>: <pre>Patch Set 27:

> (2 comments)
 > 
 > w.r.t. Another question this raised was should we error if a
 > transaction results in an error or should we go on to the next tx?
 > 
 > I think we've been bailing with error return on all of the
 > functions where we iterate over a sequence of blocks or txns.

that's true, okay lets continue with that pattern. we can switch later if we think its a better approach</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 8:49:39 PM<br><strong>Message</strong>: <pre>Uploaded patch set 28.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/7/2019, 8:49:51 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/249/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/7/2019, 9:01:50 PM<br><strong>Message</strong>: <pre>Patch Set 28: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/249/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/249</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/7/2019, 9:05:46 PM<br><strong>Message</strong>: <pre>Patch Set 28: Code-Review+1

(2 comments)

Just need a couple tests to cover the non-chaincode transaction situation</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/12/2019, 10:07:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 29.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/12/2019, 10:07:50 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/253/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/12/2019, 10:23:48 PM<br><strong>Message</strong>: <pre>Patch Set 29: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/253/ : FAILURE

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/253</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/12/2019, 10:53:31 PM<br><strong>Message</strong>: <pre>Patch Set 28:

(2 comments)

There are some underlying issues that look to be handled by https://jira.hyperledger.org/browse/FAB-14542

I think this is good enough as is unless we're planning on a release. If so, we should probably do it before merging this.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/12/2019, 11:20:21 PM<br><strong>Message</strong>: <pre>Patch Set 29:

/reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/12/2019, 11:20:31 PM<br><strong>Message</strong>: <pre>Patch Set 29: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/255/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/12/2019, 11:31:50 PM<br><strong>Message</strong>: <pre>Patch Set 29: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/255/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/255</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 2:48:49 PM<br><strong>Message</strong>: <pre>Patch Set 29: Code-Review+2</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 2:56:21 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)

One nit. Can be addressed in one of the future commits</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 3:06:24 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(2 comments)

that's a quick fix, I can do it or not.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 3:22:22 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(2 comments)

Looks good to me, previous nit is not longer a concern. More information in the comments.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 5:56:14 PM<br><strong>Message</strong>: <pre>Patch Set 29: Code-Review-1

(2 comments)

One part of the addition to the integration test introduces a flake. I think a simple fix is to move the genesis block check to the test that has events so we don't need to make assumptions on the state of the ledger.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 6:15:20 PM<br><strong>Message</strong>: <pre>Uploaded patch set 30.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 6:15:27 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/258/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 6:19:45 PM<br><strong>Message</strong>: <pre>Uploaded patch set 31.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 6:19:47 PM<br><strong>Message</strong>: <pre>Patch Set 30: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/258/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/258</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 6:19:53 PM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/261/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 6:22:16 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)

worried about this if running externally, but I realize now that there's only one chain per the tests here. 

for a more e2e test, would be nice to have a different channel or ccid per test thingy.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/13/2019, 6:32:49 PM<br><strong>Message</strong>: <pre>Patch Set 31: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/261/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/261</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 6:42:51 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 10:02:53 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)

I'll try to squeeze in one or two more unit tests, but I think we're at 'good enough'.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/13/2019, 10:30:51 PM<br><strong>Message</strong>: <pre>Patch Set 31: Code-Review+2

no more, blocked by FAB-14542 et al.</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/14/2019, 12:48:33 AM<br><strong>Message</strong>: <pre>Uploaded patch set 32.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/14/2019, 12:48:40 AM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/265/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/14/2019, 12:59:34 AM<br><strong>Message</strong>: <pre>Patch Set 32: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/265/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/265</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/14/2019, 2:26:10 AM<br><strong>Message</strong>: <pre>Patch Set 32: Code-Review+1

(3 comments)

overall LGTM other than some nits, which certainly can be addressed later. Let me know and I'll switch to +2</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/19/2019, 6:19:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 33.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2019, 6:19:42 PM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Started https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/269/</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 3/19/2019, 6:20:57 PM<br><strong>Message</strong>: <pre>Patch Set 33: Code-Review+2

nits addressed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2019, 6:29:22 PM<br><strong>Message</strong>: <pre>Patch Set 33: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-verify-x86_64/269/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-verify-x86_64/269</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/19/2019, 9:23:57 PM<br><strong>Message</strong>: <pre>Patch Set 33: Code-Review+2</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 3/19/2019, 9:24:01 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jay Guo</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2019, 9:37:07 PM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-chaincode-evm-merge-x86_64/42/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-chaincode-evm-merge-x86_64/42</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/24/2019, 3:56:51 PM<br><strong>UnmergedRevision</strong>: [769852166ca76663790f96cfe3630b0794cd66dd](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/769852166ca76663790f96cfe3630b0794cd66dd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/24/2019, 4:18:06 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/24/2019, 3:57:36 PM<br><strong>UnmergedRevision</strong>: [834f81b073871aaee48d7d6808735d8f8099ba83](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/834f81b073871aaee48d7d6808735d8f8099ba83)<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/25/2019, 3:33:51 PM<br><strong>UnmergedRevision</strong>: [992c1ceb063fb68c9a45bd534c18bd74153d8bfa](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/992c1ceb063fb68c9a45bd534c18bd74153d8bfa)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2019, 3:34:13 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/25/2019, 3:34:12 PM<br><strong>UnmergedRevision</strong>: [b771258742fb7be71ddbe4e3313363ee08114a95](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/b771258742fb7be71ddbe4e3313363ee08114a95)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2019, 3:40:32 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/25/2019, 9:26:00 PM<br><strong>UnmergedRevision</strong>: [1d9c31e38f51b3b41238f072e145b326edd96c2d](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/1d9c31e38f51b3b41238f072e145b326edd96c2d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2019, 9:32:34 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/28/2019, 7:20:23 PM<br><strong>UnmergedRevision</strong>: [0924e3f24cfdedf005802dab48ed2239dae2bee1](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/0924e3f24cfdedf005802dab48ed2239dae2bee1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/28/2019, 7:25:54 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/30/2019, 6:04:57 PM<br><strong>UnmergedRevision</strong>: [218afd37745c49a139d8014626e1b85fc7eb9cfa](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/218afd37745c49a139d8014626e1b85fc7eb9cfa)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/30/2019, 6:08:40 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/30/2019, 9:40:04 PM<br><strong>UnmergedRevision</strong>: [e170ab7a7738f35d8ffd1f80b4e57b89e3a34f56](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/e170ab7a7738f35d8ffd1f80b4e57b89e3a34f56)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/30/2019, 9:44:51 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/30/2019, 10:35:50 PM<br><strong>UnmergedRevision</strong>: [a0f91165c77ef160e6309841c29d323170f69663](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/a0f91165c77ef160e6309841c29d323170f69663)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/30/2019, 10:51:32 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/31/2019, 1:13:40 AM<br><strong>UnmergedRevision</strong>: [14fbad23457bb4997ed4e2f412b3fe2cb32922e0](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/14fbad23457bb4997ed4e2f412b3fe2cb32922e0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/31/2019, 11:29:43 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 1/31/2019, 6:01:21 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L55)<br><strong>Comment</strong>: <pre>Since you are making a change in the comments here, can you move the go generate line above as per Jay's suggestion here: https://gerrit.hyperledger.org/r/#/c/29019/3/fab3/ethservice.go@52</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L55](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L55)<br><strong>Comment</strong>: <pre>sure, I'll can fix it for all of them.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L91](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L91)<br><strong>Comment</strong>: <pre>What would be the benefit of custom json.unmarshal? Aren't the addresses and topics returned from the ledger in strings already?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L91](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L91)<br><strong>Comment</strong>: <pre>see followup for address example
https://gerrit.hyperledger.org/r/29095</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L101](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L101)<br><strong>Comment</strong>: <pre>Even though this commit only supports this feature of GetLogsArgs, will we have an issue when the other args are provided?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L101](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L101)<br><strong>Comment</strong>: <pre>they'll be ignored</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L482](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L482)<br><strong>Comment</strong>: <pre>Since we are using line commenting through out the project, let's keep it consistent. Also it should read like a sentence: "GetLogs tries to get all... " and ends with period, see https://github.com/golang/go/wiki/CodeReviewComments#comment-sentences</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L484](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L484)<br><strong>Comment</strong>: <pre>Didn't quite understand this comment.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L484](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L484)<br><strong>Comment</strong>: <pre>implementation detail.

Specifically, I want to validate and parse the args as much as possible before making an expensive remote call to fabric network for a query.

Mainly because it makes it easier to mock and test.

Not as relevant when it's split up and hidden in a parsing stage for unmarshal.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L505](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L505)<br><strong>Comment</strong>: <pre>This would only be a problem if there are many transactions coming through, or if block is generated in between the two queries, which is a rare edge case. You could just check if from and to are the same value without the distinction of latest and process accordingly if you think that would simplify logic.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L505](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L505)<br><strong>Comment</strong>: <pre>gotta think about the edge cases. I think it's not a problem even if it occurs in practice.

ooh, I like that, check if they're the same.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L534](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L534)<br><strong>Comment</strong>: <pre>What conditions is this referring to. I think in line comments should be `//` while longer comments are done with '/**/'</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L534](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L534)<br><strong>Comment</strong>: <pre>the stuff in the scope that follows.

struggling with a way to indicate sections explicitly, but it's probably obvious enough with no comments at all.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L561](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L561)<br><strong>Comment</strong>: <pre>Does it make sense to pull this into a helper function, since this code is repeated in findTransaction:  https://github.com/hyperledger/fabric-chaincode-evm/blob/master/fab3/ethservice.go#L585-L604</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L561](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L561)<br><strong>Comment</strong>: <pre>less than what's highlighted, but yes.

this seems like something the sdk should provide on a 'transaction object' 

I'll do a refactor into some functions, but it's not pretty.

In the far future I'm thinking of something like

txn, err := NewTransaction(common.Envelope) <-most proto unmarshalling happens here, one err
txnID := txn.Hash (already unmarshalled)</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L599](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L599)<br><strong>Comment</strong>: <pre>Same comment as above, since this code is repeated in TxReceipt, can we pull this into its own method. It seems like code that will be used again later too.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L599](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice.go#L599)<br><strong>Comment</strong>: <pre>It makes less sense here.

1. some conditions get inserted in the middle when checking, see previous versions of this or the linked follow up

2. maybe move event.Event stuff into getChaincodeEvents

log creation is a big inline, and maybe can be hidden, but we'll still be passing a  bunch of args somewhere. maybe we can do less formatting on the passing in and more inside a created function, but it'll have to be all passed in and not from the objects that exist in the context.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1055](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice_test.go#L1055)<br><strong>Comment</strong>: <pre>I think we need a few more tests here. One in the case where from and to covers a range of blocks (also to show that the range is inclusive), and change the one we currently have to when the from and to are the same value. Also test cases for "earliest", "pending", or the other named block options.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1055](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/14fbad23457bb4997ed4e2f412b3fe2cb32922e0/fab3/ethservice_test.go#L1055)<br><strong>Comment</strong>: <pre>one block with same arg shows range is inclusive.

need earliest

pending is an existing case of "we don't support it", at the unit-test level we can be more exhaustive.

I'm less scared of multiple blocks and more of empty blocks, or whatever is special about the genesis block.</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 1/31/2019, 8:55:27 PM<br><strong>UnmergedRevision</strong>: [7e88fcd39d6c06ddfde61b9389948e96078888eb](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/7e88fcd39d6c06ddfde61b9389948e96078888eb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/31/2019, 9:11:13 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L380](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L380)<br><strong>Comment</strong>: <pre>Not related to this patch, but this comment should be removed as it is not applicable.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L472](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L472)<br><strong>Comment</strong>: <pre>if we are using line comments in this file (project), let's keep consistency.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L472](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L472)<br><strong>Comment</strong>: <pre>we should write the process and coding standards down.

hyperledger fabric core seems to say to prefer the effective go style.

https://golang.org/doc/effective_go.html#commentary

I think this says to prefer single line comments except for packages.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L472](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L472)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L474](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L474)<br><strong>Comment</strong>: <pre>seems we are logging params differently for different api...</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L474](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L474)<br><strong>Comment</strong>: <pre>we should write the process and coding standards down.

I'm not familiar with zap, but we all need to learn it and be consistent.

so far it looks like we've got a "entering XYZ" followed by a "print params" log. 

I'll convert to that format and try and write up some proposal for the log format, but right now, this logging is all for debug and is very free form.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L474](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L474)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L478](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L478)<br><strong>Comment</strong>: <pre>lower case.
And i think this message should be "unsupported", instead of "unimplemented", because we probably won't have this in fabric in near future.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L478](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L478)<br><strong>Comment</strong>: <pre>sure, but copied from other area.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L478](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L478)<br><strong>Comment</strong>: <pre>this has been addressed in parseBlockNum in this patch: https://gerrit.hyperledger.org/r/#/c/29019/</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L478](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L478)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L511](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L511)<br><strong>Comment</strong>: <pre>I guess go sdk doesn't really support block query by range?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L511](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L511)<br><strong>Comment</strong>: <pre>return multiple blocks in a slice? I did not look.

in the sdk/pkg/client/ledger, I do not see such a method.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L511](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L511)<br><strong>Comment</strong>: <pre>Ack. Gotcha, i looked into sdk and don't find it either. i was looking for an iterator-like method, so we are issuing a stream call to peer, instead of unary call every time.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L512](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L512)<br><strong>Comment</strong>: <pre>Upper case</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L512](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L512)<br><strong>Comment</strong>: <pre>why?

we should write the process and coding standards down.

will change.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L512](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L512)<br><strong>Comment</strong>: <pre>Done. Yes should document them.. what i'm following is:
- lines that are printed to stdout/err should start with Uppercase
- returned error should start with lowercase, because it will probably be wrapped in a printed message, which starts with uppercase</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L530](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L530)<br><strong>Comment</strong>: <pre>if A || B { continue }?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L530](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L530)<br><strong>Comment</strong>: <pre>it's not the same variable, which I could see as confusing.
also it's much wider.

I don't want to make this change.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L530](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L530)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L530](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L530)<br><strong>Comment</strong>: <pre>I thought I changed this. Confused now.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L571](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/7e88fcd39d6c06ddfde61b9389948e96078888eb/fab3/ethservice.go#L571)<br><strong>Comment</strong>: <pre>I still think this should be pulled into its own function. It exactly the same code as https://github.com/hyperledger/fabric-chaincode-evm/blob/master/fab3/ethservice.go#L230-L260. The only difference is where the logs slice is initialized.</pre></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/1/2019, 3:03:50 PM<br><strong>UnmergedRevision</strong>: [f4441af12e854887f5f9ef37a4b98a5b46f355b2](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/f4441af12e854887f5f9ef37a4b98a5b46f355b2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/1/2019, 3:18:00 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/4/2019, 2:31:16 PM<br><strong>UnmergedRevision</strong>: [2e5119663949e01ba0302492c1efe58687336bbe](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/2e5119663949e01ba0302492c1efe58687336bbe)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/4/2019, 2:43:35 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/4/2019, 7:52:14 PM<br><strong>UnmergedRevision</strong>: [d4ca112d7fcee4aab3d88820f7f8044f26191d09](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/d4ca112d7fcee4aab3d88820f7f8044f26191d09)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/4/2019, 7:55:59 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/4/2019, 7:55:57 PM<br><strong>UnmergedRevision</strong>: [1de233e13d47aa1ecb1abf08d2fa0a037536e07d](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/1de233e13d47aa1ecb1abf08d2fa0a037536e07d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/4/2019, 8:00:39 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/4/2019, 8:00:37 PM<br><strong>UnmergedRevision</strong>: [b0f8eafa1e05370826bcfe5e796961ff8e42d371](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/b0f8eafa1e05370826bcfe5e796961ff8e42d371)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/4/2019, 8:57:26 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L460](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L460)<br><strong>Comment</strong>: <pre>If we are going to start logging more I think we need to clean them up significantly. In general I think the practice is not to have spaces. so maybe something like:

 
 logger := s.logger.With("Method", "GetLogs")
 logger.Debug("entering","params", args)


This way all log messages following will have the GetLogs added as a key.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L460](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L460)<br><strong>Comment</strong>: <pre>I agree we should do something like this, as discussed on a previous version in response to Jay. I wrote it this way to correspond with existing usage. Formatting all the logs the same should be a separate task.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L460](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L460)<br><strong>Comment</strong>: <pre>I agree that the old ones should be a separate task. But when adding them I think it is worth going towards a convention we all agree, that we don't keep introducing ones that match the style we would like.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L464](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L464)<br><strong>Comment</strong>: <pre>If we are going to be logging, doesn't it make sense to log these as well as send the error?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L464](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L464)<br><strong>Comment</strong>: <pre>Is there a way to do this with gorilla? Each individual method return seems the wrong way to go about this. For both args and error returns, and perhaps the non-error returns.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L464](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L464)<br><strong>Comment</strong>: <pre>As in get gorilla to log every error? We could look into that</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L477](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L477)<br><strong>Comment</strong>: <pre>wrap error</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L477](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L477)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L486](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L486)<br><strong>Comment</strong>: <pre>wrap error</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L486](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L486)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L491](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L491)<br><strong>Comment</strong>: <pre>Maybe:
fromBlock number is greater than toBlock number?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L491](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L491)<br><strong>Comment</strong>: <pre>yup, not sure why I used those words.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L491](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L491)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L496](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L496)<br><strong>Comment</strong>: <pre>instead of keeping the from and to everywhere you should correlate things with a request id or something more unique to the transaction.

If you specifically want to track the from and the to for every log message following you want.

 logger := s.logger.With("from",from, "to",to)

Otherwise if it is meant to be just one log line,

 logger.Debugw("handling-blocks", "from", from, "to", to) 

is the recommended way to do this.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L496](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L496)<br><strong>Comment</strong>: <pre>We may have access to the id in the request arg. Could be a function to parse that out and set up the logger. 

With adds data in a structured way for querying, it should all be in the log entry.

The second log suggestion output equivalent, but I didn't realize that existed. Looking into is interesting. The non-sugared logger supports a form of with, but it is not the same. I had the non-W sugar logger and that smooshes all the fields together with no spaces, so I'm happy to learn about the w form.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L496](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L496)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L501](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L501)<br><strong>Comment</strong>: <pre>lowercase, and use %s, not %v</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L507](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L507)<br><strong>Comment</strong>: <pre>This debug line doesn't seem necessary if you are going to log every transaction. Also not sure the value of knowing the length of block data.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L507](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L507)<br><strong>Comment</strong>: <pre>some are going to be skipped for various reason, no data or invalid.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L515](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L515)<br><strong>Comment</strong>: <pre>I agree with Jay, I do thinks these can be combined into one conditional. In the end they are both for checking the validity of the transaction</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L515](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L515)<br><strong>Comment</strong>: <pre>ok</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L515](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L515)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L521](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L521)<br><strong>Comment</strong>: <pre>wrap the error</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L521](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L521)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L527](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L527)<br><strong>Comment</strong>: <pre>this error is never checked.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L527](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L527)<br><strong>Comment</strong>: <pre>oops</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L527](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L527)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L540](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L540)<br><strong>Comment</strong>: <pre>Maybe a more helping message could be exiting? Even a defer might be nicer, even with the extra cost of adding a defer since there are many different ways this function can exit. And we aren't bottlenecked on the performance of fab3. 
Also I don't think we should be having all the txLogs in debug either. I think these clutter up debug logs a lot making it hard to read.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L546](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L546)<br><strong>Comment</strong>: <pre>Should this be TransactionData?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L708](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L708)<br><strong>Comment</strong>: <pre>I know this is not introduced by this PR but since you are already touching the line, change this to be lowercase.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L708](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L708)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L713](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L713)<br><strong>Comment</strong>: <pre>lowercase.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L713](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice.go#L713)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1077](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice_test.go#L1077)<br><strong>Comment</strong>: <pre>We should still have an it using "latest" as a block parameter. We also need error cases in case the ledger returns an error.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1151](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice_test.go#L1151)<br><strong>Comment</strong>: <pre>I am not a fan of us permanently adding events to every block also that we don't have a transaction with no logs in the same block. But since the change doesn't affect current tests we can revisit this decision later.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1151](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/b0f8eafa1e05370826bcfe5e796961ff8e42d371/fab3/ethservice_test.go#L1151)<br><strong>Comment</strong>: <pre>We should establish a common scenario rather than hand-building each in the run-up to a test.</pre></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/8/2019, 3:13:59 PM<br><strong>UnmergedRevision</strong>: [63671175ab1f0e842e671b4e95e629b8b7c98a4e](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/63671175ab1f0e842e671b4e95e629b8b7c98a4e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/8/2019, 3:34:06 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/8/2019, 8:09:32 PM<br><strong>UnmergedRevision</strong>: [0ff29ac4bc37f92bdd23a304d772467e38d15c05](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/0ff29ac4bc37f92bdd23a304d772467e38d15c05)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/8/2019, 8:13:52 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/8/2019, 8:16:45 PM<br><strong>UnmergedRevision</strong>: [bdc15c1be5a18bfaa9ee52bb4ac5f0764a6e637f](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/bdc15c1be5a18bfaa9ee52bb4ac5f0764a6e637f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/11/2019, 7:05:45 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/11/2019, 5:44:44 PM<br><strong>UnmergedRevision</strong>: [5205508fcf5b47858414b43e47ef46625aab6661](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/5205508fcf5b47858414b43e47ef46625aab6661)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/11/2019, 6:01:39 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/15/2019, 1:55:08 PM<br><strong>UnmergedRevision</strong>: [ba3fcc52fb58d5f6c387a299d580dfed937bd7a9](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/ba3fcc52fb58d5f6c387a299d580dfed937bd7a9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/15/2019, 1:59:12 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 22</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/15/2019, 5:23:23 PM<br><strong>UnmergedRevision</strong>: [854f3ffef21d36bce57b9100ea6697e4cf207631](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/854f3ffef21d36bce57b9100ea6697e4cf207631)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/15/2019, 5:36:32 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 23</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/18/2019, 3:13:06 PM<br><strong>UnmergedRevision</strong>: [87fea4b58b1402c46f18782aa7be0653880b6fa8](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/87fea4b58b1402c46f18782aa7be0653880b6fa8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/18/2019, 3:27:30 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L534](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/fab3/ethservice.go#L534)<br><strong>Comment</strong>: <pre>lol, oops.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L247](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/fab3/fab3_test.go#L247)<br><strong>Comment</strong>: <pre>remove wip comment</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L307](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/fab3/fab3_test.go#L307)<br><strong>Comment</strong>: <pre>What is this line doing?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L307](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/fab3/fab3_test.go#L307)<br><strong>Comment</strong>: <pre>being super helpful and printing stuff out.

should add logging of the body to the json requester.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L311](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/fab3/fab3_test.go#L311)<br><strong>Comment</strong>: <pre>Can we add an expectation on the contents of the log?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L311](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/fab3/fab3_test.go#L311)<br><strong>Comment</strong>: <pre>yup, sure.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/helpers/utils.go#L10](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/helpers/utils.go#L10)<br><strong>Comment</strong>: <pre>Depending on which patch goes in first, this dependency will eventually be removed once the structs are all played in their own types package.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/helpers/utils.go#L10](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/87fea4b58b1402c46f18782aa7be0653880b6fa8/integration/helpers/utils.go#L10)<br><strong>Comment</strong>: <pre>oh no, does this work? It definitely will go away, so one of em is going to have to rebase.</pre></blockquote><h3>PatchSet Number: 24</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/19/2019, 4:27:25 PM<br><strong>UnmergedRevision</strong>: [0f45f06825e7de3c22558657dcc3972a162618c0](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/0f45f06825e7de3c22558657dcc3972a162618c0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/19/2019, 4:44:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 25</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/19/2019, 5:09:53 PM<br><strong>UnmergedRevision</strong>: [88f9eca5268050f0f74b6cd9ea0690f6e0ecac30](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/88f9eca5268050f0f74b6cd9ea0690f6e0ecac30)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/19/2019, 5:28:08 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L425](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/88f9eca5268050f0f74b6cd9ea0690f6e0ecac30/fab3/ethservice.go#L425)<br><strong>Comment</strong>: <pre>errors.Wrap</pre></blockquote><h3>PatchSet Number: 26</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 2/20/2019, 4:40:39 PM<br><strong>UnmergedRevision</strong>: [f9e7965fb15eea3e9224a37bf078e44d37bf0402](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/f9e7965fb15eea3e9224a37bf078e44d37bf0402)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/20/2019, 5:00:54 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 2/21/2019, 10:43:58 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 2/21/2019, 11:05:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L389](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/fab3/ethservice.go#L389)<br><strong>Comment</strong>: <pre>I know the spec says that earliest is equivalent to pending but the code in go-ethereum / geth still uses earliest to mean block 0 in their GetLogs implementation: 
https://github.com/ethereum/go-ethereum/blob/c4a1d4fecf5efcf5095c667b7b311061173799b4/eth/filters/api.go#L335 and https://github.com/ethereum/go-ethereum/blob/c4a1d4fecf5efcf5095c667b7b311061173799b4/rpc/types.go#L124-L142.

I think it makes more sense to follow the code than the spec. I have a feeling its a mistake in the spec.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L389](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/fab3/ethservice.go#L389)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L471](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/fab3/ethservice.go#L471)<br><strong>Comment</strong>: <pre>Shouldn't this be named TransactionData

nit, can we move this down below the ethService private methods.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L471](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/fab3/ethservice.go#L471)<br><strong>Comment</strong>: <pre>Done & Done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1139](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/fab3/ethservice_test.go#L1139)<br><strong>Comment</strong>: <pre>If we are going to compare with explicit args I think you should compare the replies not just check the log length.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1139](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/fab3/ethservice_test.go#L1139)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L235](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L235)<br><strong>Comment</strong>: <pre>if no other changes are needed this doesn't need to be addressed in this patch but move extra line to after the closing brace.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L235](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L235)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L266](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L266)<br><strong>Comment</strong>: <pre>add the fix about the marshaling bug we had in the tests.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L266](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L266)<br><strong>Comment</strong>: <pre>for reference: https://gerrit.hyperledger.org/r/#/c/29463/</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L266](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L266)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L296](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L296)<br><strong>Comment</strong>: <pre>bug as above</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L306](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L306)<br><strong>Comment</strong>: <pre>leftover from debugging?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L318](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/integration/fab3/fab3_test.go#L318)<br><strong>Comment</strong>: <pre>hard code this thing.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [mocks/fab3/mockledgerclient.go#L11](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/mocks/fab3/mockledgerclient.go#L11)<br><strong>Comment</strong>: <pre>why does this keep changing? what is the expected change with the current version of counterfeiter?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [mocks/fab3/mockledgerclient.go#L11](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/mocks/fab3/mockledgerclient.go#L11)<br><strong>Comment</strong>: <pre>ran counterfeiter on master. I think counterfeiter needs to be run on this patch once so the mocks are on the same version</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [mocks/fab3/mockledgerclient.go#L11](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/f9e7965fb15eea3e9224a37bf078e44d37bf0402/mocks/fab3/mockledgerclient.go#L11)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 27</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/7/2019, 2:28:37 PM<br><strong>UnmergedRevision</strong>: [542ec4758e818e4ad059e5ac2bc8a7a69ebf4024](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/542ec4758e818e4ad059e5ac2bc8a7a69ebf4024)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/7/2019, 2:42:47 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L444](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/542ec4758e818e4ad059e5ac2bc8a7a69ebf4024/fab3/ethservice.go#L444)<br><strong>Comment</strong>: <pre>respPayload has a ChaincodeID as a field. We can check it against the ccid that was passed into fab3, which means we need to pass along ccid into the fab3 instance.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L444](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/542ec4758e818e4ad059e5ac2bc8a7a69ebf4024/fab3/ethservice.go#L444)<br><strong>Comment</strong>: <pre>Checking, I think you mean into ethservice, right?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L447](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/542ec4758e818e4ad059e5ac2bc8a7a69ebf4024/fab3/ethservice.go#L447)<br><strong>Comment</strong>: <pre>We run into a problem here if a transaction is not an evmcc one. It causes some of the unmarshalling to fail resulting in an error but getLogs should just pass over the function. 
I came about the error when i pass in "earliest" as the fromBlock and it tries to parse the genesis block, but I think none evm transactions might also run into the same issue.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L447](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/542ec4758e818e4ad059e5ac2bc8a7a69ebf4024/fab3/ethservice.go#L447)<br><strong>Comment</strong>: <pre>parsing the genesis block was definitely a problem I recall having hit before.

I couldn't come up with anything else to cause a bad transaction, but it'd be great to understand the failure cases.</pre></blockquote><h3>PatchSet Number: 28</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/7/2019, 8:49:39 PM<br><strong>UnmergedRevision</strong>: [3ab146a7dcc08182642baee0b7bd49a2325a6b07](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/3ab146a7dcc08182642baee0b7bd49a2325a6b07)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/7/2019, 9:01:50 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 3/7/2019, 9:05:46 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1128](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/3ab146a7dcc08182642baee0b7bd49a2325a6b07/fab3/ethservice_test.go#L1128)<br><strong>Comment</strong>: <pre>I think we should add a test case for transactions that do not have the right channel header type</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [fab3/ethservice_test.go#L1128](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/3ab146a7dcc08182642baee0b7bd49a2325a6b07/fab3/ethservice_test.go#L1128)<br><strong>Comment</strong>: <pre>We handle the genesis block which will have that type.

I think we have a bigger general miss case where this needs to be handled for getblock* functions.

I want to change the GetSampleBlock scenario, but it ripples outwards and starts failing multiple tests. It'd be better to get those changes in separate from this change.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L303](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/3ab146a7dcc08182642baee0b7bd49a2325a6b07/integration/fab3/fab3_test.go#L303)<br><strong>Comment</strong>: <pre>can we add:

  "fromBlock":"earliest"</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L303](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/3ab146a7dcc08182642baee0b7bd49a2325a6b07/integration/fab3/fab3_test.go#L303)<br><strong>Comment</strong>: <pre>I think we have this case now.

It will handle the genesis block.</pre></blockquote><h3>PatchSet Number: 29</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/12/2019, 10:07:41 PM<br><strong>UnmergedRevision</strong>: [49eb96e5795961e00b2c27c04120c78da419054f](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/49eb96e5795961e00b2c27c04120c78da419054f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/12/2019, 11:31:50 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Approved</strong>: 3/13/2019, 5:56:14 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L230](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L230)<br><strong>Comment</strong>: <pre>can we say something here alone the lines of querying a contract transaction that has no logs?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L241](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L241)<br><strong>Comment</strong>: <pre>how about this one? it goes through a bunch of blocks including genesis?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L241](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L241)<br><strong>Comment</strong>: <pre>yup this should be enough.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L248](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L248)<br><strong>Comment</strong>: <pre>This test can fail depending on the order of the tests being run. When in a random order, if the test that starts at line 251 is run first, logs will generated on the test network. Since the test network is shared amongst all the tests, this test fails as logs have been generated from the other test.

I think we should remove the genesis block check here and add it to the next test when querying for logs.</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L248](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L248)<br><strong>Comment</strong>: <pre>was worried about something like this, I think it's easier to explicitly restrain to the 0 block.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L248](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L248)<br><strong>Comment</strong>: <pre>sure we can do that as well. The reason I suggested moving into the other test is we still can test that getLogs works on a range of blocks. Otherwise all examples only test a single block</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L248](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L248)<br><strong>Comment</strong>: <pre>If all of these scenarios can run at any time, there doesn't seem to be any deterministic way to know how many blocks we're going to get and what they ought to contain.

I have lots of ideas on how we can do this, but I'd want to first refactor the test structure here to hide the common functionality and have it less procedurally driven. I can see now lots of duplication between the test structure already. Changes I want to make require more refactors, but I don't want to get started in this change as it's already big enough.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L316](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L316)<br><strong>Comment</strong>: <pre>nit, can we pass in fromBlock: "earliest"?</pre><strong>Commenter</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L316](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L316)<br><strong>Comment</strong>: <pre>what do we think we're going to find here vs the other place?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [integration/fab3/fab3_test.go#L316](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/49eb96e5795961e00b2c27c04120c78da419054f/integration/fab3/fab3_test.go#L316)<br><strong>Comment</strong>: <pre>i think the one above is good enough. missed in my original pass through</pre></blockquote><h3>PatchSet Number: 30</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/13/2019, 6:15:20 PM<br><strong>UnmergedRevision</strong>: [59f4d93e5b14e92330649a9f5de2c6453ab64dbe](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/59f4d93e5b14e92330649a9f5de2c6453ab64dbe)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/13/2019, 6:19:47 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 31</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/13/2019, 6:19:45 PM<br><strong>UnmergedRevision</strong>: [db27c6f6e3377e6f847d8abd067808748f324b66](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/db27c6f6e3377e6f847d8abd067808748f324b66)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/13/2019, 6:32:49 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 3/13/2019, 10:30:51 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L455](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/db27c6f6e3377e6f847d8abd067808748f324b66/fab3/ethservice.go#L455)<br><strong>Comment</strong>: <pre>IIUC, this prints a []byte? how does it help debugging?</pre></blockquote><h3>PatchSet Number: 32</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/14/2019, 12:48:33 AM<br><strong>UnmergedRevision</strong>: [518816d7e8f77985df399e451684c9832b5798be](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/518816d7e8f77985df399e451684c9832b5798be)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/14/2019, 12:59:34 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 3/14/2019, 2:26:10 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/ethservice.go#L455](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/518816d7e8f77985df399e451684c9832b5798be/fab3/ethservice.go#L455)<br><strong>Comment</strong>: <pre>how does printing []byte help debugging?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [fab3/types/types.go#L36](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/blob/518816d7e8f77985df399e451684c9832b5798be/fab3/types/types.go#L36)<br><strong>Comment</strong>: <pre>I know comments are copied from ethereum JSON RPC doc, but shouldn't we adopt it within the context of Fabric. Specifically, we should reason about mining here.

Also, let's put comments above code, not below.</pre></blockquote><h3>PatchSet Number: 33</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Uploader</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Created</strong>: 3/19/2019, 6:19:28 PM<br><strong>GitHubMergedRevision</strong>: [ddd84e2a3675dcdbccfad8416f41cfa5ec7049da](https://github.com/hyperledger-gerrit-archive/fabric-chaincode-evm/commit/ddd84e2a3675dcdbccfad8416f41cfa5ec7049da)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/19/2019, 6:29:22 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 3/19/2019, 9:23:57 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jay Guo<br><strong>Merged</strong>: 3/19/2019, 9:24:01 PM<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 3/19/2019, 6:20:57 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>