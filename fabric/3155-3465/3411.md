<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 3411<br><strong>Subject</strong>: renaming and restructuring of NCAP<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 12/19/2016, 4:58:24 PM<br><strong>LastUpdated</strong>: 12/21/2016, 3:50:44 PM<br><strong>CommitMessage</strong>:<br><pre>renaming and restructuring of NCAP

The architeture document naming is consolidated with the code. For
instance:
1) batches --> blocks
2) consenters --> orderers
3) consensus service --> ordering service

Additionally, validated ledger has been tagged as post-v1.
readset/writeset defs have been updated.

Change-Id: I02d701215bb313271fc13111361fb8fa3817dc8d
Signed-off-by: Marko Vukolic <mvu@zurich.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Reviewed</strong>: 12/19/2016, 4:58:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/19/2016, 5:02:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4308/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/19/2016, 6:04:47 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4308/ : SUCCESS</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 12/20/2016, 1:29:43 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Reviewed</strong>: 12/20/2016, 5:46:07 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Reviewed</strong>: 12/20/2016, 5:48:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/20/2016, 5:50:51 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4318/</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 12/20/2016, 5:52:37 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+1</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/20/2016, 6:23:58 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4318/ : SUCCESS</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/20/2016, 7:41:24 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(21 comments)

overall looking pretty good.  still need to read later sections again, but I've offered up some grammatical and syntactical changes to start with for now</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 10:07:36 AM<br><strong>Message</strong>: <pre>Patch Set 2:

So I think we should merge this and then I can make my edits.  There is too much confusion out there and at least this is up to date</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 10:07:38 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 12/21/2016, 3:17:43 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 3:17:46 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Christopher Ferris</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 3:17:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-power-ppc64le/2/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 3:17:58 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-z/2/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 3:20:52 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/623/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/21/2016, 3:50:44 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-z/2/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-merge-power-ppc64le/2/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/623/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Uploader</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Created</strong>: 12/19/2016, 4:58:24 PM<br><strong>UnmergedRevision</strong>: [7fa617d2d9302a81861a414e86a85c1f86f9d439](https://github.com/hyperledger-gerrit-archive/fabric/commit/7fa617d2d9302a81861a414e86a85c1f86f9d439)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/19/2016, 6:04:47 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L250](https://github.com/hyperledger-gerrit-archive/fabric/blob/7fa617d2d9302a81861a414e86a85c1f86f9d439/proposals/r1/Next-Consensus-Architecture-Proposal.md#L250)<br><strong>Comment</strong>: <pre>Thanks for fixing this line. However, the highlighted text should be removed. The write-set need not be a subset of the read-set.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L363](https://github.com/hyperledger-gerrit-archive/fabric/blob/7fa617d2d9302a81861a414e86a85c1f86f9d439/proposals/r1/Next-Consensus-Architecture-Proposal.md#L363)<br><strong>Comment</strong>: <pre>I think that the VLedger can also be pruned at this stage. Because, a copy of the check-pointed state is preserved. 

In fact, I do not think that practically, we would get much storage benefits by converting Peerledger to VLedger because, one of the basic assumption is that there will typically be a very low number of conflicting trans.

To me it makes more sense not to have vLedger at all and to maintain a check-pointed state (may be one or two previous states and keep pruning the older states as well) + PeerLedger blocks thereon. Further, the frequency of state check-pointing should be large enough so that the latest state becomes significant smaller than the blocks gathered since last check-pointed state.</pre><strong>Commenter</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L363](https://github.com/hyperledger-gerrit-archive/fabric/blob/7fa617d2d9302a81861a414e86a85c1f86f9d439/proposals/r1/Next-Consensus-Architecture-Proposal.md#L363)<br><strong>Comment</strong>: <pre>In principle I agree with this - but there were some very vocal opinions on the need for having a ledger with only valid transactions. What I suggest is that the decision on removal of Validated kedger be taken in a separate changeset. This one merely reorganizes what was already in the document.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Uploader</strong>: Marko Vukolic - mvu@zurich.ibm.com<br><strong>Created</strong>: 12/20/2016, 5:48:39 AM<br><strong>GitHubMergedRevision</strong>: [a692f9386dca982100de47066d3bea3e1e4af880](https://github.com/hyperledger-gerrit-archive/fabric/commit/a692f9386dca982100de47066d3bea3e1e4af880)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 12/21/2016, 3:17:43 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Christopher Ferris<br><strong>Merged</strong>: 12/21/2016, 3:17:46 PM<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/20/2016, 6:23:58 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 12/20/2016, 5:52:37 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 12/21/2016, 10:07:38 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L41](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L41)<br><strong>Comment</strong>: <pre>should probably change this to "Lifecycle" transactions now that we support deploy, upgrade, etc</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L45](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L45)<br><strong>Comment</strong>: <pre>should remove the last comma</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L53)<br><strong>Comment</strong>: <pre>"Notice that while ... "</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L55)<br><strong>Comment</strong>: <pre>what's the "X" for?  possible I am not familiar with this type of notation but not sure what the intent of "X" here is?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L70)<br><strong>Comment</strong>: <pre>remove comma</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L70)<br><strong>Comment</strong>: <pre>"transacting with"</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L70)<br><strong>Comment</strong>: <pre>"as belonging"</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L75)<br><strong>Comment</strong>: <pre>"denoted" ?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L75)<br><strong>Comment</strong>: <pre>"which occur" ?   but comma should be removed</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L75)<br><strong>Comment</strong>: <pre>"denoted" ?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L79)<br><strong>Comment</strong>: <pre>"differentiates" ?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L79)<br><strong>Comment</strong>: <pre>"the"</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L79)<br><strong>Comment</strong>: <pre>"the"</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L81)<br><strong>Comment</strong>: <pre>I'd remove this from here and have a section on items to be addressed in the future</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L91](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L91)<br><strong>Comment</strong>: <pre>remove comma</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L93](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L93)<br><strong>Comment</strong>: <pre>remove comma</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L93](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L93)<br><strong>Comment</strong>: <pre>"Peers can also have a special "</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L101)<br><strong>Comment</strong>: <pre>remove</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L107](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L107)<br><strong>Comment</strong>: <pre>"maintains the ledger and its associated state."</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L109](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L109)<br><strong>Comment</strong>: <pre>"(**endorser**)"</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [proposals/r1/Next-Consensus-Architecture-Proposal.md#L109](https://github.com/hyperledger-gerrit-archive/fabric/blob/a692f9386dca982100de47066d3bea3e1e4af880/proposals/r1/Next-Consensus-Architecture-Proposal.md#L109)<br><strong>Comment</strong>: <pre>"on the"  ?</pre></blockquote>