<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 3327<br><strong>Subject</strong>: Goosip MessageCryptoService and SecurityAdvisor Impl<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 12/15/2016, 10:37:48 AM<br><strong>LastUpdated</strong>: 1/29/2017, 6:32:43 PM<br><strong>CommitMessage</strong>:<br><pre>Goosip MessageCryptoService and SecurityAdvisor Impl

This change-set implements the gossip MessageCryptoService and
SecurityAdvisor. This implementation will be used by
a peer to initialiaze the gossip layer.

What remains to do is to integrate the channel read
policies once they are in place.

This change-set comes in the context of JIRA item:
https://jira.hyperledger.org/browse/FAB-1394
Notice that before starting using the implementation
provided by this change-set, the implementation of
identity.GetOrganizationUnits() and the enforcement
that DeserializeIdentity fails when the mspIDs do not match
must be in place.

Change-Id: I8b9cbe90044de14a68ba78ce5f7391f9e5da2cd0
Signed-off-by: Angelo De Caro <adc@zurich.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 12/15/2016, 10:37:48 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/15/2016, 10:42:11 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4176/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/15/2016, 10:46:25 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4176/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 12/15/2016, 10:56:28 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Patch Set 1 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/15/2016, 11:01:10 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4180/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/15/2016, 11:07:12 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4180/ : FAILURE</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 12/15/2016, 12:18:15 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(5 comments)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 12/16/2016, 5:14:35 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 5:15:58 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4227/</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 12/16/2016, 5:17:49 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 12/16/2016, 5:18:05 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 5:18:55 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4227/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 5:20:00 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4228/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 5:22:42 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4228/ : FAILURE</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 12/16/2016, 5:24:51 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 12/16/2016, 5:34:02 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 5:35:14 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4229/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 6:06:23 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4229/ : FAILURE</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 12/16/2016, 6:09:17 PM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 6:10:25 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4230/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/16/2016, 6:43:34 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4230/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 12/17/2016, 2:12:40 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+1</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/6/2017, 7:37:06 AM<br><strong>Message</strong>: <pre>Patch Set 6: Patch Set 5 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/6/2017, 7:40:41 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4744/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/6/2017, 8:25:42 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/4744/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/11/2017, 7:35:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7: Patch Set 6 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 7:38:41 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5003/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 8:02:15 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5003/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/11/2017, 10:14:55 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 10:16:21 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5010/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 10:19:32 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5010/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/11/2017, 10:35:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 10:39:19 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5012/</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/11/2017, 10:41:07 AM<br><strong>Message</strong>: <pre>Patch Set 9:

(2 comments)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/11/2017, 10:50:57 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 10:55:14 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5014/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 11:17:03 AM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5012/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/11/2017, 11:21:21 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5014/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/12/2017, 3:36:58 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11: Patch Set 10 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/12/2017, 3:40:15 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5059/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/12/2017, 4:09:06 AM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5059/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/12/2017, 8:38:20 AM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/12/2017, 8:41:16 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5069/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/12/2017, 9:03:18 AM<br><strong>Message</strong>: <pre>Patch Set 12: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5069/ : FAILURE</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2017, 6:43:56 AM<br><strong>Message</strong>: <pre>Patch Set 13: Patch Set 12 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2017, 6:45:15 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5161/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2017, 7:22:19 AM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5161/ : SUCCESS</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/14/2017, 8:54:38 AM<br><strong>Message</strong>: <pre>Patch Set 13:

is this still WIP?</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 7:24:05 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Hi Gari, yes, it is.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 7:42:48 AM<br><strong>Message</strong>: <pre>Patch Set 13:

We still need to finalize certains details and then we are done :)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 9:17:58 AM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 9:21:04 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5243/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2017, 10:00:20 AM<br><strong>Message</strong>: <pre>Patch Set 14: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5243/ : FAILURE</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 5:41:21 PM<br><strong>Message</strong>: <pre>Patch Set 14:

please fix year 2016->2017 in newly added files.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/16/2017, 5:44:47 PM<br><strong>Message</strong>: <pre>Patch Set 14:

(2 comments)

I'll continue reviewing this tomorrow. 
Do you know the code coverage % of the mcs_test and sa_test?</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/17/2017, 4:42:29 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Angelo, since the peer checks the signature on the configuration block, and the JoinChannelMessage is built from it- perhaps we should remove the validation from the securityAdvisor?</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/17/2017, 7:27:53 AM<br><strong>Message</strong>: <pre>Patch Set 14:

(1 comment)

Hi Yacov, as we discussed, if you can make that assumption then we can definitely remove that method :)

For the test coverage, I know that it is pretty low now. But the change-set is still a work in progress.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/17/2017, 7:41:05 AM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 7:44:03 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5285/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 8:24:07 AM<br><strong>Message</strong>: <pre>Patch Set 15: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5285/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/24/2017, 5:11:35 PM<br><strong>Message</strong>: <pre>Uploaded patch set 16: Patch Set 15 was rebased.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/24/2017, 5:13:39 PM<br><strong>Message</strong>: <pre>Uploaded patch set 17.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 5:14:57 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5607/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 5:15:54 PM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5609/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 6:00:26 PM<br><strong>Message</strong>: <pre>Patch Set 17: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5609/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/24/2017, 6:17:09 PM<br><strong>Message</strong>: <pre>Patch Set 16: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5607/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/25/2017, 9:28:35 AM<br><strong>Message</strong>: <pre>Uploaded patch set 18.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/25/2017, 9:29:22 AM<br><strong>Message</strong>: <pre>Uploaded patch set 19.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 9:30:29 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5630/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 9:32:05 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5631/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 9:37:32 AM<br><strong>Message</strong>: <pre>Patch Set 19: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5631/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/25/2017, 10:22:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 20.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 10:25:18 AM<br><strong>Message</strong>: <pre>Patch Set 18: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5630/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 10:26:30 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5639/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 11:14:19 AM<br><strong>Message</strong>: <pre>Patch Set 20: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5639/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/25/2017, 12:22:47 PM<br><strong>Message</strong>: <pre>Patch Set 20:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 12:27:28 PM<br><strong>Message</strong>: <pre>Patch Set 20: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5653/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 1:27:24 PM<br><strong>Message</strong>: <pre>Patch Set 20: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5653/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/25/2017, 2:44:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 21.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 2:47:40 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5669/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/25/2017, 2:58:20 PM<br><strong>Message</strong>: <pre>Patch Set 21: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5669/ : SUCCESS</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 1/25/2017, 3:31:56 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(5 comments)

Hi, Thanks Angelo!
Looks good to me but few minor comments. 
Regards,</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 9:06:31 AM<br><strong>Message</strong>: <pre>Uploaded patch set 22: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 9:09:08 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5721/</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 9:10:03 AM<br><strong>Message</strong>: <pre>Patch Set 22: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 9:15:09 AM<br><strong>Message</strong>: <pre>Patch Set 22:

(4 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 9:27:32 AM<br><strong>Message</strong>: <pre>Patch Set 22: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5721/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 9:50:19 AM<br><strong>Message</strong>: <pre>Uploaded patch set 23.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 9:54:42 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5729/</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 10:11:26 AM<br><strong>Message</strong>: <pre>Uploaded patch set 24.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 10:13:42 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5730/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 10:16:17 AM<br><strong>Message</strong>: <pre>Patch Set 23: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5729/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 11:29:54 AM<br><strong>Message</strong>: <pre>Patch Set 24: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5730/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 1:26:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 25: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 1:28:42 PM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5741/</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/26/2017, 2:06:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 26.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 2:10:34 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5748/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 2:33:53 PM<br><strong>Message</strong>: <pre>Patch Set 25: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5741/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/26/2017, 3:05:51 PM<br><strong>Message</strong>: <pre>Patch Set 26: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5748/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/27/2017, 11:50:01 AM<br><strong>Message</strong>: <pre>Uploaded patch set 27.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/27/2017, 11:51:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 28.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 11:52:21 AM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5801/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 11:56:00 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5802/</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/27/2017, 11:56:04 AM<br><strong>Message</strong>: <pre>Patch Set 28:

(1 comment)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/27/2017, 12:21:43 PM<br><strong>Message</strong>: <pre>Uploaded patch set 29.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/27/2017, 12:24:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 30.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 12:25:48 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5806/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 12:27:56 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5807/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 12:28:58 PM<br><strong>Message</strong>: <pre>Patch Set 27: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5801/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 12:41:23 PM<br><strong>Message</strong>: <pre>Patch Set 30: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5807/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 12:59:38 PM<br><strong>Message</strong>: <pre>Patch Set 28: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5802/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/27/2017, 1:16:27 PM<br><strong>Message</strong>: <pre>Patch Set 30:

(3 comments)

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 1:20:38 PM<br><strong>Message</strong>: <pre>Patch Set 30: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5810/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 1:32:59 PM<br><strong>Message</strong>: <pre>Patch Set 29: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5806/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/27/2017, 2:26:02 PM<br><strong>Message</strong>: <pre>Patch Set 30: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5810/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/28/2017, 8:09:11 PM<br><strong>Message</strong>: <pre>Patch Set 31: Patch Set 30 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/28/2017, 8:11:59 PM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5864/</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/28/2017, 9:02:26 PM<br><strong>Message</strong>: <pre>Patch Set 31:

(13 comments)

Hey Angelo.

Thanks a lot for the work in implementing the needed crypto methods we need! 
I left some comments, please take a look.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/28/2017, 9:03:15 PM<br><strong>Message</strong>: <pre>Patch Set 31: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5864/ : SUCCESS</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 7:19:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 32.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 7:19:58 AM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5875/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 8:22:49 AM<br><strong>Message</strong>: <pre>Patch Set 32: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5875/ : SUCCESS</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:06:18 AM<br><strong>Message</strong>: <pre>Patch Set 32:

(7 comments)

Thanks Angelo!

Please find below some (reminder) comments as discussed.

With thanks,
Elli</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:08:45 AM<br><strong>Message</strong>: <pre>Patch Set 32: Code-Review+2

Thanks a lot for addressing the comments, and nice refactoring on the getValidatedIdentity method!</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:27:41 AM<br><strong>Message</strong>: <pre>Patch Set 32:

(5 comments)</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:36:10 AM<br><strong>Message</strong>: <pre>Patch Set 32: Code-Review+1

After discussion with Yacov and Angelo, I agree with my comments being addressed in a subsequent CR. For now it LGTM. Thanks!</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:39:53 AM<br><strong>Message</strong>: <pre>Patch Set 32:

(1 comment)

Also some responses to Yacov's comments.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:45:49 AM<br><strong>Message</strong>: <pre>Patch Set 32:

(1 comment)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:47:23 AM<br><strong>Message</strong>: <pre>Patch Set 32: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:49:45 AM<br><strong>Message</strong>: <pre>Patch Set 32:

(1 comment)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 10:54:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 33.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 10:57:28 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5879/</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 11:01:48 AM<br><strong>Message</strong>: <pre>Patch Set 33: Code-Review+1

(2 comments)

I am good with the answers and changes. Some answers to Yacov's comments :)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 11:05:56 AM<br><strong>Message</strong>: <pre>Patch Set 33:

(1 comment)</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 11:34:44 AM<br><strong>Message</strong>: <pre>Patch Set 33:

(1 comment)

Also answering to Angelo's question.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/29/2017, 11:53:34 AM<br><strong>Message</strong>: <pre>Patch Set 33: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 12:03:21 PM<br><strong>Message</strong>: <pre>Patch Set 33: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5879/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 1/29/2017, 5:22:32 PM<br><strong>Message</strong>: <pre>Patch Set 33: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 5:22:34 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Binh Nguyen</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 5:23:29 PM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/904/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/29/2017, 6:32:43 PM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/904/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 12/15/2016, 10:37:48 AM<br><strong>UnmergedRevision</strong>: [5eab3a4b1af4f153146c7c7bb54e6e137002882c](https://github.com/hyperledger-gerrit-archive/fabric/commit/5eab3a4b1af4f153146c7c7bb54e6e137002882c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/15/2016, 10:46:25 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 12/15/2016, 10:56:28 AM<br><strong>UnmergedRevision</strong>: [b5e60058f0878b096f13c9268cc50ebc4e83cb85](https://github.com/hyperledger-gerrit-archive/fabric/commit/b5e60058f0878b096f13c9268cc50ebc4e83cb85)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/15/2016, 11:07:12 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/api/crypto.go#L28)<br><strong>Comment</strong>: <pre>How important to you this change? Can't we get a nil back? after all, a nil slice is still a slice...</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/api/crypto.go#L28)<br><strong>Comment</strong>: <pre>It might be fine but then how do you recognize why you got a nil slice?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/api/crypto.go#L28)<br><strong>Comment</strong>: <pre>Why would I care *why* I got a nil slice?
I have a magical machine. I put inside a peer certificate and I expect to get a PKI-ID which is obviously, a non-nil byte slice. I see all reasons why this happened as a single reason- the certificate isn't good.
Now, if you you're interested in listing the reason, you could do that in the msp implementation and log the error yourself, but I have no use of the reason.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/identity/identity.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/identity/identity.go#L69)<br><strong>Comment</strong>: <pre>uppercase</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/identity/identity.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/identity/identity.go#L72)<br><strong>Comment</strong>: <pre>uppercase</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/identity/identity.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/identity/identity.go#L77)<br><strong>Comment</strong>: <pre>redundant space?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/identity/identity.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/identity/identity.go#L77)<br><strong>Comment</strong>: <pre>%?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [gossip/identity/identity.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/b5e60058f0878b096f13c9268cc50ebc4e83cb85/gossip/identity/identity.go#L77)<br><strong>Comment</strong>: <pre>No, "% x" is a valid golang formatting.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 12/16/2016, 5:14:35 PM<br><strong>UnmergedRevision</strong>: [1c85ddf914ab04809e45cf80133f222907d77110](https://github.com/hyperledger-gerrit-archive/fabric/commit/1c85ddf914ab04809e45cf80133f222907d77110)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/16/2016, 5:18:55 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 12/16/2016, 5:17:49 PM<br><strong>UnmergedRevision</strong>: [00ba9ad210b2508b085fc24445831df3c697d28c](https://github.com/hyperledger-gerrit-archive/fabric/commit/00ba9ad210b2508b085fc24445831df3c697d28c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/16/2016, 5:22:42 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 12/16/2016, 5:34:02 PM<br><strong>UnmergedRevision</strong>: [6966412b0419bf31599e0d3b9a11e24d9498cc00](https://github.com/hyperledger-gerrit-archive/fabric/commit/6966412b0419bf31599e0d3b9a11e24d9498cc00)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/16/2016, 6:43:34 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 12/17/2016, 2:12:40 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/6/2017, 7:37:06 AM<br><strong>UnmergedRevision</strong>: [588d28b6a9aad9cbb1ed21bfe48254191ae134c5](https://github.com/hyperledger-gerrit-archive/fabric/commit/588d28b6a9aad9cbb1ed21bfe48254191ae134c5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/6/2017, 8:25:42 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/11/2017, 7:35:53 AM<br><strong>UnmergedRevision</strong>: [63ab9370923b1a6331c4c2c1f22b53914e229de9](https://github.com/hyperledger-gerrit-archive/fabric/commit/63ab9370923b1a6331c4c2c1f22b53914e229de9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/11/2017, 8:02:15 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/11/2017, 10:14:55 AM<br><strong>UnmergedRevision</strong>: [7035fdeeeb2899488e6c56575af9ab633210b3bd](https://github.com/hyperledger-gerrit-archive/fabric/commit/7035fdeeeb2899488e6c56575af9ab633210b3bd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/11/2017, 10:19:32 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/11/2017, 10:35:34 AM<br><strong>UnmergedRevision</strong>: [b8e6df38006d7762aaf329d810754f8fc0e066e4](https://github.com/hyperledger-gerrit-archive/fabric/commit/b8e6df38006d7762aaf329d810754f8fc0e066e4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/11/2017, 11:17:03 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs.go#L1](https://github.com/hyperledger-gerrit-archive/fabric/blob/b8e6df38006d7762aaf329d810754f8fc0e066e4/peer/gossip/mcs.go#L1)<br><strong>Comment</strong>: <pre>License header</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa.go#L1](https://github.com/hyperledger-gerrit-archive/fabric/blob/b8e6df38006d7762aaf329d810754f8fc0e066e4/peer/gossip/sa.go#L1)<br><strong>Comment</strong>: <pre>license header</pre></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/11/2017, 10:50:57 AM<br><strong>UnmergedRevision</strong>: [82a9323dfcb25669f4bb58378dd8c47fb881bf3e](https://github.com/hyperledger-gerrit-archive/fabric/commit/82a9323dfcb25669f4bb58378dd8c47fb881bf3e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/11/2017, 11:21:21 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/12/2017, 3:36:58 AM<br><strong>UnmergedRevision</strong>: [e6c57893d97cb64b59ffa6ddc07e6a582e7eaa6b](https://github.com/hyperledger-gerrit-archive/fabric/commit/e6c57893d97cb64b59ffa6ddc07e6a582e7eaa6b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/12/2017, 4:09:06 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/12/2017, 8:38:20 AM<br><strong>UnmergedRevision</strong>: [15ace1b37970ccc45cc2f77c3e0935ed7bafb861](https://github.com/hyperledger-gerrit-archive/fabric/commit/15ace1b37970ccc45cc2f77c3e0935ed7bafb861)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/12/2017, 9:03:18 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 1/14/2017, 6:43:56 AM<br><strong>UnmergedRevision</strong>: [73c0a7bc49eb618d93f773e9b3bfb8b0f4a644c5](https://github.com/hyperledger-gerrit-archive/fabric/commit/73c0a7bc49eb618d93f773e9b3bfb8b0f4a644c5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2017, 7:22:19 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/16/2017, 9:17:58 AM<br><strong>UnmergedRevision</strong>: [62fb1b13a7ce09fdb75400bb21beb01a38728d77](https://github.com/hyperledger-gerrit-archive/fabric/commit/62fb1b13a7ce09fdb75400bb21beb01a38728d77)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2017, 10:00:20 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/62fb1b13a7ce09fdb75400bb21beb01a38728d77/peer/gossip/mcs/mcs.go#L79)<br><strong>Comment</strong>: <pre>Why not return nil?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/62fb1b13a7ce09fdb75400bb21beb01a38728d77/peer/gossip/mcs/mcs.go#L79)<br><strong>Comment</strong>: <pre>It fine. I will change also the method's comment at the interface to reflect that in case of errors, the method is supposed to return nil.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/62fb1b13a7ce09fdb75400bb21beb01a38728d77/peer/gossip/mcs/mcs.go#L87)<br><strong>Comment</strong>: <pre>What's wrong with returning nil?</pre></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/17/2017, 7:41:05 AM<br><strong>UnmergedRevision</strong>: [9798d3c347f24b67ed03d5b852ab2e02abaaf244](https://github.com/hyperledger-gerrit-archive/fabric/commit/9798d3c347f24b67ed03d5b852ab2e02abaaf244)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/17/2017, 8:24:07 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/24/2017, 5:11:35 PM<br><strong>UnmergedRevision</strong>: [6d46873331483cd0423283a783e714077267ffb1](https://github.com/hyperledger-gerrit-archive/fabric/commit/6d46873331483cd0423283a783e714077267ffb1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/24/2017, 6:17:09 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/24/2017, 5:13:39 PM<br><strong>UnmergedRevision</strong>: [a5ba6f315e302b4224015d1d8f0974771c85a90a](https://github.com/hyperledger-gerrit-archive/fabric/commit/a5ba6f315e302b4224015d1d8f0974771c85a90a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/24/2017, 6:00:26 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/25/2017, 9:28:35 AM<br><strong>UnmergedRevision</strong>: [c1e4a60c565e3a90829cdc4329f1b9bc550ca919](https://github.com/hyperledger-gerrit-archive/fabric/commit/c1e4a60c565e3a90829cdc4329f1b9bc550ca919)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2017, 10:25:18 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/25/2017, 9:29:22 AM<br><strong>UnmergedRevision</strong>: [eb3daf9f10a568b2b033b1c7aeba3467e820d176](https://github.com/hyperledger-gerrit-archive/fabric/commit/eb3daf9f10a568b2b033b1c7aeba3467e820d176)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2017, 9:37:32 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/25/2017, 10:22:17 AM<br><strong>UnmergedRevision</strong>: [da606b74cb82913f4562c7c746bfaa40eb039246](https://github.com/hyperledger-gerrit-archive/fabric/commit/da606b74cb82913f4562c7c746bfaa40eb039246)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2017, 1:27:24 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/25/2017, 2:44:28 PM<br><strong>UnmergedRevision</strong>: [00d34aeca7ea4ad2b040837ea7c341668a3486a8](https://github.com/hyperledger-gerrit-archive/fabric/commit/00d34aeca7ea4ad2b040837ea7c341668a3486a8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/25/2017, 2:58:20 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L72)<br><strong>Comment</strong>: <pre>I would compare here actually the MSPIdentifier rather than the organization units in the certificate. The organization units may be identical but unless the MSPIdentifier is also the same, the two identities may reside in different organization.</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L72)<br><strong>Comment</strong>: <pre>Do we agree that this is not needed given that Deserialize fails if that condition is not met?</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L83)<br><strong>Comment</strong>: <pre>peerIdentity you deserialize also in line 65. Wouldn't it make sense that you do this once outside the loop? Meaning deserialisation should not give you different results on a per MSPManager basis. Do you agree?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L83)<br><strong>Comment</strong>: <pre>I guess, the reply to your previous call should address also this. No?</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L103)<br><strong>Comment</strong>: <pre>Picky comment :) Do you want to add a description how this is computed?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L103)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L172](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L172)<br><strong>Comment</strong>: <pre>Same comment as before ;)</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/00d34aeca7ea4ad2b040837ea7c341668a3486a8/peer/gossip/mcs/mcs.go#L188)<br><strong>Comment</strong>: <pre>Same comment as before :)</pre></blockquote><h3>PatchSet Number: 22</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/26/2017, 9:06:31 AM<br><strong>UnmergedRevision</strong>: [c86d0cb717a76097e61d6e0ba3b65236b53db331](https://github.com/hyperledger-gerrit-archive/fabric/commit/c86d0cb717a76097e61d6e0ba3b65236b53db331)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/26/2017, 9:27:32 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 1/26/2017, 9:10:03 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L2](https://github.com/hyperledger-gerrit-archive/fabric/blob/c86d0cb717a76097e61d6e0ba3b65236b53db331/peer/gossip/mcs/mcs.go#L2)<br><strong>Comment</strong>: <pre>2017</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs_test.go#L2](https://github.com/hyperledger-gerrit-archive/fabric/blob/c86d0cb717a76097e61d6e0ba3b65236b53db331/peer/gossip/mcs/mcs_test.go#L2)<br><strong>Comment</strong>: <pre>2017</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L2](https://github.com/hyperledger-gerrit-archive/fabric/blob/c86d0cb717a76097e61d6e0ba3b65236b53db331/peer/gossip/sa/sa.go#L2)<br><strong>Comment</strong>: <pre>2017</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa_test.go#L2](https://github.com/hyperledger-gerrit-archive/fabric/blob/c86d0cb717a76097e61d6e0ba3b65236b53db331/peer/gossip/sa/sa_test.go#L2)<br><strong>Comment</strong>: <pre>2017</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [unit-test/run.sh#L7](https://github.com/hyperledger-gerrit-archive/fabric/blob/c86d0cb717a76097e61d6e0ba3b65236b53db331/unit-test/run.sh#L7)<br><strong>Comment</strong>: <pre>You accidentally pushed this change.</pre></blockquote><h3>PatchSet Number: 23</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/26/2017, 9:50:19 AM<br><strong>UnmergedRevision</strong>: [4aae058677115e65303f0841beadaf3ff657bdac](https://github.com/hyperledger-gerrit-archive/fabric/commit/4aae058677115e65303f0841beadaf3ff657bdac)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/26/2017, 10:16:17 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 24</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/26/2017, 10:11:26 AM<br><strong>UnmergedRevision</strong>: [00f3db0b11a49abb2bbe2abb5eacab4fff7c2449](https://github.com/hyperledger-gerrit-archive/fabric/commit/00f3db0b11a49abb2bbe2abb5eacab4fff7c2449)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/26/2017, 11:29:54 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 25</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/26/2017, 1:26:30 PM<br><strong>UnmergedRevision</strong>: [0c51c53cf67770f743e54e0b396d9b3fd2636299](https://github.com/hyperledger-gerrit-archive/fabric/commit/0c51c53cf67770f743e54e0b396d9b3fd2636299)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/26/2017, 2:33:53 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 26</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/26/2017, 2:06:41 PM<br><strong>UnmergedRevision</strong>: [2d9cc162bb35c95c5eff3a92645841da30333266](https://github.com/hyperledger-gerrit-archive/fabric/commit/2d9cc162bb35c95c5eff3a92645841da30333266)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/26/2017, 3:05:51 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 27</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/27/2017, 11:50:01 AM<br><strong>UnmergedRevision</strong>: [36ce54c7c5b21c361c8622631ab8280152e38162](https://github.com/hyperledger-gerrit-archive/fabric/commit/36ce54c7c5b21c361c8622631ab8280152e38162)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/27/2017, 12:28:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 28</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/27/2017, 11:51:10 AM<br><strong>UnmergedRevision</strong>: [d31da64b55c8b40e61c70e48ab7c8b362cf61cae](https://github.com/hyperledger-gerrit-archive/fabric/commit/d31da64b55c8b40e61c70e48ab7c8b362cf61cae)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/27/2017, 12:59:38 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/gossip_impl.go#L157](https://github.com/hyperledger-gerrit-archive/fabric/blob/d31da64b55c8b40e61c70e48ab7c8b362cf61cae/gossip/gossip/gossip_impl.go#L157)<br><strong>Comment</strong>: <pre>Nice one. Thanks!</pre></blockquote><h3>PatchSet Number: 29</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/27/2017, 12:21:43 PM<br><strong>UnmergedRevision</strong>: [65c38f1a8011fd586ae0885fedf563932ae3cd28](https://github.com/hyperledger-gerrit-archive/fabric/commit/65c38f1a8011fd586ae0885fedf563932ae3cd28)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/27/2017, 1:32:59 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 30</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/27/2017, 12:24:51 PM<br><strong>UnmergedRevision</strong>: [362e1ed7bcb33f6140e5f1bc1f3d294a8918dae4](https://github.com/hyperledger-gerrit-archive/fabric/commit/362e1ed7bcb33f6140e5f1bc1f3d294a8918dae4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/27/2017, 2:26:02 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/362e1ed7bcb33f6140e5f1bc1f3d294a8918dae4/gossip/api/channel.go#L29)<br><strong>Comment</strong>: <pre>Nice one on the "This method doesn't validate peer identity"

If you push a new change set, can you please fix "methods" --> "method"?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/362e1ed7bcb33f6140e5f1bc1f3d294a8918dae4/gossip/api/crypto.go#L28)<br><strong>Comment</strong>: <pre>Can you please also add here that it doesn't validate peer identity?</pre></blockquote><h3>PatchSet Number: 31</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 1/28/2017, 8:09:11 PM<br><strong>UnmergedRevision</strong>: [32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e](https://github.com/hyperledger-gerrit-archive/fabric/commit/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/28/2017, 9:03:15 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/gossip_impl.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/gossip/gossip/gossip_impl.go#L156)<br><strong>Comment</strong>: <pre>Thanks for the comment but I'd rather not have it in the code.
If we have this comment, it would mean we would need it in every level of gossip (this JoinMsg object ripples very deep in our code), so no point in having this comment here.

But again, thanks for the comment :)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [msp/mgmt/mgmt.go#L67](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/msp/mgmt/mgmt.go#L67)<br><strong>Comment</strong>: <pre>This is a nit, and feel free to ignore, but- copy is a reserved keyword:
https://golang.org/src/builtin/builtin.go?s=5085:5115#L131
Perhaps find a better variable name?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [msp/mgmt/mgmt.go#L80](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/msp/mgmt/mgmt.go#L80)<br><strong>Comment</strong>: <pre>What is the purpose of this inner { } block?
I'm pretty sure that defer acts in the scope of the function and not of a block.

This code, for example- deadlocks: https://play.golang.org/p/Mw7n9wcLCK</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/mcs/mcs.go#L72)<br><strong>Comment</strong>: <pre>Hmmm, is there a possible way to recover from this error? 
Under what circumstances can we fail to obtain the default signing identity? Perhaps we should panic here?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/mcs/mcs.go#L79)<br><strong>Comment</strong>: <pre>I don't understand the reason behind this warning logging.
If the peer is not in our org, why should we log a warning?

I guess you somehow assume the local MSP can deserialize identities of all organizations, right?
Even so, I would perhaps change it to debug.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L104](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/mcs/mcs.go#L104)<br><strong>Comment</strong>: <pre>This is a proposal- perhaps it's worth to log in debug the msp manager that was able to validate the identity? for "blame" and "post-mortem analysis" reasons?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L161](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/mcs/mcs.go#L161)<br><strong>Comment</strong>: <pre>"If peerCert is nil, then the signature is verified against this peer's verification key." 
- I don't have anywhere in the code an invocation with a nil identity. Also, the check in lines 164 prevents this.
Please remove this line.

PS- I'm pretty sure I'm the cause of this line and you didn't write it yourself. I guess I copied it back then from v0.6 api and never removed it, right?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L171](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/mcs/mcs.go#L171)<br><strong>Comment</strong>: <pre>This code looks a lot like ValidateIdentity... perhaps it's possible to do some refactoring to reduce code duplication?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L228](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/mcs/mcs.go#L228)<br><strong>Comment</strong>: <pre>Same thing as above, please remove this "if peerCert is nil" line.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L80](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/sa/sa.go#L80)<br><strong>Comment</strong>: <pre>Perhaps change to warning? This is not an error IMO.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa_test.go#L21](https://github.com/hyperledger-gerrit-archive/fabric/blob/32160e6a59b7ec1b70ceb4e79c6d60d50f67d35e/peer/gossip/sa/sa_test.go#L21)<br><strong>Comment</strong>: <pre>goimports can be fixed here.</pre></blockquote><h3>PatchSet Number: 32</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/29/2017, 7:19:10 AM<br><strong>UnmergedRevision</strong>: [2678fb74d1b12f65dce04e17410165680488722c](https://github.com/hyperledger-gerrit-archive/fabric/commit/2678fb74d1b12f65dce04e17410165680488722c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2017, 8:22:49 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 1/29/2017, 10:08:45 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Approved</strong>: 1/29/2017, 10:47:23 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Approved</strong>: 1/29/2017, 10:36:10 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/gossip/api/crypto.go#L31)<br><strong>Comment</strong>: <pre>Why not have SerializedIdentity here?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/gossip/api/crypto.go#L31)<br><strong>Comment</strong>: <pre>Because, that's the API we use in gossip, and it's actually just a typedef to []byte. You can put in this PeerIdentityType anything you want, serialized identity or bacon, as long as they fit in a byte slice.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/gossip/api/crypto.go#L59)<br><strong>Comment</strong>: <pre>Isn't Type suffix on this type slightly deceiving? 
How about PeerIdentityBytes?
Why not use the SerializedIdentity type instead?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/crypto.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/gossip/api/crypto.go#L59)<br><strong>Comment</strong>: <pre>Elli, this type is used in all of gossip code. changing it would require changing lots of code, and IMO- it can be done in a separate PR if you want. 

We could change it to SerializedIdentity too.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L124)<br><strong>Comment</strong>: <pre>Maybe a comment for the interface, but if we have organization-scoped messages we may want to add VerifyByMSP/Organization method here?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L124)<br><strong>Comment</strong>: <pre>May you clarify, please?</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L124)<br><strong>Comment</strong>: <pre>Ok, so there is a function "VerifyByChannel" where authentication of a peer takes place assuming the specifics (channelReaders in future) of a channel. Now given that there are messages that are organization-scoped, was commenting that there could be a function (respective to VerifyByChannel) like "VerifyByOrganization"/"VerifyByPeerOrganization" where the peer authentication is done w.r.t. a specific organziation (e.g. local MSP).  This is really not urgent to be done within this CR. Just commenting on this to be considered in the future :)</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L176)<br><strong>Comment</strong>: <pre>Maybe add these checks in a TODO comment for the future, when we allow the gossip network to have organization unit (MSP subdivisions) scoped messages. For now we allow only messages scoped at the level of an MSP (membership group) or channel :)</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L176)<br><strong>Comment</strong>: <pre>What do you think if we replace this with a check on the MSP Identifier to be consistent with what the SecurityAdvisor (sa.go) extracts as organization of an identity?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L176)<br><strong>Comment</strong>: <pre>Recall that the MSP does enforce yet at deserialization time the mspIDs are consistent.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L176)<br><strong>Comment</strong>: <pre>I am fine with that, as soon as you add a todo there :)</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L180](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L180)<br><strong>Comment</strong>: <pre>I would add this as the only contend of the "else" bracket:)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L180](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L180)<br><strong>Comment</strong>: <pre>Wait wait, why do that? if you get rid of line 176 that'd imply that you don't ever use the channel MSP managers</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L180](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L180)<br><strong>Comment</strong>: <pre>Discussed this already with Angelo. Organization membership is done implicitly by validation of an identity after its serialization with an MSP. More fine-grained membership of an identity within an MSP (e.g., organization unit) can be in a subsequent CR when MSP implementation also supports it.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/mcs/mcs.go#L180](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/mcs/mcs.go#L180)<br><strong>Comment</strong>: <pre>ahh, I see. So you're not supposed to be able to deserialize it with the local MSP unless its in your org?</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L49](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/sa/sa.go#L49)<br><strong>Comment</strong>: <pre>Same comment as in mcs.go. Why not using SerializedIdentity here?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L49](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/sa/sa.go#L49)<br><strong>Comment</strong>: <pre>This method needs to conform to the api of gossip/api/crypto.go, please lets not change the name in this change request.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/sa/sa.go#L65)<br><strong>Comment</strong>: <pre>In reality this check should return a structure consisting of two fields: one of the MSPidentifier of the MSP the identity belongs to, and then a list of organization units this identity is in possession of. For gossip use, it is the first part that we would need for now. Perhaps explain this story into a TODO comment, and have here the identity's MSPidentifier be returned (Identity.GetMSPIdentifier())?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/sa/sa.go#L65)<br><strong>Comment</strong>: <pre>As long as you return something consistent I'm ok with it</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [peer/gossip/sa/sa.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/2678fb74d1b12f65dce04e17410165680488722c/peer/gossip/sa/sa.go#L77)<br><strong>Comment</strong>: <pre>Same comment as before :)</pre></blockquote><h3>PatchSet Number: 33</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 1/29/2017, 10:54:23 AM<br><strong>GitHubMergedRevision</strong>: [bb3b20b0970ddd9dd2e88b101a7a8491710bb667](https://github.com/hyperledger-gerrit-archive/fabric/commit/bb3b20b0970ddd9dd2e88b101a7a8491710bb667)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/29/2017, 12:03:21 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 1/29/2017, 5:22:32 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Binh Nguyen<br><strong>Merged</strong>: 1/29/2017, 5:22:34 PM<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 1/29/2017, 11:53:34 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Approved</strong>: 1/29/2017, 11:01:48 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>