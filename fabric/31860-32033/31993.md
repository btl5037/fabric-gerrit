<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 31993<br><strong>Subject</strong>: [FAB-12992] Kafka to Raft migration doc<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 6/19/2019, 4:36:56 PM<br><strong>LastUpdated</strong>: 6/26/2019, 10:27:52 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-12992] Kafka to Raft migration doc

Describe process at a high level without
showing individual channel update
commands

Change-Id: I22e3f4d5be37a5e754abafdb3cd48205e0cf49c9
Signed-off-by: joe-alewine <Joe.Alewine@ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/19/2019, 4:36:56 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:40:15 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14775/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:40:43 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:40:44 PM<br><strong>Message</strong>: <pre>Patch Set 1: F1-VerifyBuild+1 F3-IntegrationTest+1 F3-UnitTest+1

Succeeded, Run DocBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:41:30 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14775/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14775</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:41:45 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1879/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:42:26 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:43:02 PM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:43:03 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/19/2019, 4:43:50 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1879/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1879</pre><strong>Reviewer</strong>: Pam Andrejko - pama@ibm.com<br><strong>Reviewed</strong>: 6/19/2019, 6:07:31 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(18 comments)

Nice job Joe describing the process.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/20/2019, 5:01:13 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Yoav Tock - tock@il.ibm.com<br><strong>Reviewed</strong>: 6/20/2019, 6:50:32 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(16 comments)</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/20/2019, 5:26:33 PM<br><strong>Message</strong>: <pre>Patch Set 2: Published edit on patch set 1.</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/20/2019, 5:26:40 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(26 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:31:04 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14818/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:31:31 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:31:32 PM<br><strong>Message</strong>: <pre>Patch Set 2: F1-VerifyBuild+1 F3-IntegrationTest+1 F3-UnitTest+1

Succeeded, Run DocBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:32:16 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14818/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14818</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:34:19 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1884/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:35:02 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:35:42 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:35:43 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/20/2019, 5:36:39 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1884/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1884</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 6/20/2019, 10:13:43 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(27 comments)</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/21/2019, 2:03:05 PM<br><strong>Message</strong>: <pre>Patch Set 3: Published edit on patch set 2.</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/21/2019, 2:03:22 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(27 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:07:55 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14836/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:08:29 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:08:31 PM<br><strong>Message</strong>: <pre>Patch Set 3: F1-VerifyBuild+1 F3-IntegrationTest+1 F3-UnitTest+1

Succeeded, Run DocBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:09:22 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14836/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14836</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:12:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1886/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:13:37 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:14:22 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:14:24 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/21/2019, 2:15:34 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1886/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1886</pre><strong>Reviewer</strong>: Yoav Tock - tock@il.ibm.com<br><strong>Reviewed</strong>: 6/23/2019, 4:26:44 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)

Just a couple of typos.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 6/24/2019, 12:09:17 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)

Looking good to me, a few minor things.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/24/2019, 1:30:35 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/24/2019, 1:53:27 PM<br><strong>Message</strong>: <pre>Patch Set 4: Published edit on patch set 3.</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/24/2019, 1:53:48 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(5 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 1:53:51 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14887/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 1:54:17 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 1:54:18 PM<br><strong>Message</strong>: <pre>Patch Set 4: F1-VerifyBuild+1 F3-IntegrationTest+1 F3-UnitTest+1

Succeeded, Run DocBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 1:55:03 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14887/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14887</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 1:59:53 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1893/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 2:00:40 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 2:01:27 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 2:01:28 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/24/2019, 2:02:37 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1893/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1893</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/25/2019, 5:00:02 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Thanks for all the comments thus far, everyone. Does anyone else need to review, or is this ready to merge?</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 6/25/2019, 11:56:58 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/26/2019, 9:15:03 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/26/2019, 9:22:51 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jiannan Guo</pre><strong>Reviewer</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Reviewed</strong>: 6/26/2019, 9:22:52 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/26/2019, 9:22:59 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/5705/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/26/2019, 9:22:59 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7017/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/26/2019, 10:27:52 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7017/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/7017

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/5705/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/5705</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Uploader</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Created</strong>: 6/19/2019, 4:36:56 PM<br><strong>UnmergedRevision</strong>: [b64fdbfe04c8ea25979988f664d7f587217912f8](https://github.com/hyperledger-gerrit-archive/fabric/commit/b64fdbfe04c8ea25979988f664d7f587217912f8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/19/2019, 4:40:44 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/19/2019, 4:43:02 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/19/2019, 4:40:44 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/19/2019, 4:40:44 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L11)<br><strong>Comment</strong>: <pre>extra brackets around here?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L11)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L12](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L12)<br><strong>Comment</strong>: <pre>Is it v1.4.2 or release-1.4.2? (here and other places in the doc if this does need to be updated)</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L12](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L12)<br><strong>Comment</strong>: <pre>"release-1.4.2" is just the name of the release candidate or the branch, so this should be v1.4.2.</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L20](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L20)<br><strong>Comment</strong>: <pre>Should we add explicitly Before migrating you have to have upgraded to 1.4.2 ? It's a bit nuanced in step 7.</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L23](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L23)<br><strong>Comment</strong>: <pre>or to any other</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L23](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L23)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L26)<br><strong>Comment</strong>: <pre>this restriction is lifted in https://gerrit.hyperledger.org/r/c/fabric/+/31856 (in review)</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L26)<br><strong>Comment</strong>: <pre>It is not "lifted" entirely, to be exact, only solo->etcdraft is tested in that CR. An attempt to do other forms of migration (e.g. back to kafka, or to solo) is not tested, not officially supported, and may yield unexpected results. I therefore think that the language here is justified.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L26)<br><strong>Comment</strong>: <pre>If we want to change this later with confirmed examples (that we want to publicize), we can. For now let's just leave it.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L31)<br><strong>Comment</strong>: <pre>recommended to?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L31)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L35)<br><strong>Comment</strong>: <pre>Maybe add the complement that ALL the channels must be migrated. It is not possible migrate some to Raft and leave some on Kafka.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L35)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L52](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L52)<br><strong>Comment</strong>: <pre>Should these bullets be links to the content below? Should they be numbers instead of bullets?</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L54](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L54)<br><strong>Comment</strong>: <pre>Should this be `Enter maintenance mode` for symmetry with the other bullets?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L54](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L54)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L57](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L57)<br><strong>Comment</strong>: <pre>We might want to emphasize a bit more that the process is for each ordering service you have to migrate
- the system channel, then 
- each application channel</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L58)<br><strong>Comment</strong>: <pre>The word normal is curious here. I'm wondering if it is needed? As opposed to non-normal transactions? I see you use it in other places in the doc, so maybe we need to define what we mean by normal?</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L58)<br><strong>Comment</strong>: <pre>As opposed to configuration transactions... perhaps the correct term is Application transactions?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L58)<br><strong>Comment</strong>: <pre>Yoav is right about the distinction that's being drawn here, but "normal" is probably not the best word. "Application" transactions works fine. "Asset" transactions could also work. I'll let the community/commenters decide.</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L75)<br><strong>Comment</strong>: <pre>Add here that the transaction that changes the consensus type must be the last config transaction before restart. If that is not the case, the nodes will most likely crash on restart, or result in undefined behavior. Changing the consensus type sets nil in the block metadata. Adding another config tx after that, that does not change consensus-type, will result in kafka metadata written to block metadata, which will cause the nodes to crash on restart.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L75)<br><strong>Comment</strong>: <pre>This is not the right place to add this information, as we're still pretty high level in this section. But I have added it below.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L86)<br><strong>Comment</strong>: <pre>i think we should emphasize here that exit of maintenance mode *MUST* be done *AFTER* restart, otherwise orderers will be stuck</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L86)<br><strong>Comment</strong>: <pre>I think that an emphasis on this is justified. There could be even worse outcomes than stuck nodes if that is not followed: the ordering service might accept normal transactions on "kafka" mode, and then when restarted, fail to start onto raft (see previous comment). Now, rollback would result in the loss of client transactions.

An emphasis along these lines can be added to the detailed description below.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L86)<br><strong>Comment</strong>: <pre>Added this later as well. This section is a high level overview of the process which will be described in more detail below.</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L114](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L114)<br><strong>Comment</strong>: <pre>wording is confusing here.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L114](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L114)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L115](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L115)<br><strong>Comment</strong>: <pre>Wouldn't the peers have to be at the same version as the ordering nodes? Since they are on the ordering service channel which is at a specific capability level?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L115](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L115)<br><strong>Comment</strong>: <pre>I think the distinction here is that the ordering nodes all have to be at the same level (v1.4.2 or greater), but while the peers all have to be at v1.4.2, they don't all have to be at the same level.</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L122](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L122)<br><strong>Comment</strong>: <pre>typo</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L122](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L122)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L135)<br><strong>Comment</strong>: <pre>Should this be `ConsensusType`?</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L135)<br><strong>Comment</strong>: <pre>The ConsensusType value is comprised of three fields: ...</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L135)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L163](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L163)<br><strong>Comment</strong>: <pre>typo</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L163](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L163)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L178](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L178)<br><strong>Comment</strong>: <pre>typo</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L178](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L178)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L186](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L186)<br><strong>Comment</strong>: <pre>typo, remove</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L186](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L186)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L188)<br><strong>Comment</strong>: <pre>why would I need/want to do that?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L188)<br><strong>Comment</strong>: <pre>Added a bit more detail here.</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L192](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L192)<br><strong>Comment</strong>: <pre>one consenter set, many consenter sets, no?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L192](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L192)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L201](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L201)<br><strong>Comment</strong>: <pre>What should I look for in the logs to be sure? Looks like you've included that below. Should that be here instead/too?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L201](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L201)<br><strong>Comment</strong>: <pre>Eh, I don't think we need to repeat it. I added something here that you can see what to look for below.</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L208](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L208)<br><strong>Comment</strong>: <pre>We just did this above, we should do it again? Probably should explain this a little.... why you do it again.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L208](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L208)<br><strong>Comment</strong>: <pre>Yeah this just repeats this same info. Will restructure/delete.</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L226](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L226)<br><strong>Comment</strong>: <pre>The INFO message is hard to interpret. (not your fault). The message makes it looks like node 2 is the new leader. (Just confirming that is NOT the case).</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L226](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L226)<br><strong>Comment</strong>: <pre>It is not the case. "channel=testchannel1 node=2" is a decoration on the message that tells us that the message is coming from node 2, on teschannel1. Indeed somewhat confusing unless you are familiar with the code...</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L226](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L226)<br><strong>Comment</strong>: <pre>Open to suggestions on how to improve this.</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L230](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L230)<br><strong>Comment</strong>: <pre>each application channel ?</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L232](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L232)<br><strong>Comment</strong>: <pre>Start with the system channel. If ...</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L232](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L232)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L244](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L244)<br><strong>Comment</strong>: <pre>ConsensusType "Type" field</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L244](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L244)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L245](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L245)<br><strong>Comment</strong>: <pre>Only the "State" & "Metadata" actually, as is stated in the previous sentence, "Type" should not have been changed. This the "abort" path mentioned bellow, i.e. backing out of migration and exiting maintenance mode before changing ConsensusType.Type; maybe a sub-title will make it clearer.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L245](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L245)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L258](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L258)<br><strong>Comment</strong>: <pre>It's unclear what you mean by the abort path - was that defined somewhere else?</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L258](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L258)<br><strong>Comment</strong>: <pre>restoring only State, as Type & Metadata change in one config tx, after the backup point.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L258](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/kafka_raft_migration.md#L258)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Pam Andrejko - pama@ibm.com<br><strong>CommentLine</strong>: [docs/source/ops_guide.rst#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/b64fdbfe04c8ea25979988f664d7f587217912f8/docs/source/ops_guide.rst#L24)<br><strong>Comment</strong>: <pre>This list is getting to be quite long. Is it worth breaking this list into categories?</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Uploader</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Created</strong>: 6/20/2019, 5:26:33 PM<br><strong>UnmergedRevision</strong>: [4adf33f61456468460f851e05a110b7f54d59336](https://github.com/hyperledger-gerrit-archive/fabric/commit/4adf33f61456468460f851e05a110b7f54d59336)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/20/2019, 5:31:32 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/20/2019, 5:35:42 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/20/2019, 5:31:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/20/2019, 5:31:32 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L11)<br><strong>Comment</strong>: <pre>their Kafka-based ordering service to a Raft-based ordering service,

(So as to emphasize that we do not support migrating only some subset of channels, it is an all or nothing proposition.)</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L11)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L13](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L13)<br><strong>Comment</strong>: <pre>Again, all channels must be done, so, I would simply delete this.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L13](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L13)<br><strong>Comment</strong>: <pre>I added this because an organization/human/whatever might be a member of channels in networks that aren't going to switch over. But maybe that's going to confuse more than help.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L24)<br><strong>Comment</strong>: <pre>Migrating between any other orderer consensus types is not currently supported.

(Notably, Solo->Raft actually does work, we just don't want to take a stance of "you can do this")</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L24)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L33)<br><strong>Comment</strong>: <pre>Recovering from a botched migration is possible only if a backups is taken at the point in migration prescribed later in this document.

(Maybe there's a better phrasing, but basically, backup and restore function is not optional.  If you do not take a backup, and or you cannot restore that backup, if something goes wrong, you are screwed.)</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L33)<br><strong>Comment</strong>: <pre>Well, it is "optional", right? You'd just be stupid if you didn't back things up. I'll make this language stronger.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L36)<br><strong>Comment</strong>: <pre>All channels must be migrated during the same maintenance window.  It is not possible to migrate only some channels before resuming operations.

The 'not possible to migrate multiple at once' is really simply a fact that channels operate independently of eachother, so it requires multiple txes (which necessarily are distinct) to migrate.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L36)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L46](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L46)<br><strong>Comment</strong>: <pre>Migration is done in place, utilizing the existing ledgers for the deployed orderers.  Addition or removal of orderers should be performed after the migration.

I would not that for everything about this doc, the nodes must be at v1.4.2, you may not choose not to upgrade some orderers to v1.4.2 and attempt this migration path.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L46](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L46)<br><strong>Comment</strong>: <pre>This second point is made below.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L49](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L49)<br><strong>Comment</strong>: <pre>I would simply delete this point.  It's only important that the initial maintenance mode tx starts on the system channel, and even that is not especially critical.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L49](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L49)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L51)<br><strong>Comment</strong>: <pre>After reading through this document, I'm not sure this 'high level migration flow' is high level enough.  It seems to give just enough information to get the user in trouble without enough detail for them to realize they are.  My preference would be to trim out a lot of these details and do something more terse, like:

 1. The system is placed into a maintenance mode where unprivileged users can not longer read or write to the blockchain.
 2. The system is stopped, and a backup is taken in case an error occurs during migration.
 3. The system is started, and each channel has its consensus type and metadata modified.
 4. The system is restarted and is now operating on Raft consensus; each channel is checked to confirm that it has successfully achieved Raft quorum.
 5. The system is moved out of maintenance mode and normal function resumes.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L51)<br><strong>Comment</strong>: <pre>Fair enough.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L61)<br><strong>Comment</strong>: <pre>discards any in-flight transactions.  To minimize disruptions to client applications it is recommended that transaction submission be stopped, though the migration will tolerate active attempts to submit transactions.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L61)<br><strong>Comment</strong>: <pre>Text removed.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L66)<br><strong>Comment</strong>: <pre>After all channels have successfully committed the transaction entering maintenance mode,</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L66)<br><strong>Comment</strong>: <pre>Text removed.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L103)<br><strong>Comment</strong>: <pre>I would say 'configuration' instead of object, but if there's support for 'object' I'm fine with it.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L103)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L110)<br><strong>Comment</strong>: <pre>Maybe add a hint: "You may find it easiest to bootstrap a new ordering network with the Raft consensus protocol, then copy and modify the consensus metadata section from its config."</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L110)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L123)<br><strong>Comment</strong>: <pre>I don't think we need this bullet.  Saying 'below' at the end of a section seems kind of awkward? We can just discuss this in the next section.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L123)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L126)<br><strong>Comment</strong>: <pre>Prior to setting the ordering service into maintenance mode, it is recommended that the peers and clients of the network be stopped.  Leaving peers or clients up and running is safe, however, because the ordering service will reject all of their requests, their logs will will fill with benign but misleading failures.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L126)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L129](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L129)<br><strong>Comment</strong>: <pre>You must select all channels, so, delete this?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L129](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L129)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L130)<br><strong>Comment</strong>: <pre>should</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L130)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L151](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L151)<br><strong>Comment</strong>: <pre>Is this from Yoav's document? This really shouldn't matter at all.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L151](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L151)<br><strong>Comment</strong>: <pre>Yes, he made this point. I'll delete it.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L154](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L154)<br><strong>Comment</strong>: <pre>peers used to retrieve new blocks</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L154](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L154)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L156)<br><strong>Comment</strong>: <pre>the need to both backup, and if necessary restore peers during migration, as they only receive updates once migration has successfully completed.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L156)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L174)<br><strong>Comment</strong>: <pre>(Typically 30s, but potentially longer depending on your host system).</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L174)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L177](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L177)<br><strong>Comment</strong>: <pre>Shutting down the Kafka brokers at the same time as the orderers can result in the filesystem state of the orderers being more recent than the Kafka brokers which could prevent your network from starting.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L177](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L177)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L198](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L198)<br><strong>Comment</strong>: <pre>channel for each orderer.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L198](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L198)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L210](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L210)<br><strong>Comment</strong>: <pre>stop all ordering service nodes, stop all Kafka brokers and Zookeepers, and then restart only the ordering service nodes.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L210](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L210)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L244](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L244)<br><strong>Comment</strong>: <pre>If you stopped your peers and application as recommended, you may now restart them.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L244](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L244)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L255](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L255)<br><strong>Comment</strong>: <pre>**before exiting maintenance mode**, simply perform the rollback procedure below.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L255](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L255)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L261](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L261)<br><strong>Comment</strong>: <pre>in</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L261](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L261)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L264](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L264)<br><strong>Comment</strong>: <pre>Send a configuration update exiting maintenance mode to continue using Kafka as your consensus mechanism, or resume the instructions after the point of backup and fix the error which prevented a Raft quorum from forming.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L264](https://github.com/hyperledger-gerrit-archive/fabric/blob/4adf33f61456468460f851e05a110b7f54d59336/docs/source/kafka_raft_migration.md#L264)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Uploader</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Created</strong>: 6/21/2019, 2:03:05 PM<br><strong>UnmergedRevision</strong>: [a451e441c73be3b26244991d3bebf8d46ef79a28](https://github.com/hyperledger-gerrit-archive/fabric/commit/a451e441c73be3b26244991d3bebf8d46ef79a28)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/21/2019, 2:08:31 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/21/2019, 2:14:22 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/21/2019, 2:08:31 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/21/2019, 2:08:31 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L52](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L52)<br><strong>Comment</strong>: <pre>More importantly, normal application transactions are rejected.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L52](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L52)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L87)<br><strong>Comment</strong>: <pre>syntax? that is</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L87)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yoav Tock - tock@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L98)<br><strong>Comment</strong>: <pre>typo</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L98)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L123)<br><strong>Comment</strong>: <pre>Nit, but "blocks are blocked' reads awkwardly to me, maybe "prevented", "ignored", "rejected", or similar?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L123)<br><strong>Comment</strong>: <pre>Agreed.. i think "rejected" is more appropriate here, cuz caller will get explicit response saying request is rejected. "blocked" often implies synchronous waiting to me.</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L123)<br><strong>Comment</strong>: <pre>We used rejected above (per your note, Jason), so let's stick with that.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L169)<br><strong>Comment</strong>: <pre>orderer. (or 'ordering service node if you prefer) (We're operating only on one ordering service here).</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L169)<br><strong>Comment</strong>: <pre>Probably better to just stop the sentence after "each channel".</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/a451e441c73be3b26244991d3bebf8d46ef79a28/docs/source/kafka_raft_migration.md#L169)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Uploader</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>Created</strong>: 6/24/2019, 1:53:27 PM<br><strong>GitHubMergedRevision</strong>: [24cb717e69ee9ff6d8e60283c2c180d60ceb8d0b](https://github.com/hyperledger-gerrit-archive/fabric/commit/24cb717e69ee9ff6d8e60283c2c180d60ceb8d0b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/24/2019, 1:54:18 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/24/2019, 2:01:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/24/2019, 1:54:18 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/24/2019, 1:54:18 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 6/25/2019, 11:56:58 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Approved</strong>: 6/26/2019, 9:15:03 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jay Guo<br><strong>Merged</strong>: 6/26/2019, 9:22:51 AM<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L73](https://github.com/hyperledger-gerrit-archive/fabric/blob/24cb717e69ee9ff6d8e60283c2c180d60ceb8d0b/docs/source/kafka_raft_migration.md#L73)<br><strong>Comment</strong>: <pre>markdown renders fine but we probably don't need to wrap line here?</pre><strong>Commenter</strong>: Joe Alewine - Joe.Alewine@ibm.com<br><strong>CommentLine</strong>: [docs/source/kafka_raft_migration.md#L73](https://github.com/hyperledger-gerrit-archive/fabric/blob/24cb717e69ee9ff6d8e60283c2c180d60ceb8d0b/docs/source/kafka_raft_migration.md#L73)<br><strong>Comment</strong>: <pre>Yeah I'm not sure how this happened exactly, but markdown does render fine. We manually wrap the lines to make the review process easier. It's not about how it renders. Given that there are already some +2s I'd prefer to leave this for now. If there's reason to modify this doc in the future I'll go ahead and fix this at that time.</pre></blockquote>