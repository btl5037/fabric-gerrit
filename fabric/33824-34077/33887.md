<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 33887<br><strong>Subject</strong>: [FAB-16766] combine reset and rollback into single It<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 10/7/2019, 12:07:27 PM<br><strong>LastUpdated</strong>: 10/31/2019, 12:25:22 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-16766] combine reset and rollback into single It

Combine reset and rollback tests with pausing and
resuming channels into a single It to minimize the
overhead of network setup and chaincode deployment.

Change-Id: I06ac849044064c87cf3a9a8240b43c1b40387136
Signed-off-by: Wenjian Qiao <wenjianq@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/7/2019, 12:07:27 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:13:33 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17722/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:14:23 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:17:16 PM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:18:02 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17722/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17722</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:21:02 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12175/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:21:42 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15517/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:21:48 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:22:58 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 12:51:41 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/7/2019, 1:11:10 PM<br><strong>Message</strong>: <pre>Patch Set 2: Patch Set 1 was rebased</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/7/2019, 1:11:19 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 1:16:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15519/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 1:17:39 PM<br><strong>Message</strong>: <pre>Patch Set 2: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 1:31:36 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 1:32:24 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15517/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15517

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12175/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12175</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 1:41:10 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/7/2019, 1:42:02 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15519/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15519</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/14/2019, 9:21:19 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2019, 9:21:27 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12257/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2019, 9:22:15 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2019, 10:23:47 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/14/2019, 10:24:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12257/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12257</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/15/2019, 9:11:03 AM<br><strong>Message</strong>: <pre>Patch Set 3: Patch Set 2 was rebased</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/21/2019, 5:05:07 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 10/21/2019, 9:06:46 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)

I don't understand why we continue to add layers in the tests.</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/21/2019, 2:36:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/21/2019, 2:39:05 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)

Thank you Matt for your comments.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:39:42 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17886/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:40:32 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:43:47 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:44:53 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17886/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17886</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:47:29 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15654/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:48:10 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12317/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:48:30 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 2:48:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 3:15:57 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 3:56:05 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/21/2019, 3:56:52 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15654/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15654

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12317/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12317</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 10/22/2019, 9:29:15 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 10/22/2019, 12:50:21 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 10/25/2019, 12:12:51 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(4 comments)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/25/2019, 4:47:02 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/26/2019, 12:01:46 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/29/2019, 10:39:24 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:42:12 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18009/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:42:59 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:45:58 AM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:46:53 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18009/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18009</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/29/2019, 10:48:45 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(4 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:49:02 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15731/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:49:40 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:49:54 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12410/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 10:50:45 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 11:10:45 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 11:52:24 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 11:53:13 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12410/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12410

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15731/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15731</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/29/2019, 1:36:07 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:41:01 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18014/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:41:39 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:44:43 PM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:45:40 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18014/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18014</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:48:28 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15737/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:48:36 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12418/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:49:08 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 1:49:15 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 2:11:41 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 2:55:35 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/29/2019, 2:56:19 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15737/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15737

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12418/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12418</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 10/30/2019, 10:54:39 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(3 comments)</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/30/2019, 12:44:57 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:45:07 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18056/</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/30/2019, 12:45:33 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(3 comments)

Thank you Manish.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:45:53 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:49:46 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:49:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15775/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:50:35 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:50:42 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18056/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18056</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:56:07 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12467/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 12:56:49 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 1:13:43 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Reviewed</strong>: 10/30/2019, 1:36:58 PM<br><strong>Message</strong>: <pre>Patch Set 8: Patch Set 7 was rebased</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 10/30/2019, 1:43:11 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 2:06:27 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/30/2019, 2:07:07 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15775/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15775

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12467/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12467</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/31/2019, 12:02:05 AM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/31/2019, 12:02:45 AM<br><strong>Message</strong>: <pre>Patch Set 8: F3-IntegrationTest+1

Integration test succeeded...</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/31/2019, 12:02:47 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by David Enyeart</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/31/2019, 12:02:56 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7933/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/31/2019, 12:08:01 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6641/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/31/2019, 12:25:22 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6641/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/6641

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7933/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/7933</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/7/2019, 12:07:27 PM<br><strong>UnmergedRevision</strong>: [9978ca43bc6b19a53359941f36664da1a76e7d74](https://github.com/hyperledger-gerrit-archive/fabric/commit/9978ca43bc6b19a53359941f36664da1a76e7d74)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:17:16 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:17:16 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 1:31:36 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:51:41 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/7/2019, 1:11:10 PM<br><strong>UnmergedRevision</strong>: [064627a90f3d71c82a60f08d3500a89b2f0cdf2c](https://github.com/hyperledger-gerrit-archive/fabric/commit/064627a90f3d71c82a60f08d3500a89b2f0cdf2c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:17:16 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:17:16 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/14/2019, 10:23:47 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 1:41:10 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/15/2019, 9:11:03 AM<br><strong>UnmergedRevision</strong>: [afc83fde9ac8f895a2f61f0ebe1611d2277b293d](https://github.com/hyperledger-gerrit-archive/fabric/commit/afc83fde9ac8f895a2f61f0ebe1611d2277b293d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:17:16 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 12:17:16 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/14/2019, 10:23:47 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/7/2019, 1:41:10 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 10/21/2019, 5:05:07 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L94)<br><strong>Comment</strong>: <pre>All of the heigh assertions in these closures imply these aren't reusable functions. I'm not sure why we are doing this instead of writing the code in the test.

The test literally consists of calling these functions one at a time.

		org2peer0 := setup.network.Peer("org2", "peer0")
		testRollbackAndPauseResume(org2peer0)
		testResetAndPauseResume(org2peer0)
		testCreateNewBlocks(org2peer0)</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L94)<br><strong>Comment</strong>: <pre>Method 'assertPostRollbackOrReset' is used to verify that the block height is restored upon peer restart after rollback or reset. It is called 4 times in the test. Therefore, will keep it as a function.

You are right that the 3 mentioned methods are only called once. The original purpose was to make it easier to understand the high level test flow. Per the comment, I have removed the methods and move the code directly under "It".</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L94)<br><strong>Comment</strong>: <pre>The thing is, they're not really functions. They're closing around args declared in the describe and setup in BeforeEach.

This comment is also the heels of my other comments around the way the ledger tests add layer upon layer of decorations. We have setup, helper, network, and now these closures.

Ultimately this is not my code but I really don't see how this improves clarify.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L94)<br><strong>Comment</strong>: <pre>I agree with Matt that this test is really complex that spans the state across closure that too under different combinatorics.

On the use of closure in the ledger tests. I must say that I had stated using these but in a very limited sense where entire "It" is in the closure that needs to be repeated under two different settings - https://github.com/hyperledger/fabric/blob/5e7fdb133b448aad71112a909f9d8b30c5669dc8/integration/pvtdata/pvtdata_test.go#L253

But we should definitely not make this as a pattern.</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L94)<br><strong>Comment</strong>: <pre>Agree with Matt that this method is closing around the ledger data  created in BeforeEach. It is called multiple times to verify block heights and marbles after rollback/reset. This is an existing method before the CR. Will discuss offline on how to refactor it.</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L94)<br><strong>Comment</strong>: <pre>Talked to Manish offline. Refactored the assert method and moved it outside of "It" closure.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L110)<br><strong>Comment</strong>: <pre>The ledger data directory should probably be an accessor on the network like we have for TLS directories and MSP directories.</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L110)<br><strong>Comment</strong>: <pre>Good point. Done.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L162)<br><strong>Comment</strong>: <pre>Second instance further implies this should likely be an accessor.</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/afc83fde9ac8f895a2f61f0ebe1611d2277b293d/integration/ledger/reset_rollback_test.go#L162)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/21/2019, 2:36:14 PM<br><strong>UnmergedRevision</strong>: [bb13a83cc2e55a8180f24fde33853ecea8542b98](https://github.com/hyperledger-gerrit-archive/fabric/commit/bb13a83cc2e55a8180f24fde33853ecea8542b98)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/21/2019, 2:43:47 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/21/2019, 2:43:47 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/21/2019, 3:56:05 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/21/2019, 3:15:57 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 10/22/2019, 12:50:21 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L102](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L102)<br><strong>Comment</strong>: <pre>left over</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L102](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L102)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L134](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L134)<br><strong>Comment</strong>: <pre>all</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L134](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L134)<br><strong>Comment</strong>: <pre>Code is removed after refactor</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L156)<br><strong>Comment</strong>: <pre>This test tries to cover too much of combinations. Integration tests perpahps is not the right place for these combinations. Most of these operations are very ledger centric and hence some complex combinations (if need to be tested), should reside in the tests under kvledger/tests.

At the integration test level, only thing that you would want to test is that it works with real data and the peer commands are passed down to the ledger code. For this a simple flow of just one command at a time should be enough in my opinion.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L156)<br><strong>Comment</strong>: <pre>The original intent of this CR was to combine the tests so that we eliminate the overhead of network startup multiple times. But I tend to agree that while the focus is on it, that we could further refactor and streamline the integration test even more. For example each of the 'assert' calls in my trial takes about 15 seconds each, and assert is called many times. This is too high of a tax to impose on all developers and CI running the integration tests.</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L156)<br><strong>Comment</strong>: <pre>Agree that this single "It" covers too much combinations. The original intent was to combine multiple tests in a single "It" to avoid multiple network startup and chaincode deployment. However, due to the natural of these commands, every command requires a network restart to verify the result; therefore, it calls assert multiple times and each call takes longer time. Will discuss offline on how to refactor it and address Matt's concern on "wrapping".</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb13a83cc2e55a8180f24fde33853ecea8542b98/integration/ledger/reset_rollback_test.go#L156)<br><strong>Comment</strong>: <pre>Talked to Manish offline. Have simplified the test cases and also run commands on different peers so that we can minimize the need of network restart.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/29/2019, 10:39:24 AM<br><strong>UnmergedRevision</strong>: [62308237094de46d815f01cddf65a4e857a3e411](https://github.com/hyperledger-gerrit-archive/fabric/commit/62308237094de46d815f01cddf65a4e857a3e411)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 10:45:58 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 10:45:58 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 11:52:24 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 11:10:45 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/29/2019, 1:36:07 PM<br><strong>UnmergedRevision</strong>: [7c4715d77008e280f20941358880a07eb8c27bf3](https://github.com/hyperledger-gerrit-archive/fabric/commit/7c4715d77008e280f20941358880a07eb8c27bf3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 1:44:43 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 1:44:43 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 2:55:35 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/29/2019, 2:11:41 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L459](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c4715d77008e280f20941358880a07eb8c27bf3/integration/ledger/reset_rollback_test.go#L459)<br><strong>Comment</strong>: <pre>I would expect a helper function to be very straight forward. I would not expect start/stop kind of things hidden in a helper function. If you look at the existing helper functions, they are mainly to help wrap a command to reduce verbosity in the flow of "It" but does not include any complex flow within...

IMO, perhaps the selected code only be in the helper function and name of the function can be "verify/assert channelPaused".</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L459](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c4715d77008e280f20941358880a07eb8c27bf3/integration/ledger/reset_rollback_test.go#L459)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L465](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c4715d77008e280f20941358880a07eb8c27bf3/integration/ledger/reset_rollback_test.go#L465)<br><strong>Comment</strong>: <pre>Again as above, if you want this in a helper function, It would perhaps better be in a separate one (say, verifyPrerestHeightFileExists)</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L465](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c4715d77008e280f20941358880a07eb8c27bf3/integration/ledger/reset_rollback_test.go#L465)<br><strong>Comment</strong>: <pre>Moved it out of the helper function.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L468](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c4715d77008e280f20941358880a07eb8c27bf3/integration/ledger/reset_rollback_test.go#L468)<br><strong>Comment</strong>: <pre>same comment as on the previous function</pre><strong>Commenter</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>CommentLine</strong>: [integration/ledger/reset_rollback_test.go#L468](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c4715d77008e280f20941358880a07eb8c27bf3/integration/ledger/reset_rollback_test.go#L468)<br><strong>Comment</strong>: <pre>Removed this helper function and moved code to "It".</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/30/2019, 12:44:57 PM<br><strong>UnmergedRevision</strong>: [c44deab22665ad9ece5adc879a56b1759f587efb](https://github.com/hyperledger-gerrit-archive/fabric/commit/c44deab22665ad9ece5adc879a56b1759f587efb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 12:49:46 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 12:49:46 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 2:06:27 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 1:13:43 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Uploader</strong>: Wenjian Qiao - wenjianq@gmail.com<br><strong>Created</strong>: 10/30/2019, 1:36:58 PM<br><strong>GitHubMergedRevision</strong>: [f68741bf4d2d125cb6034982e76f74d979519fc8](https://github.com/hyperledger-gerrit-archive/fabric/commit/f68741bf4d2d125cb6034982e76f74d979519fc8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 12:49:46 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 12:49:46 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/30/2019, 1:13:43 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 10/30/2019, 1:43:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 10/31/2019, 12:02:05 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 10/31/2019, 12:02:45 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: David Enyeart<br><strong>Merged</strong>: 10/31/2019, 12:02:47 AM<br><br></blockquote>