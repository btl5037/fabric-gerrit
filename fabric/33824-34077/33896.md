<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 33896<br><strong>Subject</strong>: WIP flip Idempotent switch<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 10/8/2019, 6:08:15 AM<br><strong>LastUpdated</strong>: 10/10/2019, 11:05:38 PM<br><strong>CommitMessage</strong>:<br><pre>WIP flip Idempotent switch

Change-Id: Ib05b0cdf8b6cffa5141d009acbf082284f1c2940
Signed-off-by: Jay Guo <guojiannan1101@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 10/8/2019, 6:08:15 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 10/8/2019, 6:08:51 AM<br><strong>Message</strong>: <pre>Set Work In Progress</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:13:19 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17725/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:14:05 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:16:41 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:17:23 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17725/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17725</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:20:00 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12178/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:20:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15521/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:20:42 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:21:13 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 6:44:21 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 7:36:57 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/8/2019, 7:37:50 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12178/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12178

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15521/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15521</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 12:45:25 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/10/2019, 12:48:01 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17758/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/10/2019, 12:48:57 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/10/2019, 12:48:58 AM<br><strong>Message</strong>: <pre>Patch Set 2:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/10/2019, 12:50:08 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17758/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17758</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 2:44:14 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Thanks for putting this together. This LGTM. Will +2 when the WIP tag is off.</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 2:44:14 AM<br><strong>Message</strong>: <pre>Set Ready For Review</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 2:44:35 AM<br><strong>Message</strong>: <pre>Set Work In Progress</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 7:58:57 AM<br><strong>Message</strong>: <pre>Patch Set 2:

> Patch Set 2:
> 
> Thanks for putting this together. This LGTM. Will +2 when the WIP tag is off.

Thanks for review. I'd like to see if there's a way to verify this actually solves problem. @Jason, as this originated from the test around large blocks, are they reproducible?</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 10/10/2019, 2:12:39 PM<br><strong>Message</strong>: <pre>Set Ready For Review</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 10/10/2019, 2:12:39 PM<br><strong>Message</strong>: <pre>Patch Set 2:

> Patch Set 2:
> 
> > Patch Set 2:
> > 
> > Thanks for putting this together. This LGTM. Will +2 when the WIP tag is off.
> 
> Thanks for review. I'd like to see if there's a way to verify this actually solves problem. @Jason, as this originated from the test around large blocks, are they reproducible?

I imagine we could get this tested to see if it fixes the problem, the tricky part as always is getting an image built with the fix in it for test.

My bigger concern is more about regressions.  What (if any) impact will this have on performance? Are there any other possible negative side effects? The fact that Sarama does not default to flipping this bit on makes me wonder why.

I think my inclination would be to hold this in our back pocket in case the issue is reported and a problem in the field.  But, as our emphasis on testing is away from Kafka now, just changing it without investing in regression worries me.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 10/10/2019, 2:13:12 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Didn't mean to kick this into review... that button replaces the 'send' in the UI.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 10/10/2019, 2:13:33 PM<br><strong>Message</strong>: <pre>Set Work In Progress</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 11:05:09 PM<br><strong>Message</strong>: <pre>Patch Set 2:

> Patch Set 2:
> 
> > Patch Set 2:
> > 
> > > Patch Set 2:
> > > 
> > > Thanks for putting this together. This LGTM. Will +2 when the WIP tag is off.
> > 
> > Thanks for review. I'd like to see if there's a way to verify this actually solves problem. @Jason, as this originated from the test around large blocks, are they reproducible?
> 
> I imagine we could get this tested to see if it fixes the problem, the tricky part as always is getting an image built with the fix in it for test.
> 
> My bigger concern is more about regressions.  What (if any) impact will this have on performance? Are there any other possible negative side effects? The fact that Sarama does not default to flipping this bit on makes me wonder why.
> 
> I think my inclination would be to hold this in our back pocket in case the issue is reported and a problem in the field.  But, as our emphasis on testing is away from Kafka now, just changing it without investing in regression worries me.

Understood. Created https://jira.hyperledger.org/browse/FAB-16815 to backlog this.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 10/10/2019, 11:05:38 PM<br><strong>Message</strong>: <pre>Abandoned

reopen when the issue resurfaces</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 1570529295<br><strong>UnmergedRevision</strong>: 1855cfa9d211011f391bcfe25ca8f4c1f293ad83<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/8/2019, 6:16:41 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/8/2019, 6:16:41 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/8/2019, 7:36:57 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/8/2019, 6:44:21 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 1570682725<br><strong>UnmergedRevision</strong>: f8c0f3130e3b3252dd957614bd5be1524bd137f3<br><br></blockquote>