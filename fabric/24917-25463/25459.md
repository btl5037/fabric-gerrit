<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 25459<br><strong>Subject</strong>: Ledger-lscc: Introduce queriabilty on to-be state<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/13/2018, 12:21:31 AM<br><strong>LastUpdated</strong>: 8/23/2018, 3:49:07 PM<br><strong>CommitMessage</strong>:<br><pre>Ledger-lscc: Introduce queriabilty on to-be state

This CR introduces a query executor that operates on statedb and
one or more state-updates on top. This enables a queriability
on to-be committed state before committing the state.

The combiner expects the input - a slice of queriable kv-data
(either statedb or state-update batches). The slice is assumed to
contain the kv-data in the decending order of updates - i.e,
a kv-data present at an index 'i' is assumed to overwrite the
kv-data present at the index 'i+1'. For instance, if a key is
deleted from the kv-data present in the lowest index, the combiner
will treated the key as deleted.

The combiner offers a simple query interface that provides 'Get'
and 'Range' query options.

This is expected to be used in the state listener so that a state
listener can query the to-be committed state.

FAB-11560 #done

Change-Id: Ie24e1e4e859b0e3393bc0854700a8a6579159167
Signed-off-by: manish <manish.sethi@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/13/2018, 12:21:31 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:23:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3843/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:23:45 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:30:28 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:30:56 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3843/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3843</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:34:01 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2511/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:34:23 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:35:22 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-SmokeTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 12:35:45 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2511/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2511/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2511</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/13/2018, 9:57:40 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:00:23 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2520/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:00:42 AM<br><strong>Message</strong>: <pre>Patch Set 1: -F2-SmokeTest

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:10:59 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:13:28 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3630/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:13:51 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:14:28 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1234/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:15:13 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:30:36 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:33:10 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 10:33:41 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2520/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2520

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3630/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3630

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1234/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1234</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/13/2018, 8:01:32 PM<br><strong>Message</strong>: <pre>Removed reviewer Manish Sethi.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 2:32:32 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(9 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/20/2018, 7:22:36 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:26:34 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4118/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:27:01 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:32:34 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:32:55 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4118/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4118</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:36:31 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2675/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:36:59 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting smoke tests</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/20/2018, 7:38:06 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(9 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:53:31 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:56:18 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3813/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:56:38 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:56:53 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1390/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 7:57:24 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 8:11:49 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 8:14:42 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 8:15:15 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2675/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2675

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3813/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3813

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1390/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1390</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/21/2018, 2:12:58 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Patch Set 2 was rebased.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/22/2018, 3:35:41 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/22/2018, 6:47:06 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 8/22/2018, 7:23:45 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(5 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/23/2018, 12:52:59 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 12:58:00 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4186/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 12:58:21 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:05:24 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:05:56 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4186/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4186</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:10:02 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2716/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:10:22 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:24:27 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:24:38 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3861/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:24:38 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1435/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:25:03 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:25:14 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:35:43 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/23/2018, 1:39:27 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(5 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:40:21 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:40:44 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3861/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3861/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3861

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2716/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2716

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1435/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1435</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/23/2018, 1:41:46 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:47:03 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3862/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 1:47:24 AM<br><strong>Message</strong>: <pre>Patch Set 4: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 2:02:42 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 2:03:17 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3862/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3862</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2018, 6:24:22 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

Thanks Manish, much easier to follow with the added comments.</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 8/23/2018, 3:17:52 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 8/23/2018, 3:17:55 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jonathan Levi (HACERA)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:20:08 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4365/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:20:30 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3035/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:49:07 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4365/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4365/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/4365

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3035/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/3035</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 8/13/2018, 12:21:31 AM<br><strong>UnmergedRevision</strong>: [cd46786eaf348b7ac568ef94e9a642ecf913b31f](https://github.com/hyperledger-gerrit-archive/fabric/commit/cd46786eaf348b7ac568ef94e9a642ecf913b31f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/13/2018, 12:30:28 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/13/2018, 12:30:28 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/13/2018, 10:10:59 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/13/2018, 10:33:10 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/13/2018, 10:30:36 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 8/20/2018, 2:32:32 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/combiner_test.go#L7](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/combiner_test.go#L7)<br><strong>Comment</strong>: <pre>I only see green path testing here? None of the error paths are exercised?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/combiner_test.go#L7](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/combiner_test.go#L7)<br><strong>Comment</strong>: <pre>Yes, because mostly the error path were trivial such as `err != nil` ... added these now with mocks.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55)<br><strong>Comment</strong>: <pre>I'm not sure how this is passing vet?  Structs should always be initialized with field names.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55)<br><strong>Comment</strong>: <pre>If I am not mistaken vet requires this only if you are using a struct from a different package.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55)<br><strong>Comment</strong>: <pre>Ah, that would explain it.  Still can't say I'm a fan of this initialization style, the only time when un-keyed fields seem appropriate to me is when the struct definition is local to the function, such as in a table-driven test.  I won't hold this CR up over it, but, we should always use keyed fields unless there is a good reason not to.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L55)<br><strong>Comment</strong>: <pre>I respect your preference but somehow I personally prefer it this way unless there is good reason to use keyed field :-) Because, mostly the field names and variable names are pretty much same and using the key fields just end up adding verbosity.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L58)<br><strong>Comment</strong>: <pre>Same</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L58)<br><strong>Comment</strong>: <pre>Same as above</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L61)<br><strong>Comment</strong>: <pre>Some godoc / a comment would be nice on this one.

As best as I can tell, this code looks over all the current result iterators, and picks the one which is lexicographically smallest.  Then, it saves that value, and advances the underlying iterator.  If the underlying iterator is out of elements, then that iterator is closed, and removed from the list of iterators.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L61)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L62)<br><strong>Comment</strong>: <pre>beginning</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L62)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L70)<br><strong>Comment</strong>: <pre>I had to look this up: https://golang.org/pkg/strings/#Compare

But per the godoc, it is faster (and, I'm inclined agree in this case clearer) to use a simple '<', '>', '==' in the case statements.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L70)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81)<br><strong>Comment</strong>: <pre>I realize that there is nothing to be done if the next element is larger than the current element, but it would be nice to include a specific case or, at least perhaps a 'default' and a comment.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L110)<br><strong>Comment</strong>: <pre>To double check, it is safe to call Close() multiply on iterators?

What about on error? Is it still the caller's responsibility to call Close?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L110)<br><strong>Comment</strong>: <pre>Yes, the underlying iterators that we have can be closed more than once and they don't return error.

Yes, the expectation is that the code that creates an iterator is the one closes it... typically in `defer` statement immediately after obtaining.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/query_executer_combiner.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/query_executer_combiner.go#L72)<br><strong>Comment</strong>: <pre>Why not iterate over the query executors and invoke Done()?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/query_executer_combiner.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/cd46786eaf348b7ac568ef94e9a642ecf913b31f/core/ledger/kvledger/txmgmt/queryutil/query_executer_combiner.go#L72)<br><strong>Comment</strong>: <pre>In fact, this function should not have been present... Removed this now.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 8/20/2018, 7:22:36 PM<br><strong>UnmergedRevision</strong>: [bd7677447a60840fb93cff3cf0d9293af53ad29e](https://github.com/hyperledger-gerrit-archive/fabric/commit/bd7677447a60840fb93cff3cf0d9293af53ad29e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 7:32:34 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 7:32:34 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 7:53:31 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 8:14:42 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 8:11:49 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 8/21/2018, 2:12:58 PM<br><strong>UnmergedRevision</strong>: [590e7e5dd7928fdc8292abcd41e5bc338790d59d](https://github.com/hyperledger-gerrit-archive/fabric/commit/590e7e5dd7928fdc8292abcd41e5bc338790d59d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 7:32:34 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 7:32:34 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 7:53:31 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 8:14:42 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 8:11:49 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 8/22/2018, 3:35:41 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L22](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L22)<br><strong>Comment</strong>: <pre>A comment above the function would help, especially since the bool response may be opposite of people's assumption (they may think true means we successfully moved).</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L22](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L22)<br><strong>Comment</strong>: <pre>Moved this to the bottom of the file as this is less significant structure than the combiner. Also, added comments to this function</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L75)<br><strong>Comment</strong>: <pre>I think the comment at the beginning of the function or right above this case statement should summarize the equals behavior, it wasn't immediately clear to me.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L75](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L75)<br><strong>Comment</strong>: <pre>added the comments in the block</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81)<br><strong>Comment</strong>: <pre>If holderKey and smallerKey were equal, we increment currentHolderIndex... shouldn't we increment currentHolderIndex in other scenarios as well?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L81)<br><strong>Comment</strong>: <pre>Good catch Dave. This was a bad idea to have a for loop on 'range' of holders and maintaining the current indexes separately. I have changed the logic of this loop to just use indexes - Thanks.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L84)<br><strong>Comment</strong>: <pre>There is no unit test coverage for this (important) case.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L84)<br><strong>Comment</strong>: <pre>Enhanced the test to include this case as well.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L98)<br><strong>Comment</strong>: <pre>A comment above the function would help, especially since the bool response may be opposite of people's assumption (they may think true means we successfully moved).</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/590e7e5dd7928fdc8292abcd41e5bc338790d59d/core/ledger/kvledger/txmgmt/queryutil/iterator_combiner.go#L98)<br><strong>Comment</strong>: <pre>Changed the function signature to make it clearer and added comments.</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 8/23/2018, 12:52:59 AM<br><strong>GitHubMergedRevision</strong>: [bd1fa1b83ab70642070722c2d32c208d273ab218](https://github.com/hyperledger-gerrit-archive/fabric/commit/bd1fa1b83ab70642070722c2d32c208d273ab218)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 1:05:24 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 1:05:24 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 1:24:27 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 1:35:43 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 2:02:42 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Approved</strong>: 8/23/2018, 3:17:52 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jonathan Levi (HACERA)<br><strong>Merged</strong>: 8/23/2018, 3:17:55 PM<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 8/23/2018, 6:24:22 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>