<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 24919<br><strong>Subject</strong>: [FAB-11162] Implement bare minimum Raft-based chain<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 7/29/2018, 11:52:49 AM<br><strong>LastUpdated</strong>: 9/6/2018, 11:09:18 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-11162] Implement bare minimum Raft-based chain

This CR implements a bare minimum raft-based chain, which only
supports single node. It does not support following features:
- process config type message
- raft snapshot
- raft WAL
- reconfigure raft

This CR all pulls in a fake clock library for testing purpose.

Change-Id: I5e93ff9eeb524ea1afd0348e1180fb9f4535fb5c
Signed-off-by: Jay Guo <guojiannan1101@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 7/29/2018, 11:52:49 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/29/2018, 11:55:38 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3448/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/29/2018, 11:55:54 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/29/2018, 11:55:56 AM<br><strong>Message</strong>: <pre>Patch Set 1:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/29/2018, 11:56:23 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3448/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3448</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 7/29/2018, 12:20:38 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 7/29/2018, 5:28:02 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(4 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 7/30/2018, 4:15:45 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 7/30/2018, 4:18:39 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Can you please, also split this work into several items, instead of single CR of 2K LOC? Something like:

1. Proto updates
2. Interfaces + mocks
3. Actual impl</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/5/2018, 11:54:54 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/5/2018, 11:55:15 AM<br><strong>Message</strong>: <pre>Patch Set 2:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/5/2018, 11:56:57 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3570/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/5/2018, 11:57:16 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/5/2018, 11:57:19 AM<br><strong>Message</strong>: <pre>Patch Set 2: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/5/2018, 11:57:47 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3570/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3570/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3570</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/5/2018, 12:16:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(6 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/5/2018, 6:00:43 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/5/2018, 6:01:37 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/5/2018, 6:05:20 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/6/2018, 1:20:24 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 1:21:44 AM<br><strong>Message</strong>: <pre>Patch Set 3:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 1:24:36 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3578/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 1:24:55 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 1:25:01 AM<br><strong>Message</strong>: <pre>Patch Set 3: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 1:25:40 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3578/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3578/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3578</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/6/2018, 3:26:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 3:28:13 AM<br><strong>Message</strong>: <pre>Patch Set 4:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 3:31:10 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3579/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 3:31:25 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 3:32:26 AM<br><strong>Message</strong>: <pre>Patch Set 4: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/6/2018, 3:32:45 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3579/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3579/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3579</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/6/2018, 3:37:27 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(9 comments)</pre><strong>Reviewer</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>Reviewed</strong>: 8/6/2018, 11:07:59 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/7/2018, 7:18:55 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:19:17 AM<br><strong>Message</strong>: <pre>Patch Set 5:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:24:14 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3605/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:24:35 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:26:14 AM<br><strong>Message</strong>: <pre>Patch Set 5: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:26:51 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3605/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3605/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3605</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/7/2018, 7:27:37 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:27:51 AM<br><strong>Message</strong>: <pre>Patch Set 6:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:32:29 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3606/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:32:47 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:34:17 AM<br><strong>Message</strong>: <pre>Patch Set 6: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/7/2018, 7:34:37 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3606/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3606/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3606</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/7/2018, 11:24:23 AM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

(10 comments)</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/7/2018, 11:29:41 AM<br><strong>Message</strong>: <pre>Patch Set 6:

This looks good for a start, see my comments inline.

Forgot to add this:

Let's rename the top-level package to "etcdraft" (and leave the "github.com/coreos/etcd/raft" import as "raft" since it is internal to us). See [1]. I had updated all the references in the Google Doc for this reason.

I also think that the `cluster.go` filename is deceiving. This is an FSM or an FSM wrapper.

[1] https://docs.google.com/document/d/138Brlx2BiYJm5bzFk_B0csuEUKYdXXr7Za9V7C76dwo/edit?disco=AAAAB62Du0s</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/8/2018, 6:16:20 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2018, 6:17:15 AM<br><strong>Message</strong>: <pre>Patch Set 7:

No Builds Executed</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/8/2018, 6:17:22 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(6 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/8/2018, 6:18:39 AM<br><strong>Message</strong>: <pre>Patch Set 7:

> Patch Set 6:
> 
> This looks good for a start, see my comments inline.
> 
> Forgot to add this:
> 
> Let's rename the top-level package to "etcdraft" (and leave the "github.com/coreos/etcd/raft" import as "raft" since it is internal to us). See [1]. I had updated all the references in the Google Doc for this reason.
> 
> I also think that the `cluster.go` filename is deceiving. This is an FSM or an FSM wrapper.
> 
> [1] https://docs.google.com/document/d/138Brlx2BiYJm5bzFk_B0csuEUKYdXXr7Za9V7C76dwo/edit?disco=AAAAB62Du0s

will do this along with next update</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2018, 6:19:19 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3661/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2018, 6:19:41 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2018, 6:19:46 AM<br><strong>Message</strong>: <pre>Patch Set 7: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2018, 6:20:23 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3661/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3661/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3661</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/8/2018, 6:42:32 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>Reviewed</strong>: 8/9/2018, 12:00:50 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)

Hi, Jay, I have one question when reading your code. Thanks.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/9/2018, 4:12:36 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)

see my answer inline</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/9/2018, 4:36:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 4:37:18 AM<br><strong>Message</strong>: <pre>Patch Set 8:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 4:41:19 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3713/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 4:41:38 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 4:42:46 AM<br><strong>Message</strong>: <pre>Patch Set 8: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 4:43:05 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3713/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3713/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3713</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/9/2018, 5:44:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:45:09 AM<br><strong>Message</strong>: <pre>Patch Set 9:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:49:33 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3718/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:49:49 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:55:49 AM<br><strong>Message</strong>: <pre>Patch Set 9: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:56:17 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3718/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3718</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:58:32 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2428/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 5:58:56 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:16:31 AM<br><strong>Message</strong>: <pre>Patch Set 9: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:18:30 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3521/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:18:53 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:19:20 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1139/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:19:50 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:34:03 AM<br><strong>Message</strong>: <pre>Patch Set 9: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:38:18 AM<br><strong>Message</strong>: <pre>Patch Set 9: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/9/2018, 6:38:50 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2428/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2428

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3521/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3521

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1139/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1139</pre><strong>Reviewer</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>Reviewed</strong>: 8/9/2018, 12:18:20 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/10/2018, 6:44:22 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2018, 6:44:53 AM<br><strong>Message</strong>: <pre>Patch Set 10:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2018, 6:48:27 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3789/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2018, 6:48:45 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2018, 6:50:19 AM<br><strong>Message</strong>: <pre>Patch Set 10: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/10/2018, 6:51:01 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3789/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3789/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3789</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 8/12/2018, 7:08:59 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/12/2018, 10:25:04 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/13/2018, 3:34:12 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 3:37:44 AM<br><strong>Message</strong>: <pre>Patch Set 11:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 3:38:44 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3854/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 3:39:05 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 3:40:29 AM<br><strong>Message</strong>: <pre>Patch Set 11: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2018, 3:41:06 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3854/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3854/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3854</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/14/2018, 11:39:28 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review-1

(1 comment)

As noted in the previous patchset: consensus/raft -> consensus/etcdraft

--

Code-wise, this is an excellent CR. The code is short and to the point and aims to do exactly what the JIRA is asking.

The underlying issue here is that if someone were to review this CR, they'd have a hard time figuring out exactly how it fits into the bigger picture because the contracts with the modules it interfaces with aren't documented anywhere (that I could find anyway).

Specifically:

1. I see OnStep/OnSubmit implementations. If I had missed the RocketChat conversation in #fabric-orderer-dev, how could I figure out *exactly* how they're supposed to be used with *zero* guesswork? (Keywords: exactly, zero)
2. Same for the RecvSubmitReq/RecvBlock implementations. These are obviously meant to be consumed by the Chain object. But where is this contract captured?

To be clear: the onus is not on you to document and capture everything. And as long as we're being critical, the very first offender on this one is me; I left Artem guessing how my work's going to be consumed the other day for 48h or so: https://gerrit.hyperledger.org/r/c/25235/3/protos/orderer/etcdraft/configuration.go#48  -- this is not acceptable.

So to me and everyone copied on the reviewers list, let's please document the intent and the contracts we're working against, and let's do so before submitting our CRs so that collaboration and reviewing is easier.

(The concrete ask here that's pertinent to this CR is addressing items 1 and 2.)</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/14/2018, 11:45:34 AM<br><strong>Message</strong>: <pre>Patch Set 11:

> The underlying issue here is that if someone were to review this CR, they'd have a hard time figuring out exactly how it fits into the bigger picture because the contracts with the modules it interfaces with aren't documented anywhere (that I could find anyway).
> 
> Specifically:
> 
> 1. I see OnStep/OnSubmit implementations. If I had missed the RocketChat conversation in #fabric-orderer-dev, how could I figure out *exactly* how they're supposed to be used with *zero* guesswork? (Keywords: exactly, zero)
> 2. Same for the RecvSubmitReq/RecvBlock implementations. These are obviously meant to be consumed by the Chain object. But where is this contract captured?
> 
> To be clear: the onus is not on you to document and capture everything. And as long as we're being critical, the very first offender on this one is me; I left Artem guessing how my work's going to be consumed the other day for 48h or so: https://gerrit.hyperledger.org/r/c/25235/3/protos/orderer/etcdraft/configuration.go#48  -- this is not acceptable.
> 
> So to me and everyone copied on the reviewers list, let's please document the intent and the contracts we're working against, and let's do so before submitting our CRs so that collaboration and reviewing is easier.
> 
> (The concrete ask here that's pertinent to this CR is addressing items 1 and 2.)


A more succinct version of that comment would: feel free to call us out when we don't document our contracts with you.

We need to get better -  I messed up on this one first.

Concretely, we should have a comment (either in the CR commit message or inline in the code) that says: "I'm implementing these methods because here's what this other module is supposed to do <link>, and I'm implementing that because this is what I've promised to that other module <link>"</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/15/2018, 5:07:07 AM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 5:07:45 AM<br><strong>Message</strong>: <pre>Patch Set 12:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 5:10:30 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3956/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 5:10:49 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 5:12:25 AM<br><strong>Message</strong>: <pre>Patch Set 12: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 5:13:00 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3956/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3956/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3956</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/15/2018, 10:20:49 AM<br><strong>Message</strong>: <pre>Patch Set 12:

(8 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/15/2018, 11:43:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/15/2018, 11:43:58 AM<br><strong>Message</strong>: <pre>Patch Set 13:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 11:44:01 AM<br><strong>Message</strong>: <pre>Patch Set 13:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 11:46:09 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3982/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 11:46:25 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 11:47:46 AM<br><strong>Message</strong>: <pre>Patch Set 13: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/15/2018, 11:48:17 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3982/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3982/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3982</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/15/2018, 1:09:20 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(2 comments)</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/15/2018, 1:12:26 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(2 comments)</pre><strong>Reviewer</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>Reviewed</strong>: 8/17/2018, 11:13:43 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/18/2018, 11:34:08 PM<br><strong>Message</strong>: <pre>Patch Set 13:

(2 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/21/2018, 2:52:33 AM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 2:53:07 AM<br><strong>Message</strong>: <pre>Patch Set 14:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 2:56:17 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4123/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 2:56:37 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 2:57:56 AM<br><strong>Message</strong>: <pre>Patch Set 14: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 2:58:18 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4123/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4123/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4123</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/21/2018, 3:13:51 AM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:16:05 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4125/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:16:26 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:16:58 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4126/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:17:18 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:22:29 AM<br><strong>Message</strong>: <pre>Patch Set 15: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:22:55 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4125/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4125</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:25:09 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:25:14 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2680/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:25:32 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4126/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4126</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:25:33 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:38:26 AM<br><strong>Message</strong>: <pre>Patch Set 15: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:41:41 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3818/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:42:01 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:42:16 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1395/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:42:52 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:55:24 AM<br><strong>Message</strong>: <pre>Patch Set 15: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:58:06 AM<br><strong>Message</strong>: <pre>Patch Set 15: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2018, 3:58:44 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2680/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2680

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3818/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3818

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1395/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1395</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 8/21/2018, 6:02:11 PM<br><strong>Message</strong>: <pre>Patch Set 15:

(3 comments)</pre><strong>Reviewer</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>Reviewed</strong>: 8/21/2018, 10:50:22 PM<br><strong>Message</strong>: <pre>Patch Set 15:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/21/2018, 11:18:17 PM<br><strong>Message</strong>: <pre>Patch Set 15:

(1 comment)</pre><strong>Reviewer</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>Reviewed</strong>: 8/21/2018, 11:31:15 PM<br><strong>Message</strong>: <pre>Patch Set 15:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/23/2018, 3:10:30 AM<br><strong>Message</strong>: <pre>Uploaded patch set 16.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/23/2018, 3:11:08 AM<br><strong>Message</strong>: <pre>Uploaded patch set 17.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:11:09 AM<br><strong>Message</strong>: <pre>Patch Set 16:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:13:49 AM<br><strong>Message</strong>: <pre>Patch Set 17:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:19:10 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4192/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:19:27 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:26:08 AM<br><strong>Message</strong>: <pre>Patch Set 17: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:26:33 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4192/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4192</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:31:10 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2720/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:31:32 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:47:04 AM<br><strong>Message</strong>: <pre>Patch Set 17: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:50:07 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3866/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:50:24 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:50:26 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1439/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 3:51:08 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 4:04:25 AM<br><strong>Message</strong>: <pre>Patch Set 17: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 4:06:55 AM<br><strong>Message</strong>: <pre>Patch Set 17: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2018, 4:07:17 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2720/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2720

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3866/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3866

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1439/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1439</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2018, 7:11:10 AM<br><strong>Message</strong>: <pre>Patch Set 17: Code-Review-1

(27 comments)

Please look at the racy behaviors.
Please update the tests.
Please evaluate pulling in a clock library.
Please avoid time.After in production code.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/26/2018, 3:59:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 18: Patch Set 17 was rebased.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/26/2018, 4:38:46 PM<br><strong>Message</strong>: <pre>Patch Set 17:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/26/2018, 4:43:58 PM<br><strong>Message</strong>: <pre>Patch Set 17:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/27/2018, 3:18:28 AM<br><strong>Message</strong>: <pre>Uploaded patch set 19.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:22:19 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4310/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:22:41 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:29:22 AM<br><strong>Message</strong>: <pre>Patch Set 19: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:29:53 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4310/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4310</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/27/2018, 3:32:10 AM<br><strong>Message</strong>: <pre>Patch Set 19:

(2 comments)

@Matthew, thank you for reviewing this! addressed most of comments, and replied to ones not solved. please see them inline.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:32:32 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2809/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:32:56 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:33:09 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4312/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:33:35 AM<br><strong>Message</strong>: <pre>Patch Set 19: -F2-DocBuild -F1-VerifyBuild

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:34:21 AM<br><strong>Message</strong>: <pre>Patch Set 19: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4312/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4312/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4312</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:36:06 AM<br><strong>Message</strong>: <pre>Patch Set 19: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4313/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:36:33 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:43:19 AM<br><strong>Message</strong>: <pre>Patch Set 19: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:50:11 AM<br><strong>Message</strong>: <pre>Patch Set 19: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:52:57 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3965/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:53:21 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:53:23 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1522/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 3:54:04 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 4:03:12 AM<br><strong>Message</strong>: <pre>Patch Set 19: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 4:10:07 AM<br><strong>Message</strong>: <pre>Patch Set 19: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 4:11:14 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3965/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3965/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3965

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2809/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2809

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4313/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4313

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1522/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1522</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/27/2018, 9:02:55 AM<br><strong>Message</strong>: <pre>Uploaded patch set 20.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:05:40 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4323/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:05:59 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:12:27 AM<br><strong>Message</strong>: <pre>Patch Set 20: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:13:04 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4323/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4323</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:15:04 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2817/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:15:28 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:31:59 AM<br><strong>Message</strong>: <pre>Patch Set 20: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:35:44 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3974/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:36:02 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:36:07 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1535/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:37:03 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:47:37 AM<br><strong>Message</strong>: <pre>Patch Set 20: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:52:11 AM<br><strong>Message</strong>: <pre>Patch Set 20: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 9:52:52 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1535/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1535/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1535

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2817/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2817

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3974/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3974</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/27/2018, 10:23:05 AM<br><strong>Message</strong>: <pre>Patch Set 20: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/27/2018, 10:38:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 21.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:38:40 AM<br><strong>Message</strong>: <pre>Patch Set 21:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:43:03 AM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4331/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:43:22 AM<br><strong>Message</strong>: <pre>Patch Set 21:

Starting verify build</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/27/2018, 10:48:12 AM<br><strong>Message</strong>: <pre>Uploaded patch set 22: Patch Set 21 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:49:15 AM<br><strong>Message</strong>: <pre>Patch Set 21: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4331/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4331/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4331</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:52:27 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4332/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:52:42 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:58:27 AM<br><strong>Message</strong>: <pre>Patch Set 22: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 10:58:55 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4332/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4332</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:01:47 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2821/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:02:11 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:17:12 AM<br><strong>Message</strong>: <pre>Patch Set 22: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:19:42 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3979/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:20:14 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:25:03 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1542/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:26:06 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:36:28 AM<br><strong>Message</strong>: <pre>Patch Set 22: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:41:01 AM<br><strong>Message</strong>: <pre>Patch Set 22: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/27/2018, 11:41:43 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2821/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2821

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3979/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3979

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1542/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1542</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/27/2018, 1:25:10 PM<br><strong>Message</strong>: <pre>Patch Set 22: Code-Review-1

(13 comments)

Thank you for pulling in the fake clock.

There are still races around the exitC that I think need to be resolved. Instead of trying to serialize access, perhaps just simplify the approach? If it's really an exit channel, the create, close, set is being done to know when the chain has started, perhaps just use a 'started' flag that's synchronized correctly?

If that's not done, the exitC references need to be synchronized beyond Start and Halt and that seems more complicated than the alternative.

Also, the new code around the Timer management seems more complicated than it needs to be. I feel a little responsible since I didn't give better guidance last time. I tried to be better this time.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/27/2018, 5:03:11 PM<br><strong>Message</strong>: <pre>Uploaded patch set 23: Patch Set 22 was rebased.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/27/2018, 10:46:35 PM<br><strong>Message</strong>: <pre>Patch Set 23:

> Patch Set 22: Code-Review-1
> 
> (13 comments)
> 
> Thank you for pulling in the fake clock.
> 
> There are still races around the exitC that I think need to be resolved. Instead of trying to serialize access, perhaps just simplify the approach? If it's really an exit channel, the create, close, set is being done to know when the chain has started, perhaps just use a 'started' flag that's synchronized correctly?
> 
> If that's not done, the exitC references need to be synchronized beyond Start and Halt and that seems more complicated than the alternative.
> 
> Also, the new code around the Timer management seems more complicated than it needs to be. I feel a little responsible since I didn't give better guidance last time. I tried to be better this time.

Thanks for reviewing!

Timer management is complicated mostly because we couldn't set timer to nil anymore, due to `<-timer.C()` in select at line 240.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/28/2018, 12:17:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 24.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:17:48 AM<br><strong>Message</strong>: <pre>Patch Set 24:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:21:03 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4375/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:21:27 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:27:50 AM<br><strong>Message</strong>: <pre>Patch Set 24: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/28/2018, 12:27:58 AM<br><strong>Message</strong>: <pre>Patch Set 24:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:28:22 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4375/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4375</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:31:10 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2853/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:31:38 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:36:58 AM<br><strong>Message</strong>: <pre>Patch Set 24: F2-SmokeTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:37:38 AM<br><strong>Message</strong>: <pre>Patch Set 24:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2853/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2853/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2853</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/28/2018, 2:34:07 AM<br><strong>Message</strong>: <pre>Patch Set 25: Patch Set 24 was rebased</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/28/2018, 8:56:52 AM<br><strong>Message</strong>: <pre>Patch Set 25: Code-Review+1

(1 comment)

Channel management is much better. Only remaining comment is about the timer management.</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/28/2018, 11:56:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 26.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:57:21 AM<br><strong>Message</strong>: <pre>Patch Set 26:

No Builds Executed</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/28/2018, 11:58:24 AM<br><strong>Message</strong>: <pre>Patch Set 26:

> Patch Set 25: Code-Review+1
> 
> (1 comment)
> 
> Channel management is much better. Only remaining comment is about the timer management.

setting timer to nil is a bit tricky because we need to select on `c.timer.C()`. wdyt</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:59:48 AM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4419/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:00:06 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:06:19 PM<br><strong>Message</strong>: <pre>Patch Set 26: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:07:08 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4419/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4419</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:10:54 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2890/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:11:14 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:24:37 PM<br><strong>Message</strong>: <pre>Patch Set 26: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:27:17 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4048/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:27:40 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:28:01 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1610/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:28:39 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:40:47 PM<br><strong>Message</strong>: <pre>Patch Set 26: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:43:37 PM<br><strong>Message</strong>: <pre>Patch Set 26: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 12:44:20 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2890/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2890

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4048/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4048

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1610/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1610</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/28/2018, 5:31:53 PM<br><strong>Message</strong>: <pre>Patch Set 26:

> Patch Set 26:
> 
> > Patch Set 25: Code-Review+1
> > 
> > (1 comment)
> > 
> > Channel management is much better. Only remaining comment is about the timer management.
> 
> setting timer to nil is a bit tricky because we need to select on `c.timer.C()`. wdyt

fair enough.</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/28/2018, 5:35:25 PM<br><strong>Message</strong>: <pre>Patch Set 26: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/28/2018, 10:41:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 27.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:42:19 PM<br><strong>Message</strong>: <pre>Patch Set 27:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:44:10 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4444/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:44:27 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:51:20 PM<br><strong>Message</strong>: <pre>Patch Set 27: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:52:02 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4444/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4444</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:54:16 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2907/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 10:54:43 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:11:00 PM<br><strong>Message</strong>: <pre>Patch Set 27: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:13:45 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4069/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:14:09 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:14:28 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1627/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:15:01 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:26:10 PM<br><strong>Message</strong>: <pre>Patch Set 27: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:30:26 PM<br><strong>Message</strong>: <pre>Patch Set 27: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2018, 11:31:08 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2907/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2907

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4069/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4069

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1627/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1627</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 8:15:34 AM<br><strong>Message</strong>: <pre>Patch Set 27: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/29/2018, 8:56:19 AM<br><strong>Message</strong>: <pre>Uploaded patch set 28.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:57:13 AM<br><strong>Message</strong>: <pre>Patch Set 28:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:01:06 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4486/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:01:25 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:10:01 AM<br><strong>Message</strong>: <pre>Patch Set 28: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:10:33 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4486/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4486</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:13:01 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2936/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:13:25 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:25:15 AM<br><strong>Message</strong>: <pre>Patch Set 28: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:30:54 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4105/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:31:14 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:31:32 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1654/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:32:14 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:44:17 AM<br><strong>Message</strong>: <pre>Patch Set 28: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:47:18 AM<br><strong>Message</strong>: <pre>Patch Set 28: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:47:41 AM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2936/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2936

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4105/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4105

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1654/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1654</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 10:57:20 AM<br><strong>Message</strong>: <pre>Patch Set 28: Code-Review+2</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/29/2018, 1:29:02 PM<br><strong>Message</strong>: <pre>Patch Set 28:

(3 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/30/2018, 3:49:35 AM<br><strong>Message</strong>: <pre>Uploaded patch set 29.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 3:50:23 AM<br><strong>Message</strong>: <pre>Patch Set 29:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 3:52:30 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4520/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 3:52:53 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting verify build</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/30/2018, 3:53:13 AM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 3:59:05 AM<br><strong>Message</strong>: <pre>Patch Set 29: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 3:59:31 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4520/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4520</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:02:16 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2956/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:02:43 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:21:00 AM<br><strong>Message</strong>: <pre>Patch Set 29: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:23:31 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4128/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:23:54 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:24:02 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1671/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:24:39 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:38:57 AM<br><strong>Message</strong>: <pre>Patch Set 29: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:40:53 AM<br><strong>Message</strong>: <pre>Patch Set 29: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 4:41:17 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2956/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2956

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4128/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4128

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1671/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1671</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/30/2018, 7:28:48 AM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/30/2018, 7:30:11 AM<br><strong>Message</strong>: <pre>Patch Set 29:

(3 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 8/30/2018, 10:20:42 AM<br><strong>Message</strong>: <pre>Patch Set 29:

(4 comments)

pls see my comments inline</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 9/1/2018, 2:19:01 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Adarsh Saraf - adarshsaraf123@gmail.com<br><strong>Reviewed</strong>: 9/3/2018, 11:02:36 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/3/2018, 11:30:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 30: Patch Set 29 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 11:34:25 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4680/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 11:34:57 PM<br><strong>Message</strong>: <pre>Patch Set 30: -F2-DocBuild -F1-VerifyBuild -F2-SmokeTest -F3-IntegrationTest -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 11:42:36 PM<br><strong>Message</strong>: <pre>Patch Set 30: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 11:43:03 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4680/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4680</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 11:45:39 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3058/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 11:46:00 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:00:14 AM<br><strong>Message</strong>: <pre>Patch Set 30: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:02:50 AM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4247/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:03:09 AM<br><strong>Message</strong>: <pre>Patch Set 30:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:03:34 AM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1776/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:04:07 AM<br><strong>Message</strong>: <pre>Patch Set 30:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:16:01 AM<br><strong>Message</strong>: <pre>Patch Set 30: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:24:21 AM<br><strong>Message</strong>: <pre>Patch Set 30: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 12:24:56 AM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4247/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4247/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4247

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1776/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1776/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1776

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3058/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3058</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 1:24:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 31.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:29:20 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4686/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:29:39 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:35:49 AM<br><strong>Message</strong>: <pre>Patch Set 31: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:36:15 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4686/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4686</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:40:29 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3062/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:40:48 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:52:55 AM<br><strong>Message</strong>: <pre>Patch Set 31: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:55:35 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4253/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:55:56 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:56:25 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1780/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 1:57:03 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 2:04:41 AM<br><strong>Message</strong>: <pre>Patch Set 31: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 2:11:47 AM<br><strong>Message</strong>: <pre>Patch Set 31: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 2:12:18 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4253/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4253/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4253

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3062/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3062

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1780/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1780</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 9:13:43 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Run UnitTest

00:07:33.507 unit-tests_1  | 2018-09-04 06:03:03.182 UTC [statecouchdb] NewVersionedDBProvider -> DEBU 081 constructing CouchDB VersionedDBProvider
00:07:33.508 unit-tests_1  | panic: runtime error: invalid memory address or nil pointer dereference
00:07:33.508 unit-tests_1  | [signal SIGSEGV: segmentation violation code=0x1 addr=0x8 pc=0xe883e2]
00:07:33.508 unit-tests_1  | 
00:07:33.508 unit-tests_1  | goroutine 156 [running]:
00:07:33.509 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).newRawIterator(0xc4202da1a0, 0x0, 0x0, 0x0, 0x0, 0xc420aa5260, 0xc42044a390, 0x1, 0xc420600a80)
00:07:33.509 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_iter.go:54 +0x2a2
00:07:33.510 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).newIterator(0xc4202da1a0, 0x0, 0x0, 0x0, 0x0, 0x0, 0xc420381c38, 0xc42044a390, 0xff)
00:07:33.511 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db_iter.go:79 +0x99
00:07:33.511 unit-tests_1  | github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb.(*DB).NewIterator(0xc4202da1a0, 0xc420381c38, 0xc42044a390, 0x0, 0x0)
00:07:33.511 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/vendor/github.com/syndtr/goleveldb/leveldb/db.go:886 +0x147
00:07:33.512 unit-tests_1  | github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DB).GetIterator(0xc4200308c0, 0xc4206009f0, 0x26, 0x30, 0xc420600a20, 0x26, 0x30, 0xc42016fe50, 0xc42016fe48)
00:07:33.512 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_helper.go:143 +0xa0
00:07:33.512 unit-tests_1  | github.com/hyperledger/fabric/common/ledger/util/leveldbhelper.(*DBHandle).GetIterator(0xc420492520, 0xc42016fe10, 0x4, 0x8, 0xc42016fe40, 0x4, 0x8, 0x38)
00:07:33.513 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/common/ledger/util/leveldbhelper/leveldb_provider.go:110 +0x377
00:07:33.513 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*expKeeper).retrieve(0xc4203dc070, 0x3, 0x0, 0x0, 0x0, 0x0, 0x0)
00:07:33.513 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/expiry_keeper.go:84 +0x119
00:07:33.513 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*purgeMgr).prepareWorkingsetFor(0xc42039c280, 0x3, 0xc42044a3c0)
00:07:33.514 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr.go:151 +0x10a
00:07:33.514 unit-tests_1  | github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*purgeMgr).PrepareForExpiringKeys.func1(0xc42039c280, 0x3)
00:07:33.514 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr.go:78 +0x87
00:07:33.515 unit-tests_1  | created by github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt.(*purgeMgr).PrepareForExpiringKeys
00:07:33.515 unit-tests_1  | 	/opt/gopath/src/github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/pvtstatepurgemgmt/purge_mgr.go:74 +0x64
00:07:33.515 unit-tests_1  | FAIL	github.com/hyperledger/fabric/core/ledger/kvledger/txmgmt/txmgr/lockbasedtxmgr	2.589s</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 9:16:28 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4263/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 9:16:54 AM<br><strong>Message</strong>: <pre>Patch Set 31: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 9:33:59 AM<br><strong>Message</strong>: <pre>Patch Set 31: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 9:34:32 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4263/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4263</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 11:09:42 AM<br><strong>Message</strong>: <pre>Patch Set 31: Code-Review+2

(2 comments)

We can revise the comment later (and move the discussion to follow-up CR that simplifies clock management). I think this is good to go - thanks!</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 1:01:48 PM<br><strong>Message</strong>: <pre>Patch Set 31: Code-Review+2</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 1:02:07 PM<br><strong>Message</strong>: <pre>Patch Set 32: Patch Set 31 was rebased</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 3:44:06 PM<br><strong>Message</strong>: <pre>Patch Set 33: Patch Set 32 was rebased</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 10:57:18 PM<br><strong>Message</strong>: <pre>Uploaded patch set 34: Patch Set 33 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 10:58:20 PM<br><strong>Message</strong>: <pre>Patch Set 33:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:00:32 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4726/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:00:58 PM<br><strong>Message</strong>: <pre>Patch Set 34: -F2-DocBuild -F1-VerifyBuild -F2-SmokeTest -F3-IntegrationTest -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:10:22 PM<br><strong>Message</strong>: <pre>Patch Set 34: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:11:17 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4726/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4726</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:13:36 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3094/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:14:04 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:32:37 PM<br><strong>Message</strong>: <pre>Patch Set 34: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:35:28 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4290/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:35:45 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:39:12 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1813/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:39:47 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:43:28 PM<br><strong>Message</strong>: <pre>Patch Set 34: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:53:52 PM<br><strong>Message</strong>: <pre>Patch Set 34: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:54:35 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4290/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4290/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4290

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3094/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3094

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1813/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1813</pre><strong>Reviewer</strong>: Adarsh Saraf - adarshsaraf123@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 7:30:09 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 8:15:58 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 8:19:23 AM<br><strong>Message</strong>: <pre>Patch Set 34:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 8:19:31 AM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4308/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 8:19:51 AM<br><strong>Message</strong>: <pre>Patch Set 34: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Adarsh Saraf - adarshsaraf123@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 8:28:24 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 8:35:54 AM<br><strong>Message</strong>: <pre>Patch Set 34: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 8:36:31 AM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4308/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4308</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 8:36:57 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(1 comment)

> Patch Set 34:
> 
> (1 comment)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 8:48:01 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(2 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 8:54:20 AM<br><strong>Message</strong>: <pre>Patch Set 34: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 10:05:51 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 10:29:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 35.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:30:56 AM<br><strong>Message</strong>: <pre>Patch Set 35:

No Builds Executed</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 10:31:01 AM<br><strong>Message</strong>: <pre>Patch Set 35:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:31:54 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4771/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:32:15 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting verify build</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 10:35:29 AM<br><strong>Message</strong>: <pre>Patch Set 34:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:38:59 AM<br><strong>Message</strong>: <pre>Patch Set 35: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:39:35 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4771/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4771</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:42:00 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3129/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:42:19 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:53:44 AM<br><strong>Message</strong>: <pre>Patch Set 35: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:55:57 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4328/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:56:18 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:56:35 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1844/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:57:14 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 11:05:21 AM<br><strong>Message</strong>: <pre>Patch Set 35: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 11:08:02 AM<br><strong>Message</strong>: <pre>Patch Set 35: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 11:08:48 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4328/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4328/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4328

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3129/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3129

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1844/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1844</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 11:57:19 AM<br><strong>Message</strong>: <pre>Patch Set 35:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 12:02:20 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4336/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 12:02:43 PM<br><strong>Message</strong>: <pre>Patch Set 35: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 12:23:49 PM<br><strong>Message</strong>: <pre>Patch Set 35: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 12:24:31 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4336/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4336/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4336</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 9:04:50 PM<br><strong>Message</strong>: <pre>Patch Set 35:

(1 comment)

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 9:09:23 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4363/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 9:09:51 PM<br><strong>Message</strong>: <pre>Patch Set 35: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 9:18:00 PM<br><strong>Message</strong>: <pre>Patch Set 35: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 9:18:39 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4363/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4363/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4363</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 10:47:16 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:49:52 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4371/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 10:50:18 PM<br><strong>Message</strong>: <pre>Patch Set 35: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 11:07:23 PM<br><strong>Message</strong>: <pre>Patch Set 35: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 11:08:09 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4371/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4371</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 9/6/2018, 8:11:08 AM<br><strong>Message</strong>: <pre>Patch Set 36: Patch Set 35 was rebased</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 9/6/2018, 9:02:35 AM<br><strong>Message</strong>: <pre>Patch Set 36: Code-Review+2</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 9/6/2018, 10:19:51 AM<br><strong>Message</strong>: <pre>Patch Set 36: Code-Review+2

I'm merging this but I want to highlight that there are many untested paths.

The coverage of chain is at 81%. Given the structure of this chain, I'd expect this to be near or at 100%. This should really be addressed in future CRs.</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 9/6/2018, 10:19:58 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Matthew Sykes</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/6/2018, 10:22:21 AM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4469/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/6/2018, 10:22:47 AM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3138/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/6/2018, 11:09:18 AM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4469/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4469/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/4469

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3138/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/3138</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 7/29/2018, 11:52:49 AM<br><strong>UnmergedRevision</strong>: [2b62ca73faf3782458e06b1c9a597d48893bb8df](https://github.com/hyperledger-gerrit-archive/fabric/commit/2b62ca73faf3782458e06b1c9a597d48893bb8df)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/5/2018, 11:54:54 AM<br><strong>UnmergedRevision</strong>: [b25cf1d0dbadacd4f74e028568a3dbf44737dfe2](https://github.com/hyperledger-gerrit-archive/fabric/commit/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/5/2018, 11:57:19 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L84)<br><strong>Comment</strong>: <pre>what about the feedback from the receive?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L84)<br><strong>Comment</strong>: <pre>I'm not sure if we care about the feedback here.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L133](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L133)<br><strong>Comment</strong>: <pre>can you extract this case to a function?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L133](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L133)<br><strong>Comment</strong>: <pre>Partially done. This part will gradually be extracted into multiple functions when we implement WAL and snapshot</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L140](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L140)<br><strong>Comment</strong>: <pre>let's use here either continue, or utils.MarshalOrPanic?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L140](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L140)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L141](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L141)<br><strong>Comment</strong>: <pre>you're missing here a check that the msg.To > 0</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L141](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L141)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L142](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L142)<br><strong>Comment</strong>: <pre>this isn't complete. err != nil means we didn't succeed in sending, but could it be (thinking aloud) that we succeeded in sending, and the remote cluster might have returned something bad? 

@Kostas, @Artem, wdyt?

I say we put here a TODO in the code and maybe open a JIRA to discuss?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L142](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L142)<br><strong>Comment</strong>: <pre>(by "something bad" i mean - an error, of course)</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L142](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L142)<br><strong>Comment</strong>: <pre>if it's an error thrown by comm, e.g. closed connection, we couldn't really do anything other than logging it
if the raft node on the other side has problem processing this, we don't need to be notified on this side.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L148)<br><strong>Comment</strong>: <pre>extract to function</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L148)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L165](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L165)<br><strong>Comment</strong>: <pre>error check missing?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L165](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/cluster.go#L165)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/support.go#L41](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/support.go#L41)<br><strong>Comment</strong>: <pre>where is this used?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/support.go#L41](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/support.go#L41)<br><strong>Comment</strong>: <pre>It's not used. Deleted in the update</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/support.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/support.go#L55)<br><strong>Comment</strong>: <pre>why do you need to enclose this via a struct? can't you just use the type directly?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/support.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/b25cf1d0dbadacd4f74e028568a3dbf44737dfe2/orderer/consensus/raft/support.go#L55)<br><strong>Comment</strong>: <pre>`type ticker *time.Ticker`? In this case, method declaration `Signal()` would complain about pointer type receiver</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/6/2018, 1:20:24 AM<br><strong>UnmergedRevision</strong>: [64d8cd013cb8c9af333985cd2eee51073f44d026](https://github.com/hyperledger-gerrit-archive/fabric/commit/64d8cd013cb8c9af333985cd2eee51073f44d026)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/6/2018, 1:25:01 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/6/2018, 3:26:53 AM<br><strong>UnmergedRevision</strong>: [c6e4fa5498e6496094348a922c8297887a8b889a](https://github.com/hyperledger-gerrit-archive/fabric/commit/c6e4fa5498e6496094348a922c8297887a8b889a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/6/2018, 3:32:26 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6e4fa5498e6496094348a922c8297887a8b889a/orderer/consensus/raft/cluster.go#L33)<br><strong>Comment</strong>: <pre>Block -> Start?</pre><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L136](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6e4fa5498e6496094348a922c8297887a8b889a/orderer/consensus/raft/cluster.go#L136)<br><strong>Comment</strong>: <pre>Do we need to return error as in the raftexample?</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/7/2018, 7:18:55 AM<br><strong>UnmergedRevision</strong>: [b5759123bc7b67a816d7ab73da1b99d0f76e6903](https://github.com/hyperledger-gerrit-archive/fabric/commit/b5759123bc7b67a816d7ab73da1b99d0f76e6903)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/7/2018, 7:26:14 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/7/2018, 7:27:37 AM<br><strong>UnmergedRevision</strong>: [ad99bfe59e5349f895f20d0e0f1f87181d25dc9f](https://github.com/hyperledger-gerrit-archive/fabric/commit/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/7/2018, 7:34:17 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 8/7/2018, 11:24:23 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L29)<br><strong>Comment</strong>: <pre>Let's get rid of this. There is already work underway to switch us to zap for logging.

Until the dust on that one settles, I suggest:
1. Avoiding the package-level logger
2. Using a zap logger as a member of the struct that does the logging. See "Avoid source level coupling" in [1].

[1] https://dave.cheney.net/2017/01/23/the-package-level-logger-anti-pattern

UPDATE (as I read more of the code): In your case, I would just delete these lines and initialize a zap logger in line 84.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L29)<br><strong>Comment</strong>: <pre>raft.Logger is created to accommodate unmatched method name: Warn[f] -> Warning[f]</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L31)<br><strong>Comment</strong>: <pre>A nit to the n-th degree admittedly, but it's something that we systematically violate as a group, and we need to get in the habit of fixing. From [1]:

> Comments should begin with the name of the thing being described and end in a period

I find that running a godoc server locally [2] helps me catch these errors.

[1] https://github.com/golang/go/wiki/CodeReviewComments#comment-sentences
[2] http://whipperstacker.com/2015/10/03/run-a-godoc-server-locally-to-see-documentation-for-unpublished-packages/</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L32)<br><strong>Comment</strong>: <pre>We should drop this interface. If any interface is to be defined anywhere, it should be at the caller.

If we're defining this so that the work that builds on top of you has a point of reference, I'd rather we define a pseudo-interface in the JIRA description.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L32)<br><strong>Comment</strong>: <pre>The `Raft` prefix means we'll stutter.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L32)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L32)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L47)<br><strong>Comment</strong>: <pre>The rough rule of thumb should be: export EVERYTHING (the struct *and* its members). Don't think in terms of APIs and contracts that we have with the user.

Hiding things in Go is an anti-pattern; it makes wiring difficult, and it's part of what Matt was touching on in his presentation [1]

The only time you should hide a struct member is if there's a functional reason to. Consider for instance a field that is protected by a mutex.

[1] https://docs.google.com/presentation/d/1s-8b4XaELv9xz79vf0bVkqr7ORDOLEfeHqWqGhZVbHo/edit</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L61)<br><strong>Comment</strong>: <pre>Why does this constructor return an interface? It should return an object. See very last slide, very last column [1].

[1] https://docs.google.com/presentation/d/1s-8b4XaELv9xz79vf0bVkqr7ORDOLEfeHqWqGhZVbHo/edit</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L61)<br><strong>Comment</strong>: <pre>(See my comment on `support.go` for this.)</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L62)<br><strong>Comment</strong>: <pre>It's `r` here, and `rn` below.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L62)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L112](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L112)<br><strong>Comment</strong>: <pre>How paranoid should we be about a change of the actual status between line 106 and line 112?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L112](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L112)<br><strong>Comment</strong>: <pre>This is essentially "what if we loose leadership after receiving a SubmitReq forwarded by another node".  Ultimately, it shouldn't be a problem because this ex-leader won't be able to commit envelope. That means env is lost, and client needs to re-broadcast.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L112](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/cluster.go#L112)<br><strong>Comment</strong>: <pre>Ah, very good point. You're right.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/support.go#L21](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/support.go#L21)<br><strong>Comment</strong>: <pre>Let's move away for this aggregation of dependencies. It makes writing tests and maintaining the code more difficult. All of the dependencies should be explicit. See [1], [2].

[1] https://peter.bourgon.org/go-best-practices-2016/#dependency-management
[2] https://gerrit.hyperledger.org/r/c/24659/2/orderer/consensus/raft/comm/comm.go#300</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/support.go#L21](https://github.com/hyperledger-gerrit-archive/fabric/blob/ad99bfe59e5349f895f20d0e0f1f87181d25dc9f/orderer/consensus/raft/support.go#L21)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/8/2018, 6:16:20 AM<br><strong>UnmergedRevision</strong>: [84192cec32d8415a15d8d07ea715f99a148fa8dc](https://github.com/hyperledger-gerrit-archive/fabric/commit/84192cec32d8415a15d8d07ea715f99a148fa8dc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/8/2018, 6:19:46 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/84192cec32d8415a15d8d07ea715f99a148fa8dc/orderer/consensus/raft/cluster.go#L29)<br><strong>Comment</strong>: <pre>is SendC the channel through which the message is passed to the local blockcutter? if so, the name of SendC sounds a little bit confusing.</pre><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/84192cec32d8415a15d8d07ea715f99a148fa8dc/orderer/consensus/raft/cluster.go#L86)<br><strong>Comment</strong>: <pre>Why non-leader can not call the raftnode.Propose()? If I remember correctly, the raft example in etcd does not distinguish leader or non-leader when calling raftnode.Propose().</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/84192cec32d8415a15d8d07ea715f99a148fa8dc/orderer/consensus/raft/cluster.go#L86)<br><strong>Comment</strong>: <pre>Because we are consenting on blocks, and they should ONLY be cut by leader.

In a happy path, this should never happen, as followers don't receive envelopes on `sendC` (they are relayed to leader via `Submit`).

And when leadership changes, proposal sent by ex-leader should be rejected by etcd/raft due to lagged term. (as you pointed out the other day in RC)

However, I felt it's safe to add an extra guard here. One race could occur when:
1. leader `Propose` a block
2. before it calls `Status`, it loses leadership
In this case, this block is effectively lost. But since we don't provide such guarantee anyway (accepting an envelope doesn't necessarily result in it being added to a block), so i don't think this would be an actual problem.</pre><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/cluster.go#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/84192cec32d8415a15d8d07ea715f99a148fa8dc/orderer/consensus/raft/cluster.go#L86)<br><strong>Comment</strong>: <pre>Thanks Jay. Your reply is very informative.</pre></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/9/2018, 4:36:53 AM<br><strong>UnmergedRevision</strong>: [0682b44170a17b13023d0d747f4727f860188f77](https://github.com/hyperledger-gerrit-archive/fabric/commit/0682b44170a17b13023d0d747f4727f860188f77)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/9/2018, 4:42:46 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/9/2018, 5:44:56 AM<br><strong>UnmergedRevision</strong>: [b1b8b3c41b8cab6616acb33ad71e99dbcbf00097](https://github.com/hyperledger-gerrit-archive/fabric/commit/b1b8b3c41b8cab6616acb33ad71e99dbcbf00097)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/9/2018, 5:55:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/9/2018, 5:55:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/9/2018, 6:16:31 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/9/2018, 6:38:18 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/9/2018, 6:34:03 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/10/2018, 6:44:22 AM<br><strong>UnmergedRevision</strong>: [90bf727b24b0522ed6ad2dff5ea747b1389ca910](https://github.com/hyperledger-gerrit-archive/fabric/commit/90bf727b24b0522ed6ad2dff5ea747b1389ca910)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/10/2018, 6:50:19 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/fsm/node.go#L89](https://github.com/hyperledger-gerrit-archive/fabric/blob/90bf727b24b0522ed6ad2dff5ea747b1389ca910/orderer/consensus/raft/fsm/node.go#L89)<br><strong>Comment</strong>: <pre>do you really need to return an error? there is no error path in the code.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/fsm/node.go#L89](https://github.com/hyperledger-gerrit-archive/fabric/blob/90bf727b24b0522ed6ad2dff5ea747b1389ca910/orderer/consensus/raft/fsm/node.go#L89)<br><strong>Comment</strong>: <pre>This method would eventually return error, e.g. failed to load snapshot, WAL, etc. Since you would be depending on this method, I'm trying to avoid changing signature later</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/fsm/node.go#L91](https://github.com/hyperledger-gerrit-archive/fabric/blob/90bf727b24b0522ed6ad2dff5ea747b1389ca910/orderer/consensus/raft/fsm/node.go#L91)<br><strong>Comment</strong>: <pre>Seems like repetition of lines 63 and 64.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/fsm/node.go#L91](https://github.com/hyperledger-gerrit-archive/fabric/blob/90bf727b24b0522ed6ad2dff5ea747b1389ca910/orderer/consensus/raft/fsm/node.go#L91)<br><strong>Comment</strong>: <pre>ah, you are right. this was leaked in refactoring :/</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/13/2018, 3:34:12 AM<br><strong>UnmergedRevision</strong>: [37e4178d6ef875938308ed40b26f9ea022b5c20d](https://github.com/hyperledger-gerrit-archive/fabric/commit/37e4178d6ef875938308ed40b26f9ea022b5c20d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/13/2018, 3:40:29 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 8/14/2018, 11:39:28 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/raft/fsm/node.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/37e4178d6ef875938308ed40b26f9ea022b5c20d/orderer/consensus/raft/fsm/node.go#L47)<br><strong>Comment</strong>: <pre>A week or 5 months from now, I wish to write an integration test that uses a different storage engine. How do I do it?</pre></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/15/2018, 5:07:07 AM<br><strong>UnmergedRevision</strong>: [12fa1598c5a3c86c2e51ad6f85839204f35990e1](https://github.com/hyperledger-gerrit-archive/fabric/commit/12fa1598c5a3c86c2e51ad6f85839204f35990e1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/15/2018, 5:12:25 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/fsm_test.go#L71)<br><strong>Comment</strong>: <pre>Any other reason for going the go-func / done-chan route other than to be done with the check faster?

If so, I would suggest that we opt for readability and check for these two serially:

```
Consistently(node.RecvSubmitReq()).ShouldNot(Receive())
err = node.OnSubmit(&orderer.SubmitRequest{})
Expect(err).To(HaveOccurred())
```</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/fsm_test.go#L71)<br><strong>Comment</strong>: <pre>So in that case, we are not really testing what we want, because:
_nothing is submitted while we are waiting on RecvSubmitReq_

but what we actually want to test is:
_we waited on RecvSubmitReq the whole time, and you indeed submitted something, but we shouldn't be able to receive that_

In another word, if we change the implementation of `OnSubmit` to:
- spawn a go routine to send to submit channel
- return error
The test should fail. (But it doesn't in your case)

let me know if this makes sense to you</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/fsm_test.go#L71)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/fsm_test.go#L123)<br><strong>Comment</strong>: <pre>As I understand it from a session with Matt, the goal is to make this read as naturally as possible, so when dealing with errors `Expect(err).NotTo(HaveOccurred())` is preferred.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L161](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/fsm_test.go#L161)<br><strong>Comment</strong>: <pre>What do you have in mind here? Why is this a variadic function? When should we expect an arbitrary number of signals?</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/node.go#L164](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/node.go#L164)<br><strong>Comment</strong>: <pre>Abstracting this out is a very clever touch, nice.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/node.go#L182](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/node.go#L182)<br><strong>Comment</strong>: <pre>should this be atomic? personally i don't see any risk</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/node.go#L182](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/node.go#L182)<br><strong>Comment</strong>: <pre>No I see what you're saying; I agree with the atomicity part. I imagine you'll need to push to a channel eventually though, so that the `LeaderChanged` consumer is notified of the change. That's what I was getting at.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/node.go#L183](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/node.go#L183)<br><strong>Comment</strong>: <pre>(I imagine this will change once we change `IsLeader` into a channel returning method, per the Rocket.Chat conversation in #fabric-orderer-dev today.)</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/node.go#L230](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/node.go#L230)<br><strong>Comment</strong>: <pre>Leave a comment explaining what's going on here? This always gives me pause :)</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/storage.go#L14](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/storage.go#L14)<br><strong>Comment</strong>: <pre>(raft.MemoryStorage)</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/storage.go#L17](https://github.com/hyperledger-gerrit-archive/fabric/blob/12fa1598c5a3c86c2e51ad6f85839204f35990e1/orderer/consensus/etcdraft/fsm/storage.go#L17)<br><strong>Comment</strong>: <pre>A-ha, this hadn't occurred to me - I think you're right. (We can also define this in the fsm/node.go file, inline with what you do with the ticker.)</pre></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/15/2018, 11:43:16 AM<br><strong>UnmergedRevision</strong>: [9dd72df97514b2c5e020ae5a3d9fa913119b3e57](https://github.com/hyperledger-gerrit-archive/fabric/commit/9dd72df97514b2c5e020ae5a3d9fa913119b3e57)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/15/2018, 11:47:46 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/9dd72df97514b2c5e020ae5a3d9fa913119b3e57/orderer/consensus/etcdraft/fsm/fsm_test.go#L87)<br><strong>Comment</strong>: <pre>Considering that you are expecting that this call not receive an error. I would actually use ```Expect(node.OnSubmit(&orderer.SubmitRequest{})).NotTo(HaveOccurred())``` here instead.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/9dd72df97514b2c5e020ae5a3d9fa913119b3e57/orderer/consensus/etcdraft/fsm/fsm_test.go#L87)<br><strong>Comment</strong>: <pre>thanks for reviewing!  We need to make async assertions here, that's why `Eventually` is used https://onsi.github.io/gomega/#making-asynchronous-assertions</pre><strong>Commenter</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/9dd72df97514b2c5e020ae5a3d9fa913119b3e57/orderer/consensus/etcdraft/fsm/fsm_test.go#L148)<br><strong>Comment</strong>: <pre>Use ```Expect(node.Propose(&common.Block{Data: &common.BlockData{Data: [][]byte{[]byte("hello")}}})).NotTo(HaveOccurred())``` here instead. Same reason as above.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/9dd72df97514b2c5e020ae5a3d9fa913119b3e57/orderer/consensus/etcdraft/fsm/fsm_test.go#L148)<br><strong>Comment</strong>: <pre>ditto</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L155](https://github.com/hyperledger-gerrit-archive/fabric/blob/9dd72df97514b2c5e020ae5a3d9fa913119b3e57/orderer/consensus/etcdraft/fsm/fsm_test.go#L155)<br><strong>Comment</strong>: <pre>Singular now?</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/fsm/fsm_test.go#L155](https://github.com/hyperledger-gerrit-archive/fabric/blob/9dd72df97514b2c5e020ae5a3d9fa913119b3e57/orderer/consensus/etcdraft/fsm/fsm_test.go#L155)<br><strong>Comment</strong>: <pre>Why this type? `int` should work just fine?

`uint` might be more proper, but again, I'd optimize for what is more readable, and this helps me avoid the type casting for 0 in line 156. Let me know if I'm missing something.</pre></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/21/2018, 2:52:33 AM<br><strong>UnmergedRevision</strong>: [cf423ceee8c6c9dff7714a29450d79b60ebe9172](https://github.com/hyperledger-gerrit-archive/fabric/commit/cf423ceee8c6c9dff7714a29450d79b60ebe9172)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2018, 2:57:56 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/21/2018, 3:13:51 AM<br><strong>UnmergedRevision</strong>: [08c19f9f7e1b63520262bdc5cc0920efcc531272](https://github.com/hyperledger-gerrit-archive/fabric/commit/08c19f9f7e1b63520262bdc5cc0920efcc531272)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2018, 3:22:29 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2018, 3:22:29 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2018, 3:38:26 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2018, 3:55:24 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2018, 3:58:06 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L173](https://github.com/hyperledger-gerrit-archive/fabric/blob/08c19f9f7e1b63520262bdc5cc0920efcc531272/orderer/consensus/etcdraft/chain.go#L173)<br><strong>Comment</strong>: <pre>since you are panicing above, IMO you can spare indentation and make it more readable.</pre><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L181](https://github.com/hyperledger-gerrit-archive/fabric/blob/08c19f9f7e1b63520262bdc5cc0920efcc531272/orderer/consensus/etcdraft/chain.go#L181)<br><strong>Comment</strong>: <pre>I understand this CR supports a single Raft node. However, in a multiple-node cluster, a non-leader node may not call BlockCutter().Ordered(msg.Content). Instead, it calls SendSubmit of the Comm.

Also I see that there is a CR to support multi-node raft cluster. So may I understand more about the plan here? Thanks.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L181](https://github.com/hyperledger-gerrit-archive/fabric/blob/08c19f9f7e1b63520262bdc5cc0920efcc531272/orderer/consensus/etcdraft/chain.go#L181)<br><strong>Comment</strong>: <pre>ONLY leader should receive messages on submitC, so we expect this part is never reached on followers.

will address your second question in rocket channel later</pre><strong>Commenter</strong>: Hui Kang - hkang.sunysb@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L181](https://github.com/hyperledger-gerrit-archive/fabric/blob/08c19f9f7e1b63520262bdc5cc0920efcc531272/orderer/consensus/etcdraft/chain.go#L181)<br><strong>Comment</strong>: <pre>Hi, Jay, thanks. Now I see you have c.submitC <- req in the Submit method. I remember that in the design chart, the tx path on a replica is chain.order -> fsm.submit-> send submit RPC. Is your implementation different than the design?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L193](https://github.com/hyperledger-gerrit-archive/fabric/blob/08c19f9f7e1b63520262bdc5cc0920efcc531272/orderer/consensus/etcdraft/chain.go#L193)<br><strong>Comment</strong>: <pre>I think that it will be much clear to rewrite this into:

    if len(batches) == 0 {
       if time == nil {
           timer = time.After(c.support.SharedConfig().BatchTimeout())
       }
       // batches still of zero lenght
       continue
    }

    timer = nil // going to commit batches, certainly len(batches) > 0
    if err = c.commitBatches(batches...); err != nil {
       c.logger.Errorf("Failed to commit block: %s", err)
    }

wdyt?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L283](https://github.com/hyperledger-gerrit-archive/fabric/blob/08c19f9f7e1b63520262bdc5cc0920efcc531272/orderer/consensus/etcdraft/chain.go#L283)<br><strong>Comment</strong>: <pre>no need for '\n' in log entries.</pre></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/23/2018, 3:10:30 AM<br><strong>UnmergedRevision</strong>: [0a06cc7ab3eb0fdb3efe3bf558bdde27334efbf5](https://github.com/hyperledger-gerrit-archive/fabric/commit/0a06cc7ab3eb0fdb3efe3bf558bdde27334efbf5)<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/23/2018, 3:11:08 AM<br><strong>UnmergedRevision</strong>: [57ec1537cb063e2eaa97c216db0891113bb308bc](https://github.com/hyperledger-gerrit-archive/fabric/commit/57ec1537cb063e2eaa97c216db0891113bb308bc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 3:26:08 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 3:26:08 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 3:47:04 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 4:04:25 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 4:06:55 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/23/2018, 7:11:10 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/consensus.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/consensus.go#L71)<br><strong>Comment</strong>: <pre>Please move the generate above the doc followed by a blank line.

We need to separate the generate directive from the godoc by a blank line or the statements gets added to the doc.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/consensus.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/consensus.go#L71)<br><strong>Comment</strong>: <pre>Please explicitly put the fakes in the ‘mock’ package to be consistent with the rest of fabric. (Just grew for counterfeiter and you’ll see.)</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L32)<br><strong>Comment</strong>: <pre>A few things.

1. Please see earlier comment about generate being separate from doc.
2. When we need fakes, please put them into the mock folder for consistency
3. Why aren’t we just pulling in a fake clock dependency and using it? Do we need to have a custom implementation in the orderer instead of having a shared asset for the tree?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L70)<br><strong>Comment</strong>: <pre>This is a pet peeve of mine because it hides the real dependencies.

This Chain needs a Sequencer, a BlockCutter, and ...</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L70)<br><strong>Comment</strong>: <pre>I agree, dependencies should be more explicit here.

However, as I'm trying to tackle this, I realized this makes code less readable unless we refactor ConsenterSupport interface. Because all these dependencies are passed in via `HandleChain(support ConsenterSupport, ...)`, where we lose the access to underlying objects already. Even if we define smaller interfaces locally, we basically satisfy them with `support` still, e.g.

`BlockWriter` <- support
`MsgProcessor` <- support
`MetainfoProvider {sequence(), chainID(), Height()}` <- support
`BlockCutter` <- support.BlockCutter()
`SharedConfig` <- support.SharedConfig()

So I would defer this to another JIRA dedicated to refactoring this part of code, for other types of consenter as well.

wdyt</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L98)<br><strong>Comment</strong>: <pre>Why options *and* config? I see config is passed to StartNode.  Is there a reason why it’s not just created there from the chain state?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L127)<br><strong>Comment</strong>: <pre>This races with Halt</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L157](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L157)<br><strong>Comment</strong>: <pre>this idiom is racy between start and halt. I’ve fixed at least a couple of instances of this exact pattern in the orderer already.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L170](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L170)<br><strong>Comment</strong>: <pre>pkg/errors ?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L174)<br><strong>Comment</strong>: <pre>This races with serveRaft’s leader management</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L175](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L175)<br><strong>Comment</strong>: <pre>“no raft leader”</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L217](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L217)<br><strong>Comment</strong>: <pre>having been burned by this before:

After waits for the duration to elapse and then sends the current time on the returned channel. It is equivalent to NewTimer(d).C. The underlying Timer is not recovered by the garbage collector until the timer fires. If efficiency is a concern, use NewTimer instead and call Timer.Stop if the timer is no longer needed

Basically, you’ll leak timers until they pop unless you rework this.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L217](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L217)<br><strong>Comment</strong>: <pre>What about using time.After in a select? is that OK?

select {
    case time.After(time.Second): 


     case <- somechannel:
}


?

Assuming, the processing time of the channel is negligible?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L217](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L217)<br><strong>Comment</strong>: <pre>oh... i see what you meant now.
Basically - in my example, if you have a lot of traffic from the channel - you're going to have a peak of timers waiting for their timer to expire for nothing.
If you have too much processing rate on the channel - you'll get out of memory (in theory). Is that it?

So, basically - the time.After should only be used to schedule operations, or to signal a one time operation like an exit of a routine, right?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L217](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L217)<br><strong>Comment</strong>: <pre>correct.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L261](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L261)<br><strong>Comment</strong>: <pre>no need for an else. You just said you were going to panic.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L359](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain.go#L359)<br><strong>Comment</strong>: <pre>Can we include the error? Maybe use that fancy Panicf logging function?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L32)<br><strong>Comment</strong>: <pre>Please don’t  use package level loggers - even in tests. You’re using ginkgo and have a perfectly good mechanism to setup a logger instance per test.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L41](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L41)<br><strong>Comment</strong>: <pre>The var should declare but not initialize. The initialization should happen in before each blocks. What’s here is a slipper slope towards bad tests when people copy and paste without understanding the implications.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L44](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L44)<br><strong>Comment</strong>: <pre>Describe is used to describe a scenario or an entity. Describe(“a process or thing”)
Context is used to describe a condition. Context(“when things fall apart”)

In this case, I’m struggling with what either of these are trying to convey.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L74](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L74)<br><strong>Comment</strong>: <pre>This is not idiomatic. Please use something like:

support = &mock.ConsensusSupport{} // with terrible name and all
cutter = mockblockcutter.NewReceiver() // complete with foreign ref to bespoke mock
support.BlockCutterReturns(cutter) // no need for a stub</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L78)<br><strong>Comment</strong>: <pre>NotTo</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L92](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L92)<br><strong>Comment</strong>: <pre>This is a hint that the production code probably needs a ready channel or to block in start until ready.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L92](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L92)<br><strong>Comment</strong>: <pre>expanded comments to explain why this is not needed in production code</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L92](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L92)<br><strong>Comment</strong>: <pre>It's not needed in production code but we have a WaitReady that's stubbed out?

This isn't going to hold this up but the intersection of the two is suspect.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L99](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L99)<br><strong>Comment</strong>: <pre>it does or does not; this is true throughout.

It(“fails when there is no raft leader”, ...)</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L101)<br><strong>Comment</strong>: <pre>Any error good enough? Probably not. We need to assert on the error we expect.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L110](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L110)<br><strong>Comment</strong>: <pre>Eventually(chain.Observe()).Should(Receive())

That bounds how long we wait and gives good error messages when something goes wrong.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L116](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L116)<br><strong>Comment</strong>: <pre>Do we really need to spin for 100ms on this one? Seems like a single call would be sufficient.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L125](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L125)<br><strong>Comment</strong>: <pre>Same as obve - Eventually Should Receive</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L130)<br><strong>Comment</strong>: <pre>Isn’t this just Eventually(support.WriteBlockCallCount).Should(Equal(1)) ?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L136](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L136)<br><strong>Comment</strong>: <pre>why isn’t this just time.Millisecond? Why are we parsing?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L141](https://github.com/hyperledger-gerrit-archive/fabric/blob/57ec1537cb063e2eaa97c216db0891113bb308bc/orderer/consensus/etcdraft/chain_test.go#L141)<br><strong>Comment</strong>: <pre>Eventually Should Receive</pre></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/26/2018, 3:59:04 PM<br><strong>UnmergedRevision</strong>: [ae98cf12f2735ed1ecb7d92cfc5df6ed6116cd24](https://github.com/hyperledger-gerrit-archive/fabric/commit/ae98cf12f2735ed1ecb7d92cfc5df6ed6116cd24)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 3:26:08 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 3:26:08 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 3:47:04 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 4:04:25 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/23/2018, 4:06:55 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/23/2018, 7:11:10 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/27/2018, 3:18:28 AM<br><strong>UnmergedRevision</strong>: [585f6669ea359245474f672090637ebd33683a06](https://github.com/hyperledger-gerrit-archive/fabric/commit/585f6669ea359245474f672090637ebd33683a06)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 3:43:19 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 3:43:19 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 3:50:11 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 4:10:07 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 4:03:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/27/2018, 9:02:55 AM<br><strong>UnmergedRevision</strong>: [8fc0cf5108b3fd61173b95ca7bb90d378230a62b](https://github.com/hyperledger-gerrit-archive/fabric/commit/8fc0cf5108b3fd61173b95ca7bb90d378230a62b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 9:12:27 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 9:12:27 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 9:31:59 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 9:47:37 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 9:52:11 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 8/27/2018, 10:23:05 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/23/2018, 7:11:10 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L167](https://github.com/hyperledger-gerrit-archive/fabric/blob/8fc0cf5108b3fd61173b95ca7bb90d378230a62b/orderer/consensus/etcdraft/chain.go#L167)<br><strong>Comment</strong>: <pre>can we add the sender node ID here, as in https://gerrit.hyperledger.org/r/#/c/25891/4/orderer/consensus/etcdraft/dispatcher.go@23  ?</pre></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/27/2018, 10:38:23 AM<br><strong>UnmergedRevision</strong>: [85dac5b5bf4b1c6aa1932776411cf793eedca059](https://github.com/hyperledger-gerrit-archive/fabric/commit/85dac5b5bf4b1c6aa1932776411cf793eedca059)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 10:49:15 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 22</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/27/2018, 10:48:12 AM<br><strong>UnmergedRevision</strong>: [aaa580b64874f5d237a0fc36cbb314522fc60151](https://github.com/hyperledger-gerrit-archive/fabric/commit/aaa580b64874f5d237a0fc36cbb314522fc60151)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 10:58:27 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 10:58:27 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 11:17:12 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 11:41:01 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 11:36:28 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/27/2018, 1:25:10 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L69)<br><strong>Comment</strong>: <pre>why are these here instead of in the methods? They appear to be completely scooped within those functional units.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L154](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L154)<br><strong>Comment</strong>: <pre>Unfortunately, it looks like there are still issues here as we're not referencing exitC with a lock held throughout and I don't know that we want to. 

Can I ask why we're doing it this way? Why doesn't the constructor just create the exitC and keep it open? Why does it need to close it? In all but one case we want to know when we need to do cleanup; the exception is in submit.

In submit, this is used to return an error. Isn't that more simply implemented with flag that's flipped in start?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L203](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L203)<br><strong>Comment</strong>: <pre>This is never referenced outside of this method and the method is started as a go routine from Start so why is the timer promoted to the chain instead of keeping it scoped to the method?

Why are we creating and stopping immediately instead of creating when needed? What was here before was largely correct with the exception of the cleanup. (ie calling Stop before setting to nil)</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L226](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L226)<br><strong>Comment</strong>: <pre>Why didn't this become timer = time.NewTimer(...) ? It's a whole lot simpler than trying to deal with the resets, stops, and drains.

Yes, we need to stop the timer when it's no longer needed but, assuming we reset the timer reference, we shouldn't need to drain it.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L233](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L233)<br><strong>Comment</strong>: <pre>I believe drain adds unnecessary complications here and I think the timer should have been set to nil.

My comment was meant to inform that we should be using time.NewTimer() to create a timer; where the old code set the timer to nil on old 223, it just need to call Stop first.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L241](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L241)<br><strong>Comment</strong>: <pre>what you had before made more sense; just set the timer to nil; it's already popped and you've received the event.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L285](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L285)<br><strong>Comment</strong>: <pre>this is never referenced outside of this method and the method is run as a single go routine from start so why has it been promoted to the chain?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L291](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain.go#L291)<br><strong>Comment</strong>: <pre>The only return seems to occur when the exit channel receives; is there a good reason why it should live here as a defer func instead of as a block before exit?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain_test.go#L34)<br><strong>Comment</strong>: <pre>BeforeEach, not BeforeSuite. If it was for the suite, I'd expect the var to be in the _suite_test.go.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain_test.go#L58)<br><strong>Comment</strong>: <pre>I'm assuming this is the TickInterval in the options below?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain_test.go#L70)<br><strong>Comment</strong>: <pre>So, I'm having trouble with this because of the mix of real and fake clocks.

For simplicity, can't we just advance by two ticks and then call eventually?
    clock.Increment(time.Second)
    Consistently(chain.Observe).ShouldNot(Receive())

    clock.Increment(time.Second)
    clock.Increment(time.Second)
    Eventually(chain.Observe).Should(Receive())

That may be complicated by the fact that the observer channel is unbuffered.

If this is as simple as it gets, so be it.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain_test.go#L70)<br><strong>Comment</strong>: <pre>Sorry but what problem does buffered channel solve here? thx!</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/aaa580b64874f5d237a0fc36cbb314522fc60151/orderer/consensus/etcdraft/chain_test.go#L70)<br><strong>Comment</strong>: <pre>It doesn't solve any problems; right now it's unbuffered (and isn't controllable by the actual observer) so the timer loop you have will hang if the observer doesn't consume. I don't know the implications of that - just pointing out the behavior relative to the timer firing multiple times as time progresses.

					// notify external observer
					if c.observe != nil {
						c.observe <- newLead
					}

Also, the observe functionality is managed by a flag and a call to get the observer chan instead of simply allowing the user/caller to provide the observer chan or callback. If the observer was an optional dependency, the test could provide a callback or buffered chan that could handle n events and make assertions there. It would also remove the need for the Observer method and the construction of the channel.</pre></blockquote><h3>PatchSet Number: 23</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/27/2018, 5:03:11 PM<br><strong>UnmergedRevision</strong>: [0ec4c32e9b265e3cf7601ca4008e0798e7cd5772](https://github.com/hyperledger-gerrit-archive/fabric/commit/0ec4c32e9b265e3cf7601ca4008e0798e7cd5772)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 10:58:27 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 10:58:27 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 11:17:12 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 11:41:01 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/27/2018, 11:36:28 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/27/2018, 1:25:10 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 24</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/28/2018, 12:17:10 AM<br><strong>UnmergedRevision</strong>: [22db5cf2d3b05a8146ddfe48d5330eba08cdbcb3](https://github.com/hyperledger-gerrit-archive/fabric/commit/22db5cf2d3b05a8146ddfe48d5330eba08cdbcb3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:27:50 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:27:50 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:36:58 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 25</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/28/2018, 2:34:07 AM<br><strong>UnmergedRevision</strong>: [db9b23f7a67c7e697a3b32d3a98e09bf875e4a92](https://github.com/hyperledger-gerrit-archive/fabric/commit/db9b23f7a67c7e697a3b32d3a98e09bf875e4a92)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:27:50 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:27:50 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:36:58 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/28/2018, 8:56:52 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 26</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/28/2018, 11:56:23 AM<br><strong>UnmergedRevision</strong>: [0bbbdb06736bcff41223fa0fde4f77559037d884](https://github.com/hyperledger-gerrit-archive/fabric/commit/0bbbdb06736bcff41223fa0fde4f77559037d884)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:06:19 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:06:19 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:24:37 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:40:47 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 12:43:37 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/28/2018, 5:35:25 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L183](https://github.com/hyperledger-gerrit-archive/fabric/blob/0bbbdb06736bcff41223fa0fde4f77559037d884/orderer/consensus/etcdraft/chain.go#L183)<br><strong>Comment</strong>: <pre>just noticed that this reset and the declaration on 174 aren't really needed as you're using the if with assignment on all error checks.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L183](https://github.com/hyperledger-gerrit-archive/fabric/blob/0bbbdb06736bcff41223fa0fde4f77559037d884/orderer/consensus/etcdraft/chain.go#L183)<br><strong>Comment</strong>: <pre>Do you want to finish this? Remove the err declaration on 174 and colonize the assignments at 192, 212, and 226?</pre></blockquote><h3>PatchSet Number: 27</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/28/2018, 10:41:46 PM<br><strong>UnmergedRevision</strong>: [cac3311708f76e3413a6afccd1c94c7c6ea50cc3](https://github.com/hyperledger-gerrit-archive/fabric/commit/cac3311708f76e3413a6afccd1c94c7c6ea50cc3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 10:51:20 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 10:51:20 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 11:11:00 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 11:26:10 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2018, 11:30:26 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/29/2018, 8:15:34 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 28</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/29/2018, 8:56:19 AM<br><strong>UnmergedRevision</strong>: [9f46b94590d0dc46c88d7d261c2382f6fdc0f665](https://github.com/hyperledger-gerrit-archive/fabric/commit/9f46b94590d0dc46c88d7d261c2382f6fdc0f665)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:10:01 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:10:01 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:25:15 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:44:17 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:47:18 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/29/2018, 10:57:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/9f46b94590d0dc46c88d7d261c2382f6fdc0f665/orderer/consensus/etcdraft/chain.go#L66)<br><strong>Comment</strong>: <pre>If the variable names for the two channels above follow the Hungarian notation, maybe for consistency we should have all the channels here follow the same notation as well? (e.g. observe becomes observeC, halt becomes haltC, etc.)</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L178](https://github.com/hyperledger-gerrit-archive/fabric/blob/9f46b94590d0dc46c88d7d261c2382f6fdc0f665/orderer/consensus/etcdraft/chain.go#L178)<br><strong>Comment</strong>: <pre>I don't get what we're trying to do here. A comment explaining why?</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L201](https://github.com/hyperledger-gerrit-archive/fabric/blob/9f46b94590d0dc46c88d7d261c2382f6fdc0f665/orderer/consensus/etcdraft/chain.go#L201)<br><strong>Comment</strong>: <pre>When do you expect to hit this path?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L201](https://github.com/hyperledger-gerrit-archive/fabric/blob/9f46b94590d0dc46c88d7d261c2382f6fdc0f665/orderer/consensus/etcdraft/chain.go#L201)<br><strong>Comment</strong>: <pre>if the envelope is the first in its batch, we start the timer. this is similar to https://github.com/hyperledger/fabric/blob/release-1.2/orderer/consensus/solo/consensus.go#L138-L141</pre></blockquote><h3>PatchSet Number: 29</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 8/30/2018, 3:49:35 AM<br><strong>UnmergedRevision</strong>: [19c1bb9dbfca978735414654068b3f2707774593](https://github.com/hyperledger-gerrit-archive/fabric/commit/19c1bb9dbfca978735414654068b3f2707774593)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 3:59:05 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 3:59:05 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 4:21:00 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 4:38:57 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 4:40:53 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L66)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L178](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L178)<br><strong>Comment</strong>: <pre>_When_ will we need to drain the channel? This is what I, as a reader, am trying to get at.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L209](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L209)<br><strong>Comment</strong>: <pre>I understand what you're trying to do here, but I think the whole timing stuff should be decoupled from this for loop and enclosed in its own code section, say - a struct that manages it, etc.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L209](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L209)<br><strong>Comment</strong>: <pre>https://gerrit.hyperledger.org/r/c/25975/</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L236](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L236)<br><strong>Comment</strong>: <pre>should be single form IMO</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L236](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L236)<br><strong>Comment</strong>: <pre>why? it's essentially `[][]envelope`, and we call `[]envelope` a batch</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L236](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L236)<br><strong>Comment</strong>: <pre>oh, right... my bad.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L237](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L237)<br><strong>Comment</strong>: <pre>for envelope range batch</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L237](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L237)<br><strong>Comment</strong>: <pre>same reason as above</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L253](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L253)<br><strong>Comment</strong>: <pre>I don't understand why this is synchronous right after the propose to raft.Node.

Why can't we completely decouple what we read from Raft and what we put into it?</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L253](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain.go#L253)<br><strong>Comment</strong>: <pre>only until we could decouple `CreateNextBlock` and `WriteBlock`.  see https://chat.hyperledger.org/channel/fabric-orderer-dev?msg=qYidCzyeBMYBjxH8n</pre><strong>Commenter</strong>: Adarsh Saraf - adarshsaraf123@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain_test.go#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/19c1bb9dbfca978735414654068b3f2707774593/orderer/consensus/etcdraft/chain_test.go#L36)<br><strong>Comment</strong>: <pre>support.ChainId returns the chain id as 'test' while the message being sent to order is for chain id 'foo'. Should this cause an error since the message is arriving on a chain with a different id?

P.S. - I understand that, in production, the chain would be selected based on the chain id by the multichannel registrar and therefore we may not have to check for the correctness of the chain id. Just wondering if we should still ensure that the chain id matches for completeness. Else should we set the (mock) support to return chain id as `foo` just to avoid any confusion?</pre></blockquote><h3>PatchSet Number: 30</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 9/3/2018, 11:30:53 PM<br><strong>UnmergedRevision</strong>: [92be3f9ee38ab3905e535ab731344c928f390fca](https://github.com/hyperledger-gerrit-archive/fabric/commit/92be3f9ee38ab3905e535ab731344c928f390fca)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 11:42:36 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 11:42:36 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 12:00:14 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 12:16:01 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 12:24:21 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 31</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 9/4/2018, 1:24:56 AM<br><strong>UnmergedRevision</strong>: [61de1680da04ced1f09cf1b8a87fe4171c2f533d](https://github.com/hyperledger-gerrit-archive/fabric/commit/61de1680da04ced1f09cf1b8a87fe4171c2f533d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:35:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:35:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:52:55 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 2:11:47 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 9:33:59 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 9/4/2018, 11:09:42 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 9/4/2018, 1:01:48 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 32</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 9/4/2018, 1:02:07 PM<br><strong>UnmergedRevision</strong>: [c16a0ccf1ac08afbd48ae483fb659ec8d40b73f4](https://github.com/hyperledger-gerrit-archive/fabric/commit/c16a0ccf1ac08afbd48ae483fb659ec8d40b73f4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:35:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:35:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:52:55 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 2:11:47 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 9:33:59 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 9/4/2018, 11:09:42 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 9/4/2018, 1:01:48 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 33</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Created</strong>: 9/4/2018, 3:44:06 PM<br><strong>UnmergedRevision</strong>: [a8333811dce7ada48ea7f08fe7cae51bdbf337e0](https://github.com/hyperledger-gerrit-archive/fabric/commit/a8333811dce7ada48ea7f08fe7cae51bdbf337e0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:35:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:35:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 1:52:55 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 2:11:47 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 9:33:59 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 9/4/2018, 11:09:42 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 9/4/2018, 1:01:48 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 34</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 9/4/2018, 10:57:18 PM<br><strong>UnmergedRevision</strong>: [af43c0d357e73dae1d0074dca1b5eaefeee541f3](https://github.com/hyperledger-gerrit-archive/fabric/commit/af43c0d357e73dae1d0074dca1b5eaefeee541f3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:10:22 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:10:22 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:32:37 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:53:52 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 8:35:54 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 9/4/2018, 11:09:42 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 9/5/2018, 8:54:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 9/4/2018, 1:01:48 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L83)<br><strong>Comment</strong>: <pre>I remember we discussed the need to add listener/observer into FSM API while we considered to decouple FSM and Chain, why do we still need as we just coupled them together back? How is going to be a consumer of this?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L83)<br><strong>Comment</strong>: <pre>for example here: https://gerrit.hyperledger.org/r/#/c/25964/6/orderer/consensus/etcdraft/consenter.go@79 you are not really using this observer channel. I'd suggest to omit this for now until we will really need it.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L83)<br><strong>Comment</strong>: <pre>this is for testing purpose only</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L83)<br><strong>Comment</strong>: <pre>doesn't make any sense to put that into public API while making use only for tests.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L94)<br><strong>Comment</strong>: <pre>why are you keeping this? you are reading it from `opts` and later you also keep reference to `opts`. I think keepign opts reference will suffice.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L94)<br><strong>Comment</strong>: <pre>i think this improves readability, I don't want to reference `opts` other than  constructor and `start()`, where we construct config.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L94)<br><strong>Comment</strong>: <pre>IMO this is a duplication, while not really critical</pre><strong>Commenter</strong>: Adarsh Saraf - adarshsaraf123@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L350](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L350)<br><strong>Comment</strong>: <pre>The envelope containing config transactions that arrive at chain are actually of type common.HeaderType_CONFIG or common.HeaderType_ORDERER_TRANSACTION. Thus the check should be:

 h.Type == int32(common.HeaderType_CONFIG) || h.Type == int32(common.HeaderType_ORDERER_TRANSACTION)</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L350](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L350)<br><strong>Comment</strong>: <pre>after msgprocessor, it's always common.HeaderType_CONFIG, see https://github.com/hyperledger/fabric/blob/release-1.2/orderer/common/msgprocessor/standardchannel.go#L104</pre><strong>Commenter</strong>: Adarsh Saraf - adarshsaraf123@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L350](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L350)<br><strong>Comment</strong>: <pre>But the chain under consideration might be a system channel also. Refer to the comments here for this case:
https://github.com/hyperledger/fabric/blob/release-1.2/orderer/common/msgprocessor/systemchannel.go#L77-#L79</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L350](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L350)<br><strong>Comment</strong>: <pre>Ah, right, I didn't answer your question correctly.

Please take a look at https://github.com/hyperledger/fabric/blob/release-1.2/orderer/common/multichannel/registrar.go#L215-L222</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L350](https://github.com/hyperledger-gerrit-archive/fabric/blob/af43c0d357e73dae1d0074dca1b5eaefeee541f3/orderer/consensus/etcdraft/chain.go#L350)<br><strong>Comment</strong>: <pre>Yes you are right, will update CR</pre></blockquote><h3>PatchSet Number: 35</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Created</strong>: 9/5/2018, 10:29:56 AM<br><strong>UnmergedRevision</strong>: [7594128f9083c7043bd4dd3c3b6c036c44d56450](https://github.com/hyperledger-gerrit-archive/fabric/commit/7594128f9083c7043bd4dd3c3b6c036c44d56450)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 10:38:59 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 10:38:59 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 10:53:44 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 11:08:02 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 11:07:23 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/consensus/etcdraft/chain.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/7594128f9083c7043bd4dd3c3b6c036c44d56450/orderer/consensus/etcdraft/chain.go#L83)<br><strong>Comment</strong>: <pre>This is a good catch. I had missed than in the review. As you suggested: we can merge for now and revisit later, should a cleaner approach come to mind.</pre></blockquote><h3>PatchSet Number: 36</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 9/6/2018, 8:11:08 AM<br><strong>GitHubMergedRevision</strong>: [7f12d1b3ae31bc6f76b8aba376afeaca93e5b345](https://github.com/hyperledger-gerrit-archive/fabric/commit/7f12d1b3ae31bc6f76b8aba376afeaca93e5b345)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 10:38:59 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 10:38:59 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 10:53:44 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 11:08:02 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 11:07:23 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 9/6/2018, 9:02:35 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 9/6/2018, 10:19:51 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Matthew Sykes<br><strong>Merged</strong>: 9/6/2018, 10:19:58 AM<br><br></blockquote>