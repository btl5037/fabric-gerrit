<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 27526<br><strong>Subject</strong>: FAB-12804 - Add metrics for couchdb<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/13/2018, 11:12:40 AM<br><strong>LastUpdated</strong>: 11/20/2018, 8:59:49 AM<br><strong>CommitMessage</strong>:<br><pre>FAB-12804 - Add metrics for couchdb

Metric added that will record the time a request to
couch db takes to complete.

Change-Id: I2f575fe63ff353f33bd2765142d087a364ad712e
Signed-off-by: Saad Karim <skarim@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/13/2018, 11:12:40 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2018, 11:14:57 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7064/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2018, 11:15:40 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2018, 11:15:41 AM<br><strong>Message</strong>: <pre>Patch Set 1:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2018, 11:16:44 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7064/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7064</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/13/2018, 12:51:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 11:10:18 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 11:13:29 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7103/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 11:14:06 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 11:14:07 AM<br><strong>Message</strong>: <pre>Patch Set 2:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 11:15:14 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7103/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7103</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/14/2018, 12:46:33 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 1:29:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:34:55 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7113/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:35:40 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:44:01 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:44:46 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7113/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7113</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:47:45 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6127/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:47:47 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3291/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:48:23 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 1:48:43 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 2:03:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:05:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7116/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:06:40 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:08:07 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 2:09:11 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(4 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:13:03 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:13:54 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6127/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6127

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3291/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3291</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:16:05 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:16:59 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7116/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7116</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:18:57 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6131/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:19:01 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3295/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:19:35 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:20:02 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:39:28 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:44:07 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 2:44:47 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6131/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6131

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3295/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3295</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 4:06:01 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

The reason we have the disabled provider is to avoid having checks for a nil provider. This CR passes nil for the provider in all of the tests and then infects the production code with an implementation reference to disabled.Provider.

The production code should not be touching anything outside of the metrics package proper.</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 4:07:16 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 10:01:16 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2018, 10:01:29 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:05:08 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7131/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:05:49 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:14:52 PM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:15:00 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6144/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:15:38 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:15:54 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7131/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7131</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:23:05 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3305/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:24:00 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:40:03 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:41:53 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2018, 10:42:38 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6144/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6144

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3305/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3305</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2018, 4:20:14 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review-1

(6 comments)

Three things:
- compiling a regular expression on every interaction with couch is super expensive
- the StatsdFormat isn't valid
- the "metrics" test at the end is not directly testing the function and too complex for what it does test</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2018, 6:11:05 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2018, 6:11:10 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(6 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:15:13 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7185/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:15:51 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:24:21 PM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:25:04 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7185/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7185</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:26:52 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6189/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:27:23 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3338/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:27:33 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:28:21 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:48:14 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:51:35 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/15/2018, 6:52:14 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6189/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6189

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3338/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3338</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/15/2018, 7:18:09 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2018, 7:16:10 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/16/2018, 7:30:37 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2018, 7:34:55 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7203/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2018, 7:35:44 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2018, 12:20:56 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7203/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7203</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/19/2018, 11:00:44 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)

Take a look at https://gerrit.hyperledger.org/r/c/27640/ and see if we can cache; if we can't, let's go with this.</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/19/2018, 11:11:54 AM<br><strong>Message</strong>: <pre>Patch Set 7:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:16:11 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7261/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:16:51 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:25:45 AM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:29:06 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6272/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:29:26 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3395/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:29:47 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:30:19 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:51:54 AM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:55:14 AM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 11:56:05 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7261/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7261

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6272/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6272

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3395/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3395</pre><strong>Reviewer</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Reviewed</strong>: 11/20/2018, 8:59:49 AM<br><strong>Message</strong>: <pre>Abandoned</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/13/2018, 11:12:40 AM<br><strong>UnmergedRevision</strong>: [776298843a4ef08a0c4a8408c270140ae0637eaf](https://github.com/hyperledger-gerrit-archive/fabric/commit/776298843a4ef08a0c4a8408c270140ae0637eaf)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/14/2018, 11:10:18 AM<br><strong>UnmergedRevision</strong>: [695bf269d6d7e1d4353f4a326c727475e076498c](https://github.com/hyperledger-gerrit-archive/fabric/commit/695bf269d6d7e1d4353f4a326c727475e076498c)<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/14/2018, 1:29:08 PM<br><strong>UnmergedRevision</strong>: [2ec294fd9687466be86bdf576bcd53276e027f84](https://github.com/hyperledger-gerrit-archive/fabric/commit/2ec294fd9687466be86bdf576bcd53276e027f84)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 1:44:01 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 1:44:01 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 2:08:07 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 2:13:03 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/14/2018, 2:03:08 PM<br><strong>UnmergedRevision</strong>: [b092403ce0ad298c36b5d6afda7557c360c5d8f0](https://github.com/hyperledger-gerrit-archive/fabric/commit/b092403ce0ad298c36b5d6afda7557c360c5d8f0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 2:16:05 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 2:16:05 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 2:39:28 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 2:44:07 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 11/14/2018, 4:06:01 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/couchdbutil.go#L19](https://github.com/hyperledger-gerrit-archive/fabric/blob/b092403ce0ad298c36b5d6afda7557c360c5d8f0/core/ledger/util/couchdb/couchdbutil.go#L19)<br><strong>Comment</strong>: <pre>The disabled common/metrics/disabled package should not find its way into production packages.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/couchdbutil.go#L19](https://github.com/hyperledger-gerrit-archive/fabric/blob/b092403ce0ad298c36b5d6afda7557c360c5d8f0/core/ledger/util/couchdb/couchdbutil.go#L19)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/14/2018, 10:01:16 PM<br><strong>UnmergedRevision</strong>: [fb9866c51129553cb743f30cb770896f1384db82](https://github.com/hyperledger-gerrit-archive/fabric/commit/fb9866c51129553cb743f30cb770896f1384db82)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 10:14:52 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 10:14:52 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 10:41:53 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2018, 10:40:03 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 11/15/2018, 4:20:14 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go#L51)<br><strong>Comment</strong>: <pre>why nil?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/kvledger/txmgmt/privacyenabledstate/test_exports.go#L51)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/couchdb.go#L1644](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/couchdb.go#L1644)<br><strong>Comment</strong>: <pre>This is really expensive and appears to be called on every "handleRequest".  This call should be extracted from the function and the compiled regex assigned to a package var.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/couchdb.go#L1644](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/couchdb.go#L1644)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L20](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L20)<br><strong>Comment</strong>: <pre>This isn't right.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L20](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L20)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L32)<br><strong>Comment</strong>: <pre>If this is called multiple times, it's going to panic in prom.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L32)<br><strong>Comment</strong>: <pre>Could you elaborate? It is called only one time in production code.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L32)<br><strong>Comment</strong>: <pre>I just wanted to make sure you understood that meters can only be registered once. I mention it because the DB extraction was happening on every call to handleRequest and not at the construction of the stats object or when the instance was created - that implied you were extracting from different URLs that get presented on multiple calls.

So, if only a single instance is ever created, I'd expect the db name to be the same for all calls to handle request - that implies we memoize it.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L32)<br><strong>Comment</strong>: <pre>The way that I understand the code, it looks like there can be multiple couch databases for a couch instance. At the couch instance level the database name is not available, it is only available inside CouchDatabase struct. Manish had suggested wiring the stats in to CouchInstance level and then having a database name has a lablel to distinguish which database is the metric for. Without changing too much of the code, it was easier to extract that dbname inside of handle request.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L34)<br><strong>Comment</strong>: <pre>why "update" and not observe?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics.go#L34)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics_test.go#L17](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics_test.go#L17)<br><strong>Comment</strong>: <pre>This test would be a lot easier to maintain if it was a table. I also don't really see what it's testing. i don't see someone adding another element to this every time a new operation type is added to couch; I mean, how would they know?

Why not just call handleRequest and make sure it does what it's supposed to. Putting in 15 repeated indirect calls just seems to add noise.</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics_test.go#L17](https://github.com/hyperledger-gerrit-archive/fabric/blob/fb9866c51129553cb743f30cb770896f1384db82/core/ledger/util/couchdb/metrics_test.go#L17)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/15/2018, 6:11:05 PM<br><strong>UnmergedRevision</strong>: [3f06d1d17fc1ca71eb01e6dfd3bae068379310f4](https://github.com/hyperledger-gerrit-archive/fabric/commit/3f06d1d17fc1ca71eb01e6dfd3bae068379310f4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/15/2018, 6:24:21 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/15/2018, 6:24:21 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/15/2018, 6:48:14 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/15/2018, 6:51:35 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics_test.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f06d1d17fc1ca71eb01e6dfd3bae068379310f4/core/ledger/util/couchdb/metrics_test.go#L30)<br><strong>Comment</strong>: <pre>This is much simpler; where's the validation that the appropriate labels were provided with the expected values?</pre><strong>Commenter</strong>: Saad Karim - skarim@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/metrics_test.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f06d1d17fc1ca71eb01e6dfd3bae068379310f4/core/ledger/util/couchdb/metrics_test.go#L30)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Uploader</strong>: Saad Karim - skarim@us.ibm.com<br><strong>Created</strong>: 11/16/2018, 7:30:37 AM<br><strong>UnmergedRevision</strong>: [e2e2963dd877eed4960190428125998ac56d783c](https://github.com/hyperledger-gerrit-archive/fabric/commit/e2e2963dd877eed4960190428125998ac56d783c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 11:25:45 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 11:25:45 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 11:51:54 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 11:55:14 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/couchdb.go#L1661](https://github.com/hyperledger-gerrit-archive/fabric/blob/e2e2963dd877eed4960190428125998ac56d783c/core/ledger/util/couchdb/couchdb.go#L1661)<br><strong>Comment</strong>: <pre>nit: this is unnecessary. time.Now() can be used at the call site of the defer as the args are captured at time of call, not execution</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/util/couchdb/couchdb.go#L1853](https://github.com/hyperledger-gerrit-archive/fabric/blob/e2e2963dd877eed4960190428125998ac56d783c/core/ledger/util/couchdb/couchdb.go#L1853)<br><strong>Comment</strong>: <pre>nit: strconv.Itoa is idiomatic and better performing.</pre></blockquote>