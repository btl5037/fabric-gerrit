<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 27649<br><strong>Subject</strong>: FAB-12803 Add transaction level metrics<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/19/2018, 2:47:14 PM<br><strong>LastUpdated</strong>: 11/29/2018, 3:46:20 PM<br><strong>CommitMessage</strong>:<br><pre>FAB-12803 Add transaction level metrics

This CR introduces a counter metric that is incremented
with each transaction processed. The labels attaches to
the this counter include channel_name, transaction_type,
chaincode_name, and validation_code.

Change-Id: Id30bf318be29ec3c4e99c64d14383fa62f136aef
Signed-off-by: manish <manish.sethi@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/19/2018, 2:47:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 2:51:54 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7294/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 2:52:31 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 2:55:27 PM<br><strong>Message</strong>: <pre>Patch Set 1: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 2:56:14 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7294/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7294</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/19/2018, 3:08:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:11:37 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7296/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:12:14 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:19:33 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:20:24 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7296/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7296</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:22:09 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6298/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:22:52 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3419/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:22:55 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:23:40 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:41:47 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:55:15 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:56:08 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6298/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6298

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3419/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3419</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/19/2018, 3:56:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:56:55 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6302/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 3:57:31 PM<br><strong>Message</strong>: <pre>Patch Set 2: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 4:27:32 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 4:28:16 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6302/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6302</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/19/2018, 5:03:34 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 5:06:25 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6305/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 5:07:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 5:31:45 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2018, 5:32:32 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6305/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6305</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/20/2018, 6:02:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/20/2018, 6:11:47 PM<br><strong>Message</strong>: <pre>Patch Set 3:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:11:48 PM<br><strong>Message</strong>: <pre>Patch Set 3:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:14:10 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7347/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:14:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/20/2018, 6:19:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:20:45 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7347/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7347</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:21:25 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7348/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:22:05 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:30:41 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:31:23 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7348/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7348</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:33:00 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6348/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:33:39 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:33:42 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3458/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:34:46 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:54:40 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:59:08 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2018, 6:59:54 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6348/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6348

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3458/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3458</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 10:05:02 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(4 comments)

The changes to generate a string in the meter option structs and the addition of another layer of indirection with the const and vars for the labels adds complexity and makes it more difficult to generate some form of doc from the structures.

With that context, can we rationalize the additional indirection? What's the value we're getting?</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 10:19:27 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 10:55:39 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 10:57:06 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 11:20:06 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/26/2018, 11:45:42 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(6 comments)</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 1:13:06 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/26/2018, 1:43:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 1:46:39 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7494/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 1:47:18 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 1:50:43 PM<br><strong>Message</strong>: <pre>Patch Set 5: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 1:51:35 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7494/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7494</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/26/2018, 1:55:02 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:00:01 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7495/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:00:45 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/26/2018, 2:01:12 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/26/2018, 2:01:40 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(5 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:02:05 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7495/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7495</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:05:26 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7496/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:06:13 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:14:06 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:14:53 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7496/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7496</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:16:40 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6488/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:17:09 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:17:10 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3573/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:18:07 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:39:15 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:39:54 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/26/2018, 2:40:25 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6488/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6488

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3573/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3573</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 11/26/2018, 3:07:16 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 11/28/2018, 5:39:01 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/29/2018, 11:08:06 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/29/2018, 11:09:17 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:13:00 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7641/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:13:57 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:23:57 AM<br><strong>Message</strong>: <pre>Patch Set 8: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:24:49 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/7641/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/7641</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:25:48 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6619/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:26:38 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:26:53 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3714/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:27:58 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:50:41 AM<br><strong>Message</strong>: <pre>Patch Set 8: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:52:47 AM<br><strong>Message</strong>: <pre>Patch Set 8: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 11:53:38 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6619/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6619

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/3714/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/3714</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/29/2018, 12:24:58 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 12:27:27 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6622/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 12:28:07 PM<br><strong>Message</strong>: <pre>Patch Set 8: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 12:55:33 PM<br><strong>Message</strong>: <pre>Patch Set 8: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 12:56:16 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/6622/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/6622</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 12:57:27 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2

(7 comments)

Word smithing can be done on top.

I am, however, concerned about the empty chaincode label (shouldn't happen).</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 2:08:21 PM<br><strong>Message</strong>: <pre>Patch Set 9: Commit message was updated.</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 2:27:54 PM<br><strong>Message</strong>: <pre>Patch Set 9:

> Patch Set 9: Commit message was updated.

Removed the reference to collection_count.</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 11/29/2018, 2:30:26 PM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 11/29/2018, 2:30:29 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Gari Singh</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 11/29/2018, 2:30:45 PM<br><strong>Message</strong>: <pre>Patch Set 9:

> Patch Set 8: Code-Review+2
> 
> (7 comments)
> 
> Word smithing can be done on top.
> 
> I am, however, concerned about the empty chaincode label (shouldn't happen).

Putting a CR on top for suggested word changes. That should happen separately.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 2:32:38 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3732/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 2:33:13 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/5054/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/29/2018, 2:59:14 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/5054/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/5054

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3732/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/3732</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 11/29/2018, 3:46:20 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(5 comments)</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/19/2018, 2:47:14 PM<br><strong>UnmergedRevision</strong>: [278692bc22a99b4011d51e4b5f932b647ca57dcf](https://github.com/hyperledger-gerrit-archive/fabric/commit/278692bc22a99b4011d51e4b5f932b647ca57dcf)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 2:55:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/19/2018, 3:08:42 PM<br><strong>UnmergedRevision</strong>: [ee4a5ddb166608890cf89ad284725a60317c0c4b](https://github.com/hyperledger-gerrit-archive/fabric/commit/ee4a5ddb166608890cf89ad284725a60317c0c4b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 3:19:33 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 3:19:33 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 3:41:47 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2018, 5:31:45 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/20/2018, 6:02:22 PM<br><strong>UnmergedRevision</strong>: [ff9c4c3eb0071452740fa27c0e0583c58e6c7344](https://github.com/hyperledger-gerrit-archive/fabric/commit/ff9c4c3eb0071452740fa27c0e0583c58e6c7344)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2018, 6:20:45 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/20/2018, 6:19:46 PM<br><strong>UnmergedRevision</strong>: [8b5af99ffe2dc036bd11e1f3302f0fc297d734a9](https://github.com/hyperledger-gerrit-archive/fabric/commit/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2018, 6:30:41 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2018, 6:30:41 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2018, 6:54:40 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2018, 6:59:08 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 11/26/2018, 10:05:02 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [common/ledger/testutil/test_helper.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/common/ledger/testutil/test_helper.go#L32)<br><strong>Comment</strong>: <pre>https://github.com/golang/go/wiki/CodeReviewComments#initialisms

Also, inconsistent even within this file. There are occurances of TxId, TxID, and Txid.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [common/ledger/testutil/test_helper.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/common/ledger/testutil/test_helper.go#L32)<br><strong>Comment</strong>: <pre>will change this to TxID.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [common/ledger/testutil/test_helper.go#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/common/ledger/testutil/test_helper.go#L32)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [common/ledger/testutil/test_helper.go#L122](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/common/ledger/testutil/test_helper.go#L122)<br><strong>Comment</strong>: <pre>https://github.com/golang/go/wiki/CodeReviewComments#declaring-empty-slices</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [common/ledger/testutil/test_helper.go#L122](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/common/ledger/testutil/test_helper.go#L122)<br><strong>Comment</strong>: <pre>ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [common/ledger/testutil/test_helper.go#L122](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/common/ledger/testutil/test_helper.go#L122)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L94)<br><strong>Comment</strong>: <pre>label</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L94)<br><strong>Comment</strong>: <pre>ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L94)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>This label concerns me since it's an actual metric and not a label. It should not be part of another metric.

In particular, collection_count would be a counter with a the channel name as the label.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>label</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>Actually we want collection_count to be a label. It tells us whether the transaction has 0 or 1 private data collections (or in a more rare case, 2, 3, etc... but never expected to be a large number).</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>That's fine; it's not a label. It's a metric. I have suggested an alternative way of raising the metric.

For this CR, it should be omitted so we can expedite the merge.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>I don't understand how this is a metric... we are not keen to see how many collections has been operated upon by a channel. Rather, we are keen to see what is the volume of transactions that involve 0 collection (i.e., public data only) vs 1 collection vs 2 collections.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>> we are keen to see what is the volume of transactions that involve 0 collection (i.e., public data only) vs 1 collection vs 2 collections.
Sounds like you want a metric for a collection since it's a different entity.

I'll reiterate my response to Dave: For this CR, it should be omitted so we can expedite the merge.

Thanks.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L95)<br><strong>Comment</strong>: <pre>Removed collection_count from this CR</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L142](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L142)<br><strong>Comment</strong>: <pre>How does separating these from the constant definitions help? It's just spreading the stuff around in a file that's suppose to be useful for doc generation and self-documenting purposes.

What are the benefits of adding two layers of indirection relative to the complexity required to write a tool to extract this?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L142](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L142)<br><strong>Comment</strong>: <pre>I also wanted to used "[]string{labelChannelName, labelTxType..." directly in the struct but 'StatsdFormat' was the main reason... see line 148, 149 below and reply to your comments on function "generateStatsdFormat"</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L162)<br><strong>Comment</strong>: <pre>Again, why? Why do we need to write code to create a static string?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L162)<br><strong>Comment</strong>: <pre>In fact, I was surprised why something like this is not there in the framework itself. Answer to why - less error prone code. What value do you see writing two strings manually and making sure both are in correct format when one can be generated given the other?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L162)<br><strong>Comment</strong>: <pre>The point of these structures was to have *literals* that would enable automated extraction of documentation.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L162)<br><strong>Comment</strong>: <pre>OK, sure. Can you point me to the tool that you plan to use and I can see if it allows somewhat better workaround than having literals.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L162)<br><strong>Comment</strong>: <pre>Manish,
Matt explained to me that all the other metrics use literals so that a doc generator can easily parse the metrics. I suggest to go ahead and use literals for consistency so that we can get these metrics documented for the release.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L162](https://github.com/hyperledger-gerrit-archive/fabric/blob/8b5af99ffe2dc036bd11e1f3302f0fc297d734a9/core/ledger/kvledger/metrics.go#L162)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/26/2018, 1:43:14 PM<br><strong>UnmergedRevision</strong>: [3a2aee2eb6979a8d11166e1282f6238d18ee13f7](https://github.com/hyperledger-gerrit-archive/fabric/commit/3a2aee2eb6979a8d11166e1282f6238d18ee13f7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/26/2018, 1:50:43 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/26/2018, 1:55:02 PM<br><strong>UnmergedRevision</strong>: [60c0dc324496ffaaab55d797e0c747f95fde6049](https://github.com/hyperledger-gerrit-archive/fabric/commit/60c0dc324496ffaaab55d797e0c747f95fde6049)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/26/2018, 2:02:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/26/2018, 2:01:12 PM<br><strong>UnmergedRevision</strong>: [bcf111682c4e9f96056bdc991cb1a7e946979d5d](https://github.com/hyperledger-gerrit-archive/fabric/commit/bcf111682c4e9f96056bdc991cb1a7e946979d5d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/26/2018, 2:14:06 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/26/2018, 2:14:06 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/26/2018, 2:39:15 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/26/2018, 2:39:54 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 11/26/2018, 3:07:16 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 11/29/2018, 11:08:06 AM<br><strong>UnmergedRevision</strong>: [21de25dd2f2c56da0519b6dc7a98b8546471a229](https://github.com/hyperledger-gerrit-archive/fabric/commit/21de25dd2f2c56da0519b6dc7a98b8546471a229)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 11:23:57 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 11:23:57 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 11:50:41 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 12:55:33 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 11/29/2018, 12:57:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L66)<br><strong>Comment</strong>: <pre>Unless the word "unknown" overlaps with a valid type, we should use that.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L66)<br><strong>Comment</strong>: <pre>Will change it to "unkonwn"</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L71)<br><strong>Comment</strong>: <pre>empty labels are bad. Why wouldn't we have a chain code name? Can we use anything other than an empty string?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L71)<br><strong>Comment</strong>: <pre>- There is no chaincode name for non-endorser transactions. I can use "not applicable" for that (hopefully it won't clash with a real chaincode name because of a space).

- For endorser transactions, the way the code is structured, ledger validation just does not look into the transactions that are already marked invalid by the comitter/validator. The reasons could range for bad formatted (in which case it may not be possible to have a meaningful chaincode name) to not enough endorsements (in which case it should be possible but I don't think that ledger code will be right place to interpret various validation code and do the parsing again based on specific invalid code - as this makes indirect dependence on the committer/validator logic). Hopefully, validation refactoring will be able to address this issue but I am not sure what label could be meaningful in case.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L130)<br><strong>Comment</strong>: <pre>transaction_count</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L130)<br><strong>Comment</strong>: <pre>ack</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L132](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L132)<br><strong>Comment</strong>: <pre>should simply be channel</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L132](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L132)<br><strong>Comment</strong>: <pre>This should be chaincode - and should include the version</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L132](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L132)<br><strong>Comment</strong>: <pre>Will change to chaincode. what format is being followed to include version - "mycc:ccver"?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics.go#L132](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics.go#L132)<br><strong>Comment</strong>: <pre>will change. Wish the terms that are used all over, better could have been defined as constant at some common place</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics_test.go#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics_test.go#L103)<br><strong>Comment</strong>: <pre>This raises a flag; we shouldn't have empty label values.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/kvledger/metrics_test.go#L153](https://github.com/hyperledger-gerrit-archive/fabric/blob/21de25dd2f2c56da0519b6dc7a98b8546471a229/core/ledger/kvledger/metrics_test.go#L153)<br><strong>Comment</strong>: <pre>To be consistent with the other metrics, it should include the version as well. The shim metrics in core/chaincode do this.</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 11/29/2018, 2:08:21 PM<br><strong>GitHubMergedRevision</strong>: [13952e9e9330deb38ecde0089de8fdc0f04cf895](https://github.com/hyperledger-gerrit-archive/fabric/commit/13952e9e9330deb38ecde0089de8fdc0f04cf895)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 11:23:57 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 11:23:57 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 11:50:41 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/29/2018, 12:55:33 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 11/29/2018, 2:30:26 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Gari Singh<br><strong>Merged</strong>: 11/29/2018, 2:30:29 PM<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 11/29/2018, 12:57:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>