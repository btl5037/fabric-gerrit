<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 8303<br><strong>Subject</strong>: [FAB-3273] java cc get state by range<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Luis Sanchez - luiss@me.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 4/20/2017, 11:46:16 AM<br><strong>LastUpdated</strong>: 5/3/2017, 8:23:26 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-3273] java cc get state by range

- Introduced KeyValue type that maps to KV proto.
- New QueryResultsIterator.
- Re-arranged packages to keep public vs. internal
  code as separate as possible.
  * org.hyperledger.fabric.shim (public shim API)
  * org.hyperledger.fabric.impl (implementations)
  * org.hyperledger.fabric.shim.ledger (public
    ledger interfaces)

- ChaincodeStub:
 * QueryResultsIterator<KeyValue> getStateForRange(start, end)
 * QueryResultsIterator<KeyValue> getStateForPartialCompositeKey(key)

- Handler
 * QueryResponse handleGetStateForRange()
 * QueryResponse queryStateNext()
 * void queryStateClose()
 * Reduce the visibily of members in order to minimize the
   public API as much as possible.

Change-Id: Iea75e426e55ff2e482e0a751b2dbd540bdae6a03
Signed-off-by: Luis Sanchez <sanchezl@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/20/2017, 11:46:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/20/2017, 11:46:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/20/2017, 1:12:29 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/20/2017, 1:28:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/20/2017, 1:35:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 8:01:30 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 8:02:40 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7: Patch Set 6 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:35:02 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4132/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:36:08 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10064/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:44:36 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1599/ (3/3)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 4/21/2017, 9:08:14 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 9:44:37 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4141/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 9:54:19 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10073/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 9:54:21 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1608/ (3/3)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 10:03:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 10:04:38 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4132/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10064/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1599/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 11:42:53 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4141/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1608/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10073/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 11:56:06 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4157/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 12:04:40 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10090/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 12:04:40 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1624/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 1:32:21 PM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4157/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1624/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10090/ : SUCCESS</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 1:44:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9: Patch Set 8 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 4:34:06 PM<br><strong>Message</strong>: <pre>Patch Set 9: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4195/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 4:34:36 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10128/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 4:34:50 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1663/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 6:11:34 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4195/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1663/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10128/ : SUCCESS</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 6:26:44 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 6:35:19 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 6:38:54 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 6:40:39 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/21/2017, 6:45:16 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:33:59 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4223/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:34:11 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10156/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:34:32 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1690/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:54:18 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4227/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:54:19 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10160/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 8:56:05 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1694/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 9:54:10 PM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4223/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10156/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1690/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/21/2017, 10:17:19 PM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4227/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1694/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10160/ : SUCCESS</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/22/2017, 12:34:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 12: Patch Set 11 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/22/2017, 12:36:37 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4235/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/22/2017, 12:38:05 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10169/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/22/2017, 12:38:11 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1702/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/22/2017, 1:37:35 AM<br><strong>Message</strong>: <pre>Patch Set 12: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4235/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10169/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1702/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 4/22/2017, 3:33:10 PM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/24/2017, 1:54:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13: Patch Set 12 was rebased.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/24/2017, 1:55:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14: Patch Set 13 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 2:25:48 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4408/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 2:26:36 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1875/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 2:28:11 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10342/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 2:57:11 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4419/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 2:58:00 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1886/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 2:59:11 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10353/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 3:09:30 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4419/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1886/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10353/ : FAILURE</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/24/2017, 3:32:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 3:39:06 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4429/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 3:41:43 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1897/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 4:02:43 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4408/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1875/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10342/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 4:04:31 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4429/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1897/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/24/2017, 7:57:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 16: Patch Set 15 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 8:36:27 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4469/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 8:36:32 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1936/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 8:37:10 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10391/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2017, 9:58:23 PM<br><strong>Message</strong>: <pre>Patch Set 16: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4469/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/1936/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10391/ : SUCCESS</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/25/2017, 12:53:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 17: Patch Set 16 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 1:36:18 PM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4549/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 1:36:18 PM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2016/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 1:36:19 PM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10471/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/25/2017, 2:57:25 PM<br><strong>Message</strong>: <pre>Patch Set 17: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4549/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2016/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10471/ : FAILURE</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/26/2017, 12:01:44 AM<br><strong>Message</strong>: <pre>Uploaded patch set 18: Patch Set 17 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 12:36:27 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4586/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 12:46:00 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2053/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 12:46:08 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10508/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 2:31:35 AM<br><strong>Message</strong>: <pre>Patch Set 18: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4586/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2053/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10508/ : SUCCESS</pre><strong>Reviewer</strong>: Senthilnathan N - cendhu@gmail.com<br><strong>Reviewed</strong>: 4/26/2017, 5:06:18 AM<br><strong>Message</strong>: <pre>Patch Set 18:

(1 comment)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/26/2017, 12:20:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 19: Patch Set 18 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 1:19:05 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2125/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 1:19:05 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4658/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 1:19:07 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10580/ (3/3)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/26/2017, 1:49:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 20.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 4/26/2017, 1:52:16 PM<br><strong>Message</strong>: <pre>Patch Set 18:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 2:35:22 PM<br><strong>Message</strong>: <pre>Patch Set 19: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4658/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2125/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10580/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 3:26:10 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4675/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 3:27:26 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2142/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 3:27:55 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10597/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/26/2017, 4:58:39 PM<br><strong>Message</strong>: <pre>Patch Set 20: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/4675/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2142/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/10597/ : SUCCESS</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/27/2017, 2:23:53 AM<br><strong>Message</strong>: <pre>Patch Set 20: Code-Review+1

Can you take a look Dave please ? Good to make sure parity with golang shim</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/29/2017, 11:56:47 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Just noticed that Senthil had taken a look earlier (in lieu of Dave). Senthil, can you V+1 once you are happy with the review please ?</pre><strong>Reviewer</strong>: Senthilnathan N - cendhu@gmail.com<br><strong>Reviewed</strong>: 5/1/2017, 10:33:43 PM<br><strong>Message</strong>: <pre>Patch Set 20: Code-Review+1

(2 comments)

LGTM. Due to two recent CR in golang shim, we need to make a few changes in Java shim as well. It can be done either as a separate CR or in the same CR.</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 5/1/2017, 11:03:39 PM<br><strong>Message</strong>: <pre>Patch Set 20: Code-Review+2

Thanks, Senthil. Changing to +2 based on your +1 and the comments about parity by following the fixes for the JIRA .</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 5/3/2017, 7:45:22 AM<br><strong>Message</strong>: <pre>Patch Set 20: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 7:45:42 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Christopher Ferris</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 7:47:45 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/387/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 7:48:25 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/700/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 7:48:26 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1706/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/3/2017, 8:23:26 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/387/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/700/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1706/ : FAILURE</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/20/2017, 11:46:16 AM<br><strong>UnmergedRevision</strong>: [3dd8d8082ae721b266e64f460d1421bc8a345daf](https://github.com/hyperledger-gerrit-archive/fabric/commit/3dd8d8082ae721b266e64f460d1421bc8a345daf)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/20/2017, 11:46:53 AM<br><strong>UnmergedRevision</strong>: [2de1e401bb02aaa890b7c0480aa338376e8a30ae](https://github.com/hyperledger-gerrit-archive/fabric/commit/2de1e401bb02aaa890b7c0480aa338376e8a30ae)<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/20/2017, 1:12:29 PM<br><strong>UnmergedRevision</strong>: [7861759cfb3ec2d9afec9730a512d9cb81a98908](https://github.com/hyperledger-gerrit-archive/fabric/commit/7861759cfb3ec2d9afec9730a512d9cb81a98908)<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/20/2017, 1:28:37 PM<br><strong>UnmergedRevision</strong>: [08d2a2adcb2a7d71769bc2564b73bb4d0eae60ba](https://github.com/hyperledger-gerrit-archive/fabric/commit/08d2a2adcb2a7d71769bc2564b73bb4d0eae60ba)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/20/2017, 1:35:24 PM<br><strong>UnmergedRevision</strong>: [8172636f4548de302c643162c90943236740e33c](https://github.com/hyperledger-gerrit-archive/fabric/commit/8172636f4548de302c643162c90943236740e33c)<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/21/2017, 8:01:30 AM<br><strong>UnmergedRevision</strong>: [37934032899917dd545ec5adee08d53dca685587](https://github.com/hyperledger-gerrit-archive/fabric/commit/37934032899917dd545ec5adee08d53dca685587)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 10:04:38 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/21/2017, 8:02:40 AM<br><strong>UnmergedRevision</strong>: [bb9852574497d4963092fad66c799f1545ddafa3](https://github.com/hyperledger-gerrit-archive/fabric/commit/bb9852574497d4963092fad66c799f1545ddafa3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 11:42:53 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>Ledger (and the equivalent function in golang shim) returns the results in the lexicographical order of keys so as to maintain a deterministic behavior. Further, similar to golang shim, it's better to return an iterator instead of a Map since, there could be large number of results.
Same applies to the functions below.</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>From interfaces.go:
	// GetStateByRange function can be invoked by a chaincode to query of a range
	// of keys in the state. Assuming the startKey and endKey are in lexical
	// an iterator will be returned that can be used to iterate over all keys
	// between the startKey (inclusive) and endKey (exclusive). The order in which keys are
	// returned by the iterator is random.
	GetStateByRange(startKey, endKey string) (StateQueryIteratorInterface, error)
FYI, in case we need to fix that message.</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>I've removed the message regarding the order and chained the return value to a list that will preserve the order.</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>I don't see what the iterator buys us. All the results have been retrieved at once. The golang implementation just seems defer deserialization. Is there a pattern where users query a lot of values and then throw most of them away after reading a few?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>No, golang impl fetches next set of results from ledger in the chunk of a fixed number of results at a time after the current results are exhausted.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>Thanks Luis for pointing this out. This is incorrect and needs to be fixed. Do you want to fix this along with this CR or prefer to open a separate Jira?</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb9852574497d4963092fad66c799f1545ddafa3/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L126)<br><strong>Comment</strong>: <pre>Please open a new CR.</pre></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/21/2017, 10:03:56 AM<br><strong>UnmergedRevision</strong>: [4bf3fce6e8bd36cdc7fe749385f743e83b2bde0f](https://github.com/hyperledger-gerrit-archive/fabric/commit/4bf3fce6e8bd36cdc7fe749385f743e83b2bde0f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 1:32:21 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/21/2017, 1:44:41 PM<br><strong>UnmergedRevision</strong>: [320d6eeffa4c110004c9df6b350c4de95551e568](https://github.com/hyperledger-gerrit-archive/fabric/commit/320d6eeffa4c110004c9df6b350c4de95551e568)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 6:11:34 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/21/2017, 6:26:44 PM<br><strong>UnmergedRevision</strong>: [9c8268a30d50b792840fbac0fe3042cdf7e09e6e](https://github.com/hyperledger-gerrit-archive/fabric/commit/9c8268a30d50b792840fbac0fe3042cdf7e09e6e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 9:54:10 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/21/2017, 6:38:54 PM<br><strong>UnmergedRevision</strong>: [f6fbb2483485a12249368937c4239cea453cc6af](https://github.com/hyperledger-gerrit-archive/fabric/commit/f6fbb2483485a12249368937c4239cea453cc6af)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/21/2017, 10:17:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/22/2017, 12:34:17 AM<br><strong>UnmergedRevision</strong>: [8bc68b60542d303b96be0308747e378c680e6ef2](https://github.com/hyperledger-gerrit-archive/fabric/commit/8bc68b60542d303b96be0308747e378c680e6ef2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/22/2017, 1:37:35 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/24/2017, 1:54:42 PM<br><strong>UnmergedRevision</strong>: [50b3a810f0edcfe0f0fa34950e6e608589d393b5](https://github.com/hyperledger-gerrit-archive/fabric/commit/50b3a810f0edcfe0f0fa34950e6e608589d393b5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/24/2017, 4:02:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/24/2017, 1:55:14 PM<br><strong>UnmergedRevision</strong>: [c775f2a63687a9802fe4d7e2100d7a9d278e1c4f](https://github.com/hyperledger-gerrit-archive/fabric/commit/c775f2a63687a9802fe4d7e2100d7a9d278e1c4f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/24/2017, 3:09:30 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/24/2017, 3:32:22 PM<br><strong>UnmergedRevision</strong>: [26534a0dd4a0b4a535d3c95377a2e5a6a8010af7](https://github.com/hyperledger-gerrit-archive/fabric/commit/26534a0dd4a0b4a535d3c95377a2e5a6a8010af7)<br><br></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/24/2017, 7:57:48 PM<br><strong>UnmergedRevision</strong>: [193028f96232c48f7ae183b82ca7deda415613f4](https://github.com/hyperledger-gerrit-archive/fabric/commit/193028f96232c48f7ae183b82ca7deda415613f4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/24/2017, 9:58:23 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/25/2017, 12:53:30 PM<br><strong>UnmergedRevision</strong>: [f4b155b810792d35d8f1c42aea93450a23e3a847](https://github.com/hyperledger-gerrit-archive/fabric/commit/f4b155b810792d35d8f1c42aea93450a23e3a847)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/25/2017, 2:57:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/26/2017, 12:01:44 AM<br><strong>UnmergedRevision</strong>: [11cb5c3f63ee4da013c1d7957e56664a7640c1b1](https://github.com/hyperledger-gerrit-archive/fabric/commit/11cb5c3f63ee4da013c1d7957e56664a7640c1b1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/26/2017, 2:31:35 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Senthilnathan N - cendhu@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/11cb5c3f63ee4da013c1d7957e56664a7640c1b1/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L127)<br><strong>Comment</strong>: <pre>Need to use an iterator instead of List to have consistent behaviour with golang implementation of shim/chaincode. Currently, we are fetching a chunk of result from the ledger and return to shim. Once this chunk is consumed, we fetch the next chunk. This can reduce the memory usage (when the result set is very large) and can reduce the response time. This applies for range query on composite key, GetQueryResult(), and GetHistoryForKey().</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/11cb5c3f63ee4da013c1d7957e56664a7640c1b1/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/ChaincodeStub.java#L127)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/26/2017, 12:20:22 PM<br><strong>UnmergedRevision</strong>: [696525bf4611b2dbb9eed5b0f66d2364c8bcdbf9](https://github.com/hyperledger-gerrit-archive/fabric/commit/696525bf4611b2dbb9eed5b0f66d2364c8bcdbf9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/26/2017, 2:35:22 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 4/26/2017, 1:49:41 PM<br><strong>GitHubMergedRevision</strong>: [5858fbb78d790decd86e06faa9ee5fce851289c0](https://github.com/hyperledger-gerrit-archive/fabric/commit/5858fbb78d790decd86e06faa9ee5fce851289c0)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 5/3/2017, 7:45:22 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Christopher Ferris<br><strong>Merged</strong>: 5/3/2017, 7:45:42 AM<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/26/2017, 4:58:39 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Approved</strong>: 5/1/2017, 11:03:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Senthilnathan N - cendhu@gmail.com<br><strong>Approved</strong>: 5/1/2017, 10:33:43 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Senthilnathan N - cendhu@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/impl/ChaincodeStubImpl.java#L149](https://github.com/hyperledger-gerrit-archive/fabric/blob/5858fbb78d790decd86e06faa9ee5fce851289c0/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/impl/ChaincodeStubImpl.java#L149)<br><strong>Comment</strong>: <pre>Need to create a separate JIRA to address a bug: A range query on  simple keys can return composite keys as well. This collision is fixed in https://gerrit.hyperledger.org/r/#/c/8119/ by creating a separate namespace for compositeKey. We need to replicate the same in Java shim as well.</pre><strong>Commenter</strong>: Senthilnathan N - cendhu@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/impl/QueryResultsIteratorImpl.java#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/5858fbb78d790decd86e06faa9ee5fce851289c0/core/chaincode/shim/java/src/main/java/org/hyperledger/fabric/shim/impl/QueryResultsIteratorImpl.java#L65)<br><strong>Comment</strong>: <pre>Need to create a separate JIRA to address a corner case: When the number of results is an exact multiple of shim batch size, HasMore flag is set incorrectly (for the last batch of result). Hence, queryStateNext() on peer would fail. This CR https://gerrit.hyperledger.org/r/#/c/7255/ fixes this issue by keeping the HasMore flag accurate by pre-fetching the next batch when the last item in the current batch is accessed. Need to fix the Java impl as well.</pre></blockquote>