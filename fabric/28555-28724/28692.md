<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 28692<br><strong>Subject</strong>: [FAB-12916] gossip state metrics<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/14/2019, 3:37:30 AM<br><strong>LastUpdated</strong>: 2/4/2019, 7:29:20 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-12916] gossip state metrics

This change set adds reporting for the following events:

1) Gossip's height is incremented - gauge metric
2) A block commit is made - histogram metric with elapsed time,
   with a label of the sequence of the block.
3) A block is pushed or popped from the payload buffer - gauge metric
   with the block sequence as the value, and also a gauge metric
   of the payload buffer size at time of push/pop.

Change-Id: I542799097aa89cef32b81affa4bbd32f50b39ef7
Signed-off-by: Hagar Meir <hagar.meir@ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 3:37:30 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 3:42:15 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8979/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 3:42:45 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 3:42:47 AM<br><strong>Message</strong>: <pre>Patch Set 1: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 3:43:33 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8979/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/8979</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 3:47:22 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 4:00:29 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 4:03:27 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 4:05:23 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8980/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 4:05:52 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 4:07:52 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 4:10:45 AM<br><strong>Message</strong>: <pre>Patch Set 2: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 4:11:32 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8980/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/8980</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 5:49:37 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 5:52:19 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 5:54:20 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8984/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 5:54:48 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:00:37 AM<br><strong>Message</strong>: <pre>Patch Set 3: F1-VerifyBuild+1

Succeeded, Run DocBuild, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:01:21 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8984/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/8984</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:03:20 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1237/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:03:59 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:04:10 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7938/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:04:33 AM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:04:34 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:04:38 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:07:07 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4708/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:07:43 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:24:18 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:37:29 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:38:15 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7938/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/7938

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4708/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4708

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1237/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1237</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 6:41:53 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Run UnitTest
Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:44:34 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7940/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:45:08 AM<br><strong>Message</strong>: <pre>Patch Set 3: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:45:21 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4711/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 6:46:02 AM<br><strong>Message</strong>: <pre>Patch Set 3: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 7:15:33 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 7:20:33 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/14/2019, 7:21:25 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7940/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/7940

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4711/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4711</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 1:21:18 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

(24 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 1:31:29 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 1:31:39 PM<br><strong>Message</strong>: <pre>Patch Set 3: -Code-Review</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 2:04:19 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 2:07:24 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(4 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 3:49:44 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 6:13:46 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/15/2019, 6:31:48 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/15/2019, 6:32:23 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(26 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:36:37 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9054/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:37:10 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:39:01 AM<br><strong>Message</strong>: <pre>Patch Set 4: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:39:57 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9054/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9054</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/15/2019, 6:47:41 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:50:37 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9056/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:51:03 AM<br><strong>Message</strong>: <pre>Patch Set 4: -F1-VerifyBuild

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:56:00 AM<br><strong>Message</strong>: <pre>Patch Set 4: F1-VerifyBuild+1

Succeeded, Run DocBuild, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:58:49 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1244/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:59:09 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7997/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:59:28 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 6:59:36 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:00:09 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:00:10 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:02:19 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4756/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:03:02 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:27:58 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:38:32 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:39:22 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7997/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/7997

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9056/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9056

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1244/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1244

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4756/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4756</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/15/2019, 7:41:41 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:46:11 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7998/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 7:46:47 AM<br><strong>Message</strong>: <pre>Patch Set 4: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 8:06:01 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 8:06:45 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7998/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/7998</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/15/2019, 8:14:51 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 8:17:33 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8003/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 8:18:01 AM<br><strong>Message</strong>: <pre>Patch Set 4: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 8:48:56 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/15/2019, 8:49:48 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8003/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/8003</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 1/15/2019, 1:56:39 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(4 comments)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/16/2019, 7:17:42 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/16/2019, 7:17:57 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/16/2019, 7:19:11 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:19:13 AM<br><strong>Message</strong>: <pre>Patch Set 5:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:22:52 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9086/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:23:27 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:23:30 AM<br><strong>Message</strong>: <pre>Patch Set 6: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:24:19 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9086/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9086</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/16/2019, 7:28:24 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:33:06 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9087/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:33:40 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:39:32 AM<br><strong>Message</strong>: <pre>Patch Set 7: F1-VerifyBuild+1

Succeeded, Run DocBuild, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:40:18 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9087/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9087</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:43:04 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1247/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:43:46 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:44:21 AM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:44:22 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:44:34 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8027/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:45:05 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:45:24 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4774/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 7:46:08 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 8:14:06 AM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 8:21:13 AM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 8:22:03 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1247/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1247

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8027/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/8027

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4774/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4774</pre><strong>Reviewer</strong>: Firas Qutishat - firas.qutishat@securekey.com<br><strong>Reviewed</strong>: 1/16/2019, 10:48:13 AM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+1

it's look good I will Abandon my change https://gerrit.hyperledger.org/r/#/c/28661/</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/21/2019, 6:10:16 AM<br><strong>Message</strong>: <pre>Patch Set 8: Commit message was updated.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/21/2019, 4:31:49 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(3 comments)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 3:37:29 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 3:37:38 AM<br><strong>Message</strong>: <pre>Patch Set 8:

(3 comments)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 3:40:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 3:40:19 AM<br><strong>Message</strong>: <pre>Patch Set 9:

No Builds Executed</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 4:03:18 AM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review+2</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 4:33:14 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 4:33:15 AM<br><strong>Message</strong>: <pre>Patch Set 10:

No Builds Executed</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/22/2019, 4:39:11 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:32:29 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9285/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:36:20 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:42:54 AM<br><strong>Message</strong>: <pre>Patch Set 10: F1-VerifyBuild+1

Succeeded, Run DocBuild, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:54:32 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1278/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:54:34 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8211/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:54:43 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4927/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:57:06 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting documentation build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:57:07 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:57:54 AM<br><strong>Message</strong>: <pre>Patch Set 10: F2-DocBuild+1

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:57:55 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Succeeded. View staged documentation on the logs server linked below.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 10:58:05 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 11:32:32 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 11:40:02 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/22/2019, 11:40:43 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9285/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9285

https://jenkins.hyperledger.org/job/fabric-docs-build-x86_64/1278/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-docs-build-x86_64/1278

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8211/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/8211

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4927/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4927</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 10:41:26 AM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 10:41:54 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Yacov Manevich</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 10:44:25 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/4196/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 10:45:05 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/5512/ (2/2)</pre><strong>Reviewer</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Reviewed</strong>: 1/23/2019, 10:48:21 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2019, 11:23:12 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/5512/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/5512

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/4196/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/4196</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 2/4/2019, 7:29:20 AM<br><strong>Message</strong>: <pre>Patch Set 10: Cherry Picked

This patchset was cherry picked to branch release-1.4 as commit 9d90d99192c7f3b1f8a85c7c695ff8f30c2ff3a6</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/14/2019, 3:37:30 AM<br><strong>UnmergedRevision</strong>: [701e654ece2fdf4acb8390d427e9bbb80120c630](https://github.com/hyperledger-gerrit-archive/fabric/commit/701e654ece2fdf4acb8390d427e9bbb80120c630)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2019, 3:42:47 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L52](https://github.com/hyperledger-gerrit-archive/fabric/blob/701e654ece2fdf4acb8390d427e9bbb80120c630/gossip/state/metrics.go#L52)<br><strong>Comment</strong>: <pre>exported type BlockMetrics should have comment or be unexported</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/701e654ece2fdf4acb8390d427e9bbb80120c630/gossip/state/metrics.go#L53)<br><strong>Comment</strong>: <pre>typo</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/701e654ece2fdf4acb8390d427e9bbb80120c630/gossip/state/metrics.go#L64)<br><strong>Comment</strong>: <pre>exported type BlockMetrics should have comment or be unexported</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L401](https://github.com/hyperledger-gerrit-archive/fabric/blob/701e654ece2fdf4acb8390d427e9bbb80120c630/gossip/state/state_test.go#L401)<br><strong>Comment</strong>: <pre>the header for the function should start with the function's name.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L406](https://github.com/hyperledger-gerrit-archive/fabric/blob/701e654ece2fdf4acb8390d427e9bbb80120c630/gossip/state/state_test.go#L406)<br><strong>Comment</strong>: <pre>the header for the function should start with the function's name.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/14/2019, 4:00:29 AM<br><strong>UnmergedRevision</strong>: [5bc9698623f09daf0dc03723630c294c701955c6](https://github.com/hyperledger-gerrit-archive/fabric/commit/5bc9698623f09daf0dc03723630c294c701955c6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2019, 4:10:45 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/5bc9698623f09daf0dc03723630c294c701955c6/gossip/state/metrics.go#L78)<br><strong>Comment</strong>: <pre>these looks like the same type of the field PushBlock while they are actually options. Perhaps append "Opts" to the name of the variable both here and popBlock and payloadBufferSize</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/14/2019, 5:49:37 AM<br><strong>UnmergedRevision</strong>: [b79fca45a5019450d460d661a0795459eb007950](https://github.com/hyperledger-gerrit-archive/fabric/commit/b79fca45a5019450d460d661a0795459eb007950)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2019, 6:00:37 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2019, 6:04:33 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2019, 7:20:33 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/14/2019, 7:15:33 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 1/14/2019, 1:21:18 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/service/gossip_service.go#L266](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/service/gossip_service.go#L266)<br><strong>Comment</strong>: <pre>I assume a configured provider will eventually be wired through to here?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/service/gossip_service.go#L266](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/service/gossip_service.go#L266)<br><strong>Comment</strong>: <pre>Yes</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L24)<br><strong>Comment</strong>: <pre>The name and the help text don't match.

Is this "commit_time" ?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L24)<br><strong>Comment</strong>: <pre>actually "commit_duration" is probably better.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L24)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L26)<br><strong>Comment</strong>: <pre>What is a sequence label? Seems like it's not very stable and would generate a new metric for every block.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L26)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L33)<br><strong>Comment</strong>: <pre>This should be past-tense. 

Perhaps "last_pushed"?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L33)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L34)<br><strong>Comment</strong>: <pre>This shouldn't describe an event - it describes what the meter is reporting.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L34)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L42](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L42)<br><strong>Comment</strong>: <pre>last popped?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L42](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L42)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L43](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L43)<br><strong>Comment</strong>: <pre>This shouldn't describe an event - it describes what the meter is reporting.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L43](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L43)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L51)<br><strong>Comment</strong>: <pre>should be "size" - it's already scoped to payload_buffer by virtue of the subsystem</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L51)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L55)<br><strong>Comment</strong>: <pre>Can you describe the importance of this metric? It seems to be the delta between push and pop so it can be easily derived when graphed.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L55)<br><strong>Comment</strong>: <pre>No, Matt this might not be the delta as blocks propagated out of order. This metric might help to indicate a liveness problem where you reached maximum buffer size, but do not pop blocks since next expected not in the buffer. Normally this should not happen.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L61)<br><strong>Comment</strong>: <pre>You've declared an unexported type with a bunch of exported fields. I don't understand.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L61)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L70)<br><strong>Comment</strong>: <pre>You've declared an unexported type with a bunch of exported fields. I don't understand.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics.go#L70)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L47)<br><strong>Comment</strong>: <pre>You don't care if something unknown comes along? Seems you should...</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L47)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L53)<br><strong>Comment</strong>: <pre>You don't care if something unknown comes along? Seems you should...</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L53)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L64)<br><strong>Comment</strong>: <pre>You don't care if something unknown comes along? Seems you should...</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L64)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L81)<br><strong>Comment</strong>: <pre>fakeGauge.Returns(fakeGauge)</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L81)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L89](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L89)<br><strong>Comment</strong>: <pre>fakeHist.Returns(fakeHist)</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L89](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L89)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L97](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L97)<br><strong>Comment</strong>: <pre>fakeCounter.Returns(fakeCounter)</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L97](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L97)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L101)<br><strong>Comment</strong>: <pre>This test seems way more complicated than is necessary.

Seems like you can test elapsed time and height by calling commitBlock directly. With the right dependency setup, that would be synchronous.

For the metricsBuffer, you should be testing that directly as well. The metrics buffer wraps another buffer so should call the push and pop directly with a fake. Not only will that test the metrics, it will verify that you're using the wrapped PayloadsBuffer correctly.

That gets rid of all of this noise around the wait group setup and associated baggage.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L101)<br><strong>Comment</strong>: <pre>commitBlock is not exported so I rather not use it for testing
Now without push and pop metrics the test is simplified</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L146)<br><strong>Comment</strong>: <pre>assert.EqualValues is probably more appropriate than the cast.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/metrics_test.go#L146)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L156)<br><strong>Comment</strong>: <pre>Why a defer when there's absolutely no error checking or return in here?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L156)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L164](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L164)<br><strong>Comment</strong>: <pre>Why a defer when there's absolutely no error checking or return in here?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L164](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L164)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L174)<br><strong>Comment</strong>: <pre>I don't understand why this is needed unless things can arrive out of order.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L174)<br><strong>Comment</strong>: <pre>they can. the payload buffer is a reorder buffer.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L174)<br><strong>Comment</strong>: <pre>Thanks. Given that, can you describe when last pushed and last popped are useful from a monitoring perspective? In particular, given most of these values will be sampled on the order of seconds?

I can clearly see how the size of the buffer is useful...</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L174)<br><strong>Comment</strong>: <pre>I think you have a point. When this was done back in the day I think there is a periodical release, so I thought it can be useful for identifying bursts in real time. Given that it's periodical - there is no use.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/payloads_buffer.go#L174](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/payloads_buffer.go#L174)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state.go#L790](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state.go#L790)<br><strong>Comment</strong>: <pre>If you were to keep this, it should use strconv.Itoa. That said, this is not a label. This would generate a metric per block.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/state.go#L790](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state.go#L790)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L407](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L407)<br><strong>Comment</strong>: <pre>You're making no assertions here and you don't return a handle that can be used for assertions. Why not just use the disabled provider?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L407](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L407)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L1402](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L1402)<br><strong>Comment</strong>: <pre>You're making no assertions here. Why not just use the disabled provider?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L1402](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L1402)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L1634](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L1634)<br><strong>Comment</strong>: <pre>You're making no assertions here. Why not just use the disabled provider?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L1634](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L1634)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L1638](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L1638)<br><strong>Comment</strong>: <pre>You're making no assertions here. Why not just use the disabled provider?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/state_test.go#L1638](https://github.com/hyperledger-gerrit-archive/fabric/blob/b79fca45a5019450d460d661a0795459eb007950/gossip/state/state_test.go#L1638)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/15/2019, 6:31:48 AM<br><strong>UnmergedRevision</strong>: [ce1aa0b4af05bea0b45c4b525af4753268d25fbd](https://github.com/hyperledger-gerrit-archive/fabric/commit/ce1aa0b4af05bea0b45c4b525af4753268d25fbd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/15/2019, 6:56:00 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/15/2019, 7:00:09 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/15/2019, 7:38:32 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/15/2019, 8:48:56 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 1/15/2019, 1:56:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L13](https://github.com/hyperledger-gerrit-archive/fabric/blob/ce1aa0b4af05bea0b45c4b525af4753268d25fbd//COMMIT_MSG#L13)<br><strong>Comment</strong>: <pre>I think this needs to be removed.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L16](https://github.com/hyperledger-gerrit-archive/fabric/blob/ce1aa0b4af05bea0b45c4b525af4753268d25fbd//COMMIT_MSG#L16)<br><strong>Comment</strong>: <pre>I think this needs to be updated now.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L12](https://github.com/hyperledger-gerrit-archive/fabric/blob/ce1aa0b4af05bea0b45c4b525af4753268d25fbd/gossip/state/metrics.go#L12)<br><strong>Comment</strong>: <pre>Please see my other comment.  Doesn't look like counter is the correct type.

If this is in fact the current height (and I expect it is), the name should simply be "height" and the help should indicate more clearly.

Larger question: how does this relate to the ledger's view of the height?  Do they warrant separate metrics? (I'm fine with either answer.)</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics.go#L12](https://github.com/hyperledger-gerrit-archive/fabric/blob/ce1aa0b4af05bea0b45c4b525af4753268d25fbd/gossip/state/metrics.go#L12)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/state/state.go#L795](https://github.com/hyperledger-gerrit-archive/fabric/blob/ce1aa0b4af05bea0b45c4b525af4753268d25fbd/gossip/state/state.go#L795)<br><strong>Comment</strong>: <pre>This doesn't look right. Should be a gauge and Set should be used to set the height. As coded, it look like we'd see a value of over 5000 when we get to the one hundredth block.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/state.go#L795](https://github.com/hyperledger-gerrit-archive/fabric/blob/ce1aa0b4af05bea0b45c4b525af4753268d25fbd/gossip/state/state.go#L795)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/16/2019, 7:17:57 AM<br><strong>UnmergedRevision</strong>: [4889bbde676b77b775d247903d78f06b4ccdd7b7](https://github.com/hyperledger-gerrit-archive/fabric/commit/4889bbde676b77b775d247903d78f06b4ccdd7b7)<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/16/2019, 7:19:11 AM<br><strong>UnmergedRevision</strong>: [2b4fda9bb984279af2d7227a2cedd35c5dcd2123](https://github.com/hyperledger-gerrit-archive/fabric/commit/2b4fda9bb984279af2d7227a2cedd35c5dcd2123)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 7:23:30 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/16/2019, 7:28:24 AM<br><strong>UnmergedRevision</strong>: [40595c8ae2d9d5d478a995abbb496570bda8b383](https://github.com/hyperledger-gerrit-archive/fabric/commit/40595c8ae2d9d5d478a995abbb496570bda8b383)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 7:39:32 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 7:44:21 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 8:21:13 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 8:14:06 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Firas Qutishat - firas.qutishat@securekey.com<br><strong>Approved</strong>: 1/16/2019, 10:48:13 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/21/2019, 6:10:16 AM<br><strong>UnmergedRevision</strong>: [f9c6646ca78958a33313eaedca3476c656521612](https://github.com/hyperledger-gerrit-archive/fabric/commit/f9c6646ca78958a33313eaedca3476c656521612)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 7:39:32 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 7:44:21 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 8:21:13 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 8:14:06 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Firas Qutishat - firas.qutishat@securekey.com<br><strong>Approved</strong>: 1/16/2019, 10:48:13 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/metrics/metrics.go#L14](https://github.com/hyperledger-gerrit-archive/fabric/blob/f9c6646ca78958a33313eaedca3476c656521612/gossip/metrics/metrics.go#L14)<br><strong>Comment</strong>: <pre>if it's not too much to ask, can you put comments on the exported structs?

such as: 

// GossipMetrics defines metrics for gossip
type GossipMetrics struct {
....
}</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/metrics/metrics.go#L14](https://github.com/hyperledger-gerrit-archive/fabric/blob/f9c6646ca78958a33313eaedca3476c656521612/gossip/metrics/metrics.go#L14)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/metrics/metrics.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/f9c6646ca78958a33313eaedca3476c656521612/gossip/metrics/metrics.go#L28)<br><strong>Comment</strong>: <pre>seems kinda redundant to have a single field in a struct, why not move it to StateMetrics? is there a reason it's alone besides that we had 2 more fields?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/metrics/metrics.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/f9c6646ca78958a33313eaedca3476c656521612/gossip/metrics/metrics.go#L28)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L100](https://github.com/hyperledger-gerrit-archive/fabric/blob/f9c6646ca78958a33313eaedca3476c656521612/gossip/state/metrics_test.go#L100)<br><strong>Comment</strong>: <pre>can you also add an assertion that the right height was reported?</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/state/metrics_test.go#L100](https://github.com/hyperledger-gerrit-archive/fabric/blob/f9c6646ca78958a33313eaedca3476c656521612/gossip/state/metrics_test.go#L100)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/22/2019, 3:37:29 AM<br><strong>UnmergedRevision</strong>: [875e659724111ea5d6b972b1c8f37899d4ec6cc4](https://github.com/hyperledger-gerrit-archive/fabric/commit/875e659724111ea5d6b972b1c8f37899d4ec6cc4)<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Uploader</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>Created</strong>: 1/22/2019, 3:40:17 AM<br><strong>GitHubMergedRevision</strong>: [c61266c5defc658bfd099ace976219d18b5e08ec](https://github.com/hyperledger-gerrit-archive/fabric/commit/c61266c5defc658bfd099ace976219d18b5e08ec)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 10:42:54 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 10:57:54 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 11:40:02 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/22/2019, 11:32:32 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 1/22/2019, 4:03:18 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Yacov Manevich<br><strong>Merged</strong>: 1/23/2019, 10:41:54 AM<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 1/23/2019, 10:41:26 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/service/gossip_service.go#L23](https://github.com/hyperledger-gerrit-archive/fabric/blob/c61266c5defc658bfd099ace976219d18b5e08ec/gossip/service/gossip_service.go#L23)<br><strong>Comment</strong>: <pre>just fyi (no action) - we usually don't use mixed case on named imports or packages.</pre><strong>Commenter</strong>: Hagar Meir - hagar.meir@ibm.com<br><strong>CommentLine</strong>: [gossip/service/gossip_service.go#L23](https://github.com/hyperledger-gerrit-archive/fabric/blob/c61266c5defc658bfd099ace976219d18b5e08ec/gossip/service/gossip_service.go#L23)<br><strong>Comment</strong>: <pre>ok, no problem</pre></blockquote>