<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 32892<br><strong>Subject</strong>: [FAB-16026] Implement PvtdataProvider<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/13/2019, 2:44:22 PM<br><strong>LastUpdated</strong>: 10/2/2019, 4:51:52 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-16026] Implement PvtdataProvider

A PvtdataProvider takes numerous dependencies from gossip's
coordinator required for retrieving private data. Ledger will use the
provider at commit time to retrieve necessary private data for the queried
ledger.TxPvtdataInfo and then purge txs from the transient store through
invocation of the Purge() method on the RetrievedPvtdata

Change-Id: I3c72e6dd1c0620eaee8d8dc9fae75cef7e2b7059
Signed-off-by: Danny Cao <dcao@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/13/2019, 2:44:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/13/2019, 2:44:33 PM<br><strong>Message</strong>: <pre>Set Work In Progress</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2019, 2:47:05 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16383/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2019, 2:47:34 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2019, 2:47:36 PM<br><strong>Message</strong>: <pre>Patch Set 1:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/13/2019, 2:48:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16383/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16383</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/14/2019, 10:57:40 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2019, 11:01:14 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16412/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2019, 11:01:43 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2019, 11:01:44 AM<br><strong>Message</strong>: <pre>Patch Set 2:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2019, 11:02:27 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16412/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16412</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/16/2019, 3:26:56 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 3:12:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 3:13:07 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16665/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 3:13:54 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 3:13:56 PM<br><strong>Message</strong>: <pre>Patch Set 3:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 3:14:42 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16665/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16665</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 10:40:52 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 10:46:39 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16738/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 10:47:26 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 10:47:27 AM<br><strong>Message</strong>: <pre>Patch Set 4:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 10:48:22 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16738/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16738</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/23/2019, 11:36:47 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 11:41:51 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16741/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 11:42:38 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 11:42:39 AM<br><strong>Message</strong>: <pre>Patch Set 5:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/23/2019, 11:43:34 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16741/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16741</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/28/2019, 4:35:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 4:40:41 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16834/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 4:42:54 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 4:42:55 PM<br><strong>Message</strong>: <pre>Patch Set 6:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 4:44:14 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16834/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16834</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/28/2019, 4:57:58 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 5:01:29 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16836/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 5:02:36 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 5:02:38 PM<br><strong>Message</strong>: <pre>Patch Set 7:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 5:03:31 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16836/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16836</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2019, 2:19:50 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2019, 2:21:58 PM<br><strong>Message</strong>: <pre>Patch Set 8:

This change is ready for review.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2019, 2:21:58 PM<br><strong>Message</strong>: <pre>Set Ready For Review</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:25:12 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16862/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:26:18 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:29:05 PM<br><strong>Message</strong>: <pre>Patch Set 8: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:30:38 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16862/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16862</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2019, 2:33:58 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:37:02 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16866/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:37:51 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:42:37 PM<br><strong>Message</strong>: <pre>Patch Set 9: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 2:43:27 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16866/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16866</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2019, 3:10:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:13:54 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16869/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:14:57 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:21:51 PM<br><strong>Message</strong>: <pre>Patch Set 10: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:22:42 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16869/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16869</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:25:27 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14886/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:25:27 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11527/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:26:24 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 3:26:29 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 4:02:01 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 4:48:35 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 4:49:27 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11527/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11527

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14886/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14886</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/29/2019, 4:50:47 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 4:55:10 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11529/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 4:56:00 PM<br><strong>Message</strong>: <pre>Patch Set 10: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:05:32 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:06:15 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11529/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11529</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/30/2019, 10:27:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:27:27 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16888/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:28:18 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:35:28 AM<br><strong>Message</strong>: <pre>Patch Set 11: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:36:26 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16888/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16888</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:39:11 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14902/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:39:34 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11548/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:39:55 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:40:19 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 11:09:23 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 11:49:18 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 11:50:02 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14902/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14902

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11548/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11548</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 9/3/2019, 3:26:33 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(3 comments)

Haven't had a chance to review all the code in detail yet, but a few structural comments.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/4/2019, 9:12:43 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(3 comments)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/4/2019, 3:08:15 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:11:55 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16980/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:12:47 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:19:14 PM<br><strong>Message</strong>: <pre>Patch Set 12: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:19:58 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16980/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16980</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:22:53 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11616/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:23:12 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14975/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:23:39 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:23:58 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 3:53:19 PM<br><strong>Message</strong>: <pre>Patch Set 12: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/4/2019, 3:57:29 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 4:40:48 PM<br><strong>Message</strong>: <pre>Patch Set 12: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2019, 4:41:42 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14975/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14975

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11616/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11616</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/5/2019, 10:28:58 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2019, 10:32:06 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14981/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2019, 10:33:04 AM<br><strong>Message</strong>: <pre>Patch Set 12: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2019, 11:03:27 AM<br><strong>Message</strong>: <pre>Patch Set 12: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2019, 11:04:16 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14981/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14981</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/6/2019, 10:26:05 AM<br><strong>Message</strong>: <pre>Patch Set 13: Patch Set 12 was rebased</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/13/2019, 11:33:00 AM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:36:35 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17154/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:37:23 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:44:29 AM<br><strong>Message</strong>: <pre>Patch Set 14: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:45:27 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17154/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17154</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:47:34 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15123/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:47:41 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11761/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:48:21 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 11:48:27 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 12:18:26 PM<br><strong>Message</strong>: <pre>Patch Set 14: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 12:59:00 PM<br><strong>Message</strong>: <pre>Patch Set 14: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/13/2019, 12:59:46 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15123/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15123

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11761/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11761</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/16/2019, 10:05:54 AM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:08:59 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17190/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:10:01 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:16:54 AM<br><strong>Message</strong>: <pre>Patch Set 15: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:17:47 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17190/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17190</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:22:42 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15155/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:22:49 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11794/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:23:37 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 10:23:42 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 11:08:57 AM<br><strong>Message</strong>: <pre>Patch Set 15: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 11:41:35 AM<br><strong>Message</strong>: <pre>Patch Set 15: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/16/2019, 11:42:34 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15155/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15155

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11794/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11794</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 9/17/2019, 12:26:50 AM<br><strong>Message</strong>: <pre>Patch Set 15:

(20 comments)

A number of comments.  But mostly all along the same themes:

1) There is a lot of state being passed between method calls via the pointer receiver.  Especially given the names of the methods, and what I can discern of the intent, I think a lot of these method calls could be modified to return their value, rather than set it as a side-effect.
2) There's some general golang best practices being violated here.  The unnecessary interface definition, the unexported concrete type, returns including both errors and concrete values.
3) There's some consistency problems logging and error reporting.  This last one I know you have simply inherited from the existing code, but I think there's a lot that could be improved.

Sorry for the review volume, but it's a lot of code :)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/17/2019, 10:09:05 AM<br><strong>Message</strong>: <pre>Patch Set 15:

> Patch Set 15:
> 
> (20 comments)
> 
> A number of comments.  But mostly all along the same themes:
> 
> 1) There is a lot of state being passed between method calls via the pointer receiver.  Especially given the names of the methods, and what I can discern of the intent, I think a lot of these method calls could be modified to return their value, rather than set it as a side-effect.
> 2) There's some general golang best practices being violated here.  The unnecessary interface definition, the unexported concrete type, returns including both errors and concrete values.
> 3) There's some consistency problems logging and error reporting.  This last one I know you have simply inherited from the existing code, but I think there's a lot that could be improved.
> 
> Sorry for the review volume, but it's a lot of code :)

Thanks for taking the time to go through this! As you mentioned a lot of this was inherited from the existing coordinator code. I'll go through and fix things up :)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/17/2019, 2:35:14 PM<br><strong>Message</strong>: <pre>Patch Set 15:

(15 comments)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/17/2019, 2:35:47 PM<br><strong>Message</strong>: <pre>Patch Set 15:

(2 comments)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/17/2019, 4:29:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 16.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:32:02 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17234/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:32:46 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:39:39 PM<br><strong>Message</strong>: <pre>Patch Set 16: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:39:45 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15188/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:39:45 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11831/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:40:28 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17234/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17234</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:40:31 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 4:40:32 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Starting unit tests</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/17/2019, 4:45:08 PM<br><strong>Message</strong>: <pre>Uploaded patch set 17: Patch Set 16 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 5:11:06 PM<br><strong>Message</strong>: <pre>Patch Set 16: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 5:47:12 PM<br><strong>Message</strong>: <pre>Patch Set 16: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2019, 5:47:56 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15188/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15188

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11831/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11831</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 11:37:49 AM<br><strong>Message</strong>: <pre>Uploaded patch set 18.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 11:41:21 AM<br><strong>Message</strong>: <pre>Patch Set 18:

(1 comment)

Should have covered all the mentioned points in the latest patchset, also included a followup CR converting the RetrievedPvtdata into an interface to set up for the Commit change in ledger interface. Because that change probably won't get merged into 2.0 but the blocks router extension work for blocksprovider needs the private data provider, I've included the interface change on this stack</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:43:06 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17267/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:43:52 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:51:11 AM<br><strong>Message</strong>: <pre>Patch Set 18: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:52:11 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17267/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17267</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:54:50 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15208/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:55:31 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11855/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:55:36 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 11:56:20 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 12:26:05 PM<br><strong>Message</strong>: <pre>Patch Set 18: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 1:04:59 PM<br><strong>Message</strong>: <pre>Patch Set 18: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 1:05:44 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15208/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15208

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11855/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11855</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 2:51:06 PM<br><strong>Message</strong>: <pre>Uploaded patch set 19.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 2:57:04 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17277/</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 2:57:40 PM<br><strong>Message</strong>: <pre>Patch Set 20: Patch Set 19 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 2:57:55 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:04:40 PM<br><strong>Message</strong>: <pre>Patch Set 19: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:04:48 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15217/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:05:27 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17277/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17277</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:05:39 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting unit tests</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 3:07:54 PM<br><strong>Message</strong>: <pre>Uploaded patch set 21.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:10:31 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11867/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:11:48 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17286/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:12:22 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:15:11 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:22:16 PM<br><strong>Message</strong>: <pre>Patch Set 21: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:22:23 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11875/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:22:23 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15225/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:23:02 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17286/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17286</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:23:05 PM<br><strong>Message</strong>: <pre>Patch Set 19: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15217/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15217

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11867/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11867</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:23:35 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:23:55 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 3:52:20 PM<br><strong>Message</strong>: <pre>Patch Set 21: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 3:57:18 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 4:00:24 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17296/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 4:01:16 PM<br><strong>Message</strong>: <pre>Patch Set 21: -F2-DocBuild -F1-VerifyBuild -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/18/2019, 4:04:07 PM<br><strong>Message</strong>: <pre>Patch Set 22: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 4:08:18 PM<br><strong>Message</strong>: <pre>Patch Set 21: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 4:49:30 PM<br><strong>Message</strong>: <pre>Patch Set 21: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/18/2019, 4:50:33 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15225/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15225

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11875/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11875

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17296/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17296</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/19/2019, 10:28:46 AM<br><strong>Message</strong>: <pre>Uploaded patch set 23: Patch Set 22 was rebased.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/19/2019, 10:38:30 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:43:31 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17326/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:44:26 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:51:24 AM<br><strong>Message</strong>: <pre>Patch Set 23: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:54:25 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15243/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:55:22 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:55:40 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11895/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 10:56:38 AM<br><strong>Message</strong>: <pre>Patch Set 23:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 11:26:29 AM<br><strong>Message</strong>: <pre>Patch Set 23: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 12:25:57 PM<br><strong>Message</strong>: <pre>Patch Set 23: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/19/2019, 12:26:54 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17326/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17326

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15243/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15243

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11895/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11895</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/19/2019, 8:03:08 PM<br><strong>Message</strong>: <pre>Patch Set 23:

(6 comments)

Danny, since this is a bit large, I would review it over a few of iterations. Here are first set of comments.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/20/2019, 9:43:52 AM<br><strong>Message</strong>: <pre>Patch Set 23:

(6 comments)

Thanks Manish! Great catches</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/20/2019, 9:51:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 24.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/20/2019, 9:53:50 AM<br><strong>Message</strong>: <pre>Uploaded patch set 25.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 9:53:54 AM<br><strong>Message</strong>: <pre>Patch Set 24:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 9:57:41 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17348/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 9:58:27 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:01:56 AM<br><strong>Message</strong>: <pre>Patch Set 25: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:02:04 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11911/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:02:04 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15259/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:02:53 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17348/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17348</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:02:57 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:02:58 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 10:35:43 AM<br><strong>Message</strong>: <pre>Patch Set 25: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 11:21:50 AM<br><strong>Message</strong>: <pre>Patch Set 25: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/20/2019, 11:22:23 AM<br><strong>Message</strong>: <pre>Patch Set 23:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 11:22:42 AM<br><strong>Message</strong>: <pre>Patch Set 25:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15259/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15259

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11911/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11911</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/20/2019, 11:27:11 AM<br><strong>Message</strong>: <pre>Patch Set 23:

(1 comment)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/20/2019, 11:42:57 AM<br><strong>Message</strong>: <pre>Patch Set 25:

(1 comment)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/20/2019, 12:20:38 PM<br><strong>Message</strong>: <pre>Patch Set 25:

(1 comment)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/20/2019, 12:21:26 PM<br><strong>Message</strong>: <pre>Uploaded patch set 26.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:26:43 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17351/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:27:36 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:31:00 PM<br><strong>Message</strong>: <pre>Patch Set 26: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:31:49 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17351/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17351</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:34:13 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15263/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:35:08 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:37:35 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11915/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 12:38:43 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 1:06:05 PM<br><strong>Message</strong>: <pre>Patch Set 26: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 2:11:34 PM<br><strong>Message</strong>: <pre>Patch Set 26: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/20/2019, 2:12:48 PM<br><strong>Message</strong>: <pre>Patch Set 26:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15263/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15263

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11915/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11915</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/20/2019, 7:07:43 PM<br><strong>Message</strong>: <pre>Patch Set 25:

(17 comments)

Next iteration of comments</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/23/2019, 3:39:42 PM<br><strong>Message</strong>: <pre>Patch Set 26:

(17 comments)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/23/2019, 3:46:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 27.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:49:09 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17396/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:50:01 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:53:40 PM<br><strong>Message</strong>: <pre>Patch Set 27: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:53:49 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11936/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:53:49 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15284/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:54:38 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17396/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17396</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:54:39 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 3:54:40 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 4:23:08 PM<br><strong>Message</strong>: <pre>Patch Set 27: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 5:14:31 PM<br><strong>Message</strong>: <pre>Patch Set 27: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2019, 5:15:14 PM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15284/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15284

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11936/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11936</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/24/2019, 11:06:09 AM<br><strong>Message</strong>: <pre>Patch Set 27:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 11:09:20 AM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15302/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 11:10:17 AM<br><strong>Message</strong>: <pre>Patch Set 27: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 11:44:47 AM<br><strong>Message</strong>: <pre>Patch Set 27: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 11:45:38 AM<br><strong>Message</strong>: <pre>Patch Set 27:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15302/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15302</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/24/2019, 1:49:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 28.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/24/2019, 1:49:56 PM<br><strong>Message</strong>: <pre>Patch Set 27:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 1:53:16 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17446/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 1:54:08 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 1:57:44 PM<br><strong>Message</strong>: <pre>Patch Set 28: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 1:58:45 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17446/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17446</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 2:02:01 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15313/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 2:02:29 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11966/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 2:03:13 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 2:03:25 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 2:43:41 PM<br><strong>Message</strong>: <pre>Patch Set 28: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 3:31:31 PM<br><strong>Message</strong>: <pre>Patch Set 28: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/24/2019, 3:32:27 PM<br><strong>Message</strong>: <pre>Patch Set 28:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15313/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15313

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11966/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11966</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/25/2019, 11:50:41 AM<br><strong>Message</strong>: <pre>Uploaded patch set 29.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 11:54:15 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17476/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 11:55:09 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting verify build</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/25/2019, 11:57:13 AM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 11:58:24 AM<br><strong>Message</strong>: <pre>Patch Set 29: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 11:59:14 AM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17476/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17476</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 12:01:05 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15339/ (1/2)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/25/2019, 12:01:10 PM<br><strong>Message</strong>: <pre>Patch Set 29:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 12:01:27 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11992/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 12:02:00 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 12:02:16 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 12:36:35 PM<br><strong>Message</strong>: <pre>Patch Set 29: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 1:29:38 PM<br><strong>Message</strong>: <pre>Patch Set 29: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 1:30:30 PM<br><strong>Message</strong>: <pre>Patch Set 29:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15339/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15339

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11992/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11992</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/25/2019, 2:07:49 PM<br><strong>Message</strong>: <pre>Uploaded patch set 30.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/25/2019, 2:08:18 PM<br><strong>Message</strong>: <pre>Patch Set 30:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:13:35 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17486/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:14:21 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:17:39 PM<br><strong>Message</strong>: <pre>Patch Set 30: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:18:35 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17486/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17486</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:20:42 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15345/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:21:26 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:21:36 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12000/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:22:22 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Starting Integration tests</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/25/2019, 2:25:00 PM<br><strong>Message</strong>: <pre>Patch Set 30:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 2:49:59 PM<br><strong>Message</strong>: <pre>Patch Set 30: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 3:48:26 PM<br><strong>Message</strong>: <pre>Patch Set 30: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/25/2019, 3:49:18 PM<br><strong>Message</strong>: <pre>Patch Set 30:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15345/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15345

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12000/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12000</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/25/2019, 11:14:04 PM<br><strong>Message</strong>: <pre>Patch Set 30:

(13 comments)

Looks much organized and easy to follow now.
Mostly minor cleanup related comments except a couple minor corrections. I feel that this is almost there. 

Haven't looked at the test file yet</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/26/2019, 11:04:09 AM<br><strong>Message</strong>: <pre>Uploaded patch set 31.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/26/2019, 11:04:16 AM<br><strong>Message</strong>: <pre>Patch Set 30:

(13 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:04:21 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17507/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:05:19 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:08:10 AM<br><strong>Message</strong>: <pre>Patch Set 31: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:08:16 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12020/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:08:16 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15368/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:08:55 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17507/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17507</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:09:26 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:09:28 AM<br><strong>Message</strong>: <pre>Patch Set 31:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 11:38:52 AM<br><strong>Message</strong>: <pre>Patch Set 31: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/26/2019, 12:09:31 PM<br><strong>Message</strong>: <pre>Uploaded patch set 32.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:09:42 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17527/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:10:53 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:14:35 PM<br><strong>Message</strong>: <pre>Patch Set 32: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:14:42 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15371/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:14:42 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12024/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:15:32 PM<br><strong>Message</strong>: <pre>Patch Set 31: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12020/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12020

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15368/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15368</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:15:40 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:15:45 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17527/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17527</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:15:45 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 12:46:55 PM<br><strong>Message</strong>: <pre>Patch Set 32: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 1:27:14 PM<br><strong>Message</strong>: <pre>Patch Set 32: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2019, 1:27:50 PM<br><strong>Message</strong>: <pre>Patch Set 32:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15371/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15371

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12024/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12024</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/27/2019, 3:47:39 PM<br><strong>Message</strong>: <pre>Patch Set 32: Code-Review+1

(13 comments)

A few comments, mainly on the tests.

I think that two more tests should be added
1) Test under the situation when extra data is present in the sources 
2) purgeByHeight taking place
However, since, this CR is already quite big so lets merge this first with fixing other comments and then you can add these two tests in a future CR.</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/30/2019, 11:39:01 AM<br><strong>Message</strong>: <pre>Patch Set 32:

(13 comments)</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/30/2019, 11:46:01 AM<br><strong>Message</strong>: <pre>Uploaded patch set 33.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:46:14 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17612/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:46:59 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:49:56 AM<br><strong>Message</strong>: <pre>Patch Set 33: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:50:04 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15432/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:50:04 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12088/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:50:42 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17612/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17612</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:50:55 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 11:50:56 AM<br><strong>Message</strong>: <pre>Patch Set 33:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 12:20:05 PM<br><strong>Message</strong>: <pre>Patch Set 33: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 12:59:42 PM<br><strong>Message</strong>: <pre>Patch Set 33: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 1:00:35 PM<br><strong>Message</strong>: <pre>Patch Set 33:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12088/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12088

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15432/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15432</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/30/2019, 1:53:29 PM<br><strong>Message</strong>: <pre>Uploaded patch set 34.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 1:53:44 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17618/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 1:54:37 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 1:57:53 PM<br><strong>Message</strong>: <pre>Patch Set 34: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 1:58:45 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17618/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17618</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:00:14 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12095/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:00:59 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15439/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:01:05 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:01:58 PM<br><strong>Message</strong>: <pre>Patch Set 34:

Starting unit tests</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/30/2019, 2:30:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 35.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:32:49 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17621/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:33:35 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:36:56 PM<br><strong>Message</strong>: <pre>Patch Set 35: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:37:52 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17621/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17621</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:38:16 PM<br><strong>Message</strong>: <pre>Patch Set 34: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12095/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12095

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15439/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15439</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:39:47 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12097/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:40:00 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15441/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:40:30 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:40:45 PM<br><strong>Message</strong>: <pre>Patch Set 35:

Starting unit tests</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 9/30/2019, 2:46:15 PM<br><strong>Message</strong>: <pre>Uploaded patch set 36.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:46:30 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17623/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:47:46 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Starting verify build</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/30/2019, 2:51:11 PM<br><strong>Message</strong>: <pre>Patch Set 36: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:52:19 PM<br><strong>Message</strong>: <pre>Patch Set 36: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:53:06 PM<br><strong>Message</strong>: <pre>Patch Set 35: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12097/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12097

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15441/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15441</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:53:35 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/17623/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/17623</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:55:30 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12099/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:56:23 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15444/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:56:24 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 2:57:05 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 3:27:31 PM<br><strong>Message</strong>: <pre>Patch Set 36: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 4:24:32 PM<br><strong>Message</strong>: <pre>Patch Set 36: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/30/2019, 4:25:48 PM<br><strong>Message</strong>: <pre>Patch Set 36:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12099/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12099

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15444/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15444</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 10/1/2019, 11:19:14 AM<br><strong>Message</strong>: <pre>Uploaded patch set 37: Patch Set 36 was rebased.</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/1/2019, 2:28:00 PM<br><strong>Message</strong>: <pre>Patch Set 37: Code-Review+2

(11 comments)

Since it was already deeply code reviewed, I reviewed mostly for readability. Can go ahead and merge and then fix up the cosmetic changes in subsequent CR.</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 10/1/2019, 2:28:03 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by David Enyeart</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/1/2019, 2:30:57 PM<br><strong>Message</strong>: <pre>Patch Set 37:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7792/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/1/2019, 2:31:38 PM<br><strong>Message</strong>: <pre>Patch Set 37:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6493/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/1/2019, 3:14:20 PM<br><strong>Message</strong>: <pre>Patch Set 37:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7792/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/7792

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6493/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/6493</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 10/2/2019, 4:51:52 PM<br><strong>Message</strong>: <pre>Patch Set 37:

(11 comments)</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/13/2019, 2:44:22 PM<br><strong>UnmergedRevision</strong>: [d431433d888c06f32aa6ec211cb56581f3de37da](https://github.com/hyperledger-gerrit-archive/fabric/commit/d431433d888c06f32aa6ec211cb56581f3de37da)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/14/2019, 10:57:40 AM<br><strong>UnmergedRevision</strong>: [0f9e17b91bae473109fc69600101c769be6e699f](https://github.com/hyperledger-gerrit-archive/fabric/commit/0f9e17b91bae473109fc69600101c769be6e699f)<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/21/2019, 3:12:59 PM<br><strong>UnmergedRevision</strong>: [496aa733deac72e6767d1f71d38fc2bde5f2a1b9](https://github.com/hyperledger-gerrit-archive/fabric/commit/496aa733deac72e6767d1f71d38fc2bde5f2a1b9)<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/23/2019, 10:40:52 AM<br><strong>UnmergedRevision</strong>: [9dc5f680720dfc64738177e4f6e2586dba00e56a](https://github.com/hyperledger-gerrit-archive/fabric/commit/9dc5f680720dfc64738177e4f6e2586dba00e56a)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/23/2019, 11:36:47 AM<br><strong>UnmergedRevision</strong>: [b84203b9868cd9522c2289decf3b2288d836e904](https://github.com/hyperledger-gerrit-archive/fabric/commit/b84203b9868cd9522c2289decf3b2288d836e904)<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/28/2019, 4:35:19 PM<br><strong>UnmergedRevision</strong>: [d35dc5ab53b63febd193b6b9e750dece23dcd27f](https://github.com/hyperledger-gerrit-archive/fabric/commit/d35dc5ab53b63febd193b6b9e750dece23dcd27f)<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/28/2019, 4:57:58 PM<br><strong>UnmergedRevision</strong>: [30590445bbca3d6d8ef15274b95fb34ab4a349dd](https://github.com/hyperledger-gerrit-archive/fabric/commit/30590445bbca3d6d8ef15274b95fb34ab4a349dd)<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/29/2019, 2:19:50 PM<br><strong>UnmergedRevision</strong>: [946e320b7040a9302941437a02d61dae73109cd7](https://github.com/hyperledger-gerrit-archive/fabric/commit/946e320b7040a9302941437a02d61dae73109cd7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 2:29:05 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/29/2019, 2:33:58 PM<br><strong>UnmergedRevision</strong>: [403b994a046e38599feb8c239f8e50a4833e5e59](https://github.com/hyperledger-gerrit-archive/fabric/commit/403b994a046e38599feb8c239f8e50a4833e5e59)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 2:42:37 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/29/2019, 3:10:00 PM<br><strong>UnmergedRevision</strong>: [07c099c0c7e8d031e26b4d68923768a9d7e71d5e](https://github.com/hyperledger-gerrit-archive/fabric/commit/07c099c0c7e8d031e26b4d68923768a9d7e71d5e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 3:21:51 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 3:21:51 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 6:05:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 4:02:01 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 8/30/2019, 10:27:17 AM<br><strong>UnmergedRevision</strong>: [c1ccb4bb1816512c6560e987b924013c939391b8](https://github.com/hyperledger-gerrit-archive/fabric/commit/c1ccb4bb1816512c6560e987b924013c939391b8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 10:35:28 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 10:35:28 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 11:49:18 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 11:09:23 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L668](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/core/ledger/ledger_interface.go#L668)<br><strong>Comment</strong>: <pre>Where will the actual consumers of these interfaces live? Can we declare them there?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L668](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/core/ledger/ledger_interface.go#L668)<br><strong>Comment</strong>: <pre>From what I understand, the TxPvtdataInfo will be created by ledger after calling ledger's Commit. The ledger portion hasn't been implemented yet hence why they live here for now. Manish may be able to comment more about where we want to put this once the ledger portion is complete. As for the BlockPvtdataProvider itself, I can move it to the pvtdataprovider.go or entirely remove it if we want to do away with the interface.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L668](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/core/ledger/ledger_interface.go#L668)<br><strong>Comment</strong>: <pre>I would definitely do away with the interface until we actually have need of it.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L25)<br><strong>Comment</strong>: <pre>If we're implementing new code, I'd rather we not follow our old conventions of creating unexported impl types unless there is a compelling reason.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L25)<br><strong>Comment</strong>: <pre>I think this largely depends on whether we want to keep the interface or not. No one else uses the impl explicitly hence why it's unexported.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L25)<br><strong>Comment</strong>: <pre>I'd say let's get rid of the interface for now, and export the type.  We gain nothing by exporting an interface type instead of a struct type.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L25)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L54](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L54)<br><strong>Comment</strong>: <pre>Why hide this as an interface?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L54](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L54)<br><strong>Comment</strong>: <pre>For now it was mainly for the purposes of mocking for tests, but I guess we discussed before we might as well forget about the interface until we actually need it for tests. I can go ahead and replace it to return an exported impl struct type and then reconsider converting to an interface when testing need arises. I don't believe I need to mock it for any of the coordinator tests so it would mainly be for ledger tests once that portion has been implemented by Manish.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L54](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L54)<br><strong>Comment</strong>: <pre>If ledger tests need to mock this, then they can/should absolutely define an interface locally, and they may be initialized with this concrete implementation in the real case.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L54](https://github.com/hyperledger-gerrit-archive/fabric/blob/c1ccb4bb1816512c6560e987b924013c939391b8/gossip/privdata/pvtdataprovider.go#L54)<br><strong>Comment</strong>: <pre>Ack</pre></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/4/2019, 3:08:15 PM<br><strong>UnmergedRevision</strong>: [ba9ede1a61586cc98252cbc79c08e5cee1a584ba](https://github.com/hyperledger-gerrit-archive/fabric/commit/ba9ede1a61586cc98252cbc79c08e5cee1a584ba)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2019, 3:19:14 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2019, 3:19:14 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2019, 4:40:48 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2019, 11:03:27 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/6/2019, 10:26:05 AM<br><strong>UnmergedRevision</strong>: [892d1d34d84178cf8cb7610031164b80bff9a46d](https://github.com/hyperledger-gerrit-archive/fabric/commit/892d1d34d84178cf8cb7610031164b80bff9a46d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2019, 3:19:14 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2019, 3:19:14 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2019, 4:40:48 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2019, 11:03:27 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/13/2019, 11:33:00 AM<br><strong>UnmergedRevision</strong>: [0bc137f6d06a73c89465aece5607c5326636d32e](https://github.com/hyperledger-gerrit-archive/fabric/commit/0bc137f6d06a73c89465aece5607c5326636d32e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/13/2019, 11:44:29 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/13/2019, 11:44:29 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/13/2019, 12:59:00 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/13/2019, 12:18:26 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/16/2019, 10:05:54 AM<br><strong>UnmergedRevision</strong>: [ffa772084525b910322bd02978e0f5ff5c0e64a6](https://github.com/hyperledger-gerrit-archive/fabric/commit/ffa772084525b910322bd02978e0f5ff5c0e64a6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/16/2019, 10:16:54 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/16/2019, 10:16:54 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/16/2019, 11:41:35 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/16/2019, 11:08:57 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L33)<br><strong>Comment</strong>: <pre>It seems like privateInfo isn't really state of this structure, but intermediate state produced and passed around the assorted functions invoked by RetrievePrivateData?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L33](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L33)<br><strong>Comment</strong>: <pre>Yep, it was used similarly in the coordinator code.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L40)<br><strong>Comment</strong>: <pre>What's the rational for embedding this?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L40)<br><strong>Comment</strong>: <pre>None in particular, I think I may have copied the embedding from how it was originally used in the coordinator (ie it's embedded there in the coordinator's unnamed support field). I'll change it to a named dependency.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L59)<br><strong>Comment</strong>: <pre>This seems to be the only bit which is being initialized in a way that requires a constructor?

Why not simply have a `NewBlockPvtData` constructor, and have the caller initialize the rest of the fields directly?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L59)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L84)<br><strong>Comment</strong>: <pre>I'd likewise suggest that for many of these returned errors, it would be useful to wrap them with a message, indicating the additional context that this caller has.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L84)<br><strong>Comment</strong>: <pre>Why are we returning private data and an error?  In general, I would expect an error to signal to the caller that the other output cannot be trusted.

This comment could be repeated for every return in this function.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L84)<br><strong>Comment</strong>: <pre>I think this was an oversight when I was originally structuring the code. I wasn't entirely sure how the consumer would handle errors which is why I originally wanted it to return any successfully retrieve private data on a best effort basis (ie if we were successfully able to retrieve from cache but failed to find missing private data somehow). I eventually restructured that portion such that it doesn't fill pdp.blockPvtdata until the end anyways so as you mentioned it's unnecessary to return the blockPvtdata on error since it will just be empty. I'll change it to return nil on error.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L84)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L104](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L104)<br><strong>Comment</strong>: <pre>Since the blocks provider is a channel scoped, and in fact block scoped, it seems like we'd be far better off injecting a named logger with these parameters.  Otherwise, we have many contexts such as the warnings above and below which lack a channel context.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L104](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L104)<br><strong>Comment</strong>: <pre>Makes sense, I'll pass in a named logger</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L113](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L113)<br><strong>Comment</strong>: <pre>As a common theme, I find it odd that sometimes, state is passed via struct fields (for instance, the pvt.privateInfo.missingKeys is referenced in fetchPvtdataFromPeers), but other state is passed as parameters (for instance, the pvtData var here).</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L113](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L113)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L115](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L115)<br><strong>Comment</strong>: <pre>I'm confused by this comment.  If we succeeded, then err is nil, and we sleep anyway?  Unless there are no more missing keys, then we break?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L115](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L115)<br><strong>Comment</strong>: <pre>This comment was supposed to be slightly lower and say "If succeeded to fetch everything, break to skip sleep" since success is implied by len(privateInfo.missingKeys) == 0, not by err not being nil</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L123](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L123)<br><strong>Comment</strong>: <pre>Having real calls to sleep in production code always worry me.  How can we test this path (in a parallel non-racy way) quickly?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L145](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L145)<br><strong>Comment</strong>: <pre>Maybe this is some existing terminology, but 'Done' is a bit unintuitive to me here, it seems like 'Purge()' might be a better name?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L145](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L145)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L169)<br><strong>Comment</strong>: <pre>So is pvdataCollections the cache?  Given the naming, this was a bit of a surprise to me reading.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L169)<br><strong>Comment</strong>: <pre>Yes, I think it was originally called something like blockPvtData originally in coordinator which I guess is just as confusing given we're ultimately retrieving blockPvtdata. There seem to be a lot of overloaded terms used in both the existing path and the refactor here. I'll go through and rename variables and some of the method names to be more reflective of what they are/do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L192](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L192)<br><strong>Comment</strong>: <pre>I don't mean to bikeshed over names, but 'listMissingPvtdata', like 'getBlockPvtData' implies to me that it should be returning a result, not mutating underlying state.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L192](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L192)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L224](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L224)<br><strong>Comment</strong>: <pre>I'm guessing this is just maintaining some compatibility, but it seems to me like failure to obtain private data should _never_ have an impact on transaction validity, and as such, this error type is quite surprising to me.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L224](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L224)<br><strong>Comment</strong>: <pre>This existed in the coordinator flow as well when getting the access policy for a collection. I'll convert to a regular error.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L245](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L245)<br><strong>Comment</strong>: <pre>Hopefully with Ale's changes in the policy framework we can finally kill this soon.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L245](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L245)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L269](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L269)<br><strong>Comment</strong>: <pre>It really seems like we could restructure this, and many other of these functions to have a proper return value, rather than performing the mutation on local state?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L269](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L269)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L404](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L404)<br><strong>Comment</strong>: <pre>If we simply passed in metrics that had already been initialized with the channel, couldn't we skip the 'With' step and eliminate these functions?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L404](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L404)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L406](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L406)<br><strong>Comment</strong>: <pre>This is a very confusing function name to me.  How does something that "get block private data" return nothing?  It seems to set some internal state instead.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L406](https://github.com/hyperledger-gerrit-archive/fabric/blob/ffa772084525b910322bd02978e0f5ff5c0e64a6/gossip/privdata/pvtdataprovider.go#L406)<br><strong>Comment</strong>: <pre>Ack</pre></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/17/2019, 4:29:19 PM<br><strong>UnmergedRevision</strong>: [f777d048624b67fd5479856576dff797c758b66a](https://github.com/hyperledger-gerrit-archive/fabric/commit/f777d048624b67fd5479856576dff797c758b66a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2019, 4:39:39 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2019, 4:39:39 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2019, 5:47:12 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2019, 5:11:06 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/17/2019, 4:45:08 PM<br><strong>UnmergedRevision</strong>: [dde55cce3fce9c2254ceab14c10ea8da0d4ba66e](https://github.com/hyperledger-gerrit-archive/fabric/commit/dde55cce3fce9c2254ceab14c10ea8da0d4ba66e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2019, 4:39:39 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2019, 4:39:39 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/18/2019, 11:37:49 AM<br><strong>UnmergedRevision</strong>: [fdc8dc8eeae819fa4050b3d95656e1b99857deab](https://github.com/hyperledger-gerrit-archive/fabric/commit/fdc8dc8eeae819fa4050b3d95656e1b99857deab)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 11:51:11 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 11:51:11 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 1:04:59 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 12:26:05 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/18/2019, 2:51:06 PM<br><strong>UnmergedRevision</strong>: [453e1762bf0737acb49ca14c441fbab68d3d2b7c](https://github.com/hyperledger-gerrit-archive/fabric/commit/453e1762bf0737acb49ca14c441fbab68d3d2b7c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 3:04:40 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 3:04:40 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 3:23:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/18/2019, 2:57:40 PM<br><strong>UnmergedRevision</strong>: [29241417c8ffd1bbfdad6ea1c39d4c869df4b296](https://github.com/hyperledger-gerrit-archive/fabric/commit/29241417c8ffd1bbfdad6ea1c39d4c869df4b296)<br><br></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/18/2019, 3:07:54 PM<br><strong>UnmergedRevision</strong>: [ecc446bcd9e5e7b5f6675f021f0d012d083e2817](https://github.com/hyperledger-gerrit-archive/fabric/commit/ecc446bcd9e5e7b5f6675f021f0d012d083e2817)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 4:08:18 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 4:08:18 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/18/2019, 4:49:30 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 22</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/18/2019, 4:04:07 PM<br><strong>UnmergedRevision</strong>: [fd68b277a1bc220723149dcff618fb9f66dad50f](https://github.com/hyperledger-gerrit-archive/fabric/commit/fd68b277a1bc220723149dcff618fb9f66dad50f)<br><br></blockquote><h3>PatchSet Number: 23</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/19/2019, 10:28:46 AM<br><strong>UnmergedRevision</strong>: [faf9f622a01bd6873bfd6b4808bb06a45adc57b6](https://github.com/hyperledger-gerrit-archive/fabric/commit/faf9f622a01bd6873bfd6b4808bb06a45adc57b6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/19/2019, 10:51:24 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/19/2019, 10:51:24 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/19/2019, 12:25:57 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/19/2019, 11:26:29 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>incomplete description...

Better to add doc comments to the other exported structs as well.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L497](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L497)<br><strong>Comment</strong>: <pre>Did you miss that 'rwsetKeys' is a map? 
simply lookup...

-, ok := s[key]
return ok</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L497](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L497)<br><strong>Comment</strong>: <pre>Not sure why I had it like this, I think in some of my initial iterations on this I wasn't using a map but later changed back to using one and this ended up sticking around for some reason. Good catch!</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L681](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L681)<br><strong>Comment</strong>: <pre>The same info represented twice causes confusion. I could not find where the latter one is used. Can you double check and if not needed, then remove this?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L681](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L681)<br><strong>Comment</strong>: <pre>Looks like missingRWSButIneligible is just the flattened version of the byTxIDs one so as you mentioned the latter is unnecessary, will remove (as a matter of fact because you pointed this out I noticed a bug in the new code where missingRWSButIneligible wasn't being populated at all in pvtdataprovider's privateInfo)</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L682](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L682)<br><strong>Comment</strong>: <pre>an alias "rwsetKeys" for this type is already used in this struct at line 680. Better to use that here as well</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L682](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L682)<br><strong>Comment</strong>: <pre>Unused fields could be a source of confusion. I noticed that this field is just being used in new code.

For a clear usage, can you define a new struct in the new code file that embeds privateDataInfo and define additional fields that are just used in the new code?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L682](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L682)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L682](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L682)<br><strong>Comment</strong>: <pre>Seeing as how the old code and coordinator will soon be entirely removed once the StoreBlock logic in coordinator is moved to the split path shared by gossip + blocksprovider that Jason was working on and the privatedataprovider will become the default for retrieving private data, I don't think it's as necessary since I like the type/name used in coordinator for the struct already.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L682](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L682)<br><strong>Comment</strong>: <pre>I had this unification in mind when I wrote this comment. But often we hope some code to go away soon but that ends up sticking around for longer than we like.

As the change was not big that would cause any effort to rollback when actually this code is gone so I had suggested that. But this is minor point and can let it be as is.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator.go#L682](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator.go#L682)<br><strong>Comment</strong>: <pre>Given that 2.0 has been pushed back and it's now possible we can include this work in 2.0, I'm hopeful the unification can be completed within the next 2 months</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator_test.go#L148)<br><strong>Comment</strong>: <pre>Why did you remove this? I am not fully aware of this code but it appears to me that this "delete" and the "assert.Empty" below tests that there are no unexpected endorsers present.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator_test.go#L148)<br><strong>Comment</strong>: <pre>There was one specific case that this logic ended up causing complications for. In particular if fetch was ever called more than once. One example would be if a private data rwset was successfully fetched from a peer, but another was not. The first fetch would return the correct data through the mock, but then the failed fetch would break since the first fetch would delete the expected endorsers from the mock and the test would error with the "Encountered a non-expected endorser" on the line above. This is an important test case because it checks that missing private data is correctly added to the returned block private data. The only way around this would be to change the mocked fetch function on each invocation but that would require changing the On("fetch") call to also take in the exact expected dig2src argument representing each call. I originally tried this but could never get it to work as expected so I decided it was simpler to remove the expected endorser check here.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator_test.go#L148)<br><strong>Comment</strong>: <pre>In that case, as an alternate, you can build the endorsers map in this function and then assert.Equal with the expected  one.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L148](https://github.com/hyperledger-gerrit-archive/fabric/blob/faf9f622a01bd6873bfd6b4808bb06a45adc57b6/gossip/privdata/coordinator_test.go#L148)<br><strong>Comment</strong>: <pre>Ack</pre></blockquote><h3>PatchSet Number: 24</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/20/2019, 9:51:23 AM<br><strong>UnmergedRevision</strong>: [be0ed74f9eeedfea1cce6752bcc69e300a6743c3](https://github.com/hyperledger-gerrit-archive/fabric/commit/be0ed74f9eeedfea1cce6752bcc69e300a6743c3)<br><br></blockquote><h3>PatchSet Number: 25</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/20/2019, 9:53:50 AM<br><strong>UnmergedRevision</strong>: [78c0be43853f1456cab639d0e40501a9c0a63575](https://github.com/hyperledger-gerrit-archive/fabric/commit/78c0be43853f1456cab639d0e40501a9c0a63575)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 10:01:56 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 10:01:56 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 11:21:50 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 10:35:43 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L117](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L117)<br><strong>Comment</strong>: <pre>I would prefer to keep things simple while adding private data in functions fetchFromXXX.. wherein add only if requested (i.e., present in missing) and delete from missing while adding. Then perhaps this for loop is not needed... 

(the following comments in the code in this for loop not applicable if you decide to remove this)</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L117](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L117)<br><strong>Comment</strong>: <pre>I think I'll leave it as is for now, primarily because I'm mainly not sure if it would complicate the logic in each fetch function enough to make them more prone to edge case bugs that end up overlooked based on what is or isn't added to pvtdata. It's easier for now to just add everything during the first two fetch steps and then clean it up before fetching from peers so we know for sure the data in pvtdata is correct.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L118)<br><strong>Comment</strong>: <pre>I did not find where this is prepared. Did you want to use this for storing what has been asked in the original request? so that the extra data can be removed?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L118)<br><strong>Comment</strong>: <pre>It's populated with an empty struct per key when getting the pvtdata info (in the function getPvtdataInfo). This code was translated over from the old transaction inspector code in coordinator and identifies which rwsets are eligible and present in the cache. I believe the original intention of this as you mentioned is to remove any extra private data that was not requested in the query. I can probably rename it to requestedPrivateRWSets for additional clarity</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L129](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L129)<br><strong>Comment</strong>: <pre>It would be more intuitive to simply iterate and delete?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L129](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L129)<br><strong>Comment</strong>: <pre>Agreed, this was copied from old coordinator</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L145](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L145)<br><strong>Comment</strong>: <pre>same comment as about the other errors of this category</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L145](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L145)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L180](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L180)<br><strong>Comment</strong>: <pre>the function name is misleading. This not finalizing what data can used/fetched from the cache. This function merely transforms the cached data into a map form for later use.

I would suggest to declare this function on a type "PrefetchedData"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L180](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L180)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L188)<br><strong>Comment</strong>: <pre>this should not be treated as an error condition. This CachedPvtData is sent by some other peer and a rougue peer can always send some extra data to cause this situation. This error should simply be logged and proceed to try with next source (i.e., transient store). Whether to investigate other data items within cache or not once this has been detected that at least one item is wrong is a choice (I prefer skipping).

In other words, this function should not return an error.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L188)<br><strong>Comment</strong>: <pre>Makes sense, I'll return empty if any fail this condition and remove the error</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L191](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L191)<br><strong>Comment</strong>: <pre>this is not needed. You can simply say string(commonutil.ComputeSHA256(col.Rwset))</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L191](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L191)<br><strong>Comment</strong>: <pre>Discussed offline and we decided to keep as is to maintain consistency. Also unsure if changing to string will break anything in ledger since the value of hash will be different if not the hex encoded string value</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L205)<br><strong>Comment</strong>: <pre>may be stale portion</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L205)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L206](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L206)<br><strong>Comment</strong>: <pre>since the code in this file is a bit involved, giving meaningful names to functions and parameter may help in improving the readability.

as an option perhaps "computeEligibilityAndMissingInPrefteched(prefetched rwsetByKeys, toRetrieve []*ledger.TxPvtdataInfo)" may give more context.

If you can think of a shorter name it would be better but eventually that's what this function does. 

Or perhaps an alternate you could split this function into two. I'll let you evaluate the choice</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L206](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L206)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L246](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L246)<br><strong>Comment</strong>: <pre>I don't think that majority of this portion is applicable here. I think that this (NoSuchCollectionError/ failed to retrieve collection config etc) may happen if the collection store is used to pull the collection config from ledger. Here you are using the API directly that takes the collection config as input</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L246](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L246)<br><strong>Comment</strong>: <pre>Yes I think the error should be more along the lines of "Failed to retrieve collection access policy" to guard against invalid or nil collection configs. In that case I'll just check that NewSimpleCollection didn't error and skip that collection if it does</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L324](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L324)<br><strong>Comment</strong>: <pre>same as above</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L324](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L324)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L327](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L327)<br><strong>Comment</strong>: <pre>Don't you need to delete the key here from the missing ones. Else eventually everything will be pulled from peers</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L327](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L327)<br><strong>Comment</strong>: <pre>This is done in RetrievePrivateData before the call to fetchPvtdataFromPeers</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L333](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L333)<br><strong>Comment</strong>: <pre>what's the use of returning this when this is same as input parameter and the same is being modified.

I suggest removing the returned value from this function and changing the function name to populateFromTransientStore (pvtdata can be removed from function name to shorten it as the context is clear).

This comment also applies to function "fetchPvtdataFromPeers"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L333](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L333)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L354](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L354)<br><strong>Comment</strong>: <pre>Same as comment on line 185. I am not certain whether error caused by other peer should affect a peer's block commit. Is this the behavior in existing code path as well?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L354](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L354)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L360](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L360)<br><strong>Comment</strong>: <pre>same as abbove</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L360](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L360)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L394](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L394)<br><strong>Comment</strong>: <pre>This function mainly prepares the output from computed data. Can be defined as independent and perhaps be renamed (say prepareBlockPvtdata?)</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L394](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L394)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L430](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L430)<br><strong>Comment</strong>: <pre>no need to export</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L430](https://github.com/hyperledger-gerrit-archive/fabric/blob/78c0be43853f1456cab639d0e40501a9c0a63575/gossip/privdata/pvtdataprovider.go#L430)<br><strong>Comment</strong>: <pre>Ack</pre></blockquote><h3>PatchSet Number: 26</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/20/2019, 12:21:26 PM<br><strong>UnmergedRevision</strong>: [16823caaf01d5b9e45f06dec1c81cfa4199eff93](https://github.com/hyperledger-gerrit-archive/fabric/commit/16823caaf01d5b9e45f06dec1c81cfa4199eff93)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 12:31:00 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 12:31:00 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 2:11:34 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/20/2019, 1:06:05 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 27</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/23/2019, 3:46:19 PM<br><strong>UnmergedRevision</strong>: [9d207d254b12845d734b52d275fd356393e31789](https://github.com/hyperledger-gerrit-archive/fabric/commit/9d207d254b12845d734b52d275fd356393e31789)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/23/2019, 3:53:40 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/23/2019, 3:53:40 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/23/2019, 5:14:31 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/24/2019, 11:44:47 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/util/logging.go#L46](https://github.com/hyperledger-gerrit-archive/fabric/blob/9d207d254b12845d734b52d275fd356393e31789/gossip/util/logging.go#L46)<br><strong>Comment</strong>: <pre>moving this to https://gerrit.hyperledger.org/r/c/fabric/+/32893 since the caller should set the channelID context for the logger</pre></blockquote><h3>PatchSet Number: 28</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/24/2019, 1:49:48 PM<br><strong>UnmergedRevision</strong>: [86da03492dff766037a3d37ae0c542af7f4cb9df](https://github.com/hyperledger-gerrit-archive/fabric/commit/86da03492dff766037a3d37ae0c542af7f4cb9df)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/24/2019, 1:57:44 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/24/2019, 1:57:44 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/24/2019, 3:31:31 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/24/2019, 2:43:41 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 29</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/25/2019, 11:50:41 AM<br><strong>UnmergedRevision</strong>: [50fa9f5e315bbe4c600bb5f11d3946e51b46c976](https://github.com/hyperledger-gerrit-archive/fabric/commit/50fa9f5e315bbe4c600bb5f11d3946e51b46c976)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 11:58:24 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 11:58:24 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 1:29:38 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 12:36:35 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/50fa9f5e315bbe4c600bb5f11d3946e51b46c976/gossip/privdata/pvtdataprovider.go#L118)<br><strong>Comment</strong>: <pre>this can probably move up before the inner nested for loop since it's a tx level property</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/50fa9f5e315bbe4c600bb5f11d3946e51b46c976/gossip/privdata/pvtdataprovider.go#L118)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L259](https://github.com/hyperledger-gerrit-archive/fabric/blob/50fa9f5e315bbe4c600bb5f11d3946e51b46c976/gossip/privdata/pvtdataprovider.go#L259)<br><strong>Comment</strong>: <pre>might not need both this check and the requestedEligible check below (as well as in the following fetch functions) since requestedEligible will match missing from the computeEligibility function</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L259](https://github.com/hyperledger-gerrit-archive/fabric/blob/50fa9f5e315bbe4c600bb5f11d3946e51b46c976/gossip/privdata/pvtdataprovider.go#L259)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 30</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/25/2019, 2:07:49 PM<br><strong>UnmergedRevision</strong>: [25eb41844a3abdde6130aa9d7cc13df9acfd7780](https://github.com/hyperledger-gerrit-archive/fabric/commit/25eb41844a3abdde6130aa9d7cc13df9acfd7780)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 2:17:39 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 2:17:39 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 3:48:26 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/25/2019, 2:49:59 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/coordinator_test.go#L146)<br><strong>Comment</strong>: <pre>double casting</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/coordinator_test.go#L146)<br><strong>Comment</strong>: <pre>oops I swapped the expected and actual around since normally expected comes first in assertions and I guess I forgot to move the digests cast for dig2src.keys()</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L149](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/coordinator_test.go#L149)<br><strong>Comment</strong>: <pre>This comment is not needed. This rather causes confusion. Only we understand because the old code was doing it differently and without that context, it is puzzling.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/coordinator_test.go#L149](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/coordinator_test.go#L149)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L79](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L79)<br><strong>Comment</strong>: <pre>Let me know if you think there's a better name for this function. It's not super intuitive from the name that it would return a pvtdataInfo</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L188)<br><strong>Comment</strong>: <pre>remove this "else" and return from above "if"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L188)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L195](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L195)<br><strong>Comment</strong>: <pre>same as above</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L195](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L195)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L219](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L219)<br><strong>Comment</strong>: <pre>same as above</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L219](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L219)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L261](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L261)<br><strong>Comment</strong>: <pre>following makes this clearer "Found extra data in prefetched... ignoring"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L261](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L261)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L267](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L267)<br><strong>Comment</strong>: <pre>you would need to delete from missingKeysByTxID as well as you use that for getting data from transient store.

It would have been even cleaner not to maintain that additional map (missingKeysByTxID) at all. Since that info is fully derivable from "missing" map.

Also, can you add to test for this such that if the data is present in cache, it does not go to transient store. For the test you can add all the data to cache and close the transient store and it should not cause any error</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L267](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L267)<br><strong>Comment</strong>: <pre>Ack

As discussed there's not much point to adding the test because transient store errors don't break the flow so whether or not closing the transient store would break if the transient store is called is irrelevant since the private data provider won't surface any errors from the transient store.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L334](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L334)<br><strong>Comment</strong>: <pre>lets keep it simple 
"for k := range privateInfo.missingKeys {"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L334](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L334)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L366](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L366)<br><strong>Comment</strong>: <pre>ever requested</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L366](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L366)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L383](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L383)<br><strong>Comment</strong>: <pre>add another check based on seqInBlock... as a remote possibility, we tolerate duplicate txids</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L383](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L383)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L398](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L398)<br><strong>Comment</strong>: <pre>It would be more intuitive if you simply iterate over pvtdata and add everything as now it dos not contain anything extra</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L398](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L398)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L402](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L402)<br><strong>Comment</strong>: <pre>per above comment, this should always be true</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L402](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L402)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L410](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L410)<br><strong>Comment</strong>: <pre>it would be simpler and intuitive if you simply iterate over the two "missing" maps</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L410](https://github.com/hyperledger-gerrit-archive/fabric/blob/25eb41844a3abdde6130aa9d7cc13df9acfd7780/gossip/privdata/pvtdataprovider.go#L410)<br><strong>Comment</strong>: <pre>Ack</pre></blockquote><h3>PatchSet Number: 31</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/26/2019, 11:04:09 AM<br><strong>UnmergedRevision</strong>: [afccd838a24800bea49bae13e3f577f7cfb5b7d8](https://github.com/hyperledger-gerrit-archive/fabric/commit/afccd838a24800bea49bae13e3f577f7cfb5b7d8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 11:08:10 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 11:08:10 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 11:38:52 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 12:15:32 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 32</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/26/2019, 12:09:31 PM<br><strong>UnmergedRevision</strong>: [22da99a4337a8fb96f5713fe44f3b07ab3da2fe5](https://github.com/hyperledger-gerrit-archive/fabric/commit/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 12:14:35 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 12:14:35 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 1:27:14 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2019, 12:46:55 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 9/27/2019, 3:47:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider.go#L53)<br><strong>Comment</strong>: <pre>Just for the note - Nothing that's introduced in this CR however, just noticed that this is a rare corner case bug because we tolerate duplicate txids now. No need to do anything in this CR, I'll open a Jira for this.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider.go#L53)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider.go#L58)<br><strong>Comment</strong>: <pre>nothing wrong but can you use more familiar var name blockNum or blkNum</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider.go#L58)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L231](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider.go#L231)<br><strong>Comment</strong>: <pre>I think that you wanted to print this log message in all the cases. Move this to function "prepareBlockPvtdata"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L231](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider.go#L231)<br><strong>Comment</strong>: <pre>I think I'll leave a simplified message here at a logger.Debug level indicating the success/failure of the fetch from Peer specifically, to express information such as elapsed pull, and then add a general blanket success/fail info/warning log line for the entire fetch in prepareBlockPvtdata. Also adding prepareBlockPvtdata back to PvtdataProvider for simplicity to access the logger/blocknum without having to pass them and setting the default log level for tests to info for better clarity when running individual tests in the suite</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L87)<br><strong>Comment</strong>: <pre>Please make these different scenarios as different sub-tests using t.Run(..</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L87)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L104](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L104)<br><strong>Comment</strong>: <pre>see comment in this function</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L104](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L104)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L525](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L525)<br><strong>Comment</strong>: <pre>I know that you are counting on the failure of the test in the function "setupPrivateDataProvider" if that returned nil but the highlighted portion looks odd in a test code and makes it fragile if someone to change the other code.

Better to add an assertion for this to not nil</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L525](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L525)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L531](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L531)<br><strong>Comment</strong>: <pre>same as the comment below</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L531](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L531)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L543](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L543)<br><strong>Comment</strong>: <pre>this kind of code in the test worries me because it is code is close to production code (and kind of repetition of same complexity that we are trying to test). Test code should by definition be simpler than the production code.

I agree that it would be a bit verbose to hand-prepare the expectedBlockPvtdata in the function "TestRetrievePrivateData", but can you give this a try?

In addition to this, another problem is that you cannot test the situation when additional data is present in any of the sources.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L543](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L543)<br><strong>Comment</strong>: <pre>As discussed, will do this in a followup CR since this one is growing and this is an albeit simple change, a very sizable change.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L588](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L588)<br><strong>Comment</strong>: <pre>same as above</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L588](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L588)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L591](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L591)<br><strong>Comment</strong>: <pre>can you make this function take one more parameter for error string and match that using "assert.ErrorEquals" - wherever possible.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L591](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L591)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L599](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L599)<br><strong>Comment</strong>: <pre>please add a line here...</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L599](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L599)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L648](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L648)<br><strong>Comment</strong>: <pre>Not a big deal but to be consistent with other tests, would you prefer to simply use here and other places testify 

require.NotEqual(t, "", txID, "Could not find txID for SeqInBloc..."")</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L648](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L648)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L764](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L764)<br><strong>Comment</strong>: <pre>always true</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider_test.go#L764](https://github.com/hyperledger-gerrit-archive/fabric/blob/22da99a4337a8fb96f5713fe44f3b07ab3da2fe5/gossip/privdata/pvtdataprovider_test.go#L764)<br><strong>Comment</strong>: <pre>Ack</pre></blockquote><h3>PatchSet Number: 33</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/30/2019, 11:46:01 AM<br><strong>UnmergedRevision</strong>: [5646dcfd2713580587e3117017d03b381e00c677](https://github.com/hyperledger-gerrit-archive/fabric/commit/5646dcfd2713580587e3117017d03b381e00c677)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 11:49:56 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 11:49:56 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 12:59:42 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 12:20:05 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 34</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/30/2019, 1:53:29 PM<br><strong>UnmergedRevision</strong>: [d7f0f766a0d0765545212b387cf88f85e977d4fa](https://github.com/hyperledger-gerrit-archive/fabric/commit/d7f0f766a0d0765545212b387cf88f85e977d4fa)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 1:57:53 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 1:57:53 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:38:16 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 35</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/30/2019, 2:30:04 PM<br><strong>UnmergedRevision</strong>: [4305cfe97df7b15c48a555a6cecdef119e01e497](https://github.com/hyperledger-gerrit-archive/fabric/commit/4305cfe97df7b15c48a555a6cecdef119e01e497)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:36:56 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:36:56 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:53:06 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 36</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 9/30/2019, 2:46:15 PM<br><strong>UnmergedRevision</strong>: [2d84a3d3b392dd66e68255375628a9cda0cc8816](https://github.com/hyperledger-gerrit-archive/fabric/commit/2d84a3d3b392dd66e68255375628a9cda0cc8816)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:52:19 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:52:19 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 4:24:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 3:27:31 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 9/30/2019, 2:51:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 37</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Uploader</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Created</strong>: 10/1/2019, 11:19:14 AM<br><strong>GitHubMergedRevision</strong>: [b558893bf67ede547135c6452dde5a8c4600d294](https://github.com/hyperledger-gerrit-archive/fabric/commit/b558893bf67ede547135c6452dde5a8c4600d294)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:52:19 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 2:52:19 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 4:24:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/30/2019, 3:27:31 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 9/30/2019, 2:51:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 10/1/2019, 2:28:00 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: David Enyeart<br><strong>Merged</strong>: 10/1/2019, 2:28:03 PM<br><br><h2>Comments</h2><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L671](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/core/ledger/ledger_interface.go#L671)<br><strong>Comment</strong>: <pre>Move higher up in this file, next to TxMissingPvtDataMap and TxPvtDataMap section.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L671](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/core/ledger/ledger_interface.go#L671)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L47)<br><strong>Comment</strong>: <pre>Purge purges transactions in the block from the transient store.
Transactions older than the retention period are considered orphaned and also purged.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L47)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L60](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L60)<br><strong>Comment</strong>: <pre>This function should be changed to "PurgeBelowHeight"</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L60](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L60)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L133](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L133)<br><strong>Comment</strong>: <pre>Shouldn't this be called eligibleMissingKeys</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L133](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L133)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L135)<br><strong>Comment</strong>: <pre>Shouldn't this be called ineligibleMissingKeys

(that is one variable holds all the eligible the other holds all the ineligible, right?  this wasn't clear with the current naming...)</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L135)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L185](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L185)<br><strong>Comment</strong>: <pre>POPULATE FROM CACHE</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L185](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L185)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L194](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L194)<br><strong>Comment</strong>: <pre>POPULATE FROM TRANSIENT STORE</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L194](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L194)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L205)<br><strong>Comment</strong>: <pre>POPULATE FROM REMOTE PEERS</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L205)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L229](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L229)<br><strong>Comment</strong>: <pre>Should this be a Warning, or are you expecting the caller to report the Warning (as coordinator currently does)?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L229](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L229)<br><strong>Comment</strong>: <pre>This is debug because all of the other log lines above when failing to fetch all missing private data from a specific source are debug. Later below in preparePrivateData it does a catchall check for whether there are still missing write sets and will report as Warning down there (thus replacing it being called here).</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L331](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L331)<br><strong>Comment</strong>: <pre>populateFromRemotePeers

(if you don't want to add 'Remote', at least mention 'remote' in the function comment)</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L331](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L331)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L394](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L394)<br><strong>Comment</strong>: <pre>what do you mean by 'formats'?</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [gossip/privdata/pvtdataprovider.go#L394](https://github.com/hyperledger-gerrit-archive/fabric/blob/b558893bf67ede547135c6452dde5a8c4600d294/gossip/privdata/pvtdataprovider.go#L394)<br><strong>Comment</strong>: <pre>poorly worded changing to:
prepareBlockPvtdata consolidates the fetched private data as well as ineligible and eligible missing private data into a ledger.BlockPvtdata for the PvtdataProvider to return to the consumer</pre></blockquote>