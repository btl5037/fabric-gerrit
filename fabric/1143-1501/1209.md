<strong>Project</strong>: fabric<br><strong>Branch</strong>: feature/convergence<br><strong>ID</strong>: 1209<br><strong>Subject</strong>: FAB-423 / FAB-430 Draft genesis block bootstrap feature<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Luis Sanchez - luiss@me.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 9/23/2016, 11:08:28 AM<br><strong>LastUpdated</strong>: 5/20/2019, 9:27:01 AM<br><strong>CommitMessage</strong>:<br><pre>FAB-423 / FAB-430 Draft genesis block bootstrap feature

 * Bootstrapping of the genesis block for new peer/blockchain.

Change-Id: I7088a38fc436018f547291cbd8f22903398bb8de
Signed-off-by: Luis Sanchez <sanchezl@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 9/23/2016, 11:08:28 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2016, 11:12:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1360/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2016, 11:14:59 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/281/ (2/2)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 9/23/2016, 12:09:33 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2016, 12:09:39 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1362/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2016, 12:16:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/283/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2016, 12:38:13 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/281/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1360/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/23/2016, 1:19:49 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/283/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1362/ : SUCCESS</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 9/23/2016, 1:43:49 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(6 comments)

Thanks for posting this, see inline comments for some of your assumptions. Also: have you considered adding a scenario where we replace an existing public key with a new one? This would cover the case where an ordering node is compromised, and would allow us to decide how we want to handle it for v1.</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 9/24/2016, 11:25:08 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 9/26/2016, 10:49:54 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(7 comments)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 9/26/2016, 11:41:13 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>Reviewed</strong>: 9/26/2016, 11:50:05 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(4 comments)

Thanks Luis for the clarification of what you were thinking. If I assume that these tests are from the point of view of a peer's list of orderers (static list for now), I'm not as confused.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 9/26/2016, 12:25:09 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 9/27/2016, 8:37:42 AM<br><strong>Message</strong>: <pre>Patch Set 2:

> (2 comments)

Luis the template header file is this: https://github.com/hyperledger/fabric/blob/master/docs/dev-setup/headers.txt</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 9/27/2016, 10:03:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 9/27/2016, 10:05:28 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 9/27/2016, 10:05:58 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:49:36 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1425/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:51:51 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/345/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:53:36 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1425/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/345/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:55:47 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1427/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:57:22 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/347/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:57:55 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1428/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 10:59:31 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/348/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/27/2016, 11:00:42 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1428/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/348/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 10/2/2016, 11:56:31 PM<br><strong>Message</strong>: <pre>Patch Set 5:

> Build Failed
 > 
 > https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1428/ :
 > FAILURE
 > 
 > https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/348/
 > : FAILURE (skipped)

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/2/2016, 11:59:41 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1556/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/2/2016, 11:59:42 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/469/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 10/3/2016, 12:47:39 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/469/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/1556/ : SUCCESS</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 10/3/2016, 2:34:35 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(2 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 10/3/2016, 12:51:08 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(1 comment)</pre><strong>Reviewer</strong>: Luis Sanchez - luiss@me.com<br><strong>Reviewed</strong>: 10/28/2016, 10:17:02 AM<br><strong>Message</strong>: <pre>Abandoned

Superseded by other work.</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 9/23/2016, 11:08:28 AM<br><strong>UnmergedRevision</strong>: [909fa874a699b665dd00aa8c3b9f88787ca75b19](https://github.com/hyperledger-gerrit-archive/fabric/commit/909fa874a699b665dd00aa8c3b9f88787ca75b19)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/23/2016, 12:38:13 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L1](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L1)<br><strong>Comment</strong>: <pre>shouldn't this file have a copyright header?</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L1](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L1)<br><strong>Comment</strong>: <pre>The only .feature file with a copyright header is java_shim.feature, and it says: 
   #Copyright DTCC 2016 All Rights Reserved.
followed by an Apache License, Version 2 statement.

Can someone please point me to the correct copyright header to include?</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L23](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L23)<br><strong>Comment</strong>: <pre>If I missed a node's public key in my conf file (lines 21 and 28), does this make this node invalid?</pre><strong>Commenter</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L25)<br><strong>Comment</strong>: <pre>May want to specify what protocol is being used in the orderer network: PBFT, Kafka, ...</pre><strong>Commenter</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L31)<br><strong>Comment</strong>: <pre>Is there an error/warning that is in the log or responses that would indicate the missing certificate? (Guessing this would be an error from the point of view of the node.)

This is probably a separate scenario that would build on this one, but what happens if one of the certified nodes go down? ... See comment on line 25</pre><strong>Commenter</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L40)<br><strong>Comment</strong>: <pre>Can you specify that this is for "...an existing static network..."? So this is clear from the test verbiage and not have to refer to the comments.</pre><strong>Commenter</strong>: Latitia Haskins - latitia.haskins@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/909fa874a699b665dd00aa8c3b9f88787ca75b19/bddtests/fab-426-consensus-bootstrap.feature#L48)<br><strong>Comment</strong>: <pre>??? not? 

OK, if this is from an existing peer's perspective who's original list of orderer nodes was already set, this makes sense.

Can this line be changed to "And the orderer node added after the initial bootstrap is not apart of the peer's orderer list"?</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 9/23/2016, 12:09:33 PM<br><strong>UnmergedRevision</strong>: [81cc9e3355242710397cf91d9217d6188309525c](https://github.com/hyperledger-gerrit-archive/fabric/commit/81cc9e3355242710397cf91d9217d6188309525c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/23/2016, 1:19:49 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L9](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c//COMMIT_MSG#L9)<br><strong>Comment</strong>: <pre>To me, bootstrap is essentially taking some set of config, and generating the genesis block.  To validate that this is done correctly it likely makes sense to start the orderer network after and retrieve that block, or potentially inject traffic.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L10](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c//COMMIT_MSG#L10)<br><strong>Comment</strong>: <pre>I think we need to be somewhat careful here.  We are not supporting addition of BFT orderers out of the box, but there is no reason we could not support non-BFT numbers growing (ie Kafka).</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L12](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c//COMMIT_MSG#L12)<br><strong>Comment</strong>: <pre>Yes, in general orderers should derive their configuration from the chain if it exists.</pre><strong>Commenter</strong>: Luis Sanchez - luiss@me.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L6](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L6)<br><strong>Comment</strong>: <pre>Is this statement truly about the number of nodes in the orderer service? or is this actually a statement about the state of the orderer service when a peer network is first attached to it?

For example, a peer is connected to an orderer service, and the peer then discovers (?) and persists the public keys (etc...) of all the orderer nodes of the orderer service in it's ledger. Is this initial 'bootstrap' of the orderer service nodes in the peer's ledger what is considered to be static?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L6](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L6)<br><strong>Comment</strong>: <pre>I think it is 'for the purposes of this test'.  Out of the gate, we will support configuration in a genesis block, and not allow for it to change.  As we progress, ultimately this configuration will not be static.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L11)<br><strong>Comment</strong>: <pre>I'm not clear on what the proper terms here (and I should be) why is why I've asked Angelo to review this. (My guess is that we should be seeing terms like ecerts and membership services throughout these scenario. A good chance to clarify this.)</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L13](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L13)<br><strong>Comment</strong>: <pre>How many nodes? For each might be fine, but I think this needs to be parameterized at the bottom for different orderer configurations.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L23](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L23)<br><strong>Comment</strong>: <pre>Is it really an invalid node if it has a valid ecert and another node just omits its cert fro the config file and therefore doesn't connect to it?</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L28)<br><strong>Comment</strong>: <pre>As this is written now, I think the expectation is correct. Whether the ordering network is CFT or BFT, it should -at a minimum- be able to start with one of its nodes down/ignored. In general though, the number of nodes you can ignore will be a function of your fault tolerance and of the number of ordering nodes total (N) in the network.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L30)<br><strong>Comment</strong>: <pre>In the first scenario, this line seemed a little imprecise, but here I'm really wondering, what does it mean for an ordering network to be valid?

My gut instinct says that a client gets a valid genesis block from the network.  But what a 'valid genesis block' is needs to be derived from the bootstrap configuration.

Then I think this check would be attempting to connect to each orderer node, verifying the retrieved genesis block is valid, and failing to connect to the other orderer, because the TLS cert is not valid.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L62)<br><strong>Comment</strong>: <pre>In both of these scenarions (add/remove after initial bootstrap), I think that for v1 the underlying logic should be: if chain is empty, use config file, otherwise ignore config file and go with what is included in the genesis block of the chain. Which is to say that in both of these scenarios you would still have a valid network of orderer nodes, regardless of what you did to your config file.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L62)<br><strong>Comment</strong>: <pre>+1</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L67](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L67)<br><strong>Comment</strong>: <pre>See comment in line 28. The ordering network should provide an amount of fault tolerance, which means that --at a minimum-- it should be able to tolerate a node stopping.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [bddtests/fab-426-consensus-bootstrap.feature#L67](https://github.com/hyperledger-gerrit-archive/fabric/blob/81cc9e3355242710397cf91d9217d6188309525c/bddtests/fab-426-consensus-bootstrap.feature#L67)<br><strong>Comment</strong>: <pre>I think this is by ordering type (and therefore by composition parameter).  Solo certainly promises no fault tolerance.  Certainly though, for networks which support fault tolerance, the network should be valid after one node stops.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 9/27/2016, 10:03:23 AM<br><strong>UnmergedRevision</strong>: [d68228bfd64196d53813f3972cfef43c52bbec62](https://github.com/hyperledger-gerrit-archive/fabric/commit/d68228bfd64196d53813f3972cfef43c52bbec62)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/27/2016, 10:53:36 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 9/27/2016, 10:05:28 AM<br><strong>UnmergedRevision</strong>: [173f3aba8b951e2d0ee533d6f24586ac851422ce](https://github.com/hyperledger-gerrit-archive/fabric/commit/173f3aba8b951e2d0ee533d6f24586ac851422ce)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Luis Sanchez - luiss@me.com<br><strong>Uploader</strong>: Luis Sanchez - luiss@me.com<br><strong>Created</strong>: 9/27/2016, 10:05:58 AM<br><strong>UnmergedRevision</strong>: [836ce938fdb7e10f01388c7de8c3237551ed8b80](https://github.com/hyperledger-gerrit-archive/fabric/commit/836ce938fdb7e10f01388c7de8c3237551ed8b80)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 10/3/2016, 12:47:39 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-genesis-block-bootstrap.feature#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/836ce938fdb7e10f01388c7de8c3237551ed8b80/bddtests/fab-426-genesis-block-bootstrap.feature#L36)<br><strong>Comment</strong>: <pre>s/key or each/key of each/</pre><strong>Commenter</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>CommentLine</strong>: [bddtests/fab-426-genesis-block-bootstrap.feature#L39](https://github.com/hyperledger-gerrit-archive/fabric/blob/836ce938fdb7e10f01388c7de8c3237551ed8b80/bddtests/fab-426-genesis-block-bootstrap.feature#L39)<br><strong>Comment</strong>: <pre>I don't understand this - could be me, but how do the orderer nodes authorize a peer that was just created? Shouldn't they have knowledge, somehow, of its public key certificate?

It is also unclear to me what all the bootstrapping of the orderer nodes has to do with bootstrapping a peer. Maybe the point should be that line 41 is about generating the keypair for the new peer node, and the subsequent distribution (out of band) of the authorized key?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [bddtests/fab-426-genesis-block-bootstrap.feature#L39](https://github.com/hyperledger-gerrit-archive/fabric/blob/836ce938fdb7e10f01388c7de8c3237551ed8b80/bddtests/fab-426-genesis-block-bootstrap.feature#L39)<br><strong>Comment</strong>: <pre>This is extremely unclear to me as well.  I've commented on FAB-359 and FAB-360 to hopefully get some clarity.  To my mind, the authorization scheme for peers connecting to the ordering service should simply have been:

1. Orderer configured to trust one or more CAs.
2. Peer connects with TLS cert signed by one of those CAs.
3. Peer submits transactions which are signed by a TLS cert which is signed by one of those CAs.
4. To revoke peer access, we use the standard cert management techniques of expiration dates and revocation lists.

This vision may certainly be wrong, but, whatever the solution, it must be defined more precisely.</pre></blockquote>