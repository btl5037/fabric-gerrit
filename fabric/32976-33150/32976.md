<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 32976<br><strong>Subject</strong>: [FAB-16320] validate transaction<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/17/2019, 11:20:54 AM<br><strong>LastUpdated</strong>: 9/3/2019, 3:59:30 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-16320] validate transaction

Extract transacion proto fields and do common validation.

Change-Id: Ia77f3ae78eef0a87c9705190c39777ff42fd69f8
Signed-off-by: muralisr <srinivasan.muralidharan99@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/17/2019, 11:20:54 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:22:50 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16476/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:23:22 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:30:03 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:30:44 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16476/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16476</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:31:46 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14589/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:32:15 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:32:35 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11214/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:33:05 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 11:52:52 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 12:48:32 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/17/2019, 12:49:21 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14589/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14589

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11214/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11214</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/20/2019, 8:14:42 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/20/2019, 5:09:57 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/20/2019, 5:23:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:28:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16601/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:28:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:33:12 PM<br><strong>Message</strong>: <pre>Patch Set 2: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:33:58 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16601/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16601</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/20/2019, 5:37:47 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:42:54 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16602/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:43:19 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:50:06 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:50:47 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16602/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16602</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:52:34 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14674/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:52:48 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11303/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:53:09 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 5:53:15 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 6:16:08 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 7:09:21 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2019, 7:10:12 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14674/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14674

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11303/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11303</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 8:54:45 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+1

For awareness, Jason has a stack that reworks a lot of this as part of the endorser cleanup so I'm not sure what the ultimate fate will be.</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/21/2019, 1:03:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:07:43 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16655/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:08:29 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:15:32 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:16:24 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16655/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16655</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:18:04 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14723/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:18:45 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:20:37 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11354/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:21:18 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 1:41:35 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 2:23:36 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 2:24:11 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14723/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14723

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11354/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11354</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 10:24:55 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(5 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 12:10:02 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(5 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 12:31:35 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 9:04:57 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/22/2019, 10:04:30 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 8/22/2019, 10:59:43 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/26/2019, 6:48:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 6:52:02 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16775/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 6:52:47 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 6:59:44 PM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 6:59:52 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14813/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 7:00:37 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 7:00:37 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16775/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16775</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 7:05:40 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11441/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 7:06:28 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 7:24:01 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 8:17:52 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2019, 8:18:43 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14813/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14813

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11441/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11441</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 8/27/2019, 5:23:27 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(6 comments)

Thx Murali, a couple of nits</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/27/2019, 9:07:56 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(6 comments)

Thanks Ale. Will take care of everything but one (inline comment on that).</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/27/2019, 11:35:12 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(8 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/28/2019, 7:27:27 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(8 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/28/2019, 5:20:26 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 9:42:25 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16839/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 9:44:28 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 9:55:31 PM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 9:58:33 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16839/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16839</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 10:02:47 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14863/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 10:04:03 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 10:04:38 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11499/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 10:05:45 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 10:28:53 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 11:21:14 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/28/2019, 11:22:00 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14863/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14863

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11499/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11499</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 8/29/2019, 3:47:11 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(3 comments)

Thanks Murali, LGTM - only one small point on test coverage</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/29/2019, 7:05:34 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(3 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/29/2019, 6:20:01 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:22:32 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16871/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:23:24 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:30:38 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:31:31 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16871/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16871</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:33:51 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14887/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:34:01 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11530/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:34:40 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:34:54 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 6:56:08 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 7:47:20 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2019, 7:48:18 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14887/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14887

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11530/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11530</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 8/30/2019, 3:02:37 AM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2

Thanks for your patience, Murali!</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/30/2019, 9:15:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:19:00 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16883/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:19:50 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:28:08 AM<br><strong>Message</strong>: <pre>Patch Set 8: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:29:05 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Unstable 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16883/ : UNSTABLE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16883</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:31:42 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14898/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:31:50 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11542/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:32:27 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:32:34 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting Integration tests</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 8/30/2019, 9:39:09 AM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 9:56:46 AM<br><strong>Message</strong>: <pre>Patch Set 8: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:41:20 AM<br><strong>Message</strong>: <pre>Patch Set 8: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2019, 10:42:05 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14898/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14898

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11542/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11542</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 9/3/2019, 3:28:08 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 9/3/2019, 3:28:13 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jason Yellick</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2019, 3:31:47 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7581/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2019, 3:32:01 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6279/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2019, 3:59:30 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/7581/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/7581

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6279/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/6279</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/17/2019, 11:20:54 AM<br><strong>UnmergedRevision</strong>: [14d394f9423e81225ae93d3a4f9a20b96ab0f81d](https://github.com/hyperledger-gerrit-archive/fabric/commit/14d394f9423e81225ae93d3a4f9a20b96ab0f81d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/17/2019, 11:30:03 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/17/2019, 11:30:03 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/17/2019, 12:48:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/17/2019, 11:52:52 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/20/2019, 8:14:42 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/common/validation/fullflow_test.go#L437](https://github.com/hyperledger-gerrit-archive/fabric/blob/14d394f9423e81225ae93d3a4f9a20b96ab0f81d/core/common/validation/fullflow_test.go#L437)<br><strong>Comment</strong>: <pre>We need to do more. It's not enough to assert on _an_ error (any error) - we need the strongest reasonable assertion. In this case, we should be using EqualError with the expected text of the error message.

It's up to you if you want to address all of the legacy changes but, for new stuff, we should do better.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/common/validation/fullflow_test.go#L437](https://github.com/hyperledger-gerrit-archive/fabric/blob/14d394f9423e81225ae93d3a4f9a20b96ab0f81d/core/common/validation/fullflow_test.go#L437)<br><strong>Comment</strong>: <pre>Will tighten tests around legacy code this PR uses (avoid touching code that may not be used or will be modified).</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/14d394f9423e81225ae93d3a4f9a20b96ab0f81d/core/tx/processor_factory.go#L84)<br><strong>Comment</strong>: <pre>nit: please use a more conventional format for literals:

&tx.Envelope{
    Payload: &tx.Payload{
        Header: &tx.Header{
            ChannelHeader:   chdr,
            SignatureHeader: shdr,
        },
        Data: paylaod.Data,
    },
    Signature: txenv.Signature,
}


When using a multi-line literal, each line ends with a brace or a comma, closing brace is on its own line</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L84](https://github.com/hyperledger-gerrit-archive/fabric/blob/14d394f9423e81225ae93d3a4f9a20b96ab0f81d/core/tx/processor_factory.go#L84)<br><strong>Comment</strong>: <pre>Will fix.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/20/2019, 5:23:24 PM<br><strong>UnmergedRevision</strong>: [cde22e7fc5e80e0c55af1845eedec2187f4fe60e](https://github.com/hyperledger-gerrit-archive/fabric/commit/cde22e7fc5e80e0c55af1845eedec2187f4fe60e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2019, 5:33:12 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/20/2019, 5:37:47 PM<br><strong>UnmergedRevision</strong>: [9ef368b7e435396f77bb164b60b3f0a56ebb85ea](https://github.com/hyperledger-gerrit-archive/fabric/commit/9ef368b7e435396f77bb164b60b3f0a56ebb85ea)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2019, 5:50:06 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2019, 5:50:06 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2019, 7:09:21 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2019, 6:16:08 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 8/21/2019, 8:54:45 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/21/2019, 1:03:41 PM<br><strong>UnmergedRevision</strong>: [2ce48c77a1bb58bdf75330d56d0c47aa3410ce62](https://github.com/hyperledger-gerrit-archive/fabric/commit/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 1:15:32 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 1:15:32 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 2:23:36 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 1:41:35 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 8/21/2019, 10:24:55 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L45](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L45)<br><strong>Comment</strong>: <pre>Let's not use any of these 'Get*' protoutil functions.

IMO, the only protoutil functions that are safe to use are the 'protoutil.Unmarshal<Type>' functions which have clear semantics and don't do anything fancy.

For instance, the name of 'GetEnvelopeFromBlock' alone is enough for this to be a red flag.  There is no block involved here, so it's not at all clear to the reader what is going on here.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L45](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L45)<br><strong>Comment</strong>: <pre>I see a UnmarshalEnvelope introduced recently.. will use that.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L53)<br><strong>Comment</strong>: <pre>Can we split this sort of check over two statements?  We cannot appropriately test both conditions in unit test, and the error is either misleading or ambiguous.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L53](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L53)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L68](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L68)<br><strong>Comment</strong>: <pre>I'm very skeptical of utility functions like this.  The danger is that if their behavior changes, we've gone and broken our determinism, and, it's not obvious in the validation package, that changes there matter for determinism.

As Matt mentioned, I've got a CR stack that tries to pull all of the endorsement time validation out of the validation package.  If we are sure we want a common set of utils for tx validation, then I think we need to make it very clear and explicit in that package that any modifications must be entirely deterministic and will break validation if we get it wrong.  As that package stands now, there is code that has nothing to do with actual commit time validation, and that is a problem to me.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L68](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L68)<br><strong>Comment</strong>: <pre>The current commit time validation function  "ValidateTransaction" (in core/common/validation/msgvalidation.go) uses validateCommonHeader. I reused rather than duplicate. If its going to be pulled out into a separate package as part of this rework, I can use that.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L68](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L68)<br><strong>Comment</strong>: <pre>My concern here is that we not march forward with this work with lots of re-use for expediency.  We aren't happy with what we have, which is one of the reasons we're re-implementing it.

Not to pick on names again.  But... 'ValidateCommonHeader'.  How does this have 3 return values?  The name says we are validating... I would expect only an error.  I can infer by looking at it, that most likely, it is going to check the signature and channel header fields for nil, and unmarshal each of them, and if either of those are nil, or the unmarshaling fails, return an error.

The above was my honest-pre-checking the function impression of the code.  When I actually look inside the code, I see now that it's also checking the initial input for nil, it's also performing a deeper validation on each of the signature header and channel header, including explicitly checking the types of transactions that are allowed.  There are also a number of TODO statements in the channel header validation which a helpful soul might go and implement, ruining our determinism.

This goes back to my original skepticism.  Building validation on utility functions is a house of cards, waiting to collapse.  If we want to use utility functions IMO they need to be very limited in scope, and have very clear inputs and outputs.

So, my humble suggestion would be to use nothing in core/common/validation, and, if we are convinced we want to create some common and useful utility functions, let's generate them here, in the tx processor factory.  At least that way it's clear how and why they're being used.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L68](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L68)<br><strong>Comment</strong>: <pre>My goal in using the validation package was to point out how existing code maps to current work (actually in the original push I had a "Note" in the imports which I subsequently removed).

I didn't want to copy code to this package as there is the danger of having the duplication never resolved. Also, I expected refactoring in core/common/validation (and other packages) to take place and that would have triggered this to be replaced. 

We _could_ try to move such "common" code to utility functions as we go along and use it in both places. WDYT ?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L68](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L68)<br><strong>Comment</strong>: <pre>I'll go back to my original comment.

> My concern here is that we not march forward with this work with lots of re-use for expediency.  We aren't happy with what we have, which is one of the reasons we're re-implementing it.

Bluntly, the code in core/common/validation is an untested mess of singletons, side effects, and naming conventions which defy any sort of logic.  It in turn depends on protoutil which an equal rats nest of cryptic names and baffling side-effects.

As I mentioned earlier, I recently reworked the endorser code off core/common/validation and what was hundreds of lines across dozens of functions collapses into something fairly small and readable.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L78)<br><strong>Comment</strong>: <pre>If this is a new path, in no way should we be using anything that references the MSP singleton.  This is a bit of a hot button for me, and nearly triggers a reflexive -2.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L78)<br><strong>Comment</strong>: <pre>Hence the "NOTE" above.. 

The current transaction validation does this check. In keeping with that, this part of the code seemed to be right place to do it. The MSP rework - when that happens - should force this to be reconciled with that change. I suggest we leave this in place so that can be happen naturally.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L78)<br><strong>Comment</strong>: <pre>I really have to unconditionally disagree here.  Any new code referencing the MSP singleton is unacceptable.  There is absolutely no reason it needs to.

If this code needs access to a validating MSP for the channel, then we need to provide it as a dependency.  This is called from the tx processor factory, which is an instance.  All we need to do, is declare it as a dependency as a member, and then pass it in to this validation.

One of the reasons for this validation refactor is to address our years of technical debt.  Let's not write new code which extends that debt.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L78)<br><strong>Comment</strong>: <pre>>All we need to do, is declare it as a dependency as a member, and then pass it in to this validation.
That's fine by me. The right way to do this would be to add MSP to the interface as I assume thats something that's going to be needed for all types.

Note that this can be done immediately or at a later stage when we the MSP refactoring work gets underway (and we learn more).</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L78)<br><strong>Comment</strong>: <pre>Perhaps I can be more clear.  Any new code referencing an MSP singleton will get a -2 from me.  This is really a non-starter for me.

You said you are concerned about duplicating code and never getting it resolved.  I am much more concerned about extending broken concepts and never removing them.

As far as adding the MSP to the interfaces, I don't really understand.  The factory is a concrete type, it can have members with functions, we need simply to supply it.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L94)<br><strong>Comment</strong>: <pre>Why are we keeping this very nested structure? Why aren't we flattening the transaction?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L94)<br><strong>Comment</strong>: <pre>Are you suggesting we revisit pkg/tx/interfaces/go:Envelope ?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L94)<br><strong>Comment</strong>: <pre>I haven't been able to follow this series quite as closely as I'd like, but yes, I think we should revisit this.  I'm not sure why we would be replicating the transaction structure as a nested set of pointers.  I would have expected something as simple as:

 type Envelope struct {
     Type      int32
     Creator   []byte
     Extension []byte
     ...
     Data      []byte
     Signature []byte
 }</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L94)<br><strong>Comment</strong>: <pre>Couple of good reasons I can think of to retain the structure
1) reflect the original structure and relationship
2) flattening could make it unwieldy if we add more fields (as I expect we might as we go along) and similar fields emerge (e.g., two signatures).

But we can discuss.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/2ce48c77a1bb58bdf75330d56d0c47aa3410ce62/core/tx/processor_factory.go#L94)<br><strong>Comment</strong>: <pre>As discussed in the call https://gerrit.hyperledger.org/r/c/fabric/+/33125</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/26/2019, 6:48:46 PM<br><strong>UnmergedRevision</strong>: [3f1dd65259d1a0d578422c1650b991320dc8bf11](https://github.com/hyperledger-gerrit-archive/fabric/commit/3f1dd65259d1a0d578422c1650b991320dc8bf11)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/26/2019, 6:59:44 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/26/2019, 6:59:44 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/26/2019, 8:17:52 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/26/2019, 7:24:01 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L9](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L9)<br><strong>Comment</strong>: <pre>We've generally been using github.com/pkg/errors for our errors package.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L9](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L9)<br><strong>Comment</strong>: <pre>I remember the move now... will change.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L57](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L57)<br><strong>Comment</strong>: <pre>As part of the protoutil.Unmarshal* validation, I've introduced an explicit API contract that guarantees that if err == nil, the returned struct pointer cannot be nil, so we can safely skip this nil check</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L57](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L57)<br><strong>Comment</strong>: <pre>Missed that. Will fix.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L59)<br><strong>Comment</strong>: <pre>len() == 0 is the superior check here because sometimes protobuf unmarshal doesn't return a nil pointer, but a valid pointer to a zero-length slice</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L59)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L59)<br><strong>Comment</strong>: <pre>See comments below, but I'm not sure why we're doing all these nil/zero checks.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L59)<br><strong>Comment</strong>: <pre>I assumed at minimum all transaction types will have a Payload, Signature for the payload, etc.  These checks just make that intent clear. 

I'll remove those we think could be zero for some transactions (like the Signature field below).</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L66)<br><strong>Comment</strong>: <pre>I wouldn't perform this check because it's possible that a transaction of some type might have no signature (in the standard sense) and use some other artefact to establish its validity</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L66)<br><strong>Comment</strong>: <pre>For all known types this would be needed and we will be repeating code. However, its just a small check and seems to provide flexibility for future types. Will do.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L88](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L88)<br><strong>Comment</strong>: <pre>len() == 0 is the superior check here because sometimes protobuf unmarshal doesn't return a nil pointer, but a valid pointer to a zero-length slice</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L88](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L88)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L88](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L88)<br><strong>Comment</strong>: <pre>In our particular implementation, I think this is probably a fine check.  However, I'd also note that there's no requirement that a marshaled protobuf message is non-zero in length.  If I marshal a protobuf which uses the zero value in all its fields, the resulting marshaled bytes are zero in length.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L88](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L88)<br><strong>Comment</strong>: <pre>yes, this was mainly about enforcing basic rules for transactions. If we can have legitimate uses for these to be zero, I can remove these checks.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L95)<br><strong>Comment</strong>: <pre>len() == 0 is the superior check here because sometimes protobuf unmarshal doesn't return a nil pointer, but a valid pointer to a zero-length slice</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L95)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L95)<br><strong>Comment</strong>: <pre>Same goes here.  I think this might be fine from a sanity perspective, but, unmarshaling an empty byte slice will work just fine.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L95)<br><strong>Comment</strong>: <pre>Same response as above.  Can remove if we think there'll be types where this maybe a zero value.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L130)<br><strong>Comment</strong>: <pre>I would remove these checks - they are tx-type specific</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L130)<br><strong>Comment</strong>: <pre>These checks are done currently for all (known) transactions (https://github.com/hyperledger/fabric/blob/master/core/common/validation/msgvalidation.go#L139).  I can remove it but on the face of it does not seem transaction specific.

Perhaps you are thinking of the other header validation specific to endorser TXs (https://github.com/hyperledger/fabric/blob/master/core/common/validation/msgvalidation.go#L208) ?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L130)<br><strong>Comment</strong>: <pre>I understand we're trying to be defensive, but with almost all of these length 0 checks, they seem a bit overzealous to me.  We would never attempt to index into the nonce or creator.  Unmarshaling 'nil' is just fine, as is concatenating nil, hashing nil, etc.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory.go#L130)<br><strong>Comment</strong>: <pre>Again, more about stating what's expected from a transaction than being defensive. In particular to these two fields, to Ale's point, if we think there could be TXs where these could be zero,  I can remove it.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory_test.go#L42](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory_test.go#L42)<br><strong>Comment</strong>: <pre>This is also invalid because there is no signature (at least according to the code as written).</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory_test.go#L42](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory_test.go#L42)<br><strong>Comment</strong>: <pre>Agreed, needs the Signature field... the test would stop before getting to that check but that;s no reason for not adding it. Will add</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory_test.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory_test.go#L58)<br><strong>Comment</strong>: <pre>We seem to be missing many test cases here.  Notably there are no unmarshaling failures covered.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory_test.go#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory_test.go#L58)<br><strong>Comment</strong>: <pre>The first two are unmarshaling failures. Will add for the other unmarshal calls.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/tx/processor_factory_test.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory_test.go#L65)<br><strong>Comment</strong>: <pre>Having discussed this extensively with Matt, we are fine to depend on the error text of underlying messages like proto.  If they change, it will break our tests, but it's an easy fix.  If we really didn't want ot risk that breakage, we should still be looking for a substring, indicating that it's a particular error type.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory_test.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/3f1dd65259d1a0d578422c1650b991320dc8bf11/core/tx/processor_factory_test.go#L65)<br><strong>Comment</strong>: <pre>Ok. I'll look for exact string match everywhere.</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/28/2019, 5:20:26 PM<br><strong>UnmergedRevision</strong>: [125a77c359f92ea5f7e435ca712e6fed75aa8cfd](https://github.com/hyperledger-gerrit-archive/fabric/commit/125a77c359f92ea5f7e435ca712e6fed75aa8cfd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2019, 9:55:31 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2019, 9:55:31 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2019, 11:21:14 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/28/2019, 10:28:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L37](https://github.com/hyperledger-gerrit-archive/fabric/blob/125a77c359f92ea5f7e435ca712e6fed75aa8cfd/core/tx/processor_factory.go#L37)<br><strong>Comment</strong>: <pre>No need to do it in this CR since you didn't touch this code, but just a reminder that there is no test coverage for this block</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L37](https://github.com/hyperledger-gerrit-archive/fabric/blob/125a77c359f92ea5f7e435ca712e6fed75aa8cfd/core/tx/processor_factory.go#L37)<br><strong>Comment</strong>: <pre>Sure, I will cover this.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/125a77c359f92ea5f7e435ca712e6fed75aa8cfd/core/tx/processor_factory.go#L87)<br><strong>Comment</strong>: <pre>Untested</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/125a77c359f92ea5f7e435ca712e6fed75aa8cfd/core/tx/processor_factory.go#L87)<br><strong>Comment</strong>: <pre>Indeed. Will cover.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L119](https://github.com/hyperledger-gerrit-archive/fabric/blob/125a77c359f92ea5f7e435ca712e6fed75aa8cfd/core/tx/processor_factory.go#L119)<br><strong>Comment</strong>: <pre>untested</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/tx/processor_factory.go#L119](https://github.com/hyperledger-gerrit-archive/fabric/blob/125a77c359f92ea5f7e435ca712e6fed75aa8cfd/core/tx/processor_factory.go#L119)<br><strong>Comment</strong>: <pre>Will cover.</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/29/2019, 6:20:01 PM<br><strong>UnmergedRevision</strong>: [d411216e61afb19b44a943603152b4cdf0515535](https://github.com/hyperledger-gerrit-archive/fabric/commit/d411216e61afb19b44a943603152b4cdf0515535)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 6:30:38 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 6:30:38 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 7:47:20 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2019, 6:56:08 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 8/30/2019, 3:02:37 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/30/2019, 9:15:34 AM<br><strong>GitHubMergedRevision</strong>: [72cfff7dd58967655f742a0d316b5c059b924253](https://github.com/hyperledger-gerrit-archive/fabric/commit/72cfff7dd58967655f742a0d316b5c059b924253)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 9:28:08 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 9:28:08 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 10:41:20 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2019, 9:56:46 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 9/3/2019, 3:28:08 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jason Yellick<br><strong>Merged</strong>: 9/3/2019, 3:28:13 PM<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 8/30/2019, 9:39:09 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>