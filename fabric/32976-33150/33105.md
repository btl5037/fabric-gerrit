<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 33105<br><strong>Subject</strong>: [FAB-15951] Refactor bccsp GetDefault in discovery<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/21/2019, 4:37:30 PM<br><strong>LastUpdated</strong>: 8/22/2019, 11:06:57 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-15951] Refactor bccsp GetDefault in discovery

- Refactory bccsp factory GetDefault in discovery/stub.

Change-Id: Icbcd8662331593eb886b4992e2af5296440a2b1c
Signed-off-by: Chongxin Luo <Chongxin.Luo@ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Reviewed</strong>: 8/21/2019, 4:37:30 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:40:36 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16672/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:41:20 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:48:08 PM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:48:57 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16672/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16672</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:51:47 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14739/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:52:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11370/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:53:10 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 4:53:16 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 5:19:41 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 5:59:05 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/21/2019, 5:59:47 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14739/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14739

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/11370/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/11370</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 6:14:19 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-2

(1 comment)

I don't see a point in using BCCSP to compute a hash.

This is consumed by the discovery CLI. It can't use HSM even if it wanted to. 

There is only one implementation that will run in the end, and that is going to be a software one, and not a hardware one.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/21/2019, 6:21:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 10:10:41 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Patch Set 1 was rebased.</pre><strong>Reviewer</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 10:20:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 10:21:28 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16694/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 10:22:31 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 10:26:54 AM<br><strong>Message</strong>: <pre>Patch Set 3: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/22/2019, 10:27:43 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/16694/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/16694</pre><strong>Reviewer</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 10:35:42 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 10:52:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5: Patch Set 4 was rebased.</pre><strong>Reviewer</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Reviewed</strong>: 8/22/2019, 11:06:57 AM<br><strong>Message</strong>: <pre>Abandoned

abandon</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Uploader</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Created</strong>: 8/21/2019, 4:37:30 PM<br><strong>UnmergedRevision</strong>: [f6be58ad546cd7bfb2f17341c9926511d12b439b](https://github.com/hyperledger-gerrit-archive/fabric/commit/f6be58ad546cd7bfb2f17341c9926511d12b439b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 4:48:08 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 4:48:08 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 5:59:05 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 5:19:41 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 8/21/2019, 6:14:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [cmd/common/comm/client.go#L45](https://github.com/hyperledger-gerrit-archive/fabric/blob/f6be58ad546cd7bfb2f17341c9926511d12b439b/cmd/common/comm/client.go#L45)<br><strong>Comment</strong>: <pre>I'm pretty sure that this wasn't needed before your change set chain.

Can we just use the hash directly?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [cmd/common/comm/client.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/f6be58ad546cd7bfb2f17341c9926511d12b439b/cmd/common/comm/client.go#L29)<br><strong>Comment</strong>: <pre>Let's just use the golang hash.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Uploader</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Created</strong>: 8/22/2019, 10:10:41 AM<br><strong>UnmergedRevision</strong>: [2acce9d432fa17af88e33a5ae203bae47e08dc8d](https://github.com/hyperledger-gerrit-archive/fabric/commit/2acce9d432fa17af88e33a5ae203bae47e08dc8d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 4:48:08 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 4:48:08 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 5:59:05 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/21/2019, 5:19:41 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 8/21/2019, 6:14:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Uploader</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Created</strong>: 8/22/2019, 10:20:56 AM<br><strong>UnmergedRevision</strong>: [6b1fbdc7a5ceca9784e2451c5b6060c7c931c638](https://github.com/hyperledger-gerrit-archive/fabric/commit/6b1fbdc7a5ceca9784e2451c5b6060c7c931c638)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 10:26:54 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 8/21/2019, 6:14:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Uploader</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Created</strong>: 8/22/2019, 10:35:42 AM<br><strong>UnmergedRevision</strong>: [a9a3c026118221168a1d98e4a9f517b50e4bfac1](https://github.com/hyperledger-gerrit-archive/fabric/commit/a9a3c026118221168a1d98e4a9f517b50e4bfac1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 10:26:54 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 8/21/2019, 6:14:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Uploader</strong>: Chongxin Luo - dereckluo@gmail.com<br><strong>Created</strong>: 8/22/2019, 10:52:39 AM<br><strong>UnmergedRevision</strong>: [75e1039284eb260468c2ff7ef070c6fa4716101d](https://github.com/hyperledger-gerrit-archive/fabric/commit/75e1039284eb260468c2ff7ef070c6fa4716101d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/22/2019, 10:26:54 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 8/21/2019, 6:14:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote>