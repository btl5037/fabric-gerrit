<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 30119<br><strong>Subject</strong>: [FAB-14575] Rework QueryInstalledChaincode<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/15/2019, 10:20:54 AM<br><strong>LastUpdated</strong>: 3/19/2019, 6:40:24 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-14575] Rework QueryInstalledChaincode

QueryInstalledChaincode now expects a package identifier and returns label,
type and path for the specified chaincode.

Change-Id: I0f077f165b7246fbb6aded51121c2f42308e44f0
Signed-off-by: Alessandro Sorniotti <ale.linux@sopit.net>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 10:20:54 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 10:21:26 AM<br><strong>Message</strong>: <pre>Patch Set 2: Patch Set 1 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:24:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11765/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:24:59 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:29:55 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:30:40 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11765/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/11765</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:32:35 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10495/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:33:09 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:36:39 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7195/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 10:37:16 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 11:01:45 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 11:24:13 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 11:25:06 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7195/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/7195

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10495/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10495</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/15/2019, 11:25:11 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(6 comments)

Some questions</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 12:02:27 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(6 comments)</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/15/2019, 1:46:10 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Rick Rine - cr22rc@gmail.com<br><strong>Reviewed</strong>: 3/15/2019, 1:51:37 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/15/2019, 2:51:08 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)

comment</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 2:59:44 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/15/2019, 3:10:41 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)

comment</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 3:13:20 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/15/2019, 3:17:31 PM<br><strong>Message</strong>: <pre>Patch Set 2: -Code-Review

(1 comment)

Yes but the package_id will include the hash, which means that somehow the exact same code was installed on all peers within the organization</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 3:23:38 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 3:26:49 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:34:08 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11786/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:34:49 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:40:49 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:43:19 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10510/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:43:52 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/15/2019, 3:46:04 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:46:39 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7211/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:47:09 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:49:39 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11787/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:50:14 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:55:53 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:56:42 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11787/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/11787</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:56:58 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10510/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10510

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7211/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/7211

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11786/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/11786</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:57:32 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10511/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:58:02 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:58:44 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7212/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 3:59:10 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 4:27:12 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 4:41:01 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2019, 4:41:47 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10511/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10511

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7212/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/7212</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/16/2019, 7:13:26 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:17:26 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11812/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:17:51 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:23:09 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:24:03 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/11812/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/11812</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:25:46 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10535/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:26:19 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:26:34 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7235/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:27:42 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 7:54:23 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 8:12:24 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/16/2019, 8:13:13 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10535/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10535

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7235/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/7235</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/18/2019, 10:18:21 AM<br><strong>Message</strong>: <pre>Patch Set 5: Patch Set 4 was rebased</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/18/2019, 11:17:42 AM<br><strong>Message</strong>: <pre>Patch Set 6: Patch Set 5 was rebased</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/18/2019, 11:18:07 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Run IntegrationTest</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/18/2019, 11:18:11 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 11:20:27 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7311/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 11:20:50 AM<br><strong>Message</strong>: <pre>Patch Set 6: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 11:26:37 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10631/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 11:26:59 AM<br><strong>Message</strong>: <pre>Patch Set 6: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 11:41:45 AM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 12:00:39 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 12:01:19 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10631/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10631

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/7311/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/7311</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 3/18/2019, 12:04:17 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Run UnitTest

11:37:44 --- FAIL: TestMembershipConvergence (208.14s)
11:37:44     gossip_test.go:1688: 
11:37:44         	Error Trace:	gossip_test.go:1688
11:37:44         	            				asm_amd64.s:1333
11:37:44         	Error:      	Didn't stop within a timely manner
11:37:44         	Test:       	TestMembershipConvergence
11:37:44     gossip_test.go:1747: 
11:37:44         	Error Trace:	gossip_test.go:1747
11:37:44         	            				gossip_test.go:903
11:37:44         	Error:      	Timeout expired, while %s
11:37:44         	Test:       	TestMembershipConvergence
11:37:44         	Messages:   	waiting for all instance to form membership
11:37:44     gossip_test.go:904: Sets of peers connected successfully
11:37:44     gossip_test.go:925: Stopping connector...
11:37:44     gossip_test.go:927: Stopped
11:37:44     gossip_test.go:945: Started connector
11:37:44     gossip_test.go:963: Stopping peers
11:37:44     gossip_test.go:970: Took 3m28.135617784s
11:37:44 FAIL
11:37:44 coverage: 85.1% of statements
11:37:44 FAIL	github.com/hyperledger/fabric/gossip/gossip	240.792s</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 12:07:28 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10635/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 12:07:57 PM<br><strong>Message</strong>: <pre>Patch Set 6: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 3/18/2019, 12:20:19 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+1

(2 comments)

+1 for now to give Bret a chance</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 12:34:33 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 12:35:15 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/10635/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/10635</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/18/2019, 12:47:10 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

(2 comments)</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/18/2019, 1:29:48 PM<br><strong>Message</strong>: <pre>Removed Code-Review-1 by Bret Harrison <beharrison@nc.rr.com>
</pre><strong>Reviewer</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>Reviewed</strong>: 3/18/2019, 1:30:15 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Removing, comments were not addressing the actual CR</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/18/2019, 2:45:54 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)

Thanks Manish, see below</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/18/2019, 2:52:16 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)

Thanks Bret, the scope of this CR is far smaller and most of the points you raise have already been merged to master. This kind of feedback is really precious though so please do follow-up in the lifecycle JIRAs or in rocket chat. Thanks</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 3/18/2019, 3:17:51 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2

Based on offline discussion between Ale and Bret, this can be revisited later if need be.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 3/18/2019, 3:25:20 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 3/18/2019, 4:33:03 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2

(2 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 3/18/2019, 4:33:20 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jason Yellick</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 4:35:51 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/6131/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 4:36:07 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/4817/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/18/2019, 5:06:47 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/4817/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/4817

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/6131/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/6131</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 3/19/2019, 6:40:24 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(3 comments)

Thanks, all done here https://gerrit.hyperledger.org/r/#/c/30215/</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 3/15/2019, 10:20:54 AM<br><strong>UnmergedRevision</strong>: [6d24bfae95924a2cbdf5db9ebd3c8b43d96e03b6](https://github.com/hyperledger-gerrit-archive/fabric/commit/6d24bfae95924a2cbdf5db9ebd3c8b43d96e03b6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 10:29:55 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 10:29:55 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 11:24:13 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 11:01:45 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 3/15/2019, 10:21:26 AM<br><strong>UnmergedRevision</strong>: [1b33be535d372b7cf06bda67649b480f0db9f98b](https://github.com/hyperledger-gerrit-archive/fabric/commit/1b33be535d372b7cf06bda67649b480f0db9f98b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 3:40:49 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 3:40:49 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 3:56:58 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L19](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L19)<br><strong>Comment</strong>: <pre>I like that the name and version have been removed from the install. If I understand correctly, the install has become just a moving a code blob to the server. The approve for my org request then will make the association of a code blob with  a name and version just on the one org. However how is the package_id value generated on the server side, how will the approve will work across an org with many peers where each has done their own install ?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L19](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L19)<br><strong>Comment</strong>: <pre>> how is the package_id value generated on the server side

from an SDK perspective, you shouldn't want to know, since that identifier will be returned to you in the response of the install command (line 25). That said, it is the concatenation of the label, the colon character and the hex encoded sha256 hash of the chaincode package

> how will the approve will work across an org with many 

peers where each has done their own install
if each peer has installed the same package, ids will be identical. If not, only the peers that received the package whose id matches the one supplied at the approve step will be able to endorse invocations. Other peers will produce meaningful error messages.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L19](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L19)<br><strong>Comment</strong>: <pre>I thought that one of the reason to not use the hash of the code was that a peer would not be required to run the exact same code. This has been a problem when different clients packaged the code, they would not get the same hash. Having the has as part of the identifier would required that the install be done by the same client or with the same packaged bytes. Do we really want to make that a requirement, I thought we were trying to not make this easier for customers. Is there a reason that we have to use the hash as part of the unique identifier ? The user is already providing the "label"</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L19](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L19)<br><strong>Comment</strong>: <pre>The package_id of a chaincode definition doesn't have to be identical across all orgs</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L24)<br><strong>Comment</strong>: <pre>I think this should be consistent with what I get when I do the queries.  If I want the information I would then need to always follow up with a query to get that?  hash, label, type, path</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L25)<br><strong>Comment</strong>: <pre>is the "label" also generated by fabric, if so why is not included here</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L25)<br><strong>Comment</strong>: <pre>No, the label is supplied by the client at the package step, together with type and path.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L25)<br><strong>Comment</strong>: <pre>Why do we need this if the peer is generating a package ID</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L25](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L25)<br><strong>Comment</strong>: <pre>Because this is a result message that the peer sends back to the client</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L55)<br><strong>Comment</strong>: <pre>Where do these come from ?
Why do we need three generated "identifiers", why not just a package_id.

What is the use case for the application to know the "label" and "hash". Why if returned on the query are these not returned on the install results ?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L55)<br><strong>Comment</strong>: <pre>The package ID is an internal fabric identifier generated by the peer and returned by install. The label is a human-readable description of this installed chaincode chosen by the client at the package step. The hash is the sha256 of the package file. package_id and label must be there at a minimum; I could be persuaded to remove the hash, though I don't quite see how it hurts.</pre><strong>Commenter</strong>: Rick Rine - cr22rc@gmail.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L55)<br><strong>Comment</strong>: <pre>Seems inconsistent. If I query one specific one QueryInstalledChaincodeResult
I get: label, type, path

But if I want all QueryInstalledChaincodesResult each returned  has: label, package_id, and hash?</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L70)<br><strong>Comment</strong>: <pre>Why do we have to have the same information in three different objects, why can't we have a "ChaincodeDefinition" message with this information</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L70)<br><strong>Comment</strong>: <pre>What are the three objects that have the same information?</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>Why are the hash and label not used, if returned by the Query, they must be important</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>As explained above, hash and label are not identifiers.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>If we used the label here to associate the chaincode definition with a source code package, then different peers would not have to have same code package. Each peer could choose the code that it wanted to run.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>The admin of each org can specify a different package_id here - no need to have a single one for the entire channel.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>Yes but the package_id will include the hash, which means that somehow the exact same code was installed on all peers within the organization</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>Right, within an organisation we are still enforcing that they run the exact same package. The rationale is that this way, endorsements from an org are guaranteed to be consistent since we are sure that they are running the exact same code. Granted, we might unduly complain when the same code was package twice, but at least we'll block scenarios where _different_ code was installed.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>I think we should not be making this decision for the organization, they should be able to decide which they wish to run. And how can we guarantee that package and install will produce the same hash across all clients and peers within the organization ?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L78](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L78)<br><strong>Comment</strong>: <pre>I believe the idea is that the org admin will package once and install everywhere. If you start from the same sources, the packaging procedure should be deterministic and produce the same resulting package (and package-id). We could see in the course of the alpha whether these restrictions are too strict and we should move to a per-node package structure.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L127)<br><strong>Comment</strong>: <pre>Why is the name not included, if it was then the same "ChaincodeDefinition" message could be used and it would be nice to have a complete set of values in one object</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L127)<br><strong>Comment</strong>: <pre>In the future we might want to extend the set of fields we require/return for a specific query. If all queries used the same protobuf, we'd end up with a jumbo protobuf with a lot of fields that only matter for a specific query.</pre><strong>Commenter</strong>: Bret Harrison - beharrison@nc.rr.com<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L127)<br><strong>Comment</strong>: <pre>I think that will always be a base set of information that must be included. It is this common set that I think should have it's own protobuf "message" instead of redefining it three times.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/lifecycle/lifecycle.proto#L127](https://github.com/hyperledger-gerrit-archive/fabric/blob/1b33be535d372b7cf06bda67649b480f0db9f98b/protos/peer/lifecycle/lifecycle.proto#L127)<br><strong>Comment</strong>: <pre>We discussed this at length but the consensus seemed to always be that redefining proto messages is actually better than forcing the use of common ones. What is the rationale against redefinition?</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 3/15/2019, 3:46:04 PM<br><strong>UnmergedRevision</strong>: [42a7a18281402864f41f073293297cc067691725](https://github.com/hyperledger-gerrit-archive/fabric/commit/42a7a18281402864f41f073293297cc067691725)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 3:55:53 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 3:55:53 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 4:41:01 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2019, 4:27:12 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 3/16/2019, 7:13:26 AM<br><strong>UnmergedRevision</strong>: [71810d01b367fc56b8f91faf48f53862a3bec489](https://github.com/hyperledger-gerrit-archive/fabric/commit/71810d01b367fc56b8f91faf48f53862a3bec489)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:23:09 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:23:09 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 8:12:24 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:54:23 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 3/18/2019, 10:18:21 AM<br><strong>UnmergedRevision</strong>: [9f661dc369ce3e040b1521137081c6b8b5d80a35](https://github.com/hyperledger-gerrit-archive/fabric/commit/9f661dc369ce3e040b1521137081c6b8b5d80a35)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:23:09 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:23:09 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 8:12:24 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:54:23 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle.go#L403](https://github.com/hyperledger-gerrit-archive/fabric/blob/9f661dc369ce3e040b1521137081c6b8b5d80a35/core/chaincode/lifecycle/lifecycle.go#L403)<br><strong>Comment</strong>: <pre>cannot metadata be nil</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle.go#L403](https://github.com/hyperledger-gerrit-archive/fabric/blob/9f661dc369ce3e040b1521137081c6b8b5d80a35/core/chaincode/lifecycle/lifecycle.go#L403)<br><strong>Comment</strong>: <pre>There's a check in Parse 

https://github.com/hyperledger/fabric/blob/master/core/chaincode/persistence/chaincode_package.go#L101-L107

that ensures against that. Should I repeat the check here?</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 3/18/2019, 11:17:42 AM<br><strong>GitHubMergedRevision</strong>: [2aee4ec052092eb55106da191688e1c9fdae4c67](https://github.com/hyperledger-gerrit-archive/fabric/commit/2aee4ec052092eb55106da191688e1c9fdae4c67)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:23:09 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/16/2019, 7:23:09 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/18/2019, 12:00:39 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/18/2019, 12:34:33 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 3/18/2019, 4:33:03 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jason Yellick<br><strong>Merged</strong>: 3/18/2019, 4:33:20 PM<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 3/18/2019, 3:17:51 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/cache.go#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/cache.go#L105)<br><strong>Comment</strong>: <pre>Could we update this to use the PackageID?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/cache.go#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/cache.go#L105)<br><strong>Comment</strong>: <pre>Good catch, done in https://gerrit.hyperledger.org/r/#/c/30215/</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/cache.go#L109](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/cache.go#L109)<br><strong>Comment</strong>: <pre>Same here.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/cache.go#L109](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/cache.go#L109)<br><strong>Comment</strong>: <pre>Good catch, done in https://gerrit.hyperledger.org/r/#/c/30215/</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle.go#L392](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/lifecycle.go#L392)<br><strong>Comment</strong>: <pre>Cannot this be nil. Or PackageParser is expected to return the error in that case?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle.go#L392](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/lifecycle.go#L392)<br><strong>Comment</strong>: <pre>There's a check in Parse

https://github.com/hyperledger/fabric/blob/master/core/chaincode/persistence/chaincode_package.go#L101-L107</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle.go#L392](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/lifecycle.go#L392)<br><strong>Comment</strong>: <pre>Sure, I am not sure what is the best pattern to catch if the dependency changes its behavior. May be there are UTs in the implementation package but when looking at this code, there is no way to know the dependency behavior...I don't have a concrete answer either (may be docs on the dependency interface is best we can do)</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle.go#L392](https://github.com/hyperledger-gerrit-archive/fabric/blob/2aee4ec052092eb55106da191688e1c9fdae4c67/core/chaincode/lifecycle/lifecycle.go#L392)<br><strong>Comment</strong>: <pre>I ended up adding an explicit check here https://gerrit.hyperledger.org/r/#/c/30215/ since we already have one for QueryInstalledChaincode</pre></blockquote>