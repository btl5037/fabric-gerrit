<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 5945<br><strong>Subject</strong>: Replay attack protection<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/13/2017, 9:35:23 AM<br><strong>LastUpdated</strong>: 2/18/2017, 1:32:58 PM<br><strong>CommitMessage</strong>:<br><pre>Replay attack protection

This change-set enforces the field TxID of a
proposal/transaction to be computed as the result
of an hash function computed on nonce and creator.
This is to be able to uniquely identity a proposal/transaction.

In addition, the endorsers verify that a TxID is not duplicated
by looking up the ledger as done by the committers.

Before merging this change-set, the client-sdk
needs to be modified to generate the TxID in the
new expected way.

This change-set comes in the context of
https://jira.hyperledger.org/browse/FAB-583

Change-Id: Icc5892976aeec1d4fdca736234355833d04bd4c8
Signed-off-by: Angelo De Caro <adc@zurich.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 9:35:23 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 9:39:12 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6834/</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 9:42:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 9:43:49 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6839/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 9:46:51 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6839/ : FAILURE</pre><strong>Reviewer</strong>: Baohua Yang - yangbaohua@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 9:47:47 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Will the duplication checking introduce extra delay?
How much is the cost?</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 9:51:01 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Hi Baohua, the committers were already performing the lookup. So no additional slowdown there. The endorsers will now perform the same check and will slowdown in the same way.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 9:55:46 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 9:59:31 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6840/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 10:11:57 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6834/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 10:53:54 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6840/ : SUCCESS</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 2/13/2017, 11:48:50 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(5 comments)

Hi Angelo, 
Thanks! A few comments below related mostly on how to facilitate a three-tier architecture needs if we put epoch into txid computation. ... Perhaps we include epoch identifiers to binding but not to the transaction identifier(?) Wdyt?</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 3:10:26 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(5 comments)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 3:33:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 3:34:10 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6944/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 3:36:53 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6944/ : FAILURE</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 3:45:43 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)

Thanks Angelo!
It looks good to me for now, though I ll wait till the CI verifies :)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 7:05:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 7:07:57 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6949/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 8:22:06 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6949/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/14/2017, 9:02:46 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)

some minor comments and a question. Thanks</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 9:15:58 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(3 comments)</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/14/2017, 9:16:43 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 9:20:12 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6956/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/14/2017, 10:21:10 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6956/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/14/2017, 4:15:26 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/15/2017, 4:30:30 AM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

Before merging this change-set, the client-sdk needs to be modified to generate the TxID in the new expected way.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/15/2017, 2:17:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/15/2017, 2:18:25 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review-1

This needs to be merged only after the client SDKs get updated to compute TxID in the proper way.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2017, 2:22:01 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7034/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/15/2017, 2:25:20 PM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7034/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/16/2017, 9:39:44 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 9:44:55 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7060/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 10:36:25 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7060/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/16/2017, 11:48:36 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 11:51:49 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7070/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/16/2017, 12:50:04 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7070/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/16/2017, 4:41:33 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(2 comments)

1 question:</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/17/2017, 2:46:29 AM<br><strong>Message</strong>: <pre>Patch Set 9:

(2 comments)</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/17/2017, 10:43:19 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2

We should assume assume that at this point config sync with client would have to be communicated out of band.</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/18/2017, 6:22:04 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 6:22:11 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/2787/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 6:23:00 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7153/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 6:26:59 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-z/2787/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7153/ : FAILURE</pre><strong>Reviewer</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Reviewed</strong>: 2/18/2017, 6:27:25 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 6:27:36 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/2790/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 6:29:50 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7156/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 7:48:32 AM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-z/2790/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/7156/ : SUCCESS</pre><strong>Reviewer</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Reviewed</strong>: 2/18/2017, 7:53:01 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+1

Renewing my grade, after Binh's requests have been accommodated. Thanks Angelo!</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/18/2017, 9:08:14 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+2</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 2/18/2017, 12:48:46 PM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 12:48:50 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Yacov Manevich</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 12:49:00 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-z/483/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 12:52:20 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1116/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/18/2017, 1:32:58 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1116/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-merge-z/483/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/13/2017, 9:35:23 AM<br><strong>UnmergedRevision</strong>: [aedc2c75c6685192f669030fae1ff895aa53f99b](https://github.com/hyperledger-gerrit-archive/fabric/commit/aedc2c75c6685192f669030fae1ff895aa53f99b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 10:11:57 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/13/2017, 9:42:32 AM<br><strong>UnmergedRevision</strong>: [fb8f30655156d4117f406f14be915dedba0e8a99](https://github.com/hyperledger-gerrit-archive/fabric/commit/fb8f30655156d4117f406f14be915dedba0e8a99)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 9:46:51 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/13/2017, 9:55:46 AM<br><strong>UnmergedRevision</strong>: [162294552aa6ed4b2985ec03de5b12d668466f69](https://github.com/hyperledger-gerrit-archive/fabric/commit/162294552aa6ed4b2985ec03de5b12d668466f69)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/13/2017, 10:53:54 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69//COMMIT_MSG#L11)<br><strong>Comment</strong>: <pre>I know we discussed about having this triplet as source for tx identifiers. However, do you think that in a three tier architecture the epoch would be easily computable?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [/COMMIT_MSG#L11](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69//COMMIT_MSG#L11)<br><strong>Comment</strong>: <pre>I agree, this might be complex to handle. It requires the client to know which is the current epoch. I will remove this.</pre><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [core/common/validation/msgvalidation.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/core/common/validation/msgvalidation.go#L95)<br><strong>Comment</strong>: <pre>Just info for me here bc I haven't seen any info on how epoch is set.  Is it by some kind of config in yaml to indicate how many blocks epoch will increase, assuming it starts at 0? So application/sdk would not set this value.</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [core/common/validation/msgvalidation.go#L95](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/core/common/validation/msgvalidation.go#L95)<br><strong>Comment</strong>: <pre>Hi Binh, in an update to the change-set. I have removed the Epoch because we don't have still in place the mechanism to update it and it is not clear how it will play in a three-tier architecture. Elli has probably opened a JIRA item for this.</pre><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [core/endorser/endorser.go#L293](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/core/endorser/endorser.go#L293)<br><strong>Comment</strong>: <pre>We don't need this comment any longer since we check below</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [core/endorser/endorser.go#L293](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/core/endorser/endorser.go#L293)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [core/endorser/endorser.go#L305](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/core/endorser/endorser.go#L305)<br><strong>Comment</strong>: <pre>I think we should add the creator in this error message. It is for analytics to figure out the trouble maker.</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [core/endorser/endorser.go#L305](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/core/endorser/endorser.go#L305)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/commonutils.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/commonutils.go#L176)<br><strong>Comment</strong>: <pre>I am guessing that this is the case, but channelHeader.TxId cannot be non-nil at this point, correct?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/commonutils.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/commonutils.go#L176)<br><strong>Comment</strong>: <pre>What do you mean? It gets set here.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/commonutils.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/commonutils.go#L176)<br><strong>Comment</strong>: <pre>I was asking if one needs to check that it is nil prior to being set :D</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L284](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L284)<br><strong>Comment</strong>: <pre>Same comment as before :)</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L284](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L284)<br><strong>Comment</strong>: <pre>Will remove!</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L506](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L506)<br><strong>Comment</strong>: <pre>So is this one something that we may be configurable in the future? Do we need to state that in the config block or somewhere in your opinion?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L506](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L506)<br><strong>Comment</strong>: <pre>The config block is definitely a good place. I will add a TODO here to remember.</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L506](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L506)<br><strong>Comment</strong>: <pre>Will also open a jira, thanks!</pre><strong>Commenter</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L513](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L513)<br><strong>Comment</strong>: <pre>Same comment as in commit message :)</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L513](https://github.com/hyperledger-gerrit-archive/fabric/blob/162294552aa6ed4b2985ec03de5b12d668466f69/protos/utils/proputils.go#L513)<br><strong>Comment</strong>: <pre>Will remove :)</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/14/2017, 3:33:10 AM<br><strong>UnmergedRevision</strong>: [4c83132e6481a9794429d98d37b6c1087976c119](https://github.com/hyperledger-gerrit-archive/fabric/commit/4c83132e6481a9794429d98d37b6c1087976c119)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2017, 3:36:53 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/14/2017, 7:05:16 AM<br><strong>UnmergedRevision</strong>: [41f2e79a77ddf70b280ebaec2dd1d13f49cbf8cc](https://github.com/hyperledger-gerrit-archive/fabric/commit/41f2e79a77ddf70b280ebaec2dd1d13f49cbf8cc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2017, 8:22:06 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/14/2017, 9:16:43 AM<br><strong>UnmergedRevision</strong>: [2d6069a7ab4f66501deb1843faa1884cfb593d60](https://github.com/hyperledger-gerrit-archive/fabric/commit/2d6069a7ab4f66501deb1843faa1884cfb593d60)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/14/2017, 10:21:10 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 2/14/2017, 4:15:26 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Approved</strong>: 2/15/2017, 4:30:30 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/15/2017, 2:17:41 PM<br><strong>UnmergedRevision</strong>: [9a153a23450fe560731a4fbf07cf97a77527f6aa](https://github.com/hyperledger-gerrit-archive/fabric/commit/9a153a23450fe560731a4fbf07cf97a77527f6aa)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/15/2017, 2:25:20 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Approved</strong>: 2/15/2017, 2:18:25 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/16/2017, 9:39:44 AM<br><strong>UnmergedRevision</strong>: [3f1868cec7a1361c1d8ce60a22464c2b3a244102](https://github.com/hyperledger-gerrit-archive/fabric/commit/3f1868cec7a1361c1d8ce60a22464c2b3a244102)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/16/2017, 10:36:25 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/16/2017, 11:48:36 AM<br><strong>UnmergedRevision</strong>: [120f69b539d2219a101ff3869580c5a4656d5246](https://github.com/hyperledger-gerrit-archive/fabric/commit/120f69b539d2219a101ff3869580c5a4656d5246)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/16/2017, 12:50:04 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 2/17/2017, 10:43:19 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L504](https://github.com/hyperledger-gerrit-archive/fabric/blob/120f69b539d2219a101ff3869580c5a4656d5246/protos/utils/proputils.go#L504)<br><strong>Comment</strong>: <pre>I am assuming that this capability is also available on the SDK for the app to compute the tx id.</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L504](https://github.com/hyperledger-gerrit-archive/fabric/blob/120f69b539d2219a101ff3869580c5a4656d5246/protos/utils/proputils.go#L504)<br><strong>Comment</strong>: <pre>So, the client-sdk will have to compute TxID in the same way that is: SHA2-256(nonce || creator).
SHA2 is a standard hash function.</pre><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L506](https://github.com/hyperledger-gerrit-archive/fabric/blob/120f69b539d2219a101ff3869580c5a4656d5246/protos/utils/proputils.go#L506)<br><strong>Comment</strong>: <pre>Where is this hash function specified in the channel config and if there's api for the SDK to get it too?</pre><strong>Commenter</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>CommentLine</strong>: [protos/utils/proputils.go#L506](https://github.com/hyperledger-gerrit-archive/fabric/blob/120f69b539d2219a101ff3869580c5a4656d5246/protos/utils/proputils.go#L506)<br><strong>Comment</strong>: <pre>That's one option, to take the configuration from the channel config. Not sure how the client-sdk can handle that.</pre></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/18/2017, 6:22:04 AM<br><strong>UnmergedRevision</strong>: [98112dfb7981d49156294ba5ec1d76093b60ada0](https://github.com/hyperledger-gerrit-archive/fabric/commit/98112dfb7981d49156294ba5ec1d76093b60ada0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/18/2017, 6:26:59 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Uploader</strong>: Angelo De Caro - adc@zurich.ibm.com<br><strong>Created</strong>: 2/18/2017, 6:27:25 AM<br><strong>GitHubMergedRevision</strong>: [32668825e4f587209999367e55181fe03b6eb5c3](https://github.com/hyperledger-gerrit-archive/fabric/commit/32668825e4f587209999367e55181fe03b6eb5c3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/18/2017, 7:48:32 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 2/18/2017, 9:08:14 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 2/18/2017, 12:48:46 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Yacov Manevich<br><strong>Merged</strong>: 2/18/2017, 12:48:50 PM<br><br><strong>Approver</strong>: Elli Androulaki - lli@zurich.ibm.com<br><strong>Approved</strong>: 2/18/2017, 7:53:01 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>