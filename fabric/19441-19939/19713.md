<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 19713<br><strong>Subject</strong>: [FAB-9001] WIP Add new lifecycle protos<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/23/2018, 9:42:51 PM<br><strong>LastUpdated</strong>: 10/18/2018, 12:40:11 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-9001] WIP Add new lifecycle protos

Change-Id: Ie3b58cec9e33dadc9c8fa880a9c74c0122b498e7
Signed-off-by: Jason Yellick <jyellick@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 3/23/2018, 9:42:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/23/2018, 9:44:35 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21809/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/23/2018, 9:45:04 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/13404/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/23/2018, 9:51:18 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21809/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21809/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-x86_64/21809

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/13404/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/13404/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-end-2-end-x86_64/13404</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 3/26/2018, 9:45:05 AM<br><strong>Message</strong>: <pre>Patch Set 1:

reverify-x</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 3/26/2018, 9:45:25 AM<br><strong>Message</strong>: <pre>Patch Set 1:

reverify-e2e</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/26/2018, 9:47:44 AM<br><strong>Message</strong>: <pre>Patch Set 1: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21850/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/26/2018, 9:48:14 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/13429/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/26/2018, 9:56:24 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21850/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21850/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-x86_64/21850

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/13429/ : FAILURE

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/13429/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-end-2-end-x86_64/13429</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/3/2018, 12:12:08 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(4 comments)

Thanks Jason, some comments from my side</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/3/2018, 12:14:01 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Ry Jones - ry@linux.com<br><strong>Reviewed</strong>: 4/3/2018, 1:35:42 PM<br><strong>Message</strong>: <pre>Removed reviewer Hyperledger Jobbuilder with the following votes:

* Verified-1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 4/3/2018, 3:04:42 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(4 comments)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/5/2018, 4:21:31 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 10/12/2018, 3:33:04 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review-1

Jason, can this be abandoned? Shouldn't leave things untouched this long.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 10/18/2018, 12:40:11 PM<br><strong>Message</strong>: <pre>Abandoned</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 3/23/2018, 9:42:51 PM<br><strong>UnmergedRevision</strong>: [64bb564cabcb2f0701a0fb787ad8da0fc1c19898](https://github.com/hyperledger-gerrit-archive/fabric/commit/64bb564cabcb2f0701a0fb787ad8da0fc1c19898)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 10/12/2018, 3:33:04 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L181](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L181)<br><strong>Comment</strong>: <pre>Currently, the installer of a chaincode can also specify 
"ExecEnv       ChaincodeDeploymentSpec_ExecutionEnvironment"

https://github.com/hyperledger/fabric/blob/release-1.1/protos/peer/chaincode.pb.go#L70-L73

Is this something we want to remove?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L209](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L209)<br><strong>Comment</strong>: <pre>We could add a field to store collection configuration data (currently it's just a byte array). Do you think it's appropriate to store it at this level?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L209](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L209)<br><strong>Comment</strong>: <pre>Yes, there is an 'XXX' at the bottom of this message for collection data.  I wasn't sure what the type would be.  I don't really see any reason why it should be opaque though?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L210](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L210)<br><strong>Comment</strong>: <pre>Do you mean ChaincodeCodePackage?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L210](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L210)<br><strong>Comment</strong>: <pre>Indeed I do!</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L219](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L219)<br><strong>Comment</strong>: <pre>Depending on which component is required to handle the invocation of Init for a chaincode, we may have to rename this field (for instance if it's not ESCC) or remove it and store it elsewhere.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L219](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L219)<br><strong>Comment</strong>: <pre>Right, I agree, this belongs elsewhere.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L248](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L248)<br><strong>Comment</strong>: <pre>It may be interesting to explore whether it's possible to expand this - for instance passing meta policies might be interesting here?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L248](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L248)<br><strong>Comment</strong>: <pre>I was aiming for compatibility with the current VSCC.  Ideally, I'd love to see multiple VSCCs, one for this static EP type, one referencing policies from the channel config.  And one dynamically computing policies based on the current membership.

What do you think? Multiple VSCCs, or more parameters to configure the standard one?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [protos/peer/chaincode.proto#L248](https://github.com/hyperledger-gerrit-archive/fabric/blob/64bb564cabcb2f0701a0fb787ad8da0fc1c19898/protos/peer/chaincode.proto#L248)<br><strong>Comment</strong>: <pre>If we were to have multiple VSCCs (one per policy type), I expect that there would be a big degree of code duplication. Extending the standard VSCC to use additional policy on the other hand would be a small enough change, and it would enable the chaincode deployer to always use the standard VSCC with different types of policy.</pre></blockquote>