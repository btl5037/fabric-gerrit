<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 25533<br><strong>Subject</strong>: [FAB-11585] Raft communication layer, part 1<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/14/2018, 11:41:09 AM<br><strong>LastUpdated</strong>: 8/26/2018, 7:55:42 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-11585] Raft communication layer, part 1

This change set implements a base communication layer for
the raft orderer, but it can actually be used for any
consensus protocol that has:
- A specified number of members at any given point in time
- uses TLS pinning for identification
- Represents members as integers

The communication has 3 basic capabilities:

1) Obtain a remote context given a destination node ID and a channel
2) Configure the communication on the context of a given channel
3) Get notified of Step() and Submit() messages from other remote nodes

Change-Id: I87f193b7723f95f359cc4071e28b362be703ab74
Signed-off-by: yacovm <yacovm@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/14/2018, 11:41:09 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 11:43:20 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3919/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 11:43:36 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 11:46:05 AM<br><strong>Message</strong>: <pre>Patch Set 1: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 11:46:35 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3919/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3919/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3919</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/14/2018, 11:48:43 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 11:54:13 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3922/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 11:54:35 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:02:52 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:03:23 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3922/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3922</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:13:44 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2556/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:14:05 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:28:11 PM<br><strong>Message</strong>: <pre>Patch Set 2: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:30:56 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3673/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:31:11 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1266/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:31:20 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:31:48 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:50:43 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:52:45 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 12:53:28 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3673/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3673/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3673

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2556/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2556

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1266/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1266</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/14/2018, 1:20:34 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 1:22:36 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3677/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 1:22:58 PM<br><strong>Message</strong>: <pre>Patch Set 2: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 1:38:20 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 1:38:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3677/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3677</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/14/2018, 3:48:22 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 3:52:34 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3936/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 3:52:57 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:00:50 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:01:21 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3936/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3936</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:02:29 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2564/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:02:49 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:14:57 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:16:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3685/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:17:26 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:18:45 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1274/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:19:18 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:32:32 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:37:15 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 4:37:41 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2564/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2564

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3685/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3685

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1274/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1274</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/14/2018, 6:40:06 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:43:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3941/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:44:13 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:50:31 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:50:49 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/3941/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/3941</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:54:12 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2568/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:54:30 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:55:23 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-SmokeTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 6:55:54 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2568/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2568/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2568</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/14/2018, 7:04:20 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Run SmokeTest
Run IntegrationTest
Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:06:37 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3689/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:06:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:07:08 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2569/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:07:24 PM<br><strong>Message</strong>: <pre>Patch Set 4: -F2-SmokeTest

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:07:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1279/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:08:27 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:17:46 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:22:24 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:23:08 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/14/2018, 7:23:31 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3689/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3689

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2569/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2569

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1279/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1279</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/17/2018, 3:32:00 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(15 comments)

Nits aside (see below), this is a very good piece of work. (We should be able to state this more assertively once our Raft stack has reached a point where it's using it.)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/17/2018, 4:38:23 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(4 comments)

Thanks Kostas, here are some replies for your comments.

To those that I haven't replied - I agree and will address next week :)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/17/2018, 4:39:35 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 11:03:05 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 11:21:43 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 11:21:44 AM<br><strong>Message</strong>: <pre>Patch Set 5:

No Builds Executed</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 11:22:49 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(12 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 11:23:24 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 11:23:25 AM<br><strong>Message</strong>: <pre>Patch Set 6:

No Builds Executed</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 12:12:38 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Run VerifyBuild</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 1:54:16 PM<br><strong>Message</strong>: <pre>Patch Set 7: Patch Set 6 was rebased</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 1:54:25 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Run VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 1:54:26 PM<br><strong>Message</strong>: <pre>Patch Set 6:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:07:28 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4114/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:07:45 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:14:29 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:22:28 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2671/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:22:56 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:35:03 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:38:21 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3804/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:38:41 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:38:45 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1383/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:39:26 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:46:13 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:53:17 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 3:53:51 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3804/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3804/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3804

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4114/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4114

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2671/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2671

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1383/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1383</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/20/2018, 4:02:59 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 4:08:19 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3810/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 4:08:40 PM<br><strong>Message</strong>: <pre>Patch Set 7: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 4:24:30 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/20/2018, 4:25:01 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/3810/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/3810</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/25/2018, 9:26:20 AM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2

(2 comments)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 8/26/2018, 2:34:32 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/26/2018, 2:45:14 PM<br><strong>Message</strong>: <pre>Patch Set 7:

and... merge?</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/26/2018, 3:23:02 PM<br><strong>Message</strong>: <pre>Patch Set 7:

> Patch Set 7:
> 
> and... merge?

(I'd guess we're waiting on reviews on pt. 2 before doing that.)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/26/2018, 3:54:43 PM<br><strong>Message</strong>: <pre>Patch Set 7:

> (I'd guess we're waiting on reviews on pt. 2 before doing that.)

@Gari - are we?</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 8/26/2018, 6:39:06 PM<br><strong>Message</strong>: <pre>Patch Set 7:

> > (I'd guess we're waiting on reviews on pt. 2 before doing that.)
 > 
 > @Gari - are we?

I was not sure what we were doing with merges for the Raft stuff at this point ... seems since this is all new code we can likely merge with no issues for 1.3?  I was basically leaving it to Kostas</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 8/26/2018, 6:46:41 PM<br><strong>Message</strong>: <pre>Patch Set 7:

I think we can merge without issues since there is no code that references this code and it's contained inside its own directory, so not even init() funcs (which I don't believe to have) are invoked in production.

I understood from Kostas's comment that he wanted part 2 to be reviewed, and he +2ed it. 
So, I guess he can merge after someone reviews part 2 ( https://gerrit.hyperledger.org/r/#/c/25535/ )</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/26/2018, 7:18:26 PM<br><strong>Message</strong>: <pre>Patch Set 7:

> Patch Set 7:
> 
> > > (I'd guess we're waiting on reviews on pt. 2 before doing that.)
>  > 
>  > @Gari - are we?
> 
> I was not sure what we were doing with merges for the Raft stuff at this point ... seems since this is all new code we can likely merge with no issues for 1.3?  I was basically leaving it to Kostas

Roger, sorry for missing that.

(This won't break master, so we'll merge.)</pre><strong>Reviewer</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Reviewed</strong>: 8/26/2018, 7:18:35 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Kostas Christidis</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2018, 7:20:30 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4391/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2018, 7:21:08 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3061/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/26/2018, 7:55:42 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4391/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/4391

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3061/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/3061</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/14/2018, 11:41:09 AM<br><strong>UnmergedRevision</strong>: [44c1acca8d7d76bd0314c3e299c1834fd6d147e1](https://github.com/hyperledger-gerrit-archive/fabric/commit/44c1acca8d7d76bd0314c3e299c1834fd6d147e1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 11:46:05 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/14/2018, 11:48:43 AM<br><strong>UnmergedRevision</strong>: [c4c59f9d2adb536ef5537cbf39ba9bef9c74ec1d](https://github.com/hyperledger-gerrit-archive/fabric/commit/c4c59f9d2adb536ef5537cbf39ba9bef9c74ec1d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 12:02:52 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 12:02:52 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 12:28:11 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 12:50:43 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 1:38:20 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/14/2018, 3:48:22 PM<br><strong>UnmergedRevision</strong>: [aec87bb8fc52935756fb4fc95f9e049cfd1ced1b](https://github.com/hyperledger-gerrit-archive/fabric/commit/aec87bb8fc52935756fb4fc95f9e049cfd1ced1b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 4:00:50 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 4:00:50 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 4:14:57 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 4:37:15 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 4:32:32 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/14/2018, 6:40:06 PM<br><strong>UnmergedRevision</strong>: [117238da233ed00adb48459fe19c544dbf2cc9a9](https://github.com/hyperledger-gerrit-archive/fabric/commit/117238da233ed00adb48459fe19c544dbf2cc9a9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 6:50:31 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 6:50:31 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 7:17:46 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 7:23:08 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/14/2018, 7:22:24 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L29)<br><strong>Comment</strong>: <pre>(of a)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L29)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L30)<br><strong>Comment</strong>: <pre>(that)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L30)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L62)<br><strong>Comment</strong>: <pre>Is this interface definition here temporary, and more of a way to guide consumers as to how to use you? (If so, let's keep it temporarily, otherwise, let's drop it?)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L62](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L62)<br><strong>Comment</strong>: <pre>exactly. let's keep it temporarily..</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L63](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L63)<br><strong>Comment</strong>: <pre>(Remote)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L63](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L63)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L87)<br><strong>Comment</strong>: <pre>(Switch to "ToM"? https://gerrit.hyperledger.org/r/c/24659/2/orderer/consensus/raft/comm/comm.go#300)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L87)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L119](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L119)<br><strong>Comment</strong>: <pre>I'd expect a "classifyRequest" function to return the category this request belongs to; some sort of ENUM-like categorization as seen here: https://github.com/hyperledger/fabric/blob/77c3aa6ce5b0cfba93bfda009095886dbcadff91/orderer/common/msgprocessor/msgprocessor.go#L62

What this function does is return a request context, so "requestContext" seems like a far more appropriate name?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L119](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L119)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L169)<br><strong>Comment</strong>: <pre>Under which condition do you expect a stub to be present in a given channel mapping, but not be active?

I am not calling out an issue in the code (yet anyway), I am trying to educate myself.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L169)<br><strong>Comment</strong>: <pre>for example if you have a config update and you now know a new OSN but you can't connect to it during the reconfiguration, so you try to activate it later upon demand.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L169)<br><strong>Comment</strong>: <pre>Ack</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L241](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L241)<br><strong>Comment</strong>: <pre>(without)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L241](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L241)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L254](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L254)<br><strong>Comment</strong>: <pre>(updateStubInMapping)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L254](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L254)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L333](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L333)<br><strong>Comment</strong>: <pre>https://gerrit.hyperledger.org/r/c/24659/2/orderer/consensus/raft/comm/comm.go#100</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm.go#L333](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm.go#L333)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm_test.go#L167](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm_test.go#L167)<br><strong>Comment</strong>: <pre>_</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm_test.go#L167](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm_test.go#L167)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm_test.go#L726](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm_test.go#L726)<br><strong>Comment</strong>: <pre>This is confusing, and always give me pause. (I know we have it in the core/comm package as well.) 

Can we simplify?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/comm_test.go#L726](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/comm_test.go#L726)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util.go#L124)<br><strong>Comment</strong>: <pre>(if)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util.go#L124)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util_test.go#L38)<br><strong>Comment</strong>: <pre>I do not understand what this test (and this bit in particular) is trying to do?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util_test.go#L38)<br><strong>Comment</strong>: <pre>we're trying to activate a stub concurrently from lots of goroutines.
a stub should only be activated once, and all further activations should be no-ops.

This section simply makes sure that any invocation of the function "maybeCreateInstance" - sees that the instance is nil, because there should only be one such an invocation.
Later on, we return this instance (line 37)

and at the end of the test, we make sure that the instance returned is the reference to the instance that we returned in the function, for sanity.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util_test.go#L38)<br><strong>Comment</strong>: <pre>i guess i need to put comments for documentation because it's not obvious</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util_test.go#L38)<br><strong>Comment</strong>: <pre>Done. Also simplified the test.
Notice we don't need an atomic operation because the waitgroup creates a happens-before relation in the memory model.</pre><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util_test.go#L87)<br><strong>Comment</strong>: <pre>There is a `TestTLSCA` in `ca_test.go` in the `tlsgen` package that tests for this. And I didn't check but I assume this is the case for `ca.NewServerCertKeyPair()` below.

I'd argue that the only errors that `TestDERtoPEM` should be checking for are the ones directly related to the `DERtoPEM` function. (This goes on throughout several tests in this package.)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L87](https://github.com/hyperledger-gerrit-archive/fabric/blob/117238da233ed00adb48459fe19c544dbf2cc9a9/orderer/common/cluster/util_test.go#L87)<br><strong>Comment</strong>: <pre>But if the ca object is nil, I'd want to know why... I know there is a test in ca_test.go, but this is a slippery slope:)</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/20/2018, 11:03:05 AM<br><strong>UnmergedRevision</strong>: [3e29d315e1db78f62f50d1991b00a025c7883fe8](https://github.com/hyperledger-gerrit-archive/fabric/commit/3e29d315e1db78f62f50d1991b00a025c7883fe8)<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/20/2018, 11:21:43 AM<br><strong>UnmergedRevision</strong>: [1c5a49fc3fe32907a4d75550051daec989c0448c](https://github.com/hyperledger-gerrit-archive/fabric/commit/1c5a49fc3fe32907a4d75550051daec989c0448c)<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 8/20/2018, 1:54:16 PM<br><strong>GitHubMergedRevision</strong>: [bb311c5bdefd602051fba7b1778837739105535e](https://github.com/hyperledger-gerrit-archive/fabric/commit/bb311c5bdefd602051fba7b1778837739105535e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 3:14:29 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 3:14:29 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 3:35:03 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 3:53:17 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/20/2018, 4:24:30 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Kostas Christidis - kostas@gmail.com<br><strong>Approved</strong>: 8/25/2018, 9:26:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Kostas Christidis<br><strong>Merged</strong>: 8/26/2018, 7:18:35 PM<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 8/26/2018, 2:34:32 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Kostas Christidis - kostas@gmail.com<br><strong>CommentLine</strong>: [orderer/common/cluster/util_test.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/bb311c5bdefd602051fba7b1778837739105535e/orderer/common/cluster/util_test.go#L38)<br><strong>Comment</strong>: <pre>The rewriting reads much much better, thanks for this.</pre></blockquote>