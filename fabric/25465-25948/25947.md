<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 25947<br><strong>Subject</strong>: [FAB-11780] added membership provider to ledger<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 8/29/2018, 8:18:34 AM<br><strong>LastUpdated</strong>: 9/26/2018, 5:16:49 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-11780] added membership provider to ledger

had to refactor a bit, as membership provider creation was
dependant on collectionStore, which is created per channel,
therefore membership provider was also created per channel.

changed it such that we can create a single membership provider

FAB-11780 - #done

Change-Id: I2c44ebf00d6eea1fc1d713b3168328f95074c6b5
Signed-off-by: nirro <nirro@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 8:18:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:22:49 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4479/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:23:10 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:29:34 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:30:07 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4479/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4479</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:33:19 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2933/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:33:55 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:48:58 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:51:47 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4097/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:51:59 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1650/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:52:10 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 8:52:41 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:00:07 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:03:18 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:03:37 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4097/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4097/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4097

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2933/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2933

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1650/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1650</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:21:15 AM<br><strong>Message</strong>: <pre>Removed reviewer David Enyeart.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:21:19 AM<br><strong>Message</strong>: <pre>Removed reviewer Yacov Manevich.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:21:21 AM<br><strong>Message</strong>: <pre>Removed reviewer Artem Barger.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:21:24 AM<br><strong>Message</strong>: <pre>Removed reviewer Manish Sethi.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:24:34 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:30:40 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4492/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:30:59 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:37:34 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:38:07 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4492/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4492</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:39:40 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2940/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:40:06 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:41:22 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-SmokeTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:42:01 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2940/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2940/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2940</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:45:31 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:48:09 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2942/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:48:37 AM<br><strong>Message</strong>: <pre>Patch Set 2: -F2-SmokeTest

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:49:50 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-SmokeTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:50:22 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2942/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2942/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2942</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/29/2018, 9:52:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:55:05 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4495/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 9:55:25 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:01:59 AM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:02:30 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4495/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4495</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:04:10 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2944/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:04:30 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:21:37 AM<br><strong>Message</strong>: <pre>Patch Set 3: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:24:35 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4112/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:24:40 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1660/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:24:57 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:25:19 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/29/2018, 10:34:27 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)

I am not sure of the reason but ledgermgmt.Initialize function is called at two places. One in the peer.go that you have modified and another is here https://github.com/hyperledger/fabric/blob/ce2436a84d82e3f374e12bf75c3a6d17fdbccafb/peer/node/start.go#L160

In fact, the argument for initializing are prepared in the node/start.go and then used for ledgermgmt.Initialize in the same file and then passed on to peer.go

I think that so far, without understanding much into it, we have been just modifying at both of these places.

@Yacov - do you understand this complexity?</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:37:32 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:40:44 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/29/2018, 10:41:11 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2944/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2944

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4112/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4112

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1660/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1660</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/30/2018, 6:46:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/30/2018, 6:48:24 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)

@Manish - addressed your comments</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 6:52:02 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4531/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 6:52:23 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 6:59:20 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 6:59:54 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4531/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4531</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:03:24 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2963/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:03:55 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:16:26 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:20:01 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4134/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:20:23 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:20:47 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1678/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:21:24 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:29:40 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:35:13 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 7:35:45 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4134/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4134/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4134

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/2963/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/2963

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1678/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1678</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 8/30/2018, 8:22:40 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 8:27:00 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4137/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 8:27:23 AM<br><strong>Message</strong>: <pre>Patch Set 4: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 8:42:49 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/30/2018, 8:43:31 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4137/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4137</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/30/2018, 10:04:25 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)

Nir, I am still not sure that moving the code here breaks the logical cycle...</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/2/2018, 9:05:50 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/2/2018, 9:08:13 AM<br><strong>Message</strong>: <pre>Patch Set 5:

@Manish - changed membership info such that it doesn't on ledger.
I had to duplicate small piece of the code in simple collection into membership info to avoid the cycle.

this way, we don't need anything in membership info creation except for self signed data, and an additional support struct that I've created in order to simplify the unit-tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:09:36 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4635/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:09:52 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:16:37 AM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:17:12 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4635/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4635</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:18:45 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3026/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:19:07 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:34:11 AM<br><strong>Message</strong>: <pre>Patch Set 5: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:36:35 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4211/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:36:53 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:37:09 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1743/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:37:39 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:46:41 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:57:02 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 9:57:33 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4211/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4211/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4211

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3026/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3026

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1743/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1743</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/2/2018, 12:37:25 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 12:41:55 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4213/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 12:42:17 PM<br><strong>Message</strong>: <pre>Patch Set 5: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 12:58:10 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/2/2018, 12:58:51 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4213/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4213</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/2/2018, 10:11:56 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(3 comments)

Thanks Nir for fixing this. I am good from the cycle issue point of view. Just a few code clean up comments.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/3/2018, 2:29:51 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/3/2018, 2:30:13 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(3 comments)

@Manish - fixed your comments</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 2:34:22 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4645/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 2:34:46 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 2:41:18 AM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 2:41:39 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4645/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4645</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 2:45:13 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3033/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 2:45:37 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:00:49 AM<br><strong>Message</strong>: <pre>Patch Set 6: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:03:28 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4222/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:03:45 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:03:56 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1752/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:04:31 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:17:08 AM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:19:11 AM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/3/2018, 3:19:34 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3033/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3033

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4222/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4222

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1752/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1752</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/3/2018, 9:36:48 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 7:39:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 7:42:24 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)

@Manish - fixed comments</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 7:42:47 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4695/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 7:43:09 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 7:50:24 AM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 7:51:05 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4695/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4695</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 7:54:53 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3067/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 7:55:26 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:11:32 AM<br><strong>Message</strong>: <pre>Patch Set 7: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:14:38 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4261/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:14:48 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1788/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:15:02 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:15:35 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:26:36 AM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:32:40 AM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 8:33:12 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3067/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3067

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4261/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4261

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1788/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1788</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 9:21:43 AM<br><strong>Message</strong>: <pre>Patch Set 7:

> (1 comment)
 > 
 > @Manish - fixed comments

Nir, I think that you missed one of the last two comments.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 10:49:20 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 10:51:23 AM<br><strong>Message</strong>: <pre>Patch Set 8:

@Manish - right, sorry missed one.
now should be fixed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 10:52:02 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4709/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 10:52:25 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:02:02 AM<br><strong>Message</strong>: <pre>Patch Set 8: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:02:32 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4709/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4709</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 11:04:19 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:05:15 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3078/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:05:38 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:08:05 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4710/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:08:28 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:15:18 AM<br><strong>Message</strong>: <pre>Patch Set 9: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:15:44 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4710/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4710</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:16:02 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3078/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3078/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3078</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:17:06 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3079/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:17:41 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting smoke tests</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 11:29:12 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+1

Will upgrade to +2 once Artem/Yacov are good with privdata package changes.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:32:49 AM<br><strong>Message</strong>: <pre>Patch Set 9: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:35:54 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4273/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:36:20 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:36:34 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1797/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:37:19 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:52:08 AM<br><strong>Message</strong>: <pre>Patch Set 9: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:52:11 AM<br><strong>Message</strong>: <pre>Patch Set 9: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/4/2018, 11:52:50 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3079/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3079

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4273/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4273

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1797/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1797</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 9/4/2018, 11:56:48 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review-1

(1 comment)

Thanks Nir, a question from my side.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 11:59:24 AM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 12:03:57 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 12:04:21 PM<br><strong>Message</strong>: <pre>Patch Set 9: Code-Review+1

I'll remove my +2 for now, until Ale is OK with this</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 9/4/2018, 12:19:47 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 12:23:47 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 1:08:45 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(2 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 1:19:14 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/4/2018, 1:26:35 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/4/2018, 4:59:24 PM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 9/5/2018, 3:17:35 AM<br><strong>Message</strong>: <pre>Patch Set 9:

(1 comment)

Thanks Nir! I think I understand now, pls confirm and I'll +1 right away.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 4:53:38 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 4:56:10 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4734/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 4:56:31 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting verify build</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 4:58:04 AM<br><strong>Message</strong>: <pre>Patch Set 10:

@Alessandro - that's correct.
sure I can point you to the code, please take a look at pull.go file,
the function createResponse is calling filterNotEligible:

https://github.com/hyperledger/fabric/blob/master/gossip/privdata/pull.go#L556</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:02:52 AM<br><strong>Message</strong>: <pre>Patch Set 10: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:03:24 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/4734/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/4734</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:05:07 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3099/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:05:24 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:16:05 AM<br><strong>Message</strong>: <pre>Patch Set 10: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:18:21 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4293/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:18:40 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:19:06 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1816/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:19:45 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:33:17 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:34:55 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/5/2018, 5:35:47 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3099/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3099

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4293/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4293

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/1816/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/1816</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 9/5/2018, 5:53:52 AM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review+1

Thanks for taking the time to explain the code Nir - LGTM.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/5/2018, 9:19:06 AM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review+2</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 10:03:56 AM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review-1

(2 comments)</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/5/2018, 10:09:54 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)

@Artem - how would you change it so that we can inject external dependencies in the unit-tests?</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/6/2018, 6:46:14 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(3 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/6/2018, 6:48:09 AM<br><strong>Message</strong>: <pre>Patch Set 10:

> @Artem - how would you change it so that we can inject external dependencies in the unit-tests?

what are external dependencies you are referring to? also you haven't tested one function you've added because of the interface you've introduced.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/6/2018, 9:14:26 AM<br><strong>Message</strong>: <pre>Patch Set 10: Code-Review+1

Removing my +2 for now as Artem has a few open comments</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/17/2018, 4:26:20 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/17/2018, 4:26:46 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(4 comments)

@artem - fixed comments</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:28:21 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/5236/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:28:52 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:36:18 AM<br><strong>Message</strong>: <pre>Patch Set 11: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:37:12 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/5236/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/5236</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:38:12 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3432/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:38:41 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:55:30 AM<br><strong>Message</strong>: <pre>Patch Set 11: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:57:38 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4703/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:58:23 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/2123/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:58:29 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 4:59:41 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 5:16:44 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 5:21:09 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 5:21:58 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4703/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4703/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4703

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3432/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3432

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/2123/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/2123</pre><strong>Reviewer</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Reviewed</strong>: 9/17/2018, 5:51:09 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 6:03:29 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4704/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 6:04:16 AM<br><strong>Message</strong>: <pre>Patch Set 11: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 6:19:57 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/17/2018, 6:20:35 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/4704/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/4704</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 9/17/2018, 10:52:57 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+2</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 9/18/2018, 3:52:43 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+1</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:21 PM<br><strong>Message</strong>: <pre>Patch Set 12: Patch Set 11 was rebased</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:39 PM<br><strong>Message</strong>: <pre>Removed F1-VerifyBuild+1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:42 PM<br><strong>Message</strong>: <pre>Removed F2-DocBuild+1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:44 PM<br><strong>Message</strong>: <pre>Removed F2-SmokeTest+1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:45 PM<br><strong>Message</strong>: <pre>Removed F3-IntegrationTest+1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:47 PM<br><strong>Message</strong>: <pre>Removed F3-UnitTest+1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 1:13:53 PM<br><strong>Message</strong>: <pre>Patch Set 12:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:18:13 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/5667/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:18:46 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:26:14 PM<br><strong>Message</strong>: <pre>Patch Set 12: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:29:49 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3694/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:30:13 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:48:28 PM<br><strong>Message</strong>: <pre>Patch Set 12: F2-SmokeTest+1

Succeeded, Run UnitTest, Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:52:28 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/5013/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:52:57 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/2383/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:53:11 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 1:53:54 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 2:09:03 PM<br><strong>Message</strong>: <pre>Patch Set 12: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 2:09:21 PM<br><strong>Message</strong>: <pre>Patch Set 12: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 2:10:20 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/5667/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/5667

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/3694/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/3694

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/5013/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/5013

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/2383/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/2383</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 3:23:27 PM<br><strong>Message</strong>: <pre>Patch Set 12: Code-Review+2</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 3:23:31 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Manish Sethi</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 3:26:12 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4649/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 3:26:51 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3322/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 3:52:57 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4649/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4649/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/4649

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3322/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3322/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/3322</pre><strong>Reviewer</strong>: Sambhav Nidamarty - sambhavdutt@gmail.com<br><strong>Reviewed</strong>: 9/26/2018, 4:37:20 PM<br><strong>Message</strong>: <pre>Patch Set 12:

remerge</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 4:40:35 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4650/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 4:41:13 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3323/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 9/26/2018, 5:16:49 PM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/4650/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/4650

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/3323/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/3323</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 8/29/2018, 8:18:34 AM<br><strong>UnmergedRevision</strong>: [3ed15a5e4c8b2754eff4af2d15c58ad6d565c5e5](https://github.com/hyperledger-gerrit-archive/fabric/commit/3ed15a5e4c8b2754eff4af2d15c58ad6d565c5e5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 8:29:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 8:29:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 8:48:58 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:03:18 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:00:07 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 8/29/2018, 9:24:34 AM<br><strong>UnmergedRevision</strong>: [c68ca0ac00a6ebf6f9fa4ef10609d8fb1ea89bb6](https://github.com/hyperledger-gerrit-archive/fabric/commit/c68ca0ac00a6ebf6f9fa4ef10609d8fb1ea89bb6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:37:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:37:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 9:49:50 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 8/29/2018, 9:52:32 AM<br><strong>UnmergedRevision</strong>: [47ed6406c9ea80de590dcacb061eb226091d4185](https://github.com/hyperledger-gerrit-archive/fabric/commit/47ed6406c9ea80de590dcacb061eb226091d4185)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 10:01:59 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 10:01:59 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 10:21:37 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 10:37:32 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/29/2018, 10:40:44 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L213](https://github.com/hyperledger-gerrit-archive/fabric/blob/47ed6406c9ea80de590dcacb061eb226091d4185/core/peer/peer.go#L213)<br><strong>Comment</strong>: <pre>If I am not mistaken this creates a cycle in initialization. At this stage gossip service is not initialized (which is being done at line 397 below and has an indirect dependence on ledger - via CollectionStoreSupport).

This would mean that when this dependency is passed in ledgermgmt.Initialize, it cannot be used inside ledger code until all the ledgers gets opened here.

This seems very cryptic dependency cycle to me and could eventually lead to this error at runtime - https://github.com/hyperledger/fabric/blob/ce2436a84d82e3f374e12bf75c3a6d17fdbccafb/gossip/service/gossip_service.go#L179</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L213](https://github.com/hyperledger-gerrit-archive/fabric/blob/47ed6406c9ea80de590dcacb061eb226091d4185/core/peer/peer.go#L213)<br><strong>Comment</strong>: <pre>extracted membership info provider out of gossip service into peer.go,
dependency cycle should be solved now.</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 8/30/2018, 6:46:32 AM<br><strong>UnmergedRevision</strong>: [38f90da96cc6f987cca5cde87a4e4d6fc1be57d8](https://github.com/hyperledger-gerrit-archive/fabric/commit/38f90da96cc6f987cca5cde87a4e4d6fc1be57d8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 6:59:20 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 6:59:20 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 7:16:26 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 7:35:13 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/30/2018, 8:42:49 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L429](https://github.com/hyperledger-gerrit-archive/fabric/blob/38f90da96cc6f987cca5cde87a4e4d6fc1be57d8/core/peer/peer.go#L429)<br><strong>Comment</strong>: <pre>The collectionFilter are getting set in the map at this stage. In this function, peer ledger is passed (i.e. already constructed). If MembershipInfo provider receives a call during ledger construction, won't it run into the same problem that I had mentioned in my last comment?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L455](https://github.com/hyperledger-gerrit-archive/fabric/blob/38f90da96cc6f987cca5cde87a4e4d6fc1be57d8/core/peer/peer.go#L455)<br><strong>Comment</strong>: <pre>Referring again to the another comment about cycle...

The 'selfSignedData' is getting prepared here and ledger would pass 'collectionPolicyConfig *common.CollectionPolicyConfig' in the function 'AmMemberOf' is it not possible to merely have a function that takes the two and works. Is there a real reason of its dependency on the collection store (e.g., it needs something more from ledger?)</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/2/2018, 9:05:50 AM<br><strong>UnmergedRevision</strong>: [c086b97ce0786f09e08516ac925d55432f7365a4](https://github.com/hyperledger-gerrit-archive/fabric/commit/c086b97ce0786f09e08516ac925d55432f7365a4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/2/2018, 9:16:37 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/2/2018, 9:16:37 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/2/2018, 9:34:11 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/2/2018, 9:46:41 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/2/2018, 12:58:10 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L18](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/core/common/privdata/membershipinfo.go#L18)<br><strong>Comment</strong>: <pre>this interface can be unexported as this is for packages internal consumption (to make "MembershipProvider" independent of mspmgmt package for UTs)</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L18](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/core/common/privdata/membershipinfo.go#L18)<br><strong>Comment</strong>: <pre>unexported</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L421](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/core/peer/peer.go#L421)<br><strong>Comment</strong>: <pre>1) This is in privdata package and so is the "privdata.NewMembershipInfoProvider". I feel that it will be cleaner to do the highlighted portion inside the implementation of the function "privdata.NewMembershipInfoProvide"

2) The function "createSelfSignedData" does not have anything specific that it requires it to be in this file. It can be closer to the usage... i.e, in the file "privdata/membershipinfo.go".

Above two will make the related code consolidated in a single file.</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L421](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/core/peer/peer.go#L421)<br><strong>Comment</strong>: <pre>1. if I put it inside the implementation membership info provider will be not testable, which I think is not that good.
I need to externalize the dependencies somehow, such that I can inject external dependencies in the unit tests.
2. moved createSelfSignedData into membershipinfo.go inside membershipInfoProviderSupport interface, so that I can inject it in the tests</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L421](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/core/peer/peer.go#L421)<br><strong>Comment</strong>: <pre>1) You can still have passed this dependency for testing. E.g., You can expose a function "privdata.NewMembershipInfoProvider()" internally this function can invoke another function "newMembershipInfoProvider(&MembershipInfoSupport{})" - the second function being an unexported in the package privdata.. no?</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/peer/peer.go#L421](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/core/peer/peer.go#L421)<br><strong>Comment</strong>: <pre>done</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [peer/node/start.go#L165](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/peer/node/start.go#L165)<br><strong>Comment</strong>: <pre>rather than instantiating a new instance here, lets follow the existing pattern. If you notice, "deployedCCInfoProvider" (in the above line), is instantiated here in this file and used here - also, the same instance it passed on to peer.go file in line 344 below.</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [peer/node/start.go#L165](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/peer/node/start.go#L165)<br><strong>Comment</strong>: <pre>fixed - instantiated before as "deployedCCInfoProvider".
used only in ledgermgmt.Initialize as membership info is not required by peer.Initialize</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [peer/node/start.go#L165](https://github.com/hyperledger-gerrit-archive/fabric/blob/c086b97ce0786f09e08516ac925d55432f7365a4/peer/node/start.go#L165)<br><strong>Comment</strong>: <pre>The things that are passed to peer.Inialize are eventually available in the peer.go file for passing to "ledgermgmt.Initialize" call in that file... else ledgermgmt.Initialize in that file will have "membershipInfoProvider" as nil</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/3/2018, 2:29:51 AM<br><strong>UnmergedRevision</strong>: [1df3822be6d327523fbdb3d7cd98411db71ed371](https://github.com/hyperledger-gerrit-archive/fabric/commit/1df3822be6d327523fbdb3d7cd98411db71ed371)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 2:41:18 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 2:41:18 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 3:00:49 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 3:17:08 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/3/2018, 3:19:11 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/4/2018, 7:39:10 AM<br><strong>UnmergedRevision</strong>: [63b6f71ecf03708e9c0c2112fc7e9421953fb83b](https://github.com/hyperledger-gerrit-archive/fabric/commit/63b6f71ecf03708e9c0c2112fc7e9421953fb83b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 7:50:24 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 7:50:24 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 8:11:32 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 8:26:36 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 8:32:40 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/4/2018, 10:49:20 AM<br><strong>UnmergedRevision</strong>: [3e4b7139cacfec0b466bfa2fc6ed50468af5b04b](https://github.com/hyperledger-gerrit-archive/fabric/commit/3e4b7139cacfec0b466bfa2fc6ed50468af5b04b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:02:02 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:02:02 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:16:02 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/4/2018, 11:04:19 AM<br><strong>UnmergedRevision</strong>: [972d93cd096c0ac4fc0f421a9aca7fe063321a42](https://github.com/hyperledger-gerrit-archive/fabric/commit/972d93cd096c0ac4fc0f421a9aca7fe063321a42)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:15:18 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:15:18 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:32:49 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:52:11 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/4/2018, 11:52:08 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 9/4/2018, 11:29:12 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 9/4/2018, 12:04:21 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 9/4/2018, 11:56:48 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L51)<br><strong>Comment</strong>: <pre>I don't like this, and this creates a technical debt, but - we are running out of time...</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L51)<br><strong>Comment</strong>: <pre>do you have a better suggestion?
would be glad to change if there is a better approach..

as we discussed few days ago, I need to create self signed data, originally it was in peer.go but the only usage is in membership provider so there is no real reason for putting it there. 
so I just moved it to this file..</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L51)<br><strong>Comment</strong>: <pre>the main problem is that we're creating a dependency on mgmt in another package that is under common which is kinda awkward to me. 

I advised back then to do it in the file (start.go) which already had an import to mgmt so I considered it to be a lesser evil.

I guess my suggestion for the selfSignedData is to just pass a reference to the function GetLocalSigningIdentity into the constructor of this membership provider, or just create the signed data there, since it doesn't change.</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L51)<br><strong>Comment</strong>: <pre>maybe the main problem is that membership provider shouldn't be under common, the only user of it is ledger.

we can consider moving it under core/ledger/membership_provider

@Manish, @Yacov - what do you guys think?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L51)<br><strong>Comment</strong>: <pre>Moving under ledger does not solve the problem that Yacov is concerned about (additional dependency on mgmt) any better. If start.go is agreed upon file, I am fine with that</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L55)<br><strong>Comment</strong>: <pre>I would like to understand this function a little better as I see a few possible security antipatterns being used here:
1) we ask a node to perform a policy check about itself. What happens if I deploy my own peer build where this function always returns true, nil?
2) how often do we expect to call this function? If once per transaction containing private data, verifying a signature every time might be an overkill. If not, then I have to caution against caching its result: indeed by the time we use the cached result of this call, the MSP used to validate the policy might be reconfigured, leading to a different return value.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L55)<br><strong>Comment</strong>: <pre>1) what do you mean by your own peer build? If you deploy your own build then you should know what you're doing really well, including this code? no?  :)

2) If we only had a way to evaluate policies without using signed data...</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L55)<br><strong>Comment</strong>: <pre>> 1) what do you mean by your own peer build? If you deploy your own build then you should know what you're doing really well, including this code? no?  :)
Right - I just want to double-check this point: by deploying my own build that always returns nil, true - will I get access to more data or gain higher privileges?
> 2) If we only had a way to evaluate policies without using signed data...
MSP refactoring anyone? ;) At the same time, iirc, collection policies pretty much only checked the MSP id of the org and made a decision based on that. Couldn't we just simplify?

Also: is this function expected to be called for every tx/block?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L55)<br><strong>Comment</strong>: <pre>No, this function will be called on chaincode upgrade transaction processing (to figure out whether the new collection config in the upgrade transaction has a collection for which previously this peer was ineligible to receive the data and now it is made eligible)</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L55)<br><strong>Comment</strong>: <pre>Alessandro - about your concern.
maybe it's better to start with the context - this will be used to reconcile missing private data.
now if you build your own peer that always return (true, nil), this will cause the peer to think it has missing private data for collection we just "faked" privilege to, which actually it doesn't have access to. 

but in fact the other peers won't send the data to the faked peer, since it's not part of the collection on their side.. so this peer will be filtered out on the second side.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/972d93cd096c0ac4fc0f421a9aca7fe063321a42/core/common/privdata/membershipinfo.go#L55)<br><strong>Comment</strong>: <pre>Understood - thanks for the explanation Nir. From what Manish says, we will cache the result of this function and use it for a number of transactions. Doing this is technically incorrect because an MSP reconfiguration could occur on the next block. This reconfiguration might - say - revoke the certificate of this peer. At this point this peer would no longer be entitled to receive data, and so the cached result of `AmMemberOf` is no longer valid. However, iiuc, this shouldn't be a problem because other peers will know that they should no longer send private data to us. Is that correct?

Also, just as a sanity check - given that this is a security-sensitive part of the code: would you mind pointing me to the code responsible for refusing requests for private data by this peer if this peer has been revoked?</pre></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/5/2018, 4:53:38 AM<br><strong>UnmergedRevision</strong>: [9155dbaeca31e81de8d4e1530f655548693fd9f3](https://github.com/hyperledger-gerrit-archive/fabric/commit/9155dbaeca31e81de8d4e1530f655548693fd9f3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 5:02:52 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 5:02:52 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 5:16:05 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 5:34:55 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/5/2018, 5:33:17 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 9/6/2018, 9:14:26 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 9/5/2018, 5:53:52 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 9/5/2018, 10:03:56 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L24)<br><strong>Comment</strong>: <pre>I do not think this is interface is necessary. You define a private interface which you embed later into a struct and then add another struct to implement it.


Instead you can just add a method to the MemembershipProvider, i.e.:

    func (m *MembershipProvider) GetAccessFilter(deserializer msp.IdentityDeserializer, collectionPolicyConfig *common.CollectionPolicyConfig) (Filter, error) {
	accessPolicy, err := getPolicy(collectionPolicyConfig, deserializer)
	if err != nil {
		return nil, err
	}
	return func(sd common.SignedData) bool {
		if err := accessPolicy.Evaluate([]*common.SignedData{&sd}); err != nil {
			return false
		}
		return true
	}, nil
    }</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L24)<br><strong>Comment</strong>: <pre>I've added this interface for unit-tests purpose, in order to be able to inject external dependency.
If I add it to membership provider I'm not sure AmMember will be testable.
how would you test this struct AmMember function without this interface?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L24)<br><strong>Comment</strong>: <pre>I do not understand that reasoning, i.e. in https://gerrit.hyperledger.org/r/#/c/25947/10/core/common/privdata/membershipinfo_test.go@50 you just reusing same implementation twice:

    membershipProvider := newMembershipInfoProvider(peerSelfSignedData, membershipInfoSupport, membershipInfoSupport)

which mean you can do it without this interface.</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L24)<br><strong>Comment</strong>: <pre>removed</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L34)<br><strong>Comment</strong>: <pre>if you address my comment above then there will be no need in this.</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L34)<br><strong>Comment</strong>: <pre>removed</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L65)<br><strong>Comment</strong>: <pre>I've run test coverage and seems this function remains untested, can you please, add UT for it before we going to merge it?</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo.go#L65)<br><strong>Comment</strong>: <pre>merged this function inside AmMemberOf as I removed some code and this function is no longer needed</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo_test.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo_test.go#L70)<br><strong>Comment</strong>: <pre>this is very problematic part IMO, as instead of testing real production code for GetAccessFilter you actually test mocked implementation you introduced in the test (see line 26 above).</pre><strong>Commenter</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>CommentLine</strong>: [core/common/privdata/membershipinfo_test.go#L70](https://github.com/hyperledger-gerrit-archive/fabric/blob/9155dbaeca31e81de8d4e1530f655548693fd9f3/core/common/privdata/membershipinfo_test.go#L70)<br><strong>Comment</strong>: <pre>you're right.
this check is insufficient as it checks the test code.
removed it</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Created</strong>: 9/17/2018, 4:26:20 AM<br><strong>UnmergedRevision</strong>: [b2f1e2f4473d1220e1116b64256bfef15a6e7d0e](https://github.com/hyperledger-gerrit-archive/fabric/commit/b2f1e2f4473d1220e1116b64256bfef15a6e7d0e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2018, 4:36:18 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2018, 4:36:18 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2018, 4:55:30 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2018, 5:16:44 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/17/2018, 6:19:57 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 9/18/2018, 3:52:43 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 9/17/2018, 10:52:57 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Nir Rozenbaum - nirro@il.ibm.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 9/26/2018, 1:13:21 PM<br><strong>GitHubMergedRevision</strong>: [a02124e477298a661df88fcc6a18ede98cc2dee9](https://github.com/hyperledger-gerrit-archive/fabric/commit/a02124e477298a661df88fcc6a18ede98cc2dee9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2018, 1:26:14 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2018, 1:26:14 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2018, 1:48:28 PM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2018, 2:09:21 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 9/26/2018, 2:09:03 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 9/26/2018, 3:23:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Manish Sethi<br><strong>Merged</strong>: 9/26/2018, 3:23:31 PM<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 9/18/2018, 3:52:43 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 9/17/2018, 10:52:57 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>