<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 34240<br><strong>Subject</strong>: [FAB-16842] prep for for ext CC config<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/5/2019, 1:47:33 PM<br><strong>LastUpdated</strong>: 11/21/2019, 5:44:37 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-16842] prep for for ext CC config

Introduce "ChaincodeServerInfo" to build environment. This will
be used by chaincode runtime to decide between chaincode server
and chaincode client models.
Only external builders couls avail this extension. In particular
Docker builders will return nil.

Change-Id: I09ff9fe7d209f25dcc14316228bebf2364285ac9
Signed-off-by: muralisr <srinivasan.muralidharan99@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/5/2019, 1:47:33 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:47:42 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18156/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:48:25 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:51:39 PM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:52:26 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18156/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18156</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:54:14 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15864/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:54:54 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12561/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:55:11 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 1:55:50 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 2:19:22 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 3:32:07 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/5/2019, 3:32:53 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15864/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15864

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12561/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12561</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/6/2019, 2:34:32 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(9 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/6/2019, 2:46:35 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/7/2019, 11:13:24 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(8 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2019, 12:52:59 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(3 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/8/2019, 9:07:13 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/8/2019, 9:39:11 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:39:21 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18240/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:40:04 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:43:18 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:44:06 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18240/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18240</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:45:48 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15948/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:46:35 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:47:07 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12645/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 9:47:50 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 10:10:26 AM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 11:23:42 AM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 11:24:22 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12645/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12645

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/15948/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/15948</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/8/2019, 11:24:50 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 11:28:19 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12652/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 11:29:05 AM<br><strong>Message</strong>: <pre>Patch Set 2: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2019, 11:30:31 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(9 comments)

Looking very close to me, but a few more comments.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 1:06:39 PM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2019, 1:07:28 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12652/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12652</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/8/2019, 10:35:37 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(8 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 11/10/2019, 10:25:45 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/11/2019, 10:02:29 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/11/2019, 10:53:28 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/11/2019, 11:32:41 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/11/2019, 12:35:05 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/11/2019, 1:29:58 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 11/13/2019, 2:16:45 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)

One question: do we expect users to compute ccid by themselves and start chaincode service accordingly?</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/13/2019, 6:20:35 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)

Yes, the CCID can be obtained by querying (or from the install step).</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/13/2019, 10:12:51 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/13/2019, 5:48:19 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/13/2019, 11:28:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:31:23 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18353/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:32:08 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:35:27 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:35:34 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16037/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:36:14 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18353/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18353</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:36:22 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:40:57 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12746/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/13/2019, 11:41:42 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 12:01:18 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 1:20:26 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 1:21:11 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16037/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/16037

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12746/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12746</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2019, 10:00:59 AM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review+2

(3 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/14/2019, 8:21:04 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/14/2019, 8:32:33 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:32:42 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18388/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:33:28 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:36:56 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:37:46 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18388/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18388</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:39:49 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16062/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:40:34 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:40:37 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12770/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 8:41:26 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 9:06:52 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/14/2019, 10:25:15 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 10:35:18 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/14/2019, 10:36:14 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16062/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/16062

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12770/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12770</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/14/2019, 10:49:31 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/18/2019, 10:17:13 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/18/2019, 7:37:06 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/18/2019, 9:20:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/19/2019, 3:46:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:49:33 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18439/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:50:20 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:53:29 PM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:53:36 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16112/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:54:12 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18439/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18439</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:54:18 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 3:59:23 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12816/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 4:00:15 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 4:18:45 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 5:40:41 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/19/2019, 5:41:29 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16112/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/16112

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12816/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12816</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/20/2019, 12:44:59 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:45:07 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18471/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:45:58 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:49:25 PM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:50:16 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18471/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18471</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:53:01 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16137/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:53:44 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12841/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:53:45 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 12:54:39 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:16:19 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/20/2019, 1:30:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:32:24 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18473/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:33:18 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:37:20 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:38:11 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/18473/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/18473</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:38:20 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12841/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12841

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16137/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/16137</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/20/2019, 1:40:22 PM<br><strong>Message</strong>: <pre>Patch Set 7: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:41:03 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16139/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:41:37 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12843/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:41:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 1:42:36 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 2:04:38 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 3:21:13 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/20/2019, 3:21:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/16139/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/16139

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/12843/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/12843</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 11/20/2019, 7:49:13 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 11/21/2019, 4:24:55 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 11/21/2019, 4:24:57 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by David Enyeart</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2019, 4:27:43 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/8067/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2019, 4:28:26 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6780/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2019, 5:44:37 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/8067/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/8067

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/6780/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/6780</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/5/2019, 1:47:33 PM<br><strong>UnmergedRevision</strong>: [d91e94c21b6d3d0c89674f7b5819aafc00ef755d](https://github.com/hyperledger-gerrit-archive/fabric/commit/d91e94c21b6d3d0c89674f7b5819aafc00ef755d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/5/2019, 1:51:39 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/5/2019, 1:51:39 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/5/2019, 3:32:07 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/5/2019, 2:19:22 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L36)<br><strong>Comment</strong>: <pre>I'd think we'd want to put this in a directory, like 'server' or 'remote' or similar?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L36)<br><strong>Comment</strong>: <pre>Sorry, I don't understand this comment...</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L36](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L36)<br><strong>Comment</strong>: <pre>Ah, sorry, I thought this was referring to the new metadata file, `chaincode.json`.   I'll move this comment there.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L48)<br><strong>Comment</strong>: <pre>Any reason we're choosing not to export this?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L48)<br><strong>Comment</strong>: <pre>(Also see reated comment in externalbuilders_test.json).


The unexported "chaincodeUserData" is used only in one place - to convert json data. It is just a conveniance to be used in a transient way (its instance not stored anywhere). I like that keeping it unexported helps the reader understand the scope at a glance. Also, as the only user is ChaincodeServerInfo() func, we test it via the exposed API. I can export it if you feel strongly about it (say we are violating some go idiom) ...</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L48)<br><strong>Comment</strong>: <pre>In general, we avoid exporting things, because we don't want to allow users outside of a package to create a dependency on the structure.  However, since this structure really does represent our external contract with the externalbuilders, we really already have our hands tied with respect to the changes we can make to it.

To me, exporting this would signal that in fact, we do need to consider any changes we make to the contract of this structure.

I think we both come from a Java-like background where the mantra is 'encapsulate everything, be private by default, never export unless there's a very strong reason to. ' and I've personally struggled to force myself to invert this for golang.  That unless there's a very good reason not to export a structure, export it.  Go does not generally do runtime linking, so breaking changes are noticed immediately, adding new struct fields does not break intializations, and, exporting fields makes doing integration style tests much easier (to avoid having to worry about dependency cycles, when testing from _test or dedicated integration packages).

If we were writing this as library code, then we'd want to be very careful with what we export, but we aren't.  In fact, I think it's been a bit harmful that we seem to send mixed messages with hiding implementations and trying to present stable interfaces while simultaneously reserving the right to change those interfaces.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L48)<br><strong>Comment</strong>: <pre>Right, I wasn't thinking absout encapsulation in a java sense but more as a means to emphasize its transitory nature and single use. And if the structure or underlying fields change in either direction, the tests will catch them. I don't know if not exporting sends a mixed signal that this can be changed with impunity... but perhaps it does. Will export the struct.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L50)<br><strong>Comment</strong>: <pre>Let's make this a time.Duration instead, that way we don't have to have implied units.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L50)<br><strong>Comment</strong>: <pre>Looks like since it's JSON and not Yaml, we have to do a little boxing to get it unmarshaled correctly.  Still, I think it's the better option: https://stackoverflow.com/questions/48050945/how-to-unmarshal-json-into-durations</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L50)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L51)<br><strong>Comment</strong>: <pre>The name 'tls' doesn't say much, maybe 'tls_enabled'? or 'tls_required'? (The latter is more accurate, the former more consistent with our existing config.)</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L51)<br><strong>Comment</strong>: <pre>TLS, the name doesn't really tell me much.  Maybe "TLSRequired"?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L51](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L51)<br><strong>Comment</strong>: <pre>Will change to tls_required (as its a user thing, shoot for accuracy).</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L67](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L67)<br><strong>Comment</strong>: <pre>This name is pretty unintuitive to me, and seems more like a roperty of the user data than of the instance.  Maybe hang this off of the chaincodeServerUserData like:

 func(csud *ChaincodeServerUserData) ChaincodeServerInfo(basedir string) (*ccintf.ChaincodeServerInfo, error) {
     ...
 }

?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L67](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L67)<br><strong>Comment</strong>: <pre>Good idea. Will change.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L118)<br><strong>Comment</strong>: <pre>Today, we have:

 $RELEASE_DIR/statedb/couchdb/indexes/*.json

I think it would make more sense for us to reserve a new sub-namespace for remote chaincodes, do something like

 $RELEASE_DIR/chaincode/server/connection.json

(Not married to any of those names, just thinking it's not right to put a generic chaincode.json at the top).</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders.go#L118)<br><strong>Comment</strong>: <pre>Will do.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L478](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L478)<br><strong>Comment</strong>: <pre>Why create a temp dir with a release dir in it? Could we not just use the tmp dir as the release dir?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L478](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L478)<br><strong>Comment</strong>: <pre>Just wanted to keep the same path structure as what ReleaseDir will be. Either way is fine, will change.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L492](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L492)<br><strong>Comment</strong>: <pre>Nothing strictly wrong with it, but we could save ourselves the setup and cleanup by just having some test fixtures?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L492](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L492)<br><strong>Comment</strong>: <pre>Some of the tests require the files being manipulated (removal for example ... as in user not providing a crypto file.) These tests manipulate the "current" set so can't have a static set.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L492](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L492)<br><strong>Comment</strong>: <pre>You could simply have multiple sets of fixtures

 testdata/greenpath
 testdata/missingcert
 testdata/missingkey
 testdata/missingca

etc.  But as I said, nothing strictly wrong with this.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L539](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L539)<br><strong>Comment</strong>: <pre>If we hung the 'toChaincodeServerInfo' function off of the instance, then we wouldn't need to go through the hoops of writing it to the filesystem, we could just set and test.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L539](https://github.com/hyperledger-gerrit-archive/fabric/blob/d91e94c21b6d3d0c89674f7b5819aafc00ef755d/core/container/externalbuilders/externalbuilders_test.go#L539)<br><strong>Comment</strong>: <pre>'toChaincodeServerInfo'  _is_ a func on Instance. I think you mean hung off ChaincodeUserData ? The unexported "chaincodeUserData" is used only in one place - to convert json data. It is just a conveniance to be used in a transient way (its instance not stored anywhere). I like that keeping it unexported helps the reader understand the scope at a glance. Also, as the only user is ChaincodeServerInfo() func, we test it via the API. I can export it if you feel strongly about it (say we are violating some go idiom) ...

Having said that I _did_ move toChaincodeServerInfo  func to chaincodeUserData struct.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/8/2019, 9:39:11 AM<br><strong>UnmergedRevision</strong>: [6f27f742ffa90a312dc9509e7c687a645c671f92](https://github.com/hyperledger-gerrit-archive/fabric/commit/6f27f742ffa90a312dc9509e7c687a645c671f92)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2019, 9:43:18 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2019, 9:43:18 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2019, 1:06:39 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2019, 10:10:26 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L38)<br><strong>Comment</strong>: <pre>So we are requiring external 'release' binary to put a 'chaincode.json' into '$RELEASE/chaincode/server' ? is it something we want to expose to users as config option?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L38)<br><strong>Comment</strong>: <pre>Chaincode.json provides just the endpoint information and can be created by user by any means. All we require is that it be packaged in the externalbuilder targz package format. This will be clearer once we have integ test and documentation in.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L38)<br><strong>Comment</strong>: <pre>I think Jay is correct. 

The release step needs to create the 'chaincode.json' (I'd really prefer we rename this to something like 'connection.json', as 'chaincode/server/chaincode.json' stutters) in its proper location.  Whether this means simply copying the file from the package (which I would think is typical) or doing some other magic is entirely up to the implementer of the external builder.

As far as making it configurable, I don't think it makes sense.  The point of the 'release' directory, is that its contents are only meaningful when files are placed in well known locations.  If we were really inclined, we could have some sort of top level document, which mapped keys to other items in the release dir, but I'm not really certain what the indirection buys us.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L38)<br><strong>Comment</strong>: <pre>Right, I misread the question (the "binary" threw me off as I have been thinking "script"). The release step creates the artifacts which could be a simple copy from install package.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L66)<br><strong>Comment</strong>: <pre>Why add seconds here?  The rest of the Fabric duration are parsed as nanos if units are omitted (as you would get if you omitted units on a yaml duration).</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L66)<br><strong>Comment</strong>: <pre>I don't think any user would express dial timeout in nano seconds. To make sure the unit is fixed, I dissallowed String representation as well.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L66](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L66)<br><strong>Comment</strong>: <pre>I'm not suggesting anyone use nanoseconds, just trying to make the behavior consistent with our other 'time' config values.  They are parsed as durations, golang durations parse times without units as nanos.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>We're missing the most important case here, of taking a string and using time.ParseDuration to allow us to specify units on the value.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>If we are going to enforce a unit why not just stick to the natural representation as a number specified in that unit ? I think 'dial_timeout: 10' is more realistic than 'dial_timeout: "10s"'.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>probably due to my context ignorance, but why do we want to enforce unit? we don't do it for other part of fabric and i think we should keep consistency.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>The idea was to direct user to sensible units. Dial Timeout is "order of seconds" so document and do seconds conversion.  The specificity would help the user too IMO. They can just say "dial_timeout: 10" in chaincode.json.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>+1 on what Jay said.  It's about consistency.  When a user sees a config value in fabric that's a time, they should know how to specify it.  Everywhere we use `viper.GetDuration` (which is a lot of places), you get what you intend if you specify a unit, and nanos if you don't.  We can debate the merit of whether this is the desirable default behavior (especially as we overhaul config in the coming releases), but to me, consistency, even with weird behavior, is far preferable to special casing.

If, and, I'm vehemently opposed to this, we wanted to denote this config value in seconds, then the config value should be "dial_timeout_seconds".  If I were to say "The dial timeout is 100", the immediate reaction would be "Seconds or milliseconds?"  "The weather outside is 40", is either a chilly day in Fahrenheit or a scorcher in Celsius.   Numbers are meaningless without units.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>Well I was coming more from what _should_ be allowed. Should we allow 'dial_timeout: "1h"' ? Allowing only number representation along with documentation "specify in seconds" would make it it clear we expect seconds. But I can see the "everywhere else we do it one way argument".

So string and float (without the Second conversion) ?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>> Should we allow 'dial_timeout: "1h"' ?

If we allow dial_timeout: "3600s", then we should allow dial_timeout: "1h" :)

> Allowing only number representation along with documentation "specify in seconds" would make it it clear we expect seconds. 

Per the config proposal put forward by Matt (which got bumped out of scope for v2.0, but which will hopefully arrive not long after) https://gist.github.com/sykesm/3a841471ab24ff711540dd78af2bf01d#durations

"Durations must always include units compatible with go's time.ParseDuration function. A value without a suffix is expressed in nanoseconds and is rarely appropriate.

This means, by extension, that configuration keys should not contain units for the duration. (e.g. timeoutInSeconds should not be used)"</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L69](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L69)<br><strong>Comment</strong>: <pre>"A value without a suffix is expressed in nanoseconds and is rarely appropriate"
That was basically the intent in forcing integer and converting to Second (so users don't set themselves up for failure with `dial_timeout: 10 `).

But I think we are converging on the string and float representation on the basis of consistency and the config proposal. Will move to that.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L91](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L91)<br><strong>Comment</strong>: <pre>A nit, but if we referenced the embedded field and compared it to zero, the comment above would be superfluous.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L91](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L91)<br><strong>Comment</strong>: <pre>fair enough... will remove</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L150](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L150)<br><strong>Comment</strong>: <pre>As noted above, the full path stutters 'chaincode/server/chaincode.json', can we pick something else? What springs to mind is 'connection.json' to me, but I'd be amendable to other options such as 'endpoint.json', etc.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L150](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders.go#L150)<br><strong>Comment</strong>: <pre>Makes sense ... will change to connection.json.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L478](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L478)<br><strong>Comment</strong>: <pre>NotTo(HaveOccurred())</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L478](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L478)<br><strong>Comment</strong>: <pre>will change.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L479](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L479)<br><strong>Comment</strong>: <pre>No need to test ioutil, we can assume this dir is not empty.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L479](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L479)<br><strong>Comment</strong>: <pre>True, I think this was a copy paste issue... will remove.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L481](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L481)<br><strong>Comment</strong>: <pre>We're doing a filepath.Join on a single item.

I think it would be better to do a filepath.Join(i.ReleaseDir, "some", "literal", "path") so that we will break if ChaincdoeServerReleaseDir changes its behavior.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L481](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L481)<br><strong>Comment</strong>: <pre>Good idea. Will Change.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L482](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L482)<br><strong>Comment</strong>: <pre>NotTo(HaveOccurred())</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L482](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L482)<br><strong>Comment</strong>: <pre>Will change.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L499](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L499)<br><strong>Comment</strong>: <pre>NotTo(HaveOccurred())

This repeated again and again below, so this will be the last time I note it.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L499](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f27f742ffa90a312dc9509e7c687a645c671f92/core/container/externalbuilders/externalbuilders_test.go#L499)<br><strong>Comment</strong>: <pre>Will change everywhere</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/13/2019, 11:28:59 PM<br><strong>UnmergedRevision</strong>: [3d58735ce2eca25b4d1227014cfcdfd3a1c603f1](https://github.com/hyperledger-gerrit-archive/fabric/commit/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/13/2019, 11:35:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/13/2019, 11:35:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2019, 1:20:26 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2019, 12:01:18 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/14/2019, 10:00:59 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders.go#L156)<br><strong>Comment</strong>: <pre>Since this is only called in one function, I would think we could just inline it and save it to var.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders.go#L156)<br><strong>Comment</strong>: <pre>Its also used in test in a few places and had the benefit of a bit of reuse.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders.go#L156)<br><strong>Comment</strong>: <pre>I thought we were going to replace those test references with literals though?</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders.go#L156)<br><strong>Comment</strong>: <pre>I replaced the one that actually creates the directory with literals and use ChaincodeServerReleaseDir() to further strengthen the assertion that the literal path should in fact match the expected chaincode release directory. So basically test it both ways.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L515](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders_test.go#L515)<br><strong>Comment</strong>: <pre>Changing these to be number * time.Second etc. might improve readability.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L515](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders_test.go#L515)<br><strong>Comment</strong>: <pre>I'll move this to "comm.DefaultKeepaliveOptions" throughout.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L515](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders_test.go#L515)<br><strong>Comment</strong>: <pre>I don't quite follow? In general, literals are nice in test.  There are just too many zeros there to be readable by most humans.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L515](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders_test.go#L515)<br><strong>Comment</strong>: <pre>We are using default keep alive. It is just a stronger statement to say the tests should match that.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L547](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders_test.go#L547)<br><strong>Comment</strong>: <pre>I think pretty much all of these could be moved into their own describe, directly populating the struct, and invoking the method off of it.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders_test.go#L547](https://github.com/hyperledger-gerrit-archive/fabric/blob/3d58735ce2eca25b4d1227014cfcdfd3a1c603f1/core/container/externalbuilders/externalbuilders_test.go#L547)<br><strong>Comment</strong>: <pre>Good idea, will move this to a new Describe and test ChaincodeServerUserData</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/14/2019, 8:32:33 PM<br><strong>UnmergedRevision</strong>: [e286e7d266cf80183f4e24e009a51af5970ea16d](https://github.com/hyperledger-gerrit-archive/fabric/commit/e286e7d266cf80183f4e24e009a51af5970ea16d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2019, 8:36:56 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2019, 8:36:56 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2019, 10:35:18 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/14/2019, 9:06:52 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/18/2019, 10:17:13 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/e286e7d266cf80183f4e24e009a51af5970ea16d/core/container/externalbuilders/externalbuilders.go#L105)<br><strong>Comment</strong>: <pre>I'd prefer this not be set.  If KaOpts is unset, then you get defaults.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/e286e7d266cf80183f4e24e009a51af5970ea16d/core/container/externalbuilders/externalbuilders.go#L105)<br><strong>Comment</strong>: <pre>The grpc default "infinity" is essentially no KA and will result in termination of the connection (tested this in my env.) I'd hesitate to default to this. I suspect this is why comm.DefaultKeepaliveOptions is used elsewhere in fabric (https://github.com/hyperledger/fabric/blob/master/core/peer/config.go#L250 and https://github.com/hyperledger/fabric/blob/master/core/deliverservice/config.go#L115).</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/e286e7d266cf80183f4e24e009a51af5970ea16d/core/container/externalbuilders/externalbuilders.go#L105)<br><strong>Comment</strong>: <pre>Ah, you are right, if it's set to zero, although you do get defaults, the default interval is infinity: https://github.com/grpc/grpc-go/blob/v1.20.0/internal/transport/defaults.go#L32:2

I had mistakenly assumed that the default would be something more like ours.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/container/externalbuilders/externalbuilders.go#L140](https://github.com/hyperledger-gerrit-archive/fabric/blob/e286e7d266cf80183f4e24e009a51af5970ea16d/core/container/externalbuilders/externalbuilders.go#L140)<br><strong>Comment</strong>: <pre>This seems like it will be problematic when there are mutiple root certs in the file, but we can address this later.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/19/2019, 3:46:19 PM<br><strong>UnmergedRevision</strong>: [53bbbccdac21a3dfdf35a2f7832c780259786f33](https://github.com/hyperledger-gerrit-archive/fabric/commit/53bbbccdac21a3dfdf35a2f7832c780259786f33)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2019, 3:53:29 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2019, 3:53:29 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2019, 5:40:41 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/19/2019, 4:18:45 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/20/2019, 12:44:59 PM<br><strong>UnmergedRevision</strong>: [be3f699cdca7a334d5530bbe8816c874b7ad6b4d](https://github.com/hyperledger-gerrit-archive/fabric/commit/be3f699cdca7a334d5530bbe8816c874b7ad6b4d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 12:49:25 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 12:49:25 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 1:16:19 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 1:38:20 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/20/2019, 1:30:03 PM<br><strong>UnmergedRevision</strong>: [9d0e5857fa951fa7862b0c6753fdff4758b5f019](https://github.com/hyperledger-gerrit-archive/fabric/commit/9d0e5857fa951fa7862b0c6753fdff4758b5f019)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 1:37:20 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 1:37:20 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 3:21:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 2:04:38 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/20/2019, 1:40:22 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 11/20/2019, 7:49:13 PM<br><strong>GitHubMergedRevision</strong>: [fead9d9f1ea1f798b9a65c36aefb328942d44106](https://github.com/hyperledger-gerrit-archive/fabric/commit/fead9d9f1ea1f798b9a65c36aefb328942d44106)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 1:37:20 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 1:37:20 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 3:21:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/20/2019, 2:04:38 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/20/2019, 1:40:22 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 11/21/2019, 4:24:55 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: David Enyeart<br><strong>Merged</strong>: 11/21/2019, 4:24:57 PM<br><br></blockquote>