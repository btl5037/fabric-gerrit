<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 2325<br><strong>Subject</strong>: FAB-1018 Gossip multi-channel support API design<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/7/2016, 12:34:03 PM<br><strong>LastUpdated</strong>: 11/10/2016, 4:01:02 PM<br><strong>CommitMessage</strong>:<br><pre>FAB-1018 Gossip multi-channel support API design

https://jira.hyperledger.org/browse/FAB-1018

This commit contains code that should be implemented
by layers that use the gossip component.
This code enables the gossip component to determine to which peers
it may forward a certain block according to the channel

Change-Id: I01d274ef91837b5d5b4e8bc0d78a49df90957185
Signed-off-by: Yacov Manevich <yacovm@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 12:34:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 12:34:19 PM<br><strong>Message</strong>: <pre>Patch Set 2: Patch Set 1 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 12:35:35 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2440/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 12:36:14 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1294/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 12:36:18 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2441/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 12:39:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1295/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 1:52:25 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1294/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2440/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 1:52:33 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1295/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2441/ : SUCCESS</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 2:39:13 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 2:42:57 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 3:20:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 4:21:02 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 4:21:13 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2492/ (1/2)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 4:24:41 PM<br><strong>Message</strong>: <pre>Patch Set 4: Patch Set 3 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 4:24:48 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2493/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 4:28:45 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1346/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 4:53:21 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1345/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2492/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/7/2016, 5:04:05 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1346/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2493/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 11/7/2016, 5:09:39 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/7/2016, 5:52:50 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Baohua Yang - yangbaohua@gmail.com<br><strong>Reviewed</strong>: 11/7/2016, 9:47:55 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 2:20:02 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 2:34:50 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 2:35:40 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1371/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 2:37:18 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2521/ (2/2)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 3:00:24 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 3:02:06 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1372/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 3:03:50 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2522/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 3:20:12 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1371/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2521/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 3:23:02 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1372/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2522/ : FAILURE</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 7:43:06 AM<br><strong>Message</strong>: <pre>Patch Set 7: Patch Set 6 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 7:44:05 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1381/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 7:46:18 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2531/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/8/2016, 8:24:27 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1381/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2531/ : SUCCESS</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 9:25:06 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 9:36:21 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 9:45:27 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 10:06:32 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 10:34:31 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/8/2016, 11:42:22 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 4:15:44 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 4:16:12 AM<br><strong>Message</strong>: <pre>Patch Set 9: Patch Set 8 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 4:16:43 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1406/ (1/2)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 4:17:18 AM<br><strong>Message</strong>: <pre>Patch Set 9:

I uploaded a new version according to yesterday's updates.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 4:17:36 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2557/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 4:18:08 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1407/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 4:18:40 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2558/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 4:44:45 AM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1407/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2558/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 4:56:47 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1406/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2557/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 6:15:06 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 6:17:33 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1411/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 6:19:54 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2562/ (2/2)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 6:23:18 AM<br><strong>Message</strong>: <pre>Patch Set 11: Patch Set 10 was rebased</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 6:23:52 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1412/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 6:27:05 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2563/ (2/2)</pre><strong>Reviewer</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Reviewed</strong>: 11/9/2016, 6:28:28 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 6:57:33 AM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1412/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2563/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/9/2016, 7:06:43 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1411/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2562/ : SUCCESS</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 9:44:54 AM<br><strong>Message</strong>: <pre>Patch Set 11: Code-Review-2

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 9:51:33 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/9/2016, 10:28:39 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 7:27:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 7:29:21 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1487/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 7:31:38 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2638/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 8:09:05 AM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1487/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2638/ : SUCCESS</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 8:57:29 AM<br><strong>Message</strong>: <pre>Patch Set 12: -Code-Review

So this looks to me like this API no longer depends on whether a peer org is authorized on a channel, instead, it depends on the app explicitly maintaining a list of peer members and that list being propagated to the network?</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 9:14:42 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Jason- yes, the application contacts all peers of the channel and gives them the JoinChannel message.</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 11/10/2016, 10:08:51 AM<br><strong>Message</strong>: <pre>Patch Set 12:

(2 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 10:17:06 AM<br><strong>Message</strong>: <pre>Patch Set 12:

(2 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 10:22:42 AM<br><strong>Message</strong>: <pre>Patch Set 12:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 10:27:32 AM<br><strong>Message</strong>: <pre>Patch Set 12:

I actually meant 2353, but yeah, this too</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 11/10/2016, 11:15:04 AM<br><strong>Message</strong>: <pre>Patch Set 12:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 11:51:37 AM<br><strong>Message</strong>: <pre>Patch Set 12:

(1 comment)</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 11/10/2016, 11:58:17 AM<br><strong>Message</strong>: <pre>Patch Set 12: Code-Review+2</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 12:08:05 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 12:09:32 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1495/ (1/2)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 12:09:45 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 12:11:05 PM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2646/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 12:11:59 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1496/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 12:12:06 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2647/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 1:13:43 PM<br><strong>Message</strong>: <pre>Patch Set 14: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1496/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2647/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 1:14:43 PM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1495/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2646/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 11/10/2016, 2:28:27 PM<br><strong>Message</strong>: <pre>Patch Set 14: Code-Review+2</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 11/10/2016, 3:11:27 PM<br><strong>Message</strong>: <pre>Patch Set 14: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 3:11:29 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jason Yellick</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 3:13:30 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/202/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 3:14:05 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/380/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/10/2016, 4:01:02 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/202/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/380/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/7/2016, 12:34:03 PM<br><strong>UnmergedRevision</strong>: [ad353192db304e2822ab05a1e50dc167458f9bc8](https://github.com/hyperledger-gerrit-archive/fabric/commit/ad353192db304e2822ab05a1e50dc167458f9bc8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2016, 1:52:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/7/2016, 12:34:19 PM<br><strong>UnmergedRevision</strong>: [a659bcf6a8501695c2d73ad9de689add8fe27ce0](https://github.com/hyperledger-gerrit-archive/fabric/commit/a659bcf6a8501695c2d73ad9de689add8fe27ce0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2016, 1:52:33 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/7/2016, 2:39:13 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/a659bcf6a8501695c2d73ad9de689add8fe27ce0/gossip/api/access.go#L26)<br><strong>Comment</strong>: <pre>I think this type should simply be chain ID (which is an []byte) and the corresponding function definitions in AccessController would then take a chain ID.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/a659bcf6a8501695c2d73ad9de689add8fe27ce0/gossip/api/access.go#L26)<br><strong>Comment</strong>: <pre>But, I need to obtain the channel id from the block *and* the block's last seq number...</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/a659bcf6a8501695c2d73ad9de689add8fe27ce0/gossip/api/access.go#L26)<br><strong>Comment</strong>: <pre>The channel ID is embedded in the transactions within a block.  You should always be able to look at the first transaction's header to obtain the chainID (though I would argue that when you retrieved the block, it must have already been by chainID).  If the caller lied and claimed a block was not from the right chain, then you could either inspect the first tran, or wait until commit time comes along and see that the previous block hash does not match.    

By the block's last seq number, I assume you mean the chain's last configuration transaction block number.  Which, you should be able to obtain via the `LastConfSequence` call defined on AccessController, right?</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/7/2016, 4:21:02 PM<br><strong>UnmergedRevision</strong>: [0ebe99a73c92d96403ac1bf7b8e2a04154937a60](https://github.com/hyperledger-gerrit-archive/fabric/commit/0ebe99a73c92d96403ac1bf7b8e2a04154937a60)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2016, 4:53:21 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/7/2016, 4:24:41 PM<br><strong>UnmergedRevision</strong>: [c6650b2161df2e3206bfc2377395702209015925](https://github.com/hyperledger-gerrit-archive/fabric/commit/c6650b2161df2e3206bfc2377395702209015925)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/7/2016, 5:04:05 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 11/7/2016, 5:09:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Baohua Yang - yangbaohua@gmail.com<br><strong>Approved</strong>: 11/7/2016, 9:47:55 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>What is the intended usage here? Is this essentially to return the CA for the peer org given a peer cert?  What is the advantage vs simply applying the 'does this peer have access filter' for a chain to a peer's cert?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>Yes, only it's given a peer's PKI-id (hash of the cert).

I don't understand what "does this peer have access filter' for a chain to a peer's cert" means.

I thought that by being given a block, the forwarding peer (the one connected to the orderer) can look at the organizations that are in the channel, and put them inside a certain block wrapper he'll forward and in that way a peer that obtains that wrapped block, looks at the organizations and defers to which peers he can forward and to which it can't.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>> Yes, only it's given a peer's PKI-id (hash of the cert).

If you have a point to point connection with the peer, wouldn't you have the whole cert? Why operate on the hash?

> I don't understand what "does this peer have access filter' for a chain to a peer's cert" means.

For the ordering service, we'll already be writing some logic which takes a peer's cert, and decides if it is among the list of authorized members for a channel.  I was wondering if this would be sufficient for your use case.

> I thought that by being given a block, the forwarding peer (the one connected to the orderer) can look at the organizations that are in the channel, and put them inside a certain block wrapper he'll forward and in that way a peer that obtains that wrapped block, looks at the organizations and defers to which peers he can forward and to which it can't.

I'm not sure I follow, is this implying that peers which have no interest in that block, but are authorized to view it, will still receive and gossip about that block?  Why does each peer not simply retain the full configuration for each channel, and refer to it, rather than to some block wrapper?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>> If you have a point to point connection with the peer, wouldn't you have the whole cert? Why operate on the hash?

No, I only have its PKI-ID in the gossip layer. This is also how it works in the normal fabric peer: you have a PKI-ID and you ask the crypto peer to verify a peer according to a PKI-ID and it then (if needs to) reaches to the membership service by the PKI-ID and fetches the certificate and caches it locally in memory.

> For the ordering service, we'll already be writing some logic which takes a peer's cert, and decides if it is among the list of authorized members for a channel. I was wondering if this would be sufficient for your use case. 

Yeah, I could use that, but I don't see why you do a lookup by the full certificate and not by the hash. Does that help somehow?  

> I'm not sure I follow, is this implying that peers which have no interest in that block, but are authorized to view it, will still receive and gossip about that block? 

No, in order for a peer to receive a block it needs to gossip to the first-order peer its interest in the channel of the block. 

> Why does each peer not simply retain the full configuration for each channel, and refer to it, rather than to some block wrapper?

The block from the orderer doesn't contain the channel of the block, right? because the first-order peer passes that channel knowledge in the deliver invocation. So in order to disseminate the block further it needs to convey to other peers the channel that block belongs to.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>> Yeah, I could use that, but I don't see why you do a lookup by the full certificate and not by the hash. Does that help somehow? 

Well, it makes sense that it helps because I assume in the certificate it's written who signed the certificate and then you "climb the tree" up all the way to the org CA.

I still prefer to leave it with PKI-ID and have the implementor of the method translate it to the cert if it needs to. (because I don't have any means of doing it myself) How does that sound?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>> No, I only have its PKI-ID in the gossip layer. This is also how it works in the normal fabric peer: you have a PKI-ID and you ask the crypto peer to verify a peer according to a PKI-ID and it then (if needs to) reaches to the membership service by the PKI-ID and fetches the certificate and caches it locally in memory.

Maybe we need to take to Elli or Angelo on this.  This sounds like a deficiency from 0.5 that was to be addressed in 0.6.  Namely that all signature validation should be able to be done locally without a network call, with no calls out to what used to be called membership services.  It seems to me like if you have a TLS connection with a peer, then you must have that peer's full cert.  I'm not sure what the indirection of the PKI-ID gives you.

> Yeah, I could use that, but I don't see why you do a lookup by the full certificate and not by the hash. Does that help somehow?  

The idea is that if we have the full certificate, why would we need to look it up?

> No, in order for a peer to receive a block it needs to gossip to the first-order peer its interest in the channel of the block. 

A first-order peer here is one who connects to the orderer?  Does this mean every peer must have a direct link to a first order peer for each of its channels?

> The block from the orderer doesn't contain the channel of the block, right? because the first-order peer passes that channel knowledge in the deliver invocation. So in order to disseminate the block further it needs to convey to other peers the channel that block belongs to.

But if a peer is a subscriber to a channel, it has the full copy of the configuration, which contains the rules for who is authorized on that channel, so I don't see why it is not simply using that configuration block?  If it gets a block which indicates it is from a configuration further in the future, then that peer cannot handle that block until it commits the corresponding configuration.

> Well, it makes sense that it helps because I assume in the certificate it's written who signed the certificate and then you "climb the tree" up all the way to the org CA.

My assumption is that the identity will contain the certificate chain.  I thought this was standard practice, so I am again a little at a loss as to why the lookup.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>I asked adc to join in the discussion when he can. I hope he'll clarify the security stuff.
> A first-order peer here is one who connects to the orderer?  Does this mean every peer must have a direct link to a first order peer for each of its channels?

Yes, and of course not. From the 1st order peer onwards, the gossip takes care of dissemination.

> But if a peer is a subscriber to a channel, it has the full copy of the configuration,

not the latest, only the 1st order peer has it.
> If it gets a block which indicates it is from a configuration further in the future, then that peer cannot handle that block until it commits the corresponding configuration.

It can't commit, but it can forward, with looking at the last conf in the wrapper.

> My assumption is that the identity will contain the certificate chain.  I thought this was standard practice, so I am again a little at a loss as to why the lookup.

Well, I designed the whole gossip security logic under the assumption of being able to perform a lookup by PKI-ID, and verify with the PKI-ID and not the certificate itself, and this was because I understood that in v1 you'll have *at least* the same capability as in 0.5 which is to be able to resolve PKI-ID to certificate, either locally, or remotely.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/access.go#L8](https://github.com/hyperledger-gerrit-archive/fabric/blob/c6650b2161df2e3206bfc2377395702209015925/gossip/api/access.go#L8)<br><strong>Comment</strong>: <pre>> of course not.  From the 1st order peer onwards, the gossip takes care of dissemination.

Great, did not believe this was the case, but wanted to be sure.

> not the latest, only the 1st order peer has it.

But if it gets a block, which indicates that that block's configuration block is the same one I have, then I don't see the problem? Assuming configuration changes, relatively infrequently, say, once every 100k blocks.  Then for a peer syncing from 0 to 100k, it will never need a new copy of the configuration, it can simply reference its existing one.  

> It can't commit, but it can forward, with looking at the last conf in the wrapper.

So every block comes with a copy of the last config? That seems like a lot of redundant transmitted data?  If it's some representation of the last config (ie a hash) then I don't see the advantage over simply the last config seq no (which is an equally unambiguous representation, but smaller).

> Well, I designed the whole gossip security logic under the assumption of being able to perform a lookup by PKI-ID, and verify with the PKI-ID and not the certificate itself, and this was because I understood that in v1 you'll have *at least* the same capability as in 0.5 which is to be able to resolve PKI-ID to certificate, either locally, or remotely.

I don't see anything which prevents this logic, as if you have the certificates, you should be able to compute the PKI-ID for that certificate.  I'm sure this is my ignorance of the design, but when a peer connects over TLS, it presents its whole certificate chain, so you have the peer's identity and certificate at this point, what is the advantage to using the PKI-id?</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/8/2016, 2:34:50 AM<br><strong>UnmergedRevision</strong>: [2319b6ce8c812a37373f31cb914f050b342f7391](https://github.com/hyperledger-gerrit-archive/fabric/commit/2319b6ce8c812a37373f31cb914f050b342f7391)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2016, 3:20:12 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/8/2016, 3:00:24 AM<br><strong>UnmergedRevision</strong>: [4b77d417eba9e2206298b7e48585dc2ce174b02c](https://github.com/hyperledger-gerrit-archive/fabric/commit/4b77d417eba9e2206298b7e48585dc2ce174b02c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2016, 3:23:02 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/8/2016, 7:43:06 AM<br><strong>UnmergedRevision</strong>: [28c555ffbfe3889c7b6934bae3a2fb9dea1437a6](https://github.com/hyperledger-gerrit-archive/fabric/commit/28c555ffbfe3889c7b6934bae3a2fb9dea1437a6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/8/2016, 8:24:27 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/9/2016, 4:15:44 AM<br><strong>UnmergedRevision</strong>: [0435556d4d2991ce2a1bf8dfee7ca6cf066666e3](https://github.com/hyperledger-gerrit-archive/fabric/commit/0435556d4d2991ce2a1bf8dfee7ca6cf066666e3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/9/2016, 4:56:47 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/9/2016, 4:16:12 AM<br><strong>UnmergedRevision</strong>: [b353b92090e79395194a6396722a40a064d89a95](https://github.com/hyperledger-gerrit-archive/fabric/commit/b353b92090e79395194a6396722a40a064d89a95)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/9/2016, 4:44:45 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/9/2016, 6:15:06 AM<br><strong>UnmergedRevision</strong>: [72ba3ecc131b7ea449dae8c4ec497bd317204619](https://github.com/hyperledger-gerrit-archive/fabric/commit/72ba3ecc131b7ea449dae8c4ec497bd317204619)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/9/2016, 7:06:43 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/9/2016, 6:23:18 AM<br><strong>UnmergedRevision</strong>: [9c119a2511f54bab394ac6d1691b15f570ca7b47](https://github.com/hyperledger-gerrit-archive/fabric/commit/9c119a2511f54bab394ac6d1691b15f570ca7b47)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/9/2016, 6:57:33 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Approved</strong>: 11/9/2016, 6:28:28 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/9/2016, 9:44:54 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9c119a2511f54bab394ac6d1691b15f570ca7b47/gossip/api/channel.go#L24)<br><strong>Comment</strong>: <pre>The particular peers are not stored on the chain, at least not in the configuration.  If this is expected from the common configuration lib, I see no way to implement this.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9c119a2511f54bab394ac6d1691b15f570ca7b47/gossip/api/channel.go#L24)<br><strong>Comment</strong>: <pre>I assumed Someone needs to cache all "JoinChannel" invocations in the peer and make a translation table. But now I had a peer scrum and Binh gave an idea that *I* could cache it instead, when a JoinChannel is called on the gossip component.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L24](https://github.com/hyperledger-gerrit-archive/fabric/blob/9c119a2511f54bab394ac6d1691b15f570ca7b47/gossip/api/channel.go#L24)<br><strong>Comment</strong>: <pre>Absolutely, I believe this is something you or the peer could/should cache.

My understanding of this changeset is that it is the API you expect to be provided for the chain configuration, hence my downvote.  Is this something else?</pre></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/10/2016, 7:27:16 AM<br><strong>UnmergedRevision</strong>: [dbb9e63e9274edcb8f9f973199d8ab130c8fd88a](https://github.com/hyperledger-gerrit-archive/fabric/commit/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/10/2016, 8:09:05 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 11/10/2016, 11:58:17 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [gossip/api/api.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/api.go#L48)<br><strong>Comment</strong>: <pre>I would suggest that instead of this function, create a convention (like -1) to indicate the last block, so that we wouldn't have to do 2 calls</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/api.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/api.go#L48)<br><strong>Comment</strong>: <pre>This whole file is going to be deprecated completely, once another commit is merged.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/api.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/api.go#L48)<br><strong>Comment</strong>: <pre>Yeah, I think with committer service in place this interface will become obsolete.</pre><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/channel.go#L35)<br><strong>Comment</strong>: <pre>I assume that PeerCert is {ecert, ip, port} rather than just peer cert.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/channel.go#L35)<br><strong>Comment</strong>: <pre>why? can you have 2 certs with the same ecert and different ip and ports? 
even if you do- why is this of interest to me? I'm getting a []byte and I just use it to invoke methods of the SecurityAdvisor. I don't use consume the knowledge of the port and host myself, so I don't see why I need to extend the type PeerCert if I don't use that information myself.</pre><strong>Commenter</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/channel.go#L35)<br><strong>Comment</strong>: <pre>how would you connect to the peers to begin with? where would we get the its ip:port from?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/api/channel.go#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/dbb9e63e9274edcb8f9f973199d8ab130c8fd88a/gossip/api/channel.go#L35)<br><strong>Comment</strong>: <pre>ok I'll use the port and host.</pre></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/10/2016, 12:08:05 PM<br><strong>UnmergedRevision</strong>: [ee605d61414f3c6ddf9b5503aec00b5e94906656](https://github.com/hyperledger-gerrit-archive/fabric/commit/ee605d61414f3c6ddf9b5503aec00b5e94906656)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/10/2016, 1:14:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 11/10/2016, 12:09:45 PM<br><strong>GitHubMergedRevision</strong>: [62e45afe5469466b532f0d0b75f9d57a260c8f0d](https://github.com/hyperledger-gerrit-archive/fabric/commit/62e45afe5469466b532f0d0b75f9d57a260c8f0d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/10/2016, 1:13:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 11/10/2016, 3:11:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jason Yellick<br><strong>Merged</strong>: 11/10/2016, 3:11:29 PM<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 11/10/2016, 2:28:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>