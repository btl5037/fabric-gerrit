<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 31552<br><strong>Subject</strong>: [FAB-15486] Reuse connection unless not alive<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 5/24/2019, 6:31:57 PM<br><strong>LastUpdated</strong>: 8/6/2019, 1:22:34 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-15486] Reuse connection unless not alive

 - close connection alive channel when error occurs in receiving or
 sending a message

Change-Id: I8e6b8ba9706dba5acc0862c3d94d1ac9e9d7a56d
Signed-off-by: Swetha Repakula <srepaku@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 6:31:57 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 7:17:47 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 7:17:48 PM<br><strong>Message</strong>: <pre>Patch Set 1:

No Builds Executed</pre><strong>Reviewer</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 7:27:28 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+1

Pseudo-paired while working this.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 7:31:32 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(3 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 7:44:52 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(2 comments)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 7:47:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 7:47:29 PM<br><strong>Message</strong>: <pre>Patch Set 2:

No Builds Executed</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/25/2019, 3:08:45 AM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/25/2019, 2:38:49 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/25/2019, 2:58:14 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/25/2019, 2:59:41 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:49:00 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13995/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:49:30 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:56:22 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:56:33 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8968/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:56:33 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12379/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:56:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:56:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/27/2019, 11:57:10 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13995/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13995</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 12:27:11 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 12:36:00 AM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 12:36:45 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8968/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8968

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12379/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12379</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/28/2019, 2:22:15 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/28/2019, 3:22:52 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:24:44 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14041/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:25:23 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:32:14 PM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:33:02 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14041/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14041</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:34:24 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9011/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:34:24 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12423/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:34:53 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 3:34:56 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 4:03:22 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 4:19:20 PM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 4:20:08 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9011/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9011

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12423/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12423</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/28/2019, 4:25:11 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/28/2019, 8:54:11 PM<br><strong>Message</strong>: <pre>Patch Set 4:

This patch was just to split the hygiene out. No changes were made yet</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/28/2019, 9:03:50 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:04:01 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14046/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:04:26 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:11:27 PM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:12:23 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14046/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14046</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:13:36 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9020/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:13:51 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12433/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:13:59 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:14:15 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 9:26:26 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/28/2019, 9:35:19 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 10:00:37 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/28/2019, 10:01:28 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9020/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9020

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12433/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12433</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/29/2019, 1:01:39 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/29/2019, 1:01:50 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9027/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/29/2019, 1:02:09 PM<br><strong>Message</strong>: <pre>Patch Set 5: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/29/2019, 1:42:08 PM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/29/2019, 1:42:45 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9027/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9027</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 5/30/2019, 10:09:20 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review-1

(1 comment)

This doesn't look right.

Also wondering how this relates to https://gerrit.hyperledger.org/r/c/fabric/+/31580 ?  Seems they could be combined.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/31/2019, 1:16:57 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:20:29 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14137/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:20:53 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:27:33 PM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:28:16 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14137/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14137</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:29:03 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9099/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:29:28 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:30:14 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12509/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:30:41 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 1:58:54 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 2:12:45 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 2:13:31 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9099/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9099

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12509/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12509</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/31/2019, 3:02:16 PM<br><strong>Message</strong>: <pre>Set Work In Progress</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 5/31/2019, 3:13:47 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 3:18:39 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9117/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 3:19:06 PM<br><strong>Message</strong>: <pre>Patch Set 6: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 4:20:05 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/31/2019, 4:21:12 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9117/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9117</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 6/6/2019, 7:27:37 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:32:42 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14382/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:33:07 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting verify build</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 6/6/2019, 7:33:41 PM<br><strong>Message</strong>: <pre>Set Ready For Review</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:40:10 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:40:54 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14382/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14382</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:42:20 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9318/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:42:45 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:42:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12725/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:43:21 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 7:44:18 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 8:13:43 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/6/2019, 8:14:36 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9318/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9318

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12725/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12725</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 6/7/2019, 1:57:24 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/7/2019, 1:59:28 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12741/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/7/2019, 1:59:56 PM<br><strong>Message</strong>: <pre>Patch Set 7: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/7/2019, 2:14:02 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/7/2019, 2:14:49 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12741/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12741</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 6/7/2019, 2:21:24 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 6/11/2019, 1:27:12 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9: Patch Set 8 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 6/11/2019, 6:01:57 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10: New patch set was added with same tree, parent, and commit message as Patch Set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:02:11 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14561/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:02:37 PM<br><strong>Message</strong>: <pre>Patch Set 10: -F2-DocBuild -F1-VerifyBuild -F3-IntegrationTest -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:09:19 PM<br><strong>Message</strong>: <pre>Patch Set 10: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:10:04 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/14561/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/14561</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:15:01 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9469/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:15:21 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12915/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:15:27 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:15:47 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 6:46:17 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 7:12:58 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/11/2019, 7:13:44 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9469/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9469

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12915/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12915</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/13/2019, 12:10:25 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(3 comments)</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/13/2019, 12:12:50 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/13/2019, 12:13:00 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9518/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/13/2019, 12:13:26 AM<br><strong>Message</strong>: <pre>Patch Set 10: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>Reviewed</strong>: 6/13/2019, 12:48:40 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/13/2019, 1:12:35 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 6/13/2019, 1:13:20 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9518/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9518</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/1/2019, 4:24:16 PM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 4:27:53 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15087/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 4:28:26 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 4:33:37 PM<br><strong>Message</strong>: <pre>Patch Set 11: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 4:34:31 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15087/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15087</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/1/2019, 5:16:26 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12: Patch Set 11 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/1/2019, 5:17:52 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13: Patch Set 12 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/1/2019, 5:23:05 PM<br><strong>Message</strong>: <pre>Uploaded patch set 14: Patch Set 13 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/1/2019, 5:24:47 PM<br><strong>Message</strong>: <pre>Patch Set 14:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:24:54 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15093/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:25:20 PM<br><strong>Message</strong>: <pre>Patch Set 14: -F1-VerifyBuild

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:32:27 PM<br><strong>Message</strong>: <pre>Patch Set 14: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:33:04 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9949/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:33:18 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13404/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:33:34 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 5:33:47 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 6:20:36 PM<br><strong>Message</strong>: <pre>Patch Set 14: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 6:23:40 PM<br><strong>Message</strong>: <pre>Patch Set 14: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/1/2019, 6:24:24 PM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9949/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9949

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13404/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/13404

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15093/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15093</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/2/2019, 10:37:49 AM<br><strong>Message</strong>: <pre>Uploaded patch set 15: Patch Set 14 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/2/2019, 11:54:02 AM<br><strong>Message</strong>: <pre>Uploaded patch set 16: Patch Set 15 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/2/2019, 12:33:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 17: Patch Set 16 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/2/2019, 12:43:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 18: Patch Set 17 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/2/2019, 12:48:00 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 12:52:42 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9960/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 12:53:17 PM<br><strong>Message</strong>: <pre>Patch Set 18: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 1:51:32 PM<br><strong>Message</strong>: <pre>Patch Set 18: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 1:52:11 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9960/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9960</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/2/2019, 1:53:22 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 1:57:43 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13421/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 1:58:08 PM<br><strong>Message</strong>: <pre>Patch Set 18: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 2:24:44 PM<br><strong>Message</strong>: <pre>Patch Set 18: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/2/2019, 2:25:23 PM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13421/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/13421</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/3/2019, 10:12:27 AM<br><strong>Message</strong>: <pre>Uploaded patch set 19: Patch Set 18 was rebased.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/3/2019, 2:43:46 PM<br><strong>Message</strong>: <pre>Uploaded patch set 20.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:47:10 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15137/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:47:44 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:54:13 PM<br><strong>Message</strong>: <pre>Patch Set 20: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:54:53 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15137/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15137</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:56:40 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9987/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:57:07 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:57:14 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13444/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 2:57:43 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:26:10 PM<br><strong>Message</strong>: <pre>Patch Set 20: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/3/2019, 3:41:38 PM<br><strong>Message</strong>: <pre>Uploaded patch set 21: New patch set was added with same tree, parent, and commit message as Patch Set 20.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:41:45 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15146/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:42:08 PM<br><strong>Message</strong>: <pre>Patch Set 21: -F2-DocBuild -F1-VerifyBuild -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:48:42 PM<br><strong>Message</strong>: <pre>Patch Set 21: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:48:50 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9995/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:48:50 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13452/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:49:17 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:49:17 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:49:25 PM<br><strong>Message</strong>: <pre>Patch Set 20: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9987/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9987

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13444/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/13444</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 3:49:27 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15146/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15146</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 4:18:42 PM<br><strong>Message</strong>: <pre>Patch Set 21: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 4:46:56 PM<br><strong>Message</strong>: <pre>Patch Set 21: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/3/2019, 4:47:37 PM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/9995/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/9995

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/13452/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/13452</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 7/8/2019, 4:23:03 PM<br><strong>Message</strong>: <pre>Patch Set 21: Code-Review-1

(2 comments)

Mostly LGTM but we should remove the double 'exists' check and make alive a function that tests the channel (or something) instead of sprinkling around the selects.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 7/8/2019, 4:42:06 PM<br><strong>Message</strong>: <pre>Patch Set 21: Code-Review-2

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/8/2019, 6:13:24 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(3 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 7/8/2019, 6:23:12 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 7/8/2019, 6:30:54 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 7/9/2019, 2:28:47 AM<br><strong>Message</strong>: <pre>Patch Set 21:

> Since gossip is lossy, I think it is reasonable to wait for an error on either reading or writing than preemptively closing connections. 

But when you wait and close the connection it doesn't make you re-connect to the remote node, so the remote node will be disconnected until you get a trigger to connect to it or it connects to you again. 

The fact that gossip doesn't ensure delivery (lossy) doesn't mean we should disregard scenarios such as this.</pre><strong>Reviewer</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Reviewed</strong>: 8/6/2019, 1:22:34 PM<br><strong>Message</strong>: <pre>Abandoned

Since the collision window is preferred : https://gerrit.hyperledger.org/r/#/c/fabric/+/32003/ , abandoning this change.</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 5/24/2019, 6:31:57 PM<br><strong>UnmergedRevision</strong>: [25df8bbf668e78120b611e13adcc1a90aa3bbb1b](https://github.com/hyperledger-gerrit-archive/fabric/commit/25df8bbf668e78120b611e13adcc1a90aa3bbb1b)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 5/24/2019, 7:17:47 PM<br><strong>UnmergedRevision</strong>: [3b0e9e18410bdbc8494349cc7efc8043b93ec69c](https://github.com/hyperledger-gerrit-archive/fabric/commit/3b0e9e18410bdbc8494349cc7efc8043b93ec69c)<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 5/24/2019, 7:31:32 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Morgan Bauer - mbauer@us.ibm.com<br><strong>Approved</strong>: 5/24/2019, 7:27:28 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/comm_impl.go#L561](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/comm_impl.go#L561)<br><strong>Comment</strong>: <pre>the peer that connected to this peer, may sense it is disconnected from this peer before this peer senses it.

Therefore, by doing this - aren't you preventing the remote peer from re-connecting to you?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L146)<br><strong>Comment</strong>: <pre>but this is a map and it can be altered by several goroutines, no?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L146)<br><strong>Comment</strong>: <pre>that's true. Thought the shadow would be good enough, but that doesn't work maps.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L160](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L160)<br><strong>Comment</strong>: <pre>the c.serverStream might be stale but you may not know it yet.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L160](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L160)<br><strong>Comment</strong>: <pre>Where is the check to see if it is stale? Otherwise you always drop the connection which causes lossiness</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L160](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L160)<br><strong>Comment</strong>: <pre>there is no such check, and i don't believe there should be.

If we get here while the connection existed, and it's a server side connection (we're the server) it means the remote peer thinks the connection is stale.

A connection can be stale without us detecting it for a while.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L160](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L160)<br><strong>Comment</strong>: <pre>The case that came out of the gossip flake was that this code is hit because the first request to make a connection doesn't finish processing before the second request comes in causing the first one to be dropped even though it was not stale which leads to dropped messages.

I thought this check was because we wanted to close the connection if we were the client previously and we only want to keep a single connection.

If this is there for a stale check we need to differentiate between stale check, a connection that hasn't been completely established yet, or if the existing connection is going the other direction. 

Where is the code that the remote peer uses to figure out the connection is stale?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L160](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L160)<br><strong>Comment</strong>: <pre>> The case that came out of the gossip flake was that this code is hit because the first request to make a connection doesn't finish processing before the second request comes in causing the first one to be dropped even though it was not stale which leads to dropped messages.

If that's the case, then what we need to ensure is that when you want to send a message to node "foo" and there is no connection to it (hence you need to open one)- you wait if there is already another goroutine that tries to establish a connection to "foo" and then use that connection.

> I thought this check was because we wanted to close the connection if we were the client previously and we only want to keep a single connection.

Clearly that's also a case, but it can be that the remote peer connected to us twice. In fact, it may connect twice if we're an anchor/bootstrap peer due to invoking Handshake() and then resuming normal operation.

> Where is the code that the remote peer uses to figure out the connection is stale?

Well, if you try to Send() or Recv() and you get an error - then it means the connection is stale, no?

And, you can't figure out from your peer that the remote peer thinks that his client side (or server side) connection is bad, because there is no way of that node to tell you that until it connected to you. 
Therefore, we should treat connection attempts to us as if the remote node always wants us to close our previous connection.

Now, that aside - the fact that tests sometimes fail not always means that we need to change the implementation to fit the tests. For instance- If the tests assume some property to hold but the production code cannot always ensure it due to scheduling or load, then we might want to change the tests to either make the conditions met more reliably, or just fit the expectations to reality. 

Lastly - what I suggest is that you take out of this CR this specific change, and keep the others such as the change around the output buffer area, so that this change set goes in, and we can discuss the specific problem you are fixing here offline or in another change set.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L160](https://github.com/hyperledger-gerrit-archive/fabric/blob/3b0e9e18410bdbc8494349cc7efc8043b93ec69c/gossip/comm/conn.go#L160)<br><strong>Comment</strong>: <pre>I will split the CR, but this specific change was the core change, the rest was hygiene.

In terms of not using the tests to inform implementation changes, I generally agree with what you stated. However, since I haven't found a design doc for gossip, I need to go off of the tests as that is the closest thing that tells me what is the desired behavior.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 5/24/2019, 7:47:28 PM<br><strong>UnmergedRevision</strong>: [9d958dc4ce49430d2760794f1ad4a706e8656e9b](https://github.com/hyperledger-gerrit-archive/fabric/commit/9d958dc4ce49430d2760794f1ad4a706e8656e9b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/27/2019, 11:56:22 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/27/2019, 11:56:22 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 12:36:00 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 12:27:11 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 5/25/2019, 2:59:41 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 5/28/2019, 3:22:52 PM<br><strong>UnmergedRevision</strong>: [d22f9c98571e1bf920a6cd6f592d7308a0f5ddff](https://github.com/hyperledger-gerrit-archive/fabric/commit/d22f9c98571e1bf920a6cd6f592d7308a0f5ddff)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 3:32:14 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 3:32:14 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 4:19:20 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 4:03:22 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 5/28/2019, 4:25:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L167](https://github.com/hyperledger-gerrit-archive/fabric/blob/d22f9c98571e1bf920a6cd6f592d7308a0f5ddff/gossip/comm/conn.go#L167)<br><strong>Comment</strong>: <pre>so as i said - I think that this might backfire in case the remote peer has detected the connection is stale but we haven't detected it yet, so it will try to reconnect to us but we will reject it because we already have a connection.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 5/28/2019, 9:03:50 PM<br><strong>UnmergedRevision</strong>: [7c1bee87625577e230c8551f9670ea8624e5d656](https://github.com/hyperledger-gerrit-archive/fabric/commit/7c1bee87625577e230c8551f9670ea8624e5d656)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 9:11:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 9:11:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/29/2019, 1:42:08 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/28/2019, 9:26:26 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 5/30/2019, 10:09:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/7c1bee87625577e230c8551f9670ea8624e5d656/gossip/comm/conn.go#L94)<br><strong>Comment</strong>: <pre>and the destinationLock remains locked?</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 5/31/2019, 1:16:57 PM<br><strong>UnmergedRevision</strong>: [2cea0cd7afd97f243344bd6f29c4621f0dbb5fb0](https://github.com/hyperledger-gerrit-archive/fabric/commit/2cea0cd7afd97f243344bd6f29c4621f0dbb5fb0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/31/2019, 1:27:33 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/31/2019, 1:27:33 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/31/2019, 4:20:05 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/31/2019, 1:58:54 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 6/6/2019, 7:27:37 PM<br><strong>UnmergedRevision</strong>: [f5a3c8de1787460ee000cd8b2b54da7177df3758](https://github.com/hyperledger-gerrit-archive/fabric/commit/f5a3c8de1787460ee000cd8b2b54da7177df3758)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:40:10 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:40:10 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:44:18 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/7/2019, 2:14:02 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 6/7/2019, 2:21:24 PM<br><strong>UnmergedRevision</strong>: [ba468eb68d316c79b56017a43ceace10f87c66b4](https://github.com/hyperledger-gerrit-archive/fabric/commit/ba468eb68d316c79b56017a43ceace10f87c66b4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:40:10 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:40:10 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:44:18 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/7/2019, 2:14:02 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 6/11/2019, 1:27:12 PM<br><strong>UnmergedRevision</strong>: [c0ec09b77bfb4ab5747c87d461116303a0476705](https://github.com/hyperledger-gerrit-archive/fabric/commit/c0ec09b77bfb4ab5747c87d461116303a0476705)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:40:10 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:40:10 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/6/2019, 7:44:18 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/7/2019, 2:14:02 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 6/11/2019, 6:01:57 PM<br><strong>UnmergedRevision</strong>: [b2bc0daeb5bcf5a274071b4e7b57444316710975](https://github.com/hyperledger-gerrit-archive/fabric/commit/b2bc0daeb5bcf5a274071b4e7b57444316710975)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/11/2019, 6:09:19 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/11/2019, 6:09:19 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/13/2019, 1:12:35 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 6/11/2019, 6:46:17 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L97](https://github.com/hyperledger-gerrit-archive/fabric/blob/b2bc0daeb5bcf5a274071b4e7b57444316710975/gossip/comm/conn.go#L97)<br><strong>Comment</strong>: <pre>do we still need this after your refactor? just to make sure</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/b2bc0daeb5bcf5a274071b4e7b57444316710975/gossip/comm/conn.go#L40)<br><strong>Comment</strong>: <pre>seems mutex is enough here (RLock is never called)</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L44](https://github.com/hyperledger-gerrit-archive/fabric/blob/b2bc0daeb5bcf5a274071b4e7b57444316710975/gossip/comm/conn.go#L44)<br><strong>Comment</strong>: <pre>for readability, let's group the lock and the member var it guards together with blank line in between, which eliminates the need for lock comments.</pre><strong>Commenter</strong>: Jay Guo - guojiannan1101@gmail.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L44](https://github.com/hyperledger-gerrit-archive/fabric/blob/b2bc0daeb5bcf5a274071b4e7b57444316710975/gossip/comm/conn.go#L44)<br><strong>Comment</strong>: <pre>nit - i don't think we've reached a point where RWMutex makes a difference in performance comparing to Mutex... (RWMutex is less performant when number of writers goes up)</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/1/2019, 4:24:16 PM<br><strong>UnmergedRevision</strong>: [bc0dea199e2a6b59bf6fc38aed04a35a24432591](https://github.com/hyperledger-gerrit-archive/fabric/commit/bc0dea199e2a6b59bf6fc38aed04a35a24432591)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 4:33:37 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/1/2019, 5:16:26 PM<br><strong>UnmergedRevision</strong>: [3b93fc46ca9f4823a9146e982e012f43df082fb3](https://github.com/hyperledger-gerrit-archive/fabric/commit/3b93fc46ca9f4823a9146e982e012f43df082fb3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 4:33:37 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/1/2019, 5:17:52 PM<br><strong>UnmergedRevision</strong>: [345e4bdd83335355ed1328b644261fcd511f64eb](https://github.com/hyperledger-gerrit-archive/fabric/commit/345e4bdd83335355ed1328b644261fcd511f64eb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 4:33:37 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/1/2019, 5:23:05 PM<br><strong>UnmergedRevision</strong>: [765fdab06499e8383d19a725c5e03bf768e95203](https://github.com/hyperledger-gerrit-archive/fabric/commit/765fdab06499e8383d19a725c5e03bf768e95203)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:20:36 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:23:40 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/2/2019, 10:37:49 AM<br><strong>UnmergedRevision</strong>: [90e28bea4dace8e53c74ec0fd901551f87a87eb2](https://github.com/hyperledger-gerrit-archive/fabric/commit/90e28bea4dace8e53c74ec0fd901551f87a87eb2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:20:36 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:23:40 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/2/2019, 11:54:02 AM<br><strong>UnmergedRevision</strong>: [4691f8f3f3638a909b378e32d060c4122052068d](https://github.com/hyperledger-gerrit-archive/fabric/commit/4691f8f3f3638a909b378e32d060c4122052068d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:20:36 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:23:40 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/2/2019, 12:33:51 PM<br><strong>UnmergedRevision</strong>: [c4acccbb8efb56ac5e2057b796f2b480feb29353](https://github.com/hyperledger-gerrit-archive/fabric/commit/c4acccbb8efb56ac5e2057b796f2b480feb29353)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:20:36 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 6:23:40 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/2/2019, 12:43:00 PM<br><strong>UnmergedRevision</strong>: [da6fca887b12b1469e1bb80b719249fb49d8e640](https://github.com/hyperledger-gerrit-archive/fabric/commit/da6fca887b12b1469e1bb80b719249fb49d8e640)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/2/2019, 1:51:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/2/2019, 2:24:44 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/3/2019, 10:12:27 AM<br><strong>UnmergedRevision</strong>: [bb342bd3cd7dfe957cacab53a2c7e7969f52b764](https://github.com/hyperledger-gerrit-archive/fabric/commit/bb342bd3cd7dfe957cacab53a2c7e7969f52b764)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/1/2019, 5:32:27 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/2/2019, 1:51:32 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/2/2019, 2:24:44 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/3/2019, 2:43:46 PM<br><strong>UnmergedRevision</strong>: [ec07104478d06f2fd35df1c7bcb7c6e75e7a1045](https://github.com/hyperledger-gerrit-archive/fabric/commit/ec07104478d06f2fd35df1c7bcb7c6e75e7a1045)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 2:54:13 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 2:54:13 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 3:26:10 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 3:49:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: NO_CHANGE<br><strong>Author</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Uploader</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>Created</strong>: 7/3/2019, 3:41:38 PM<br><strong>UnmergedRevision</strong>: [78119774a37a5b41e33bb4c4b2ffc96ee7283ac3](https://github.com/hyperledger-gerrit-archive/fabric/commit/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 3:48:42 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 3:48:42 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 4:46:56 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/3/2019, 4:18:42 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 7/8/2019, 4:42:06 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 7/8/2019, 4:23:03 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L83)<br><strong>Comment</strong>: <pre>double the fun?</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L83](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L83)<br><strong>Comment</strong>: <pre>Whoops, not sure why I added two here. My guess is a bad rebase.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L168](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L168)<br><strong>Comment</strong>: <pre>if the remote node connected to you, it means the connection *from* the remote node to you, which can be using this stream, is not good (for the remote node) but you can't see it. 

I don't think we need to solve it this way. The right way to solve it is using a collision window approach (FAB-15613) and always replace the connection if we're outside of the collision window.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L168](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L168)<br><strong>Comment</strong>: <pre>That's not the only case you would see multiple onConnected requests. If the first peer makes multiple connections before one has been established we will run into this issue. In that situation this would make sure connections are not being dropped before necessary. In the case of a bad connection the readFromStream and writeToStream will error and mark the connection as not alive.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L168](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L168)<br><strong>Comment</strong>: <pre>> That's not the only case you would see multiple onConnected requests. 

Right, but such a case exists and this change set makes handling it impossible.

> In the case of a bad connection the readFromStream and writeToStream will error and mark the connection as not alive.

Erroring when reading may take a while to detect, and writing will only detect upon the 2nd attempt after the real failure occurred, and meanwhile the remote node could have connected to you but you ignored it, and sent EOF to that remote node.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L168](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L168)<br><strong>Comment</strong>: <pre>> Right, but such a case exists and this change set makes handling it impossible

This ensures that we honor the first connection that was added to the map and making the map the source of truth.

> Erroring when reading may take a while to detect, and writing will only detect upon the 2nd attempt after the real failure occurred, and meanwhile the remote node could have connected to you but you ignored it, and sent EOF to that remote node.

Since gossip is lossy, I think it is reasonable to wait for an error on either reading or writing than preemptively closing connections. This way it is very clear what makes a connection stale.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L222](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L222)<br><strong>Comment</strong>: <pre>name seems inverted; receive blocks when "alive" and gets the zero value when closed due to error, right?

Also, looks like all of the places where alive is referenced, it's done in a select with a default block for the behavior. Given the pattern, I think the test (alive) should be a function that returns a bool; it can be easily implemented by a select within the function. That would make the paths easier to read, IMO.</pre><strong>Commenter</strong>: Swetha Repakula - srepaku@us.ibm.com<br><strong>CommentLine</strong>: [gossip/comm/conn.go#L222](https://github.com/hyperledger-gerrit-archive/fabric/blob/78119774a37a5b41e33bb4c4b2ffc96ee7283ac3/gossip/comm/conn.go#L222)<br><strong>Comment</strong>: <pre>I like that idea. I will add an isAlive to make it clearer.</pre></blockquote>