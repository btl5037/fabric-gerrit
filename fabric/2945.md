<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 2945<br><strong>Subject</strong>: [FAB-1238] implement upgrade of lccc<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 12/2/2016, 4:32:57 AM<br><strong>LastUpdated</strong>: 12/8/2016, 9:02:34 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-1238] implement upgrade of lccc

Add upgrade method for lccc. This method checkes DeploymentSpec
, replaces existing DeploymentSpec with new one, and updates chaincode
version with +1 simply. Finally return new version of chaincode.
https://jira.hyperledger.org/browse/FAB-1238

Change-Id: I5b314915c0ad966896669bfe6c95bdbe69e82aeb
Signed-off-by: jiangyaoguo <jiangyaoguo@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/2/2016, 4:32:57 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/2/2016, 4:34:28 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3583/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/2/2016, 4:36:30 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2414/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/2/2016, 4:39:54 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3583/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2414/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/2/2016, 4:56:38 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/2/2016, 4:57:55 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3584/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/2/2016, 4:59:46 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2415/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/2/2016, 5:26:03 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2415/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3584/ : SUCCESS</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/4/2016, 8:42:51 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/4/2016, 8:44:10 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3623/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/4/2016, 8:45:25 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2454/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/4/2016, 9:09:10 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2454/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3623/ : SUCCESS</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 12/6/2016, 12:14:27 PM<br><strong>Message</strong>: <pre>Patch Set 3: Code-Review-1

Could you rebase to pick up lccc changes from https://gerrit.hyperledger.org/r/#/c/3005/  ? There should not be a need for "ChainNotFound" ... the lccc would be initialzed on the chain, so if the chains not there, it won't even get to LCCC.</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/7/2016, 4:39:28 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/7/2016, 4:42:48 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3737/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/7/2016, 5:20:26 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3737/ : SUCCESS</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/7/2016, 11:04:18 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/7/2016, 11:08:29 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3741/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/7/2016, 11:58:26 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3741/ : FAILURE</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/8/2016, 4:41:21 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 4:44:40 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3766/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 5:30:06 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3766/ : FAILURE</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/8/2016, 7:02:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 7:06:00 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3771/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 7:41:14 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3771/ : SUCCESS</pre><strong>Reviewer</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Reviewed</strong>: 12/8/2016, 10:50:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 10:51:00 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3778/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 11:29:21 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3778/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 12/8/2016, 4:38:15 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 12/8/2016, 4:40:55 PM<br><strong>Message</strong>: <pre>Patch Set 8:

This is complete as far as lccc is concerned (and the DeployAndUpgrade test in endorser_test is a good one). For those reasons, +2 this.

There's additional work to be done to use the version in the namespace to launch chaincodes (so we can have upgrade in progress when the original chaincode is running). However this has to be done as part of version management. Now that Jiang has done his part, I need to do mine. Thanks, Jiang!</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 12/8/2016, 4:41:01 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 8:33:30 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Srinivasan Muralidharan</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 8:36:10 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/534/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 12/8/2016, 9:02:34 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/534/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1480671177<br><strong>GitHubRevision</strong>: [017921ebe048be04cdc9bced2643c786f13d0e93](https://github.com/hyperledger/fabric/commit/017921ebe048be04cdc9bced2643c786f13d0e93)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/2/2016, 4:39:54 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1480672598<br><strong>GitHubRevision</strong>: [7e5983ff6eb04060c01ecc6126228e4307ac168f](https://github.com/hyperledger/fabric/commit/7e5983ff6eb04060c01ecc6126228e4307ac168f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/2/2016, 5:26:03 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1480902171<br><strong>GitHubRevision</strong>: [f914b2683351e99f451ce22761aea23796688edf](https://github.com/hyperledger/fabric/commit/f914b2683351e99f451ce22761aea23796688edf)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/4/2016, 9:09:10 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Approved</strong>: 12/6/2016, 12:14:27 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1481103568<br><strong>GitHubRevision</strong>: [5df8cd0cca390badd7beb524a96c5a78a79c8d5b](https://github.com/hyperledger/fabric/commit/5df8cd0cca390badd7beb524a96c5a78a79c8d5b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/7/2016, 5:20:26 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1481126658<br><strong>GitHubRevision</strong>: [560d1c4737a17dad4daa41337a6e11765f1a3494](https://github.com/hyperledger/fabric/commit/560d1c4737a17dad4daa41337a6e11765f1a3494)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/7/2016, 11:58:26 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1481190081<br><strong>GitHubRevision</strong>: [5361853b92b800c7e4bb1a24a71692dc72367ae3](https://github.com/hyperledger/fabric/commit/5361853b92b800c7e4bb1a24a71692dc72367ae3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/8/2016, 5:30:06 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1481198552<br><strong>GitHubRevision</strong>: [9dea604c8fd983357cc2e08e8f51f9207a6a33dd](https://github.com/hyperledger/fabric/commit/9dea604c8fd983357cc2e08e8f51f9207a6a33dd)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/8/2016, 7:41:14 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Uploader</strong>: YAOGUO JIANG - jiangyaoguo@gmail.com<br><strong>Created</strong>: 1481212253<br><strong>GitHubRevision</strong>: [09fe0dacd5c446728717cce623ecb723aba02c74](https://github.com/hyperledger/fabric/commit/09fe0dacd5c446728717cce623ecb723aba02c74)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 12/8/2016, 11:29:21 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 12/8/2016, 4:38:15 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Approved</strong>: 12/8/2016, 4:41:01 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Srinivasan Muralidharan<br><strong>Merged</strong>: 12/8/2016, 8:33:30 PM<br><br></blockquote>