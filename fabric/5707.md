<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 5707<br><strong>Subject</strong>: Update document with changes in transaction behavior<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/8/2017, 6:11:54 AM<br><strong>LastUpdated</strong>: 2/13/2017, 5:46:52 PM<br><strong>CommitMessage</strong>:<br><pre>Update document with changes in transaction behavior

https://jira.hyperledger.org/browse/FAB-2192

Change-Id: I8bb097acae821c367df7daee3339c5d69f45f7d8
Signed-off-by: manish <manish.sethi@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 6:11:54 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 6:14:32 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6356/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 7:02:28 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6356/ : FAILURE</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 7:36:12 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(6 comments)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 7:37:19 AM<br><strong>Message</strong>: <pre>Patch Set 1:

not sure why this failed - hopefully other CRs are not having this issue.  Removing CI since this is a doc only change</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 7:37:21 AM<br><strong>Message</strong>: <pre>Removed the following votes:

* Verified-1 by Hyperledger Jobbuilder <jobbuilder@jenkins.hyperledger.org>
</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 7:37:27 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 8:03:40 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 8:05:36 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 8:06:47 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6358/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 8:08:38 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6359/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 9:02:04 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6358/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/8/2017, 9:11:46 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6359/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/8/2017, 5:06:50 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(3 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/9/2017, 5:48:17 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/9/2017, 5:50:48 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(8 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/9/2017, 5:51:06 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6468/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/9/2017, 6:35:50 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6468/ : SUCCESS</pre><strong>Reviewer</strong>: Baohua Yang - yangbaohua@gmail.com<br><strong>Reviewed</strong>: 2/9/2017, 9:24:27 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/9/2017, 11:47:05 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 2/10/2017, 1:34:19 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/10/2017, 3:48:25 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/10/2017, 3:48:46 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/10/2017, 7:27:15 AM<br><strong>Message</strong>: <pre>Patch Set 5:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 7:44:37 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6554/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 7:51:31 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6559/</pre><strong>Reviewer</strong>: Simon Stone - sstone1@uk.ibm.com<br><strong>Reviewed</strong>: 2/10/2017, 7:53:53 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review-1

I think the chaincode documentation needs to be updated to reference the transaction behaviour. One, because it's more likely chaincode developers will read it then a design document, and two because it's misleading:

https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim#ChaincodeStubInterface

// PutState writes the specified `value` and `key` into the ledger.
PutState(key string, value []byte) error

With the current behaviour, that's wrong. PutState does not write anything into the ledger. It puts it into the write set for the current transaction simulation.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 8:55:51 AM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6554/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/10/2017, 9:14:22 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6559/ : SUCCESS</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/10/2017, 9:44:03 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Simon, I did not understand the relevance of your comments to this CR.
You mean to say that we should not have this doc at all?</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 2/10/2017, 2:18:11 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+1</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/10/2017, 2:40:37 PM<br><strong>Message</strong>: <pre>Patch Set 4:

> I think the chaincode documentation needs to be updated to
 > reference the transaction behaviour. One, because it's more likely
 > chaincode developers will read it then a design document, and two
 > because it's misleading:
 > 
 > https://godoc.org/github.com/hyperledger/fabric/core/chaincode/shim#ChaincodeStubInterface
 > 
 > // PutState writes the specified `value` and `key` into the ledger.
 > PutState(key string, value []byte) error
 > 
 > With the current behaviour, that's wrong. PutState does not write
 > anything into the ledger. It puts it into the write set for the
 > current transaction simulation.

Did you post your review on the wrong CR?  Please correct or submit a CR on the ChaincodeStubInterface to correct the error.  Thanks.</pre><strong>Reviewer</strong>: Simon Stone - sstone1@uk.ibm.com<br><strong>Reviewed</strong>: 2/10/2017, 2:47:39 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Code-Review

Manish, Binh - I raised FAB-2045, which this CR is meant to fix, and I am not satisfied that updating the design documentation alone is sufficient to resolve the problem. The Go shim documentation should be updated to be correct with regards to the v1.0 behaviour as well.</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/10/2017, 3:12:27 PM<br><strong>Message</strong>: <pre>Patch Set 5:

> Manish, Binh - I raised FAB-2045, which this CR is meant to fix,
 > and I am not satisfied that updating the design documentation alone
 > is sufficient to resolve the problem. The Go shim documentation
 > should be updated to be correct with regards to the v1.0 behaviour
 > as well.

Make sense. Thanks Simon.

Manish, I think this doc is fine, but it didn't address fab-2045, so referencing it in the commit isn't correct. Please remove that reference to 2045 and state in the commit comment what this changeset actually correcting. Thanks.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/11/2017, 7:10:00 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/11/2017, 7:11:56 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Created a new Jira (FAB-2192) for this. Thanks</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2017, 7:11:59 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6696/</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 2/11/2017, 7:59:41 AM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+1</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2017, 8:08:25 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/6696/ : SUCCESS</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 3:59:49 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 2/13/2017, 4:33:05 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 4:33:08 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Srinivasan Muralidharan</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 4:36:36 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1053/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/13/2017, 5:46:52 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1053/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 1486552314<br><strong>GitHubRevision</strong>: [cd09b9305101be2a9d0a933cbf578000a9e31c23](https://github.com/hyperledger/fabric/commit/cd09b9305101be2a9d0a933cbf578000a9e31c23)<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 2/8/2017, 7:37:27 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 1486559020<br><strong>GitHubRevision</strong>: [f2e9affeb9e6775b08943fe895dfd4b9fe4df690](https://github.com/hyperledger/fabric/commit/f2e9affeb9e6775b08943fe895dfd4b9fe4df690)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/8/2017, 9:02:04 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 1486559136<br><strong>GitHubRevision</strong>: [72f1d97ffc359029d60cd858914b2ddbf310ee6d](https://github.com/hyperledger/fabric/commit/72f1d97ffc359029d60cd858914b2ddbf310ee6d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/8/2017, 9:11:46 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 1486637297<br><strong>GitHubRevision</strong>: [4fb9dd06514317b893393a421f15a81e8f52a0d0](https://github.com/hyperledger/fabric/commit/4fb9dd06514317b893393a421f15a81e8f52a0d0)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/9/2017, 6:35:50 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 2/9/2017, 11:47:05 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Baohua Yang - yangbaohua@gmail.com<br><strong>Approved</strong>: 2/9/2017, 9:24:27 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 1486716505<br><strong>GitHubRevision</strong>: [5dff32ad4f5aa130b476d9b79fc2a4c114850c90](https://github.com/hyperledger/fabric/commit/5dff32ad4f5aa130b476d9b79fc2a4c114850c90)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/10/2017, 8:55:51 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 2/10/2017, 2:18:11 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 1486815000<br><strong>GitHubRevision</strong>: [83f8fcf2e42c0affbd39b6d7a6628533bb8033e8](https://github.com/hyperledger/fabric/commit/83f8fcf2e42c0affbd39b6d7a6628533bb8033e8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 2/11/2017, 8:08:25 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 2/13/2017, 3:59:49 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Approved</strong>: 2/13/2017, 4:33:05 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Srinivasan Muralidharan<br><strong>Merged</strong>: 2/13/2017, 4:33:08 PM<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 2/11/2017, 7:59:41 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>