<strong>Project</strong>: fabric</br><strong>Branch</strong>: master<br><strong>ID</strong>: 4113<br><strong>Subject</strong>: [FAB-1618]Cleanup ledger interfaces<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Kai Chen - 281165273@qq.com<br><strong>Assignee</strong>:<strong>Created</strong>: 1/17/2017, 11:04:48 PM<br><strong>LastUpdated</strong>: 1/23/2017, 11:28:01 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-1618]Cleanup ledger interfaces

https://jira.hyperledger.org/browse/FAB-1618

Ledger interfaces changed, all ledger interfaces have
commit block method, this commit cleanup the interfaces.

Change-Id: I5df56a1ec5cb71e2474e3b5daeea6642842bc762
Signed-off-by: grapebaba <281165273@qq.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Kai Chen - 281165273@qq.com<br><strong>Reviewed</strong>: 1/17/2017, 11:04:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 11:08:25 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5325/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 11:11:43 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5325/ : FAILURE</pre><strong>Reviewer</strong>: Kai Chen - 281165273@qq.com<br><strong>Reviewed</strong>: 1/17/2017, 11:25:53 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 11:29:43 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5328/</pre><strong>Reviewer</strong>: Kai Chen - 281165273@qq.com<br><strong>Reviewed</strong>: 1/17/2017, 11:53:19 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 11:56:44 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5330/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/17/2017, 11:59:16 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5328/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/18/2017, 12:37:51 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5330/ : SUCCESS</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 10:39:38 PM<br><strong>Message</strong>: <pre>Patch Set 3:

I think that moving the common method `Commit` to Ledger interface is a good step but removing the different ledger types such as OrdererLedger and ValidatedLedger may not be desirable. Even though as of now they may not have any additional methods. This is because, functionality wise they have a different roles. At the minimum, in addition to a specific type, it gives a place in the ledger_interface.go to write a detailed documentation about the expected behavior of the different types of ledgers (Just like in golang, you declare a `type age int`). For instance, `Commit` for OrdererLedger has a different behavior from `Commit` for PeerLedger. Thoughts...?</pre><strong>Reviewer</strong>: Kai Chen - 281165273@qq.com<br><strong>Reviewed</strong>: 1/19/2017, 10:54:30 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Yes, that is what exactly I hesitated. Agree, will change soon.
As you said, it looks like better to copy all methods in different interfaces than embedded Ledger interface. Does it make sense?</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 11:35:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

No, copy is not good. Because, all other methods other than the `Commit` has the same semantics across ledger types. Except, the method `Commit`. From that perspective, it was OK as it was originally - Sorry for not bringing up this point earlier. However, I am fine with moving the `Commit` method to common Ledger inetrface... Just that we should not delete the ledger types. Dave, do you have a preference about the `Commit` method?</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 1/19/2017, 11:59:27 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Agreed, good to keep PeerLedger/PeerLedgerProvider and OrdererLedger/OrdererLedgerProvider separate as it was.  Commit() can move down to Ledger level.</pre><strong>Reviewer</strong>: Kai Chen - 281165273@qq.com<br><strong>Reviewed</strong>: 1/23/2017, 3:21:09 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2017, 3:22:06 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5534/</pre><strong>Reviewer</strong>: Kai Chen - 281165273@qq.com<br><strong>Reviewed</strong>: 1/23/2017, 3:51:55 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Manish, David, hope you review again</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2017, 4:01:59 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5534/ : SUCCESS</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/23/2017, 4:02:16 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 1/23/2017, 6:08:08 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 1/23/2017, 7:00:20 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1</pre><strong>Reviewer</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Reviewed</strong>: 1/23/2017, 9:14:59 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 1/23/2017, 10:31:48 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

LGTM</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 1/23/2017, 10:31:50 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Christopher Ferris</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2017, 10:37:57 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/835/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/23/2017, 11:28:01 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/835/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Kai Chen - 281165273@qq.com<br><strong>Uploader</strong>: Kai Chen - 281165273@qq.com<br><strong>Created</strong>: 1484712288<br><strong>GitHubRevision</strong>: [8427d9fc38bbb5d3a05d9619d23c690fc408808a](https://github.com/hyperledger/fabric/commit/8427d9fc38bbb5d3a05d9619d23c690fc408808a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/17/2017, 11:11:43 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Kai Chen - 281165273@qq.com<br><strong>Uploader</strong>: Kai Chen - 281165273@qq.com<br><strong>Created</strong>: 1484713553<br><strong>GitHubRevision</strong>: [2efc80aba6970b7bb217e415d4677dd983fd4304](https://github.com/hyperledger/fabric/commit/2efc80aba6970b7bb217e415d4677dd983fd4304)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/17/2017, 11:59:16 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Kai Chen - 281165273@qq.com<br><strong>Uploader</strong>: Kai Chen - 281165273@qq.com<br><strong>Created</strong>: 1484715199<br><strong>GitHubRevision</strong>: [2e598f97e5ede7a7bb1d1d3a67fd9f1cda42b421](https://github.com/hyperledger/fabric/commit/2e598f97e5ede7a7bb1d1d3a67fd9f1cda42b421)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/18/2017, 12:37:51 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Kai Chen - 281165273@qq.com<br><strong>Uploader</strong>: Kai Chen - 281165273@qq.com<br><strong>Created</strong>: 1485159669<br><strong>GitHubRevision</strong>: [2f6844a59a92a407af514bec6d3f421f5a4a2bf0](https://github.com/hyperledger/fabric/commit/2f6844a59a92a407af514bec6d3f421f5a4a2bf0)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 1/23/2017, 10:31:48 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Christopher Ferris<br><strong>Merged</strong>: 1/23/2017, 10:31:50 AM<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/23/2017, 4:01:59 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Approved</strong>: 1/23/2017, 9:14:59 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 1/23/2017, 4:02:16 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 1/23/2017, 6:08:08 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 1/23/2017, 7:00:20 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>