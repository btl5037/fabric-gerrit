<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 9199<br><strong>Subject</strong>: [FAB-3109] Fix anchor peer connection logic<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 5/10/2017, 1:33:43 PM<br><strong>LastUpdated</strong>: 5/18/2017, 5:46:30 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-3109] Fix anchor peer connection logic

The current implementation of what happens when the peer connects
to an anchor peer has a flawed logic.

It assumes that if the probe is successful, the sending is also.
That's too optimistic.
Another problem is that after the handshake is performed, the remote peer
may not distinguish between the closing of the connection of the handshake
and the closing of the new connection that sends the MembershipRequest,
since we only support 1 connection between each peer (to prevent DOS).

I re-implemented the logic to do the following:
1) First, perform a handshake to know whether the remote peer is from
  our org or not.
  Peers in different orgs should not know of our internal endpoints).
  The handshake is performed until it succeeds or too many attempts
  are made.
2) Now, construct a MembershipRequest and send it until you get
   acked from the remote peer, or when attempts are exhausted.

Added a test that simulates the flow.

Change-Id: I72370d9be816105fdc5af7577ce578faf6e5abdc
Signed-off-by: Yacov Manevich <yacovm@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/10/2017, 1:33:43 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/10/2017, 1:35:32 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:36:00 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5472/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:36:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11413/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:36:37 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2943/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:36:56 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5473/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:37:07 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11414/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:37:20 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2944/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:54:09 PM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11413/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2943/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5472/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/10/2017, 1:54:24 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11414/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2944/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5473/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/11/2017, 7:05:25 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:06:36 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5509/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:08:00 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11449/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:08:08 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2979/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 8:53:21 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2979/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5509/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11449/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/11/2017, 10:22:09 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:24:13 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5515/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:24:18 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11455/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:24:39 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2985/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/11/2017, 10:41:21 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:44:45 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5519/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:45:25 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11459/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:45:36 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2989/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/11/2017, 10:55:07 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:56:16 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5521/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:56:43 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11461/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 10:57:11 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2991/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 11:29:48 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11455/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2985/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5515/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 11:58:53 AM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11461/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2991/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5521/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 12:02:13 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11459/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/2989/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5519/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:01:54 PM<br><strong>Message</strong>: <pre>Patch Set 5: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5569/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:03:31 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11508/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:03:31 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3038/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:08:19 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5569/ : ABORTED

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11508/ : ABORTED

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3038/ : ABORTED</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:10:09 PM<br><strong>Message</strong>: <pre>Patch Set 6: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11511/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/11/2017, 7:10:12 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3040/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/12/2017, 6:54:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 6:54:17 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7176/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 6:55:43 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11526/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 6:55:55 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3056/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 6:56:35 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5586/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 7:44:57 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11526/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-z/7176/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3056/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5586/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/12/2017, 8:08:55 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 8:09:04 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7181/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 8:12:08 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11529/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 8:12:30 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3062/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 8:12:34 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5592/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 9:28:55 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7187/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 9:31:57 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11534/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 9:32:13 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3066/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 9:32:13 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5596/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/12/2017, 10:52:55 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-z/7187/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11534/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5596/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3066/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 9:25:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 9:26:36 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 9:35:03 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 9:37:09 AM<br><strong>Message</strong>: <pre>Patch Set 12: Patch Set 11 was rebased</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 9:43:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 9:44:54 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7225/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 9:46:26 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3105/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 9:46:41 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11573/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 9:47:12 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5635/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 11:23:22 AM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-z/7225/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3105/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11573/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5635/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 11:37:15 AM<br><strong>Message</strong>: <pre>Uploaded patch set 14.</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 3:23:47 PM<br><strong>Message</strong>: <pre>Patch Set 14:

reverify</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/14/2017, 3:30:27 PM<br><strong>Message</strong>: <pre>Uploaded patch set 15.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 11:43:55 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7226/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 11:45:07 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3106/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 11:46:13 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5636/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/14/2017, 11:46:51 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11574/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/15/2017, 1:03:54 AM<br><strong>Message</strong>: <pre>Patch Set 15: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11574/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3106/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-z/7226/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5636/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/15/2017, 5:41:42 AM<br><strong>Message</strong>: <pre>Patch Set 15:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/15/2017, 5:41:51 AM<br><strong>Message</strong>: <pre>Patch Set 15: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7230/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/15/2017, 5:43:29 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3110/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/15/2017, 5:44:14 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5640/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/15/2017, 5:44:26 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11578/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/15/2017, 7:22:19 AM<br><strong>Message</strong>: <pre>Patch Set 15: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3110/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-z/7230/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5640/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11578/ : SUCCESS</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 5/16/2017, 5:59:37 AM<br><strong>Message</strong>: <pre>Patch Set 15: Code-Review-1

(9 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/16/2017, 9:02:18 AM<br><strong>Message</strong>: <pre>Patch Set 15:

(9 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/16/2017, 9:02:33 AM<br><strong>Message</strong>: <pre>Uploaded patch set 16.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/16/2017, 9:02:43 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-z/7292/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/16/2017, 9:04:53 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3172/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/16/2017, 9:05:17 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11641/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/16/2017, 9:05:33 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5702/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/16/2017, 10:30:58 AM<br><strong>Message</strong>: <pre>Patch Set 16: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/3172/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-z/7292/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/11641/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/5702/ : SUCCESS</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 5/18/2017, 10:02:11 AM<br><strong>Message</strong>: <pre>Patch Set 16: Code-Review+2</pre><strong>Reviewer</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Reviewed</strong>: 5/18/2017, 4:12:39 PM<br><strong>Message</strong>: <pre>Patch Set 16: Code-Review+1</pre><strong>Reviewer</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Reviewed</strong>: 5/18/2017, 4:17:18 PM<br><strong>Message</strong>: <pre>Patch Set 16: Code-Review+2

Just to also note that 
      GenerateCertificates
will not remain "protected" anymore.

Approved, in agreement with the exchange in the underlying JIRA ticket.</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 5/18/2017, 4:17:23 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Jonathan Levi (HACERA)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/18/2017, 4:17:31 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-z/1208/ (1/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/18/2017, 4:19:40 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/844/ (2/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/18/2017, 4:21:25 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/533/ (3/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/18/2017, 4:21:40 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1850/ (4/4)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/18/2017, 5:46:30 PM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/844/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/533/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-merge-z/1208/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1850/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/10/2017, 1:33:43 PM<br><strong>UnmergedRevision</strong>: [23baeba09a431082ab0aa09af3c85e6352173c4c](https://github.com/hyperledger-gerrit-archive/fabric/commit/23baeba09a431082ab0aa09af3c85e6352173c4c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/10/2017, 1:54:09 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/10/2017, 1:35:32 PM<br><strong>UnmergedRevision</strong>: [55a292f112fd9c1fbd320dbbff4f3fdea3b0668f](https://github.com/hyperledger-gerrit-archive/fabric/commit/55a292f112fd9c1fbd320dbbff4f3fdea3b0668f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/10/2017, 1:54:24 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/11/2017, 7:05:25 AM<br><strong>UnmergedRevision</strong>: [21fc306ac7e7e52839b92feac70ef1fbef85707f](https://github.com/hyperledger-gerrit-archive/fabric/commit/21fc306ac7e7e52839b92feac70ef1fbef85707f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/11/2017, 8:53:21 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/11/2017, 10:22:09 AM<br><strong>UnmergedRevision</strong>: [33010e21ee685186becf5d541fd152c6d53673d2](https://github.com/hyperledger-gerrit-archive/fabric/commit/33010e21ee685186becf5d541fd152c6d53673d2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/11/2017, 11:29:48 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/11/2017, 10:41:21 AM<br><strong>UnmergedRevision</strong>: [7fa0116a34aca00e9a1e4764287a57a4c3c4b901](https://github.com/hyperledger-gerrit-archive/fabric/commit/7fa0116a34aca00e9a1e4764287a57a4c3c4b901)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/11/2017, 7:08:19 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/11/2017, 10:55:07 AM<br><strong>UnmergedRevision</strong>: [06e513bbf726acf489a2c7fbccee6f38fc7df732](https://github.com/hyperledger-gerrit-archive/fabric/commit/06e513bbf726acf489a2c7fbccee6f38fc7df732)<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/12/2017, 6:54:10 AM<br><strong>UnmergedRevision</strong>: [cff2fdb752dbf74ee14db396d361cd3d085ac393](https://github.com/hyperledger-gerrit-archive/fabric/commit/cff2fdb752dbf74ee14db396d361cd3d085ac393)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/12/2017, 7:44:57 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/12/2017, 8:08:55 AM<br><strong>UnmergedRevision</strong>: [4097ee481c34d669f8a6dc077f1f88c1150bd13b](https://github.com/hyperledger-gerrit-archive/fabric/commit/4097ee481c34d669f8a6dc077f1f88c1150bd13b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/12/2017, 10:52:55 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 9:25:56 AM<br><strong>UnmergedRevision</strong>: [653c4977cc2dcf592a1897fc36aef3f738521274](https://github.com/hyperledger-gerrit-archive/fabric/commit/653c4977cc2dcf592a1897fc36aef3f738521274)<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 9:26:36 AM<br><strong>UnmergedRevision</strong>: [e199c4b9fb78207fe201ab82bd27d28fad750d4c](https://github.com/hyperledger-gerrit-archive/fabric/commit/e199c4b9fb78207fe201ab82bd27d28fad750d4c)<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 9:35:03 AM<br><strong>UnmergedRevision</strong>: [8437a3eec376641286694a8907001ac08a394226](https://github.com/hyperledger-gerrit-archive/fabric/commit/8437a3eec376641286694a8907001ac08a394226)<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 9:37:09 AM<br><strong>UnmergedRevision</strong>: [c1e902d7684eb6c2837c00b5989de0f4894edd81](https://github.com/hyperledger-gerrit-archive/fabric/commit/c1e902d7684eb6c2837c00b5989de0f4894edd81)<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 9:43:39 AM<br><strong>UnmergedRevision</strong>: [bc1b424e68ec06617eaec6f12ec86a6c4ad1cc69](https://github.com/hyperledger-gerrit-archive/fabric/commit/bc1b424e68ec06617eaec6f12ec86a6c4ad1cc69)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/14/2017, 11:23:22 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 11:37:15 AM<br><strong>UnmergedRevision</strong>: [f2010dbea177227758c9ff20d8d90d04d2670e40](https://github.com/hyperledger-gerrit-archive/fabric/commit/f2010dbea177227758c9ff20d8d90d04d2670e40)<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/14/2017, 3:30:27 PM<br><strong>UnmergedRevision</strong>: [17ccb629a4bb64201d5bcbcf921af7693cde19dc](https://github.com/hyperledger-gerrit-archive/fabric/commit/17ccb629a4bb64201d5bcbcf921af7693cde19dc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/15/2017, 7:22:19 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 5/16/2017, 5:59:37 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/discovery/discovery.go#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/discovery/discovery.go#L103)<br><strong>Comment</strong>: <pre>Can you add comments here, avoid golint warnings?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/discovery/discovery.go#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/discovery/discovery.go#L103)<br><strong>Comment</strong>: <pre>Sure, done.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/discovery/discovery_impl.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/discovery/discovery_impl.go#L65)<br><strong>Comment</strong>: <pre>Please add comments to the function.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/discovery/discovery_impl.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/discovery/discovery_impl.go#L65)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/anchor_test.go#L288](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/gossip/anchor_test.go#L288)<br><strong>Comment</strong>: <pre>What is the purpose of the sleep here? To wait for membership?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/anchor_test.go#L288](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/gossip/anchor_test.go#L288)<br><strong>Comment</strong>: <pre>Without the sleep, the peer and the anchor peers start roughly at the same time and that scenario is too optimistic.
I want to enforce on the peer a scenario in which it starts and the anchor peers are not available, so it would have to reconnect to them.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/gossip_impl.go#L263](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/gossip/gossip_impl.go#L263)<br><strong>Comment</strong>: <pre>Don't you need to check for an error here? In the implementation of GetPKIidOfCert stated that:

  // GetPKIidOfCert returns the PKI-ID of a peer's identity
  // If any error occurs, the method return nil

IMO, need to add check for nil here.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/gossip_impl.go#L263](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/gossip/gossip_impl.go#L263)<br><strong>Comment</strong>: <pre>added a check.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/gossip_test.go#L57](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/gossip/gossip_test.go#L57)<br><strong>Comment</strong>: <pre>I think to make it clear, need to externalize to constant with meaningful name.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/gossip_test.go#L57](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/gossip/gossip_test.go#L57)<br><strong>Comment</strong>: <pre>I agree in general but I think it should be done in a separate JIRA item and in a separate change set, as it's not the purpose of this change set. 
I created FAB-3949 for this.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L34)<br><strong>Comment</strong>: <pre>Can you add comments here?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L34)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L38)<br><strong>Comment</strong>: <pre>same</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L38)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L59)<br><strong>Comment</strong>: <pre>Comments, please? :)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L59)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L94)<br><strong>Comment</strong>: <pre>I think we can reduce here the scope the lock, since this is the only write access to the subscriptions map. What do you think?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/util/pubsub.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/17ccb629a4bb64201d5bcbcf921af7693cde19dc/gossip/util/pubsub.go#L94)<br><strong>Comment</strong>: <pre>We also have the write access of unSubscribe but OK, I moved the ps.Unlock</pre></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: YACOVM - YACOVM@il.ibm.com<br><strong>Uploader</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Created</strong>: 5/16/2017, 9:02:33 AM<br><strong>GitHubMergedRevision</strong>: [f966c8c91f621afb30decc9511186e6d7297de1b](https://github.com/hyperledger-gerrit-archive/fabric/commit/f966c8c91f621afb30decc9511186e6d7297de1b)<br><br><strong>Approver</strong>: Christopher Ferris - chris.ferris@gmail.com<br><strong>Approved</strong>: 5/18/2017, 4:12:39 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/16/2017, 10:30:58 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jonathan Levi (HACERA) - jonathan@hacera.com<br><strong>Approved</strong>: 5/18/2017, 4:17:18 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Jonathan Levi (HACERA)<br><strong>Merged</strong>: 5/18/2017, 4:17:23 PM<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 5/18/2017, 10:02:11 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>