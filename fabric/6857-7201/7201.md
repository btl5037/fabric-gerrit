<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 7201<br><strong>Subject</strong>: [FAB-2778] Msg store update<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/14/2017, 11:06:33 AM<br><strong>LastUpdated</strong>: 4/12/2017, 5:07:38 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-2778] Msg store update

Update message store to automatically expire messages.

Includes new go routine and expiration callback functions

Change-Id: I7c4ec11c7392015e65de5d0553bd1e4c8aca3e5c
Signed-off-by: Gennady Laventman <gennady@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/14/2017, 11:06:33 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/14/2017, 11:08:14 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8609/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/14/2017, 11:08:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2683/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/14/2017, 11:12:56 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/149/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/14/2017, 11:34:36 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8609/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2683/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/149/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/15/2017, 4:23:21 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 4:24:24 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8646/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 4:25:25 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2720/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 4:27:35 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/186/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 5:40:28 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/186/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8646/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2720/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/15/2017, 9:54:49 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/15/2017, 9:55:26 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 9:55:56 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8649/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 9:56:13 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2723/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 9:56:34 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/189/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 9:57:37 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8651/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 9:57:40 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2725/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 9:59:11 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/191/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 10:05:44 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8649/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/189/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2723/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 10:47:32 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/191/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8651/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2725/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/15/2017, 10:49:07 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 10:50:18 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8655/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 10:50:58 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2729/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 10:53:43 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/195/ (3/3)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/15/2017, 11:48:53 AM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 11:50:19 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8658/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 11:50:37 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2732/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 11:54:55 AM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/198/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 12:02:22 PM<br><strong>Message</strong>: <pre>Patch Set 5: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/195/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8655/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2729/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/15/2017, 12:51:25 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/198/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8658/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2732/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/15/2017, 5:03:24 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review-1

(8 comments)

Hi Gennady. 

A couple of comments.

With kinds regards, Yacov.</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/16/2017, 9:07:01 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(7 comments)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/16/2017, 9:07:26 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(1 comment)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/16/2017, 6:30:42 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(1 comment)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/16/2017, 6:38:00 PM<br><strong>Message</strong>: <pre>Patch Set 6:

(2 comments)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/19/2017, 5:50:21 AM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 5:51:36 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8744/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 5:52:17 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2818/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 5:54:38 AM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/284/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 6:08:09 AM<br><strong>Message</strong>: <pre>Patch Set 7: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8744/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2818/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/284/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/19/2017, 6:29:04 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/19/2017, 7:09:17 AM<br><strong>Message</strong>: <pre>Patch Set 7:

(2 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/19/2017, 7:16:59 AM<br><strong>Message</strong>: <pre>Patch Set 6:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/19/2017, 7:56:11 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 7:57:22 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8745/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 7:58:24 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2819/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 8:01:13 AM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/285/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/19/2017, 9:04:05 AM<br><strong>Message</strong>: <pre>Patch Set 8: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2819/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8745/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/285/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/20/2017, 9:49:22 AM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 9:50:51 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8753/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 9:51:42 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2827/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 9:54:58 AM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/293/ (3/3)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/20/2017, 10:24:45 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10: Patch Set 9 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 10:26:20 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8754/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 10:27:11 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2828/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 10:27:48 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/294/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 11:06:35 AM<br><strong>Message</strong>: <pre>Patch Set 9: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8753/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2827/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/293/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/20/2017, 11:41:17 AM<br><strong>Message</strong>: <pre>Patch Set 10: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8754/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2828/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/294/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/20/2017, 7:02:51 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(15 comments)

Hi Gennady.

Some comments below.
Will CR the test tomorrow :)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/20/2017, 7:11:53 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/20/2017, 7:17:20 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 7:57:15 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(13 comments)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 7:59:45 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 8:00:48 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 8:12:06 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 8:13:41 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8762/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 8:14:40 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2836/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 8:18:10 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/302/ (3/3)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 8:56:45 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 8:56:57 AM<br><strong>Message</strong>: <pre>Uploaded patch set 12.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 8:58:21 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8763/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 8:59:38 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2837/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 9:03:00 AM<br><strong>Message</strong>: <pre>Patch Set 12:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/303/ (3/3)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 9:12:07 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 9:17:27 AM<br><strong>Message</strong>: <pre>Patch Set 11: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/302/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8762/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2836/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 9:39:23 AM<br><strong>Message</strong>: <pre>Patch Set 12: Code-Review-1

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 9:44:16 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 9:48:20 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/21/2017, 10:09:59 AM<br><strong>Message</strong>: <pre>Uploaded patch set 13.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 10:12:01 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8768/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 10:12:48 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2842/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 10:18:19 AM<br><strong>Message</strong>: <pre>Patch Set 13:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/308/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 10:48:28 AM<br><strong>Message</strong>: <pre>Patch Set 12: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2837/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/303/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8763/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/21/2017, 11:17:35 AM<br><strong>Message</strong>: <pre>Patch Set 13: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2842/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8768/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/308/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/26/2017, 8:48:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 14: Patch Set 13 was rebased.</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/26/2017, 1:38:58 PM<br><strong>Message</strong>: <pre>Patch Set 14:

reverify</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:07:24 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2955/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:07:26 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8881/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:07:47 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/421/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:19:41 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8888/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:20:55 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2962/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:22:21 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/428/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 12:47:15 AM<br><strong>Message</strong>: <pre>Patch Set 14: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2955/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8881/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/421/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 1:01:58 AM<br><strong>Message</strong>: <pre>Patch Set 14:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8888/ : FAILURE

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2962/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/428/ : FAILURE (skipped)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/27/2017, 3:39:10 AM<br><strong>Message</strong>: <pre>Uploaded patch set 15: Patch Set 14 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 3:40:23 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2966/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 3:40:23 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/432/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 3:40:43 AM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8892/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 4:30:38 AM<br><strong>Message</strong>: <pre>Patch Set 15: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2966/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/432/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8892/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 4:09:32 PM<br><strong>Message</strong>: <pre>Patch Set 15: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8926/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 4:10:08 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2998/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 4:10:09 PM<br><strong>Message</strong>: <pre>Patch Set 15:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/465/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/27/2017, 5:16:28 PM<br><strong>Message</strong>: <pre>Patch Set 15: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/2998/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8926/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/465/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/29/2017, 6:10:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 16.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:12:12 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8965/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:13:04 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/503/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:13:39 AM<br><strong>Message</strong>: <pre>Patch Set 16:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3036/ (3/3)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/29/2017, 6:20:47 AM<br><strong>Message</strong>: <pre>Uploaded patch set 17.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:23:00 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8968/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:23:05 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/506/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:23:23 AM<br><strong>Message</strong>: <pre>Patch Set 17:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3039/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/29/2017, 6:26:35 AM<br><strong>Message</strong>: <pre>Patch Set 17:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/29/2017, 6:44:24 AM<br><strong>Message</strong>: <pre>Uploaded patch set 18.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:46:01 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8971/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:46:38 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/509/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 6:46:57 AM<br><strong>Message</strong>: <pre>Patch Set 18:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3042/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 7:11:08 AM<br><strong>Message</strong>: <pre>Patch Set 16: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3036/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8965/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/503/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 7:42:09 AM<br><strong>Message</strong>: <pre>Patch Set 17: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8968/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/506/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3039/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/29/2017, 8:15:18 AM<br><strong>Message</strong>: <pre>Patch Set 18: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/509/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/8971/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3042/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 3/30/2017, 3:56:48 AM<br><strong>Message</strong>: <pre>Uploaded patch set 19: Patch Set 18 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/30/2017, 3:56:56 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9010/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/30/2017, 4:01:55 AM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3081/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/30/2017, 5:10:56 AM<br><strong>Message</strong>: <pre>Patch Set 19: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/548/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9010/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3081/ : SUCCESS</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 4/2/2017, 10:03:43 AM<br><strong>Message</strong>: <pre>Uploaded patch set 20: Patch Set 19 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/2/2017, 10:05:36 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9132/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/2/2017, 10:05:52 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/669/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/2/2017, 10:06:06 AM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3202/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/2/2017, 10:59:37 AM<br><strong>Message</strong>: <pre>Patch Set 20: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/669/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9132/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3202/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 4/5/2017, 2:34:02 AM<br><strong>Message</strong>: <pre>Patch Set 20: Code-Review+2</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 4/5/2017, 8:58:13 AM<br><strong>Message</strong>: <pre>Uploaded patch set 21: Patch Set 20 was rebased.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/5/2017, 9:01:03 AM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9234/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/5/2017, 9:01:08 AM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/771/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/5/2017, 9:01:19 AM<br><strong>Message</strong>: <pre>Patch Set 21:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3304/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/5/2017, 9:58:42 AM<br><strong>Message</strong>: <pre>Patch Set 21: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/771/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9234/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3304/ : SUCCESS</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 4/5/2017, 10:00:50 AM<br><strong>Message</strong>: <pre>Patch Set 21: Code-Review+2</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/8/2017, 1:31:51 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/8/2017, 1:32:53 PM<br><strong>Message</strong>: <pre>Patch Set 21:

About the previous comment.. if this is already addressed in any comments just point me to that please...thanks!</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 4/8/2017, 3:12:17 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/8/2017, 3:21:14 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 4/8/2017, 3:33:23 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/8/2017, 3:42:48 PM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 4/9/2017, 3:46:43 AM<br><strong>Message</strong>: <pre>Patch Set 21:

(1 comment)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 4/9/2017, 4:09:02 PM<br><strong>Message</strong>: <pre>Uploaded patch set 22.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 4:10:10 PM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9365/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 4:11:29 PM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/902/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 4:12:01 PM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3435/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 4/9/2017, 4:17:57 PM<br><strong>Message</strong>: <pre>Patch Set 22: Code-Review-1

(1 comment)

Hi Gennady.

Small and very easy to fix comment below :)</pre><strong>Reviewer</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Reviewed</strong>: 4/9/2017, 4:33:56 PM<br><strong>Message</strong>: <pre>Uploaded patch set 23.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 4:35:33 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9369/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 4:36:12 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/906/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 4:36:45 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3439/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 4/9/2017, 4:50:54 PM<br><strong>Message</strong>: <pre>Patch Set 23: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 5:17:40 PM<br><strong>Message</strong>: <pre>Patch Set 22: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9365/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/902/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3435/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/9/2017, 5:47:54 PM<br><strong>Message</strong>: <pre>Patch Set 23: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/9369/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/906/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/3439/ : SUCCESS</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 4/10/2017, 5:30:49 AM<br><strong>Message</strong>: <pre>Patch Set 23: Code-Review+1</pre><strong>Reviewer</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Reviewed</strong>: 4/12/2017, 3:24:23 PM<br><strong>Message</strong>: <pre>Patch Set 23: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 3:24:25 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Binh Nguyen</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 3:26:06 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/153/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 3:26:55 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1466/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 3:27:05 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/469/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/12/2017, 5:07:38 PM<br><strong>Message</strong>: <pre>Patch Set 23:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/153/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/1466/ : SUCCESS

https://jenkins.hyperledger.org/job/fabric-merge-behave-x86_64/469/ : SUCCESS</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/14/2017, 11:06:33 AM<br><strong>UnmergedRevision</strong>: [72875c25d7111c6eb3c31159c867b24f6339b0ad](https://github.com/hyperledger-gerrit-archive/fabric/commit/72875c25d7111c6eb3c31159c867b24f6339b0ad)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/14/2017, 11:34:36 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/15/2017, 4:23:21 AM<br><strong>UnmergedRevision</strong>: [65f4c09a041d3bec791a9733e8abbfeeca397ada](https://github.com/hyperledger-gerrit-archive/fabric/commit/65f4c09a041d3bec791a9733e8abbfeeca397ada)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2017, 5:40:28 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/15/2017, 9:54:49 AM<br><strong>UnmergedRevision</strong>: [ecae0de75e4c8112dacce0451de9778925372b4e](https://github.com/hyperledger-gerrit-archive/fabric/commit/ecae0de75e4c8112dacce0451de9778925372b4e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2017, 10:05:44 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/15/2017, 9:55:26 AM<br><strong>UnmergedRevision</strong>: [59a98298f95d1fa8f15dd43ed4c0848ffc15961f](https://github.com/hyperledger-gerrit-archive/fabric/commit/59a98298f95d1fa8f15dd43ed4c0848ffc15961f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2017, 10:47:32 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/15/2017, 10:49:07 AM<br><strong>UnmergedRevision</strong>: [57fc66c084881c9c1c93b8d9e62f9418a6360f6a](https://github.com/hyperledger-gerrit-archive/fabric/commit/57fc66c084881c9c1c93b8d9e62f9418a6360f6a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2017, 12:02:22 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/15/2017, 11:48:53 AM<br><strong>UnmergedRevision</strong>: [808d9e7e61d288d7ab223ba5e6adeb25df3e90c6](https://github.com/hyperledger-gerrit-archive/fabric/commit/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/15/2017, 12:51:25 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 3/15/2017, 5:03:24 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L27](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L27)<br><strong>Comment</strong>: <pre>this is not a good name for what it is.
The expiration period is a function of TTL, this is an interval that defines the frequency of expiration scanning.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L27](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L27)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L48)<br><strong>Comment</strong>: <pre>Is is possible to reuse code and not have code duplication in the 2 constructor methods?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L48)<br><strong>Comment</strong>: <pre>This constructor is pretty long.
Perhaps make a configuration parameter?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L48)<br><strong>Comment</strong>: <pre>Don't think it worth it...</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L48](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L48)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L98)<br><strong>Comment</strong>: <pre>Since most of the code which treats expired messages almost the same, therefore I think that instead of having additional slice to keep expired messages it's better to add field to the msg struct:


type msg struct {
   //...
   expired bool
}</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L98)<br><strong>Comment</strong>: <pre>I agree.
Gennady - do you see any technical issue with this suggestion?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L98)<br><strong>Comment</strong>: <pre>Don't think so, but it contradict Artem comment to line 204 - once they in separate lists, I can try to play with locks, but if all messages in one list, I will take lock during all check...</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L98](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L98)<br><strong>Comment</strong>: <pre>He suggested an optimization to a specific implementation.
Once the implementation isn't what he suggested, his comment no longer applies :)</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L101)<br><strong>Comment</strong>: <pre>why is it important that it is an expire lock?
I think that mentioning "external lock" is enough.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L101)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L124)<br><strong>Comment</strong>: <pre>ok, but what if s.pol(message, m.data) returns common.MessageInvalidates ? 

Do you not need to bring the message out of the s.expiredMessages?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L124)<br><strong>Comment</strong>: <pre>This is something to discuss...</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L124](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L124)<br><strong>Comment</strong>: <pre>I think what Yacov tried to suggest is the optimization, where if you have new message which invalidates one of the messages in the expired messages list you can remove it.

This also will reduce complexity from later where you clean up expired messages.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L171](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L171)<br><strong>Comment</strong>: <pre>Instead of checking for nil, you can use a noop function and invoke it anyway. Reduces code lines :)</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L171](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L171)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L184](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L184)<br><strong>Comment</strong>: <pre>forgot to remove comment</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L184](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L184)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L199](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L199)<br><strong>Comment</strong>: <pre>forgot to remove comment</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L199](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L199)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L204](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L204)<br><strong>Comment</strong>: <pre>I do not think that holding a lock on messages while cleaning expired messages is good, since this might impact the performance.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L204](https://github.com/hyperledger-gerrit-archive/fabric/blob/808d9e7e61d288d7ab223ba5e6adeb25df3e90c6/gossip/gossip/msgstore/msgs.go#L204)<br><strong>Comment</strong>: <pre>External lock - I will think about the way to release it, internal lock should be hold</pre></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/19/2017, 5:50:21 AM<br><strong>UnmergedRevision</strong>: [8b7ec1389d3930680cfa21f7d04b47adb91a4a92](https://github.com/hyperledger-gerrit-archive/fabric/commit/8b7ec1389d3930680cfa21f7d04b47adb91a4a92)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/19/2017, 6:08:09 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/19/2017, 7:56:11 AM<br><strong>UnmergedRevision</strong>: [eb7778f3af18e142709c79b03e11097178b39f63](https://github.com/hyperledger-gerrit-archive/fabric/commit/eb7778f3af18e142709c79b03e11097178b39f63)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/19/2017, 9:04:05 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/20/2017, 9:49:22 AM<br><strong>UnmergedRevision</strong>: [7a79a6ccd184ebbc129b36302ded2ce978629e08](https://github.com/hyperledger-gerrit-archive/fabric/commit/7a79a6ccd184ebbc129b36302ded2ce978629e08)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/20/2017, 11:06:35 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/20/2017, 10:24:45 AM<br><strong>UnmergedRevision</strong>: [2b50879f6ef94063d288771de83ce988b2b4f940](https://github.com/hyperledger-gerrit-archive/fabric/commit/2b50879f6ef94063d288771de83ce988b2b4f940)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/20/2017, 11:41:17 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L28)<br><strong>Comment</strong>: <pre>IMO this shouldn't be hardcoded but derived from the TTL</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L28)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L30)<br><strong>Comment</strong>: <pre>why are you using this module name? Why not specify a name with more context?
like- gossip/msgstore</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L30)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L40)<br><strong>Comment</strong>: <pre>Nice!</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L44](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L44)<br><strong>Comment</strong>: <pre>supports</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L46](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L46)<br><strong>Comment</strong>: <pre>this constructor method is pretty long</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L71)<br><strong>Comment</strong>: <pre>Just a tip- you don't have to make this a pointer type. If this is a value type you don't even have to initialize</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L71](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L71)<br><strong>Comment</strong>: <pre>This is original code... But I fixed it</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L81)<br><strong>Comment</strong>: <pre>same thing for this: https://play.golang.org/p/wx7kNwCsy-</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L81](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L81)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L114](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L114)<br><strong>Comment</strong>: <pre>please remove this</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L114](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L114)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L136](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L136)<br><strong>Comment</strong>: <pre>I don't think this is important enough to log.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L136](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L136)<br><strong>Comment</strong>: <pre>Agree</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L143](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L143)<br><strong>Comment</strong>: <pre>invalidated</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L143](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L143)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L146)<br><strong>Comment</strong>: <pre>I don't think we should log these. It's way too data to log.
Think that if we have this msgStore for blocks, and a block comes and invalidates all the messages- we'll have lots of logging :(</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L146)<br><strong>Comment</strong>: <pre>invalidated</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L146)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L146](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L146)<br><strong>Comment</strong>: <pre>Removed all logging</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L169)<br><strong>Comment</strong>: <pre>Can we do this in O(1)? 
We can track of the amount of expired messages, right?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L169)<br><strong>Comment</strong>: <pre>does it worth it?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L169)<br><strong>Comment</strong>: <pre>Genna, is that hard work to do? And IMO, this is worth it.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L169)<br><strong>Comment</strong>: <pre>No, it is not. But it will make code little less readable, IMO</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L169)<br><strong>Comment</strong>: <pre>Readability is an function of how you decide to implement it and I'm certain you can do it readable, at any case O(1) versus O(n), I'd sacrifice readability in favor of performance.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L169](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L169)<br><strong>Comment</strong>: <pre>Previous implementation of Size was O(1) and of Get() was faster - no need to scan all messages, including expired.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L170](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L170)<br><strong>Comment</strong>: <pre>I don't think we need this logging here. This is nothing too special to log...</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L170](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L170)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L176)<br><strong>Comment</strong>: <pre>if you want you can use "var res []interface{}" - it's shorter.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L176](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L176)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L228](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L228)<br><strong>Comment</strong>: <pre>why is this "ai"?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L228](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs.go#L228)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs_test.go#L178)<br><strong>Comment</strong>: <pre>Perhaps it's possible to poll and check Size() until it's 0, and then you know when it's invalidated?</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs_test.go#L178](https://github.com/hyperledger-gerrit-archive/fabric/blob/2b50879f6ef94063d288771de83ce988b2b4f940/gossip/gossip/msgstore/msgs_test.go#L178)<br><strong>Comment</strong>: <pre>I put it just to check if I didn't broke Add method, no expiration happen after 2 seconds</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/21/2017, 8:12:06 AM<br><strong>UnmergedRevision</strong>: [ed23bbc7e6786b19b0ac51c096ba0ea4c6fc8b55](https://github.com/hyperledger-gerrit-archive/fabric/commit/ed23bbc7e6786b19b0ac51c096ba0ea4c6fc8b55)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/21/2017, 9:17:27 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/21/2017, 8:56:57 AM<br><strong>UnmergedRevision</strong>: [ed8ffe422a2daea1ed3e0fa690237b4b50a5f82b](https://github.com/hyperledger-gerrit-archive/fabric/commit/ed8ffe422a2daea1ed3e0fa690237b4b50a5f82b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/21/2017, 10:48:28 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 3/21/2017, 9:39:23 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L152](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed8ffe422a2daea1ed3e0fa690237b4b50a5f82b/gossip/gossip/msgstore/msgs.go#L152)<br><strong>Comment</strong>: <pre>This isn't memory coherent, this requires a read lock.</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L152](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed8ffe422a2daea1ed3e0fa690237b4b50a5f82b/gossip/gossip/msgstore/msgs.go#L152)<br><strong>Comment</strong>: <pre>Sorry, my mistake</pre></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/21/2017, 10:09:59 AM<br><strong>UnmergedRevision</strong>: [bd5ec16c36e9d0103daec0a6755f448850919e6f](https://github.com/hyperledger-gerrit-archive/fabric/commit/bd5ec16c36e9d0103daec0a6755f448850919e6f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/21/2017, 11:17:35 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/26/2017, 8:48:10 AM<br><strong>UnmergedRevision</strong>: [1c1e7d4c2f6670c896e0679634d17300ca388b0b](https://github.com/hyperledger-gerrit-archive/fabric/commit/1c1e7d4c2f6670c896e0679634d17300ca388b0b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/27/2017, 12:47:15 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/27/2017, 3:39:10 AM<br><strong>UnmergedRevision</strong>: [a6128990f82bd3df545ecac9168707393c497882](https://github.com/hyperledger-gerrit-archive/fabric/commit/a6128990f82bd3df545ecac9168707393c497882)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/27/2017, 5:16:28 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/29/2017, 6:10:39 AM<br><strong>UnmergedRevision</strong>: [58b1b86dfe03a5fb48ddc6b14f6a3c06dacc415d](https://github.com/hyperledger-gerrit-archive/fabric/commit/58b1b86dfe03a5fb48ddc6b14f6a3c06dacc415d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/29/2017, 7:11:08 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/29/2017, 6:20:47 AM<br><strong>UnmergedRevision</strong>: [dccc323192b7fae131b4c6a5cdbc861ab7efa3b3](https://github.com/hyperledger-gerrit-archive/fabric/commit/dccc323192b7fae131b4c6a5cdbc861ab7efa3b3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/29/2017, 7:42:09 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L156](https://github.com/hyperledger-gerrit-archive/fabric/blob/dccc323192b7fae131b4c6a5cdbc861ab7efa3b3/gossip/gossip/msgstore/msgs.go#L156)<br><strong>Comment</strong>: <pre>can this be a read lock?</pre></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/29/2017, 6:44:24 AM<br><strong>UnmergedRevision</strong>: [4a957d74427923131ca86c918cfc7048addeb9e5](https://github.com/hyperledger-gerrit-archive/fabric/commit/4a957d74427923131ca86c918cfc7048addeb9e5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/29/2017, 8:15:18 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 3/30/2017, 3:56:48 AM<br><strong>UnmergedRevision</strong>: [8b18ec4bfbff75313b0489afb0bdfc902a27dc2d](https://github.com/hyperledger-gerrit-archive/fabric/commit/8b18ec4bfbff75313b0489afb0bdfc902a27dc2d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/30/2017, 5:10:56 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 4/2/2017, 10:03:43 AM<br><strong>UnmergedRevision</strong>: [f8324de6a101f1acf1b9b837e64f46fbfffdfeaa](https://github.com/hyperledger-gerrit-archive/fabric/commit/f8324de6a101f1acf1b9b837e64f46fbfffdfeaa)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/2/2017, 10:59:37 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 4/5/2017, 2:34:02 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 4/5/2017, 8:58:13 AM<br><strong>UnmergedRevision</strong>: [ed68872cf734e2d3eaf010b4341904e3f94e4d43](https://github.com/hyperledger-gerrit-archive/fabric/commit/ed68872cf734e2d3eaf010b4341904e3f94e4d43)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/5/2017, 9:58:42 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 4/5/2017, 10:00:50 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L190](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed68872cf734e2d3eaf010b4341904e3f94e4d43/gossip/gossip/msgstore/msgs.go#L190)<br><strong>Comment</strong>: <pre>What additional protection does this s.externalLock give that escapes s.lock ?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L190](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed68872cf734e2d3eaf010b4341904e3f94e4d43/gossip/gossip/msgstore/msgs.go#L190)<br><strong>Comment</strong>: <pre>Notice the s.expireMsgCallback on line 201.
This externalLock, and its sister callback, s.externalUnlock are given at construction time.
The idea is that you might want to make messages expire from this module and also delete:
entities that are connected to these messages stored here, from an enclosing module that uses this module; in at atomic manner.

Therefore- you first lock the data structures of the external module (that uses this msgstore), then lock yourself, and while iterating, you invoke the callback at line 201 to remove the data from the external module.

One example of such a case is the membership module (gossip/discovery): We have data structures that hold entities such as a last AliveMessage from a peer, and you want them to expire "at the same time" as the messages here expire, in order for the flow of the program of the membership module to think that the messages here and the related messages in the membership module (that uses this module) never existed- after expiration here.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L190](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed68872cf734e2d3eaf010b4341904e3f94e4d43/gossip/gossip/msgstore/msgs.go#L190)<br><strong>Comment</strong>: <pre>Would you not want the lock just around 201 ?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L190](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed68872cf734e2d3eaf010b4341904e3f94e4d43/gossip/gossip/msgstore/msgs.go#L190)<br><strong>Comment</strong>: <pre>Denote this module M for Msgs and the module that uses this- E (external).
So you might have:
this goroutine (expireMessages) does:
M.lock
E.lock, E.unlock, E.lock, E.unlock...
M.unlock

If you have from this goroutine:
0) M.lock (line 191)

and then from another goroutine that is in E:
1) E.lock
2) call to an exported method in M that does: M.lock

and then from this goroutine:
3) attempt to call E.lock

You are deadlocked.

The only solution is to lock E first, and then M.
This way- all other methods in E that call a method 'm' in this module (M), do not lock E and that's ok.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L190](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed68872cf734e2d3eaf010b4341904e3f94e4d43/gossip/gossip/msgstore/msgs.go#L190)<br><strong>Comment</strong>: <pre>Ok. Consider the case no expiration happens. Then you'd externalLock the method unnecessarily for the entire duration. If most of the times you are NOT going to call expireMsgCallback, this could be inefficient (esp. if  number of messages is large). There should be other ways to organize (e.g.,  collect all msgs to be deleted and call the expireMsgCallback outside).</pre><strong>Commenter</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L190](https://github.com/hyperledger-gerrit-archive/fabric/blob/ed68872cf734e2d3eaf010b4341904e3f94e4d43/gossip/gossip/msgstore/msgs.go#L190)<br><strong>Comment</strong>: <pre>Got it. Will try to implement another way to lock expired messages.</pre></blockquote><h3>PatchSet Number: 22</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 4/9/2017, 4:09:02 PM<br><strong>UnmergedRevision</strong>: [7753135b2fa771f4ea2de6b69635dd254f2a8a97](https://github.com/hyperledger-gerrit-archive/fabric/commit/7753135b2fa771f4ea2de6b69635dd254f2a8a97)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/9/2017, 5:17:40 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 4/9/2017, 4:17:57 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [gossip/gossip/msgstore/msgs.go#L191](https://github.com/hyperledger-gerrit-archive/fabric/blob/7753135b2fa771f4ea2de6b69635dd254f2a8a97/gossip/gossip/msgstore/msgs.go#L191)<br><strong>Comment</strong>: <pre>you have the expirationRoutine, why don't you do the if there instead? this is useless indentation.</pre></blockquote><h3>PatchSet Number: 23</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Uploader</strong>: Gennady Laventman - gennady@il.ibm.com<br><strong>Created</strong>: 4/9/2017, 4:33:56 PM<br><strong>GitHubMergedRevision</strong>: [aa841354af027b3a92eb7b2dcdcc287641909496](https://github.com/hyperledger-gerrit-archive/fabric/commit/aa841354af027b3a92eb7b2dcdcc287641909496)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/9/2017, 5:47:54 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Binh Nguyen - binh1010010110@gmail.com<br><strong>Approved</strong>: 4/12/2017, 3:24:23 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Binh Nguyen<br><strong>Merged</strong>: 4/12/2017, 3:24:25 PM<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 4/9/2017, 4:50:54 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Approved</strong>: 4/10/2017, 5:30:49 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>