<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 29132<br><strong>Subject</strong>: Dependencies for new validation/commit path<br><strong>Status</strong>: ABANDONED<br><strong>Owner</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 2/4/2019, 3:39:47 PM<br><strong>LastUpdated</strong>: 8/8/2019, 11:31:12 PM<br><strong>CommitMessage</strong>:<br><pre>Dependencies for new validation/commit path

FAB-16043 #done

Change-Id: I53a16190f9f03f6bf2457fa36a0d5303fbaf170b
Signed-off-by: manish <manish.sethi@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/4/2019, 3:39:47 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/4/2019, 3:41:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Commit message was updated.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 3:44:49 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9744/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 3:46:21 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 3:46:22 PM<br><strong>Message</strong>: <pre>Patch Set 1:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 3:47:06 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9744/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9744</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/4/2019, 4:20:54 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 4:26:04 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9746/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 4:27:33 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 4:27:34 PM<br><strong>Message</strong>: <pre>Patch Set 3:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/4/2019, 4:28:36 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9746/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9746</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 2/7/2019, 10:37:28 AM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/11/2019, 11:32:19 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 2/11/2019, 11:35:18 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 11:35:31 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9981/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 11:36:04 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 11:36:05 AM<br><strong>Message</strong>: <pre>Patch Set 4:

WIP - No Build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 2/11/2019, 11:36:53 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9981/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9981</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 6/3/2019, 4:15:54 PM<br><strong>Message</strong>: <pre>Abandoned

no longer relevant</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/21/2019, 9:57:55 PM<br><strong>Message</strong>: <pre>Restored

Starting work on master for validation refactoring for 2.0</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/21/2019, 9:58:13 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/21/2019, 9:59:52 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15570/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/21/2019, 10:00:21 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/21/2019, 10:04:53 PM<br><strong>Message</strong>: <pre>Patch Set 5: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/21/2019, 10:05:38 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15570/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15570</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 7/24/2019, 11:41:33 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(5 comments)

Added some comments about changing some of the name casing from Pvtdata to PvtData to maintain consistency with rest of code/conventions</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 7/24/2019, 2:04:11 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(5 comments)

Talked to Manish and we decided to standardize on the naming conventions in https://jira.hyperledger.org/browse/FAB-16059</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/30/2019, 8:07:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:11:56 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15962/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:12:27 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:19:34 PM<br><strong>Message</strong>: <pre>Patch Set 6: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:20:19 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15962/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15962</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:22:09 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10729/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:22:34 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:22:44 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14142/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:23:19 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Starting unit tests</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/30/2019, 8:30:32 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/30/2019, 8:32:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:32:29 PM<br><strong>Message</strong>: <pre>Patch Set 7:

No Builds Executed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:38:51 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15963/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:39:18 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:44:02 PM<br><strong>Message</strong>: <pre>Patch Set 6: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:46:17 PM<br><strong>Message</strong>: <pre>Patch Set 8: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:47:08 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15963/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15963</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:47:13 PM<br><strong>Message</strong>: <pre>Patch Set 6: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10729/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/10729

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14142/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14142</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:47:26 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10730/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:47:55 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:51:36 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14143/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 8:52:20 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 9:21:10 PM<br><strong>Message</strong>: <pre>Patch Set 8: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 9:58:45 PM<br><strong>Message</strong>: <pre>Patch Set 8: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/30/2019, 9:59:34 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10730/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/10730

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14143/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14143</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/31/2019, 2:02:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 9.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:04:48 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15987/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:05:24 PM<br><strong>Message</strong>: <pre>Patch Set 9:

Starting verify build</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 7/31/2019, 2:05:25 PM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:06:17 PM<br><strong>Message</strong>: <pre>Patch Set 9: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15987/ : ABORTED

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15987</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:09:27 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15988/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:10:00 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:17:33 PM<br><strong>Message</strong>: <pre>Patch Set 10: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:18:21 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/15988/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/15988</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:19:55 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10749/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:20:31 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:20:38 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14165/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:21:09 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 2:44:40 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 3:27:14 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 7/31/2019, 3:28:00 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10749/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/10749

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/14165/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/14165</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/5/2019, 11:05:44 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(9 comments)

Although I still generally support the overall structure and phases for the validation/commit, I think there are some API/structural things that can/should be improved.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/6/2019, 12:26:48 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(9 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 8/6/2019, 10:46:55 AM<br><strong>Message</strong>: <pre>Patch Set 10:

(7 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/7/2019, 9:52:07 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(7 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/8/2019, 8:36:46 AM<br><strong>Message</strong>: <pre>Patch Set 11: Patch Set 10 was rebased</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/8/2019, 8:37:02 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2019, 8:41:09 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10937/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2019, 8:41:37 AM<br><strong>Message</strong>: <pre>Patch Set 11: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Danny Cao - dcao@us.ibm.com<br><strong>Reviewed</strong>: 8/8/2019, 9:52:19 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2019, 9:53:05 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 8/8/2019, 9:53:54 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/10937/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/10937</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/8/2019, 10:54:45 AM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/8/2019, 12:32:43 PM<br><strong>Message</strong>: <pre>Patch Set 10:

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 8/8/2019, 1:03:35 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 8/8/2019, 11:31:12 PM<br><strong>Message</strong>: <pre>Abandoned

Submitted a new CR here - https://gerrit.hyperledger.org/r/#/c/fabric/+/32804/</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 2/4/2019, 3:39:47 PM<br><strong>UnmergedRevision</strong>: [c19e23ccc5b1546bcc77b896b001bf7efb3aa96c](https://github.com/hyperledger-gerrit-archive/fabric/commit/c19e23ccc5b1546bcc77b896b001bf7efb3aa96c)<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 2/4/2019, 3:41:42 PM<br><strong>UnmergedRevision</strong>: [689a77d51c0d51bad6ba7c90ecd37daf61ff2f09](https://github.com/hyperledger-gerrit-archive/fabric/commit/689a77d51c0d51bad6ba7c90ecd37daf61ff2f09)<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 2/4/2019, 4:20:54 PM<br><strong>UnmergedRevision</strong>: [a225745a5886a43c26722d5da128ff1d88a93ae2](https://github.com/hyperledger-gerrit-archive/fabric/commit/a225745a5886a43c26722d5da128ff1d88a93ae2)<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 2/11/2019, 11:32:19 AM<br><strong>UnmergedRevision</strong>: [ec7b6cae8c0e79274a502a5ca4151bc364d14a4a](https://github.com/hyperledger-gerrit-archive/fabric/commit/ec7b6cae8c0e79274a502a5ca4151bc364d14a4a)<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 7/21/2019, 9:58:13 PM<br><strong>UnmergedRevision</strong>: [6f47148d8edeef683aa095fa8b86981ff099266e](https://github.com/hyperledger-gerrit-archive/fabric/commit/6f47148d8edeef683aa095fa8b86981ff099266e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/21/2019, 10:04:53 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L704](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L704)<br><strong>Comment</strong>: <pre>RetrievePrivateData ... txPvtDataInfo []*TxPvtDataInfo) (BlockPvtData, error)</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L704](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L704)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L708](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L708)<br><strong>Comment</strong>: <pre>TxPvtDataInfo (and comment)</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L708](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L708)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L710](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L710)<br><strong>Comment</strong>: <pre>CollectionPvtDataInfo []*CollectionPvtDataInfo</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L710](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L710)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L712](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L712)<br><strong>Comment</strong>: <pre>CollectionPvtDataInfo</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L712](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L712)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L717](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L717)<br><strong>Comment</strong>: <pre>BlockPvtData</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L717](https://github.com/hyperledger-gerrit-archive/fabric/blob/6f47148d8edeef683aa095fa8b86981ff099266e/core/ledger/ledger_interface.go#L717)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 7/30/2019, 8:07:42 PM<br><strong>UnmergedRevision</strong>: [d596b15810c14178ea867503ea7cae44612720d3](https://github.com/hyperledger-gerrit-archive/fabric/commit/d596b15810c14178ea867503ea7cae44612720d3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 8:19:34 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 8:19:34 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 8:44:02 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 8:47:13 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 7/30/2019, 8:30:32 PM<br><strong>UnmergedRevision</strong>: [a19fdb9238430560461486074b564c39a669aa9c](https://github.com/hyperledger-gerrit-archive/fabric/commit/a19fdb9238430560461486074b564c39a669aa9c)<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 7/30/2019, 8:32:28 PM<br><strong>UnmergedRevision</strong>: [f0e06b775473846f54522aa813f11423dfb4efb3](https://github.com/hyperledger-gerrit-archive/fabric/commit/f0e06b775473846f54522aa813f11423dfb4efb3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 8:46:17 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 8:46:17 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 9:58:45 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/30/2019, 9:21:10 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 7/31/2019, 2:02:03 PM<br><strong>UnmergedRevision</strong>: [2bab50437e618574ca7ee8e4fc5db64f7f746e57](https://github.com/hyperledger-gerrit-archive/fabric/commit/2bab50437e618574ca7ee8e4fc5db64f7f746e57)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:06:17 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Created</strong>: 7/31/2019, 2:05:25 PM<br><strong>UnmergedRevision</strong>: [af164fa9910a4711b6832c9f744bd9aa3b2ec8d5](https://github.com/hyperledger-gerrit-archive/fabric/commit/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:17:33 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:17:33 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 3:27:14 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:44:40 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>Let's create a new package for the txprocessor types.  If we intend in the long term for the tx-processor to be an externally supported stable API for other consumers, we need to not pull in the entire core/ledger API.

If this creates import cycles (which hopefully it does not), we should resolve them.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>Do you mean to say that you prefer to move these interfaces to a new package or you meant that a new package only for the implementations? If you meant that we should move these interfaces to a new package, Ale also wanted that and I personally won't care much either way.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>I mean that we should move these interfaces to a new package.  It should be possible to write a tx-processor outside of the fabric tree, and we want to minimize the unwanted fabric dependencies.  Obviously there are things like the channel config which are getting pulled in, but, pulling in the rest of the ledger interfaces is something easy for us to prevent by sticking this in its own package.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>Yes, moving the interface "TxProcessor" to a separate package makes sense as there are going to be multiple implementations and a clear separate package would be cleaner (does core/tx sound a good name?). However, the interface TxProcessorFactory would perhaps remain here because there is going to be a single implementation and part of core fabric for this and better to define here where it would be consumed.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>Moving this to a separate package makes sense. Right dependency direction. How about "core/txprocessor" ?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>In the call we decided to call the package core/tx so that the interface and structs in this package would be ProcessorFactory/Processor.

The problem with name txprocessor seems is what to name the interface Processor without stutter.

I'll push the CR based on this today and then we can have a look.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L649](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L649)<br><strong>Comment</strong>: <pre>Sounds good</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L651](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L651)<br><strong>Comment</strong>: <pre>Why does a txprocessor take in a header type? It seems like this could simply take the `Initialize` parameters below and act as a standard constructor.  The tx type is after all embedded in the tx.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L651](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L651)<br><strong>Comment</strong>: <pre>I was also in a dilemma over this and the main reason I chose this over the other was that the code that unmarshals initial layer of envelop to the level of getting the common.HeaderType has to be same so as to mark the exact same invalidation code (if could not extract the Header). This did not sound like leaving this small code to an interface kind of thing if we want that initial parsing behavior fixed for the fabric.

The alternate could be to make the "TxProcessorFactory" a struct instead of interface and code that performs the initial parsing resides in that struct so that it does not give a wrong impression that another impl of this interface can do this differently. And only flexibility is to modify the code that constructs new TxProcesor. Also, the return of this function would be changed to ("TxProcessor", *TxInvalidErr). Does this sound fine?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L651](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L651)<br><strong>Comment</strong>: <pre>I don't entirely follow this.  We're going to need some sort of structure somewhere, which holds a set of transaction processor factories, that then routes envelopes to the proper tx processor factory to create the tx processor.

The TxProcessorFactory is not choosing the tx processor, that's already been done in the above layer, so what's the point in passing in the header type?  Basically it seems like the code will look something like this:

 txProcessorFactory, err := TxProcessors(applicationCapability, txType)
 txProcessor := txProcessorFactory.NewTxProcessor(txType)
 failure, rwSet, err := txProcessor.Initialize(env)

when we could instead simply do:

 txProcessorFactory, err := TxProcessors(applicationCapability, txType)
 txProcessor, failure, rwSet, err := txProcessorFactory.NewTxProcessor(env)

Basically, I see no reason these two calls would not be always made back to back, and I don't understand the purpose of splitting them.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L651](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L651)<br><strong>Comment</strong>: <pre>I see now the way you are looking at this. I am looking at this differently which is - there is a single "TxProcessorFactory" that instantiates different types of TxProcessors.

So, if we pass the "env" to the factory this would indeed be just a single call instead of two lines above - i.e.,

txProcessor, failure, rwSet, err := txProcessorFactory.NewTxProcessor(env).
 
Having this in mind, my previous comment may make a better sense.

Is there a reason to have as many factories type as many processors? Typical factory pattern is where a single factory implementation produces different object types.</pre><strong>Commenter</strong>: Danny Cao - dcao@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L651](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L651)<br><strong>Comment</strong>: <pre>I agree with this. It makes more sense as Manish said to have a single TxProcessorFactory create different types of TxProcessors otherwise there would be no need to even have a factory and the caller could just create a NewTxProcessor of the desired type.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L696](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L696)<br><strong>Comment</strong>: <pre>As mentioned above, I think this can be rolled into the factory.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L696](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L696)<br><strong>Comment</strong>: <pre>Same as above</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L697](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L697)<br><strong>Comment</strong>: <pre>Since ReadHint is optional (though admittedly important for performance) it should be in its own interface to be optionally implemented by the processor.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L697](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L697)<br><strong>Comment</strong>: <pre>I believe that this would encourage the implementation to pay attention to this if it's part of this interface. Off course, the implementation can always return nil - albeit, knowingly as opposed to miss this because it's just mentioned in the documentation.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L697](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L697)<br><strong>Comment</strong>: <pre>Returning empty implementations for an interface is not the idiomatic golang way to do things.  If an interface is optional, then it's signaled as such by being split out and the caller can type assert to see if its satisfied.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L697](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L697)<br><strong>Comment</strong>: <pre>I can go this way if you feel strongly about this.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L698](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L698)<br><strong>Comment</strong>: <pre>For this, and the other *TxInvalidErr types, why can't we hang this off of the err response? It's fairly standard and idiomatic in go to check error types to make processing decisions and wouldn't tie our hands so firmly from an API perspective.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L698](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L698)<br><strong>Comment</strong>: <pre>Again, I personally prefer the API way as opposed to documentation way. Further, logically, this is not an error. This is one of the perfect outcomes that the transaction is found to be invalid (similar to as it found valid). To me, error sounds like you could not complete the processing because of some error during the processing. If the name "TxInvalidErr" hinders conveying that notion, we can change this to something more meaningful.

In other words, I wanted the clear semantics whether the processor was able to complete the validation process (finding the transaction as invalid is one successful outcome) or not.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L698](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L698)<br><strong>Comment</strong>: <pre>Just trying to make our interfaces here more idiomatic go.  When you read from a stream, you get back the data and an error.  If the stream ends normally, you get back an io.EOF error.  Yes, it's an expected condition, but they don't set it as a separate parameter.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L698](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L698)<br><strong>Comment</strong>: <pre>Sure, as above, not a big deal if you feel strongly about this.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L699](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L699)<br><strong>Comment</strong>: <pre>Passing in an interface as a parameter to an externally exposed API is problematic, we should look at turning this into a structure, even if this ends up being a simple proxy to an underlying interface.  For external APIs, adding or removing methods to an interface is breaking, while adding methods to a struct is not.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L699](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L699)<br><strong>Comment</strong>: <pre>We can certainly change this into a struct but as you said that would mostly be a proxy on the underlying interface. Does this kind of struct adds any value since, for local testing, an impl would then need to rely upon mocks for the underlying interface or you have some other scheme in mind?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L699](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L699)<br><strong>Comment</strong>: <pre>You could use a mock for the underlying impl, or you could use a real.  The big benefit here is that it allows you to add more function to the parameter without breaking old consumers.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L699](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L699)<br><strong>Comment</strong>: <pre>I am not sure if I understand this completely. I need to understand how adding a function will break the existing TxProcessors?

Real would not be usable for testing as it would not have any fields but rather this would just be calling an interface underneath. And if someone uses mock for the underlying interface, won't he get into the same problem of regenerating mocks.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L704](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L704)<br><strong>Comment</strong>: <pre>I realize we are just surfacing the existing QueryExecutor methods here, but, as this is to be new external API, let's fix the names and make them more consistent.

For instance, why do we use DataKeys for read hints, but we get state as a pair of strings?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L704](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L704)<br><strong>Comment</strong>: <pre>Yes, your observation is correct. These functions are more in tone of QueryExecutor and hence the familiar function names/signatures.

The reason for using DataKeys for the read hints is to be able to use them as a map key in the struct ReadHint.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L704](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L704)<br><strong>Comment</strong>: <pre>As this is to be a new, stable API, let's fix these to be consistent.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L704](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L704)<br><strong>Comment</strong>: <pre>The functions for Range queries (such as GetStateRangeScanIterator below) is going to be a challenge, as it will be confusing to take namespace twice for startKey and endKey.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L706](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L706)<br><strong>Comment</strong>: <pre>Although this one matters a bit less, we should probably return a concrete type here, which can as needed pass through to a backing interface, just to allow us flexibility in the API in the future.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L706](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L706)<br><strong>Comment</strong>: <pre>I find this comment similar to the type state... so, we can take similar call based on the final decision about state.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L720](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L720)<br><strong>Comment</strong>: <pre>I'm a bit confused why this is in this CR and tied to the tx processor, presumably it is not actually required by the tx processor?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L720](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L720)<br><strong>Comment</strong>: <pre>Yes, this is not required by TxProcessor. However, this is here because in the new flow, the block/transaction parsing is performed here and then it would be know what transactions have the accompanying pvtdata. And eventually, this dependency will be used to fetch the private data (which is done today by parsing the block/transactions in the gossip/coordinator). See line 129 for the intended usage.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L720](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L720)<br><strong>Comment</strong>: <pre>But why this CR?  Seems like it should be separated.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/ledger/ledger_interface.go#L720](https://github.com/hyperledger-gerrit-archive/fabric/blob/af164fa9910a4711b6832c9f744bd9aa3b2ec8d5/core/ledger/ledger_interface.go#L720)<br><strong>Comment</strong>: <pre>For the completeness of API changes, I prefer to have the new commit function above in the CR (in order for someone to see how the commit path would be affected). Is there a benefit not including this in this CR?</pre></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Uploader</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Created</strong>: 8/8/2019, 8:36:46 AM<br><strong>UnmergedRevision</strong>: [8b51899507a42208d65cb40033be37f28b659447](https://github.com/hyperledger-gerrit-archive/fabric/commit/8b51899507a42208d65cb40033be37f28b659447)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:17:33 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:17:33 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 8/8/2019, 9:53:05 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 7/31/2019, 2:44:40 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote>