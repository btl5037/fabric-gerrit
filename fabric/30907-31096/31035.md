<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 31035<br><strong>Subject</strong>: [FAB-15240] translate LSCC policies for 2.0 validator<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Assignee</strong>:<br><strong>Created</strong>: 4/20/2019, 3:44:14 PM<br><strong>LastUpdated</strong>: 5/24/2019, 1:03:59 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-15240] translate LSCC policies for 2.0 validator

The 2.0 validator expects ApplicationPolicy instances but endorsement
policies defined through LSCC are SignaturePolicyEnvelope instances and
so they won't be interpreted correctly by VSCC. This change set
translates policies from SignaturePolicyEnvelope to ApplicationPolicy
before returning them to VSCC.

Change-Id: Ic140f44e9564eca16bf84cfa785600178e0f7ed0
Signed-off-by: Alessandro Sorniotti <ale.linux@sopit.net>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/20/2019, 3:44:14 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:47:45 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13215/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:48:07 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:52:50 PM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:53:27 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13215/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13215</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:56:24 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8319/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:56:29 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11646/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:56:49 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 3:56:56 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 4:22:25 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 4:33:59 PM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 4:34:49 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8319/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8319

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11646/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/11646</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/29/2019, 10:43:35 AM<br><strong>Message</strong>: <pre>Patch Set 2: Patch Set 1 was rebased</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/7/2019, 4:31:21 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(1 comment)

Test(s) coming soon?</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/9/2019, 1:04:15 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/9/2019, 1:04:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:06:38 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13667/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:07:00 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:11:41 PM<br><strong>Message</strong>: <pre>Patch Set 3: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:12:16 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13667/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13667</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:14:13 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8705/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:14:39 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:14:43 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12042/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:15:05 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:40:19 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:46:40 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/9/2019, 1:47:21 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8705/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8705

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12042/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12042</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/22/2019, 3:28:24 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(4 comments)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/23/2019, 6:05:22 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/23/2019, 6:05:35 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(4 comments)

Thanks Manish, all fixed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:08:54 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13923/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:09:25 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:13:44 AM<br><strong>Message</strong>: <pre>Patch Set 4: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:14:23 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13923/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13923</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:16:16 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12313/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:16:48 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:16:54 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8904/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:17:20 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:42:08 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:49:38 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 6:50:18 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8904/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8904

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12313/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12313</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/23/2019, 7:36:18 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 7:39:25 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8907/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 7:39:50 AM<br><strong>Message</strong>: <pre>Patch Set 4: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:17:04 AM<br><strong>Message</strong>: <pre>Patch Set 4: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:17:48 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8907/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8907</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/23/2019, 2:18:35 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/23/2019, 2:36:19 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/23/2019, 2:51:40 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 5/23/2019, 6:17:19 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+1

(4 comments)

I'd really like to see the naked returns replaced with proper returns but it doesn't have to be here.

I also would like to see better names for "new" and (ideally) "New". Obviously not here.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/24/2019, 5:25:48 AM<br><strong>Message</strong>: <pre>Uploaded patch set 5.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:26:00 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13948/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:26:21 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting verify build</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/24/2019, 5:26:55 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(5 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:30:30 AM<br><strong>Message</strong>: <pre>Patch Set 5: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:30:40 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8923/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:30:40 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12335/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:31:05 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:31:05 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:31:07 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13948/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13948</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 5:59:23 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 6:03:21 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 6:04:01 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12335/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12335

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8923/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8923</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/24/2019, 6:17:51 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Run UnitTest

FAIL	github.com/hyperledger/fabric/gossip/service	1200.283s</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 6:22:27 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12337/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 6:22:54 AM<br><strong>Message</strong>: <pre>Patch Set 5: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 6:45:49 AM<br><strong>Message</strong>: <pre>Patch Set 5: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 6:46:25 AM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12337/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12337</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/24/2019, 9:39:35 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 5/24/2019, 12:02:38 PM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/24/2019, 12:32:03 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Manish Sethi</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 12:34:42 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/6724/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 12:34:53 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/5408/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/24/2019, 1:03:59 PM<br><strong>Message</strong>: <pre>Patch Set 5:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/5408/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/5408

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/6724/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/6724</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 4/20/2019, 3:44:14 PM<br><strong>UnmergedRevision</strong>: [caae08b6403805a6fbafa11e645a63ef4824d94d](https://github.com/hyperledger-gerrit-archive/fabric/commit/caae08b6403805a6fbafa11e645a63ef4824d94d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 3:52:50 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 3:52:50 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 4:33:59 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 4:22:25 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 4/29/2019, 10:43:35 AM<br><strong>UnmergedRevision</strong>: [2f7e05d43416552fa19d8c47ea7258771873944b](https://github.com/hyperledger-gerrit-archive/fabric/commit/2f7e05d43416552fa19d8c47ea7258771873944b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 3:52:50 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 3:52:50 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 4:33:59 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 4:22:25 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/2f7e05d43416552fa19d8c47ea7258771873944b/core/committer/txvalidator/v20/valinforetriever/shim.go#L47)<br><strong>Comment</strong>: <pre>We don't really want to use MarshalOrPanic in production code, do we?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L47](https://github.com/hyperledger-gerrit-archive/fabric/blob/2f7e05d43416552fa19d8c47ea7258771873944b/core/committer/txvalidator/v20/valinforetriever/shim.go#L47)<br><strong>Comment</strong>: <pre>We do actually, in quite a few places afaik... still, better to remove it, which I did. I also added tests. Thx!</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/9/2019, 1:04:15 PM<br><strong>UnmergedRevision</strong>: [9634dcc6e726c720bc044947856bc0ffa912f4b2](https://github.com/hyperledger-gerrit-archive/fabric/commit/9634dcc6e726c720bc044947856bc0ffa912f4b2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2019, 1:11:41 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2019, 1:11:41 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2019, 1:46:40 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/9/2019, 1:40:19 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>If the "args" happens to be "nil", this translation would cause converting this to an empty ApplicationPolicy that wraps an empty SignaturePolicy. Is this and "nil" both get the same treatment by the caller?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>don't prefer to convert this into "unexpectedErr" instead of ignoring it?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>Good point - I'll pass through for the nil case</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>Nah, I'm thinking it will be handled more appropriately by the plugin - wdyt?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>plugin will directly try to convert this into "ApplicationPolicy" - which is a meaningless attempt. The actual unexpected error is that this is in fact supposed to be unmarshaled in SP but couldn't. So, I would not miss it and treat this as "unexpectedErr"</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>I'm not really sure about this - the way I see it, this code is an on-the-fly translator and shouldn't introduce any errors - only try to convert and 
1) return the converted policy if successful
2) behave as a nop otherwise
It was designed and written with this approach in mind, and I'd like to keep it this way unless you strongly disagree.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>That's not the feeling this function gives. The feeling it gives is that it is unifying the data from newlifecycle and lscc. In that unification, it would always return ApplicationPolicy bytes (for vscc) or an error.

I won't like to insist on anything. I'll leave up to you. However, would prefer a comment on ValidationInfo describing what this function behavior is.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L38)<br><strong>Comment</strong>: <pre>Yeah, I'm also on the fence here - I don't really want to introduce new errors here, especially because this code will disappear.. I'll try to clarify in the godoc.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L39](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L39)<br><strong>Comment</strong>: <pre>here and below, can you invert the condition and return early?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L39](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim.go#L39)<br><strong>Comment</strong>: <pre>Done - the function reads much better now, thx</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L130)<br><strong>Comment</strong>: <pre>This does not guarantee that the function did not attempt the conversion... as in the case of an error (which would happen while converting these bytes into a SP), the function  ignores the error and return the raw bytes as is.

Better to use a valid marshaled SPE bytes</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L130](https://github.com/hyperledger-gerrit-archive/fabric/blob/9634dcc6e726c720bc044947856bc0ffa912f4b2/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L130)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/23/2019, 6:05:22 AM<br><strong>UnmergedRevision</strong>: [6d7040b49e558cf46de26b8bf8e5c8ca3e010464](https://github.com/hyperledger-gerrit-archive/fabric/commit/6d7040b49e558cf46de26b8bf8e5c8ca3e010464)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 6:13:44 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 6:13:44 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 8:17:04 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 6:42:08 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 5/23/2019, 6:17:19 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L29)<br><strong>Comment</strong>: <pre>Good to see godoc but I expect ValidationInfo actually does something.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L29)<br><strong>Comment</strong>: <pre>it does</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L30)<br><strong>Comment</strong>: <pre>this is existing code but I have to comment anyway...

https://github.com/golang/go/wiki/CodeReviewComments#named-result-parameters

This is another one of those things that we should try to avoid. If we want to name the return values, that's fine - but don't use naked returns. Explicitly return the values.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L30](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L30)<br><strong>Comment</strong>: <pre>Naked returns are supported by the language, so I suppose there's a case for using them sometimes. I hardly ever do, but this seemed the appropriate place to do so. Here's why: this function is two things:
1) an aggregator of information from legacy and new lifecycle
2) a translator for some of the information that may be received from the legacy lifecycle.

In many cases, this function must just act as a passthrough, and in fact, it's supposed to do something iff: i) no error occurs in the retrieval from either lifecycle; and ii) there is no definition in the legacy lifecycle; and iii) there's a definition in the new one; and iv) the definition requires the default validation plugin; and v) has validation arguments which can be successfully parsed as a SignaturePolicyEnvelope; and vi) they can be successfully converted to ApplicationPolicy.

In order to stress this "do nothing unless" behaviour of the function, it seemed to me that naked returns + accompanying comments were appropriate.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L65)<br><strong>Comment</strong>: <pre>to be consistent, here also you can invert the condition.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L65)<br><strong>Comment</strong>: <pre>I wanted to but then didn't because we then lose 100% test coverage :)</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L65)<br><strong>Comment</strong>: <pre>Sure, However, In my experience, readable/clean code is less bug-prone as compared to the code that tries to chase test coverage :-)</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L65)<br><strong>Comment</strong>: <pre>+1

But I'll say this code would be a lot clearer without the reliance on named return values.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim.go#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim.go#L65)<br><strong>Comment</strong>: <pre>Fair enough, I'll change it - thx</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L115](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L115)<br><strong>Comment</strong>: <pre>It's really confusing to see a builtin function name used as a variable name. It's not unique to this test and we shouldn't be doing it. I know Jay has been renaming these when he runs across them as well.

Just imagine someone trying to add a new(ObjectThing) call in here...</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L115](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L115)<br><strong>Comment</strong>: <pre>Good point - thx. Done</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L131](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L131)<br><strong>Comment</strong>: <pre>goodSPE?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L131](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L131)<br><strong>Comment</strong>: <pre>Actually I learnt from Jason that it is better for this kind of assertion to use a different variable than the one that was injected in the mocks. Otherwise the risk is that the injected variable was modified in the course of the test (e.g. because some fields of its pointee were changed) and yet the assertion is successful simply because we are comparing the variable with itself.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/committer/txvalidator/v20/valinforetriever/shim_test.go#L131](https://github.com/hyperledger-gerrit-archive/fabric/blob/6d7040b49e558cf46de26b8bf8e5c8ca3e010464/core/committer/txvalidator/v20/valinforetriever/shim_test.go#L131)<br><strong>Comment</strong>: <pre>OK, makes sense.</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/24/2019, 5:25:48 AM<br><strong>GitHubMergedRevision</strong>: [6ddd8a3736a3dc977f72082e1bea4f53d93a800f](https://github.com/hyperledger-gerrit-archive/fabric/commit/6ddd8a3736a3dc977f72082e1bea4f53d93a800f)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/24/2019, 5:30:30 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/24/2019, 5:30:30 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/24/2019, 6:03:21 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/24/2019, 6:45:49 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 5/24/2019, 9:39:35 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Manish Sethi<br><strong>Merged</strong>: 5/24/2019, 12:32:03 PM<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 5/24/2019, 12:02:38 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>