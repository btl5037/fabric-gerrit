<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 31031<br><strong>Subject</strong>: [FAB-15229] translate policies for service discovery<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Assignee</strong>:<br><strong>Created</strong>: 4/20/2019, 6:03:56 AM<br><strong>LastUpdated</strong>: 5/23/2019, 11:43:38 AM<br><strong>CommitMessage</strong>:<br><pre>[FAB-15229] translate policies for service discovery

Change-Id: Ie7d1bb0ac3d6927845ccc576b9dc76d29f03c520
Signed-off-by: Alessandro Sorniotti <ale.linux@sopit.net>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/20/2019, 6:03:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:05:32 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13210/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:06:01 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:11:34 AM<br><strong>Message</strong>: <pre>Patch Set 1: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:12:20 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13210/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13210</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:13:53 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8315/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:14:02 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11642/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:14:21 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:14:29 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:40:12 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:51:46 AM<br><strong>Message</strong>: <pre>Patch Set 1: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/20/2019, 6:52:30 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8315/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8315

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11642/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/11642</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/22/2019, 1:16:39 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Patch Set 1 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/22/2019, 1:43:18 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Patch Set 2 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/22/2019, 1:58:41 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/22/2019, 3:35:05 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5: Patch Set 4 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/22/2019, 4:01:28 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6: Commit message was updated.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/26/2019, 11:00:57 AM<br><strong>Message</strong>: <pre>Patch Set 7: Patch Set 6 was rebased</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/26/2019, 11:39:36 AM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 4/26/2019, 1:01:44 PM<br><strong>Message</strong>: <pre>Patch Set 9: Patch Set 8 was rebased</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/30/2019, 10:43:04 AM<br><strong>Message</strong>: <pre>Uploaded patch set 10.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:44:41 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13361/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:45:07 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:49:54 AM<br><strong>Message</strong>: <pre>Patch Set 10: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:50:34 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13361/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13361</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:51:56 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8433/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:52:21 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11762/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:52:22 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 10:52:48 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 11:18:34 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 11:24:14 AM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 11:24:58 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8433/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8433

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11762/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/11762</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 4/30/2019, 11:39:05 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Run IntegrationTest

11:06:56 Summarizing 3 Failures:
11:06:56 
11:06:56 [Fail] EndToEnd Crash Fault Tolerance when orderer stops and restarts [It] keeps network up and running 
11:06:56 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:122
11:06:56 
11:06:56 [Fail] EndToEnd Crash Fault Tolerance when an orderer is behind the latest snapshot on leader [It] catches up using the block stored in snapshot 
11:06:56 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:179
11:06:56 
11:06:56 [Fail] EndToEnd Crash Fault Tolerance when Leader cannot reach quorum [It] Steps down 
11:06:56 /w/workspace/fabric-verify-integration-tests-x86_64/gopath/src/github.com/hyperledger/fabric/integration/e2e/cft_test.go:310</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 11:41:51 AM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8434/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 11:42:19 AM<br><strong>Message</strong>: <pre>Patch Set 10: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 12:14:51 PM<br><strong>Message</strong>: <pre>Patch Set 10: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/30/2019, 12:15:29 PM<br><strong>Message</strong>: <pre>Patch Set 10:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8434/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8434</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/1/2019, 11:00:36 AM<br><strong>Message</strong>: <pre>Uploaded patch set 11: Patch Set 10 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/1/2019, 11:07:40 AM<br><strong>Message</strong>: <pre>Patch Set 11:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:16:54 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13448/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:17:20 AM<br><strong>Message</strong>: <pre>Patch Set 11: -F2-DocBuild -F1-VerifyBuild -F3-IntegrationTest -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:22:49 AM<br><strong>Message</strong>: <pre>Patch Set 11: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:26:59 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8510/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:27:14 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11838/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:27:39 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:27:39 AM<br><strong>Message</strong>: <pre>Patch Set 11:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 11:41:36 AM<br><strong>Message</strong>: <pre>Patch Set 11: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 12:07:13 PM<br><strong>Message</strong>: <pre>Patch Set 11: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 12:07:54 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11838/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/11838

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13448/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13448

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8510/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8510</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/1/2019, 12:10:12 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Run UnitTest

The flake is FAB-13377.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 12:12:42 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11841/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 12:13:13 PM<br><strong>Message</strong>: <pre>Patch Set 11: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 12:43:53 PM<br><strong>Message</strong>: <pre>Patch Set 11: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/1/2019, 12:44:49 PM<br><strong>Message</strong>: <pre>Patch Set 11:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/11841/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/11841</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/1/2019, 11:36:09 PM<br><strong>Message</strong>: <pre>Patch Set 11:

(5 comments)</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/7/2019, 12:24:21 PM<br><strong>Message</strong>: <pre>Uploaded patch set 12: Patch Set 11 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/7/2019, 1:07:07 PM<br><strong>Message</strong>: <pre>Uploaded patch set 13: Patch Set 12 was rebased.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/7/2019, 2:45:56 PM<br><strong>Message</strong>: <pre>Patch Set 14: Patch Set 13 was rebased</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/7/2019, 4:39:24 PM<br><strong>Message</strong>: <pre>Patch Set 14:

(1 comment)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/9/2019, 4:10:29 PM<br><strong>Message</strong>: <pre>Patch Set 15: Patch Set 14 was rebased</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/13/2019, 4:47:40 PM<br><strong>Message</strong>: <pre>Uploaded patch set 16: Patch Set 15 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/16/2019, 10:51:12 AM<br><strong>Message</strong>: <pre>Uploaded patch set 17: Patch Set 16 was rebased.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/19/2019, 12:06:08 PM<br><strong>Message</strong>: <pre>Patch Set 18: Patch Set 17 was rebased</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/21/2019, 2:55:48 PM<br><strong>Message</strong>: <pre>Uploaded patch set 19.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/21/2019, 2:56:24 PM<br><strong>Message</strong>: <pre>Patch Set 19:

(6 comments)

Thanks Will and Manish, see below + new drop</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 2:57:43 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13862/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 2:58:12 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:04:21 PM<br><strong>Message</strong>: <pre>Patch Set 19: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:05:19 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13862/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13862</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:06:57 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12260/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:07:23 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:07:39 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8855/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:08:01 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:36:00 PM<br><strong>Message</strong>: <pre>Patch Set 19: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:44:20 PM<br><strong>Message</strong>: <pre>Patch Set 19: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/21/2019, 3:45:05 PM<br><strong>Message</strong>: <pre>Patch Set 19:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12260/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12260

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8855/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8855</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 5/21/2019, 5:33:00 PM<br><strong>Message</strong>: <pre>Patch Set 19: Code-Review-1

(5 comments)

The ginkgo tests look like they can be simplified a fair bit.
The fakes in chaincode are counterfeiter fakes, not mockery mocks.
I don't understand why "ChannelPolicyReferenceProvider" is necessary as it just delegates to ChannelConfigSource - which is the "real" dependency (and simply Support by a different name).</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/22/2019, 1:51:42 PM<br><strong>Message</strong>: <pre>Uploaded patch set 20.</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/22/2019, 1:51:50 PM<br><strong>Message</strong>: <pre>Patch Set 19:

(5 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 1:53:44 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13908/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 1:54:06 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 1:58:57 PM<br><strong>Message</strong>: <pre>Patch Set 20: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 1:59:35 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12292/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 1:59:39 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13908/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13908</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 1:59:59 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 2:03:55 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8885/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 2:04:32 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 2:26:35 PM<br><strong>Message</strong>: <pre>Patch Set 20: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 2:41:29 PM<br><strong>Message</strong>: <pre>Patch Set 20: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/22/2019, 2:42:17 PM<br><strong>Message</strong>: <pre>Patch Set 20:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12292/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12292

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8885/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8885</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/23/2019, 3:11:41 AM<br><strong>Message</strong>: <pre>Patch Set 21: Patch Set 20 was rebased</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/23/2019, 8:14:54 AM<br><strong>Message</strong>: <pre>Uploaded patch set 22: Patch Set 21 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 5/23/2019, 8:15:20 AM<br><strong>Message</strong>: <pre>Patch Set 22:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:18:15 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13927/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:18:38 AM<br><strong>Message</strong>: <pre>Patch Set 22: -F2-DocBuild -F1-VerifyBuild -F3-IntegrationTest -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:25:02 AM<br><strong>Message</strong>: <pre>Patch Set 22: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:29:36 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12319/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:29:44 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8909/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:30:03 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:30:12 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 8:58:25 AM<br><strong>Message</strong>: <pre>Patch Set 22: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 9:06:26 AM<br><strong>Message</strong>: <pre>Patch Set 22: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 9:07:03 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/13927/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/13927

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/12319/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/12319

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/8909/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/8909</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 5/23/2019, 9:29:34 AM<br><strong>Message</strong>: <pre>Patch Set 22: Code-Review+2

(2 comments)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 5/23/2019, 9:52:41 AM<br><strong>Message</strong>: <pre>Patch Set 22:

(2 comments)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 5/23/2019, 10:47:06 AM<br><strong>Message</strong>: <pre>Patch Set 22:

(2 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/23/2019, 11:11:51 AM<br><strong>Message</strong>: <pre>Patch Set 22: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 5/23/2019, 11:11:53 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Yacov Manevich</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 11:14:17 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/6718/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 11:15:04 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/5402/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 5/23/2019, 11:43:38 AM<br><strong>Message</strong>: <pre>Patch Set 22:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/5402/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/5402

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/6718/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/6718</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 4/20/2019, 6:03:56 AM<br><strong>UnmergedRevision</strong>: [f68ab6ba58820cc42f495d47c93d69f4bec5eab7](https://github.com/hyperledger-gerrit-archive/fabric/commit/f68ab6ba58820cc42f495d47c93d69f4bec5eab7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 4/22/2019, 1:16:39 PM<br><strong>UnmergedRevision</strong>: [ae6d23bf1cc9744c7cae2b70fb3e163d15e40cbf](https://github.com/hyperledger-gerrit-archive/fabric/commit/ae6d23bf1cc9744c7cae2b70fb3e163d15e40cbf)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 4/22/2019, 1:43:18 PM<br><strong>UnmergedRevision</strong>: [cd7d16c1b4584a5835e304800827602c35011a36](https://github.com/hyperledger-gerrit-archive/fabric/commit/cd7d16c1b4584a5835e304800827602c35011a36)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 4/22/2019, 1:58:41 PM<br><strong>UnmergedRevision</strong>: [72c2a23a81ae24e4c9a3dc57f838342a426024cc](https://github.com/hyperledger-gerrit-archive/fabric/commit/72c2a23a81ae24e4c9a3dc57f838342a426024cc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 4/22/2019, 3:35:05 PM<br><strong>UnmergedRevision</strong>: [a2993a0273e3f38cdac33c1f95d3b55b1b838f24](https://github.com/hyperledger-gerrit-archive/fabric/commit/a2993a0273e3f38cdac33c1f95d3b55b1b838f24)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: NO_CODE_CHANGE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 4/22/2019, 4:01:28 PM<br><strong>UnmergedRevision</strong>: [682b0cdf0de4c0e1794e9afd277df54586342065](https://github.com/hyperledger-gerrit-archive/fabric/commit/682b0cdf0de4c0e1794e9afd277df54586342065)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 4/26/2019, 11:00:57 AM<br><strong>UnmergedRevision</strong>: [ff555a7512689c308f1f2c58beb93908b7317627](https://github.com/hyperledger-gerrit-archive/fabric/commit/ff555a7512689c308f1f2c58beb93908b7317627)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 4/26/2019, 11:39:36 AM<br><strong>UnmergedRevision</strong>: [ec95e4525c7f1768af51134e02611615c20554ed](https://github.com/hyperledger-gerrit-archive/fabric/commit/ec95e4525c7f1768af51134e02611615c20554ed)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 9</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 4/26/2019, 1:01:44 PM<br><strong>UnmergedRevision</strong>: [de1ca0e562a8216e7a1ba22fb6277b0d1e87e9e5](https://github.com/hyperledger-gerrit-archive/fabric/commit/de1ca0e562a8216e7a1ba22fb6277b0d1e87e9e5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:11:34 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:51:46 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/20/2019, 6:40:12 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 10</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 4/30/2019, 10:43:04 AM<br><strong>UnmergedRevision</strong>: [e0ff3d68a48454cb1d21e69743d563ca8270cd03](https://github.com/hyperledger-gerrit-archive/fabric/commit/e0ff3d68a48454cb1d21e69743d563ca8270cd03)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/30/2019, 10:49:54 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/30/2019, 10:49:54 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/30/2019, 12:14:51 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/30/2019, 11:18:34 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 11</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 5/1/2019, 11:00:36 AM<br><strong>UnmergedRevision</strong>: [3ae8ab901a7a48a74cd5d202164673249cf4167b](https://github.com/hyperledger-gerrit-archive/fabric/commit/3ae8ab901a7a48a74cd5d202164673249cf4167b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L35)<br><strong>Comment</strong>: <pre>What is the use of this interface? This is not an external dependency. The implementation is implemented and instantiated right here in this file.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L35)<br><strong>Comment</strong>: <pre>It's only a matter of unit testing - added now. Thx</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L40)<br><strong>Comment</strong>: <pre>you broke your own rule about test coverage. This new code is largely missing associated tests :-)</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L40](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L40)<br><strong>Comment</strong>: <pre>Yup! Done now, thx</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L108](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L108)<br><strong>Comment</strong>: <pre>don't you need to make similar change here as well - https://gerrit.hyperledger.org/r/#/c/30969/24/core/chaincode/lifecycle/cache.go@471</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L108](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L108)<br><strong>Comment</strong>: <pre>No, actually that code path does not consume endorsement policies but only delivers a map of instantiated chaincodes. Whenever a chaincode endorsement policy is required, this function is invoked.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L108](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L108)<br><strong>Comment</strong>: <pre>One more evidence that this code belongs more to Service Discovery than to lifecycle...

For now, can you make a comment to this regard so someone else may not end up using this API assuming that it returns the original policy bytes?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L111](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L111)<br><strong>Comment</strong>: <pre>is it worth publishing chaincode with wrong metadata? Better to propagate the error up.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L111](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L111)<br><strong>Comment</strong>: <pre>This function does not support returning errors. The endorsement policy delivered to our caller is only used to build a map of nodes that can endorse this chaincode and so the reject all policy will simply convey that we don't know any peer that can satisfy the endorsement policy for this chaincode.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L111](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L111)<br><strong>Comment</strong>: <pre>Can you add this description as a comment here for future reference?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L117](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L117)<br><strong>Comment</strong>: <pre>Not an immediate concern... However, to take a note, since it always takes SignaturePolicyEnvelope now, it may worth to change this to concrete type as opposed to bytes. This can avoid a cycle of marshal/unmarshal.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L117](https://github.com/hyperledger-gerrit-archive/fabric/blob/3ae8ab901a7a48a74cd5d202164673249cf4167b/core/chaincode/lifecycle/metadata_provider.go#L117)<br><strong>Comment</strong>: <pre>Ah yes, good point, but I didn't want to change the service discovery code that consumes this information.</pre></blockquote><h3>PatchSet Number: 12</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 5/7/2019, 12:24:21 PM<br><strong>UnmergedRevision</strong>: [9d2b11c9ac8cef6049cd0cff2c499111a373f950](https://github.com/hyperledger-gerrit-archive/fabric/commit/9d2b11c9ac8cef6049cd0cff2c499111a373f950)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 13</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 5/7/2019, 1:07:07 PM<br><strong>UnmergedRevision</strong>: [287f2b17985fbfa4addcbe8faddaca0e51419a82](https://github.com/hyperledger-gerrit-archive/fabric/commit/287f2b17985fbfa4addcbe8faddaca0e51419a82)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 14</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/7/2019, 2:45:56 PM<br><strong>UnmergedRevision</strong>: [99a5624a846325423987d091ceaaec987a7c4487](https://github.com/hyperledger-gerrit-archive/fabric/commit/99a5624a846325423987d091ceaaec987a7c4487)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/99a5624a846325423987d091ceaaec987a7c4487/core/chaincode/lifecycle/metadata_provider.go#L94)<br><strong>Comment</strong>: <pre>Do we really want to use MarshalOrPanic in production code?</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L94](https://github.com/hyperledger-gerrit-archive/fabric/blob/99a5624a846325423987d091ceaaec987a7c4487/core/chaincode/lifecycle/metadata_provider.go#L94)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 15</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/9/2019, 4:10:29 PM<br><strong>UnmergedRevision</strong>: [7eec02cbfda8a17ca4875c219f378c849ca57b91](https://github.com/hyperledger-gerrit-archive/fabric/commit/7eec02cbfda8a17ca4875c219f378c849ca57b91)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 16</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 5/13/2019, 4:47:40 PM<br><strong>UnmergedRevision</strong>: [ca3e44fba341430a6b4ac08197fe347ebb19f53e](https://github.com/hyperledger-gerrit-archive/fabric/commit/ca3e44fba341430a6b4ac08197fe347ebb19f53e)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 17</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 5/16/2019, 10:51:12 AM<br><strong>UnmergedRevision</strong>: [9491c7d4548e4bb553e8b903f7dcaefafe22f6e6](https://github.com/hyperledger-gerrit-archive/fabric/commit/9491c7d4548e4bb553e8b903f7dcaefafe22f6e6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 18</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/19/2019, 12:06:08 PM<br><strong>UnmergedRevision</strong>: [1e9fdab56f1b21885b0fca4f6deb7d039b7b2880](https://github.com/hyperledger-gerrit-archive/fabric/commit/1e9fdab56f1b21885b0fca4f6deb7d039b7b2880)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 11:22:49 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:07:13 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/1/2019, 12:43:53 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 19</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/21/2019, 2:55:48 PM<br><strong>UnmergedRevision</strong>: [f3975551a4609b5ae240dcaf953bad8acbc65a68](https://github.com/hyperledger-gerrit-archive/fabric/commit/f3975551a4609b5ae240dcaf953bad8acbc65a68)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/21/2019, 3:04:21 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/21/2019, 3:04:21 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/21/2019, 3:44:20 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/21/2019, 3:36:00 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 5/21/2019, 5:33:00 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle_suite_test.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/lifecycle_suite_test.go#L26)<br><strong>Comment</strong>: <pre>we just want through the exercise of changing everything to counterfeiter.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle_suite_test.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/lifecycle_suite_test.go#L26)<br><strong>Comment</strong>: <pre>Changed, but let me ask you: what's the benefit of counterfeiter over mockery? I see a big disadvantage which is that counterfeiter silently returns zero values if not otherwise instrumented, which is dangerous, because things may work well in a test case only because of an uninstrumented  mock method call.</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle_suite_test.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/lifecycle_suite_test.go#L26)<br><strong>Comment</strong>: <pre>They are different tools with different philosophies. I find counterfeiter fakes more flexible than mockery, I like that I don't have to have untyped string names on the (incessantly repetitive) calls to On, and that I can generate fakes from unexported interfaces and from test files.

In this case, my assertion is that this would have been the only "mockery" mock in the package so, imo, consistency wins.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle_suite_test.go#L26](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/lifecycle_suite_test.go#L26)<br><strong>Comment</strong>: <pre>Ok, understood - thx</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle_suite_test.go#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/lifecycle_suite_test.go#L31)<br><strong>Comment</strong>: <pre>commented lower in the stack - this is not a good name.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/lifecycle_suite_test.go#L31](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/lifecycle_suite_test.go#L31)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L37](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/metadata_provider.go#L37)<br><strong>Comment</strong>: <pre>we don't define interfaces where instances are implemented - we do it where they are used.

Who uses this?

This also looks like you're just wrapping the ChannelConfigSource - which appears to be the real dependency.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L37](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/metadata_provider.go#L37)<br><strong>Comment</strong>: <pre>> we don't define interfaces where instances are implemented - we do it where they are used.
> Who uses this?

used on line 69

> This also looks like you're just wrapping the ChannelConfigSource - which appears to be the real dependency.

yes, we don't want to have to mock a channel and a policy manager to test `toSignaturePolicyEnvelope`</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L37](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/metadata_provider.go#L37)<br><strong>Comment</strong>: <pre>But we want to define an additional interface, a struct, and a constructor for it? Doesn't make sense to me but it's not worth holding things up for.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L37](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/metadata_provider.go#L37)<br><strong>Comment</strong>: <pre>Yeah, I agree, it's quite a bit of code - but the alternative (mocking channel and policy manager) seemed even more daunting to me...</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider_test.go#L106](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/metadata_provider_test.go#L106)<br><strong>Comment</strong>: <pre>Why are you repeating the entire structure in every block? It hides the the detail that is being changed.

The top level describe should be setting up for the happy path - creating a ccInfo that works. Here, we should be modifying that ccInfo as appropriate to drive the path that's being tested. That means

    ccInfo.Definition.ValidationInfo.ValidationParameter = []byte("bad-data")

This would DRY up this test a great deal and allow the reader to focus on the bit that was being changed.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider_test.go#L106](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/metadata_provider_test.go#L106)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/mock/channel_policy_reference_provider.go#L0](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/mock/channel_policy_reference_provider.go#L0)<br><strong>Comment</strong>: <pre>the chaincode package uses counterfeiter. if this is needed, please regenerate as a fake.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/mock/channel_policy_reference_provider.go#L0](https://github.com/hyperledger-gerrit-archive/fabric/blob/f3975551a4609b5ae240dcaf953bad8acbc65a68/core/chaincode/lifecycle/mock/channel_policy_reference_provider.go#L0)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 20</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/22/2019, 1:51:42 PM<br><strong>UnmergedRevision</strong>: [093c846f72e0e0fd3f1fd6b564e0788609e876f5](https://github.com/hyperledger-gerrit-archive/fabric/commit/093c846f72e0e0fd3f1fd6b564e0788609e876f5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 1:58:57 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 1:58:57 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 2:41:29 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 2:26:35 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 21</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Created</strong>: 5/23/2019, 3:11:41 AM<br><strong>UnmergedRevision</strong>: [9c8bd71e36b53258f27f5a1964e41aae158b51bb](https://github.com/hyperledger-gerrit-archive/fabric/commit/9c8bd71e36b53258f27f5a1964e41aae158b51bb)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 1:58:57 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 1:58:57 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 2:41:29 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/22/2019, 2:26:35 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 22</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 5/23/2019, 8:14:54 AM<br><strong>GitHubMergedRevision</strong>: [6bf39c1d7af56d9c4829b63292cae2ee02334477](https://github.com/hyperledger-gerrit-archive/fabric/commit/6bf39c1d7af56d9c4829b63292cae2ee02334477)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 8:25:02 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 8:25:02 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 9:06:26 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 5/23/2019, 8:58:25 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 5/23/2019, 11:11:51 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Yacov Manevich<br><strong>Merged</strong>: 5/23/2019, 11:11:53 AM<br><br><strong>Approver</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Approved</strong>: 5/23/2019, 9:29:34 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/metadata_provider.go#L34](https://github.com/hyperledger-gerrit-archive/fabric/blob/6bf39c1d7af56d9c4829b63292cae2ee02334477/core/chaincode/lifecycle/metadata_provider.go#L34)<br><strong>Comment</strong>: <pre>I don't see much connection between NewPolicy, and this description. 

Why isn't it just a 'PolicyBuilder' ?</pre></blockquote>