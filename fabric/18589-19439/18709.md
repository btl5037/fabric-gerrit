<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 18709<br><strong>Subject</strong>: [FAB-8416] add leader election section<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 3/4/2018, 8:17:16 AM<br><strong>LastUpdated</strong>: 3/4/2018, 10:22:51 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-8416] add leader election section

In order to answer concerns raised by FAB-8416, this commit adds section
and details explaining leader election operation modes and list
limitations of static config.

Change-Id: I0c0be6cf759c09534eba0160e60a4830ea16360c
Signed-off-by: Artem Barger <bartem@il.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 8:17:16 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:32:36 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21299/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:32:36 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/301/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:32:39 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12991/ (3/3)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 8:37:38 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(4 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 8:47:15 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:47:18 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21299/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21299/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-x86_64/21299

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12991/ : ABORTED

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12991/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-end-2-end-x86_64/12991

https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/301/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-rtd-verify-master/301</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 8:47:45 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1 Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:48:36 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21300/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:48:41 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/302/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 8:50:18 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12992/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 9:12:23 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21300/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-x86_64/21300

https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/302/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-rtd-verify-master/302

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12992/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-end-2-end-x86_64/12992</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 11:35:57 AM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review-1

(18 comments)

Obviously my comments go beyond leader election here, but I thought I'd do a full review of the topic while reading.  The other comments can be addressed in a separate CR.</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 1:46:52 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3.</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 1:47:47 PM<br><strong>Message</strong>: <pre>Patch Set 2:

(18 comments)

@Dave, thank for you comments, I'd prefer to defer comment not related to leader election to subsequent CR.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 1:48:29 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21303/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 1:48:29 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/305/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 1:49:46 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12994/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 2:10:10 PM<br><strong>Message</strong>: <pre>Patch Set 3: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21303/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-x86_64/21303

https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/305/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-rtd-verify-master/305

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12994/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-end-2-end-x86_64/12994</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 2:16:53 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(7 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 3:05:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4.</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 3:05:09 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(5 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 3:05:49 PM<br><strong>Message</strong>: <pre>Patch Set 3:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 3:06:39 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21306/ (1/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 3:08:34 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/308/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 3:08:40 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12998/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 3:29:10 PM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/21306/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-x86_64/21306

https://jenkins.hyperledger.org/job/fabric-rtd-verify-master/308/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-rtd-verify-master/308

https://jenkins.hyperledger.org/job/fabric-verify-end-2-end-x86_64/12998/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-end-2-end-x86_64/12998</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 4:24:26 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 9:58:28 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2

(3 comments)

The new leader section looks very good and fills a gap.

I'm adding suggestions to other sections for a follow-on CR.</pre><strong>Reviewer</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Reviewed</strong>: 3/4/2018, 9:58:30 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by David Enyeart</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 3/4/2018, 10:22:51 PM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/3264/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/3264

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/1939/ : SUCCESS

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/1939</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Uploader</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Created</strong>: 3/4/2018, 8:17:16 AM<br><strong>UnmergedRevision</strong>: [9421d0b4e6753ecf1f7e3bbfa907555f77e3abd5](https://github.com/hyperledger-gerrit-archive/fabric/commit/9421d0b4e6753ecf1f7e3bbfa907555f77e3abd5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/4/2018, 8:47:18 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L85](https://github.com/hyperledger-gerrit-archive/fabric/blob/9421d0b4e6753ecf1f7e3bbfa907555f77e3abd5/docs/source/gossip.rst#L85)<br><strong>Comment</strong>: <pre>"you there" --> "There"</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L85](https://github.com/hyperledger-gerrit-archive/fabric/blob/9421d0b4e6753ecf1f7e3bbfa907555f77e3abd5/docs/source/gossip.rst#L85)<br><strong>Comment</strong>: <pre>can you add reasoning?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L100](https://github.com/hyperledger-gerrit-archive/fabric/blob/9421d0b4e6753ecf1f7e3bbfa907555f77e3abd5/docs/source/gossip.rst#L100)<br><strong>Comment</strong>: <pre>"split brain" is usually used for clusters where only 1 server should be a leader regardless of network partition, however - in our case - if there is a partition, we'd want 2 leaders or more - so I'm not sure split brain is a term that it is makes sense to user here.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/9421d0b4e6753ecf1f7e3bbfa907555f77e3abd5/docs/source/gossip.rst#L103)<br><strong>Comment</strong>: <pre>and in no presence of network partitions</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Uploader</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Created</strong>: 3/4/2018, 8:47:15 AM<br><strong>UnmergedRevision</strong>: [535243319d26e20b56401e669adbe82c5f5f7301](https://github.com/hyperledger-gerrit-archive/fabric/commit/535243319d26e20b56401e669adbe82c5f5f7301)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/4/2018, 9:12:23 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 3/4/2018, 8:47:45 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 3/4/2018, 8:47:45 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 3/4/2018, 11:35:57 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: -1<br><br><h2>Comments</h2><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L15](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L15)<br><strong>Comment</strong>: <pre>I think we need to mention upfront that gossip is optional. I've attempted to do that here (although this may be over-simplified, and you may want to go into the different aspects that can be enabled or not):

Peers can optionally be configured to utilize gossip. When enabled, peers leverage gossip to broadcast ledger and channel data in a scalable fashion between peers.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L15](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L15)<br><strong>Comment</strong>: <pre>Well, gossip is not really optional, i.e. you cannot turn it off or on. So stating it's optional is misleading.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L28)<br><strong>Comment</strong>: <pre>Is this valid?  What role does gossip have in channel membership?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L28](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L28)<br><strong>Comment</strong>: <pre>Yes, this valid, you need channel membership to scope block distribution within channel.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L32)<br><strong>Comment</strong>: <pre>"Out of sync" sounds overly ambitious. There is nothing that checks if data is out of sync per se, beyond helping peers catch up to current chain height, right?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L32)<br><strong>Comment</strong>: <pre>Well, not being with same ledger is in fact "out of sync". Missing 10 block is not being in sync.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L32](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L32)<br><strong>Comment</strong>: <pre>Agreed that missing latest blocks is one example of "out of sync", but "out of sync" has a more general connotation and this sentence will therefore be misleading to many readers.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L35)<br><strong>Comment</strong>: <pre>"State transfer" is a misleading term, since it is only blocks that get transferred not current state, right?  I think we should call it "block transfer".  Is this any different than #2?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L35)<br><strong>Comment</strong>: <pre>from gossip terminology there is no big difference between actual state and the ledger as gossip leverages committer abstraction and therefore ledger and state encapsulated together and addressed as state.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L35](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L35)<br><strong>Comment</strong>: <pre>Everywhere else in the documentation "state" is described as chaincode's current state in state database.  Therefore "state transfer" will be misleading to the vast majority of readers.  I think it should be called "block transfer".</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L38)<br><strong>Comment</strong>: <pre>I think we need to go into some more detail about which operations happen between peers in the same org, vs which operations happen across orgs.  And introduce the concept of anchor peers.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L38)<br><strong>Comment</strong>: <pre>Agree, let's do it in separate CR, since doesn't really related to the leader election subject.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L38](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L38)<br><strong>Comment</strong>: <pre>Thanks.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L55)<br><strong>Comment</strong>: <pre>configures one peer in the organization</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L55](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L55)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L59)<br><strong>Comment</strong>: <pre>Peers execute a leader election procedure to select one peer in an organization to become leader, pull block from the ordering service, and disseminate blocks to the other peers in the organization.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L59)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L65)<br><strong>Comment</strong>: <pre>configure the following parameters within the</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L65)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L86)<br><strong>Comment</strong>: <pre>Clarify this... I think you are saying that you could manually configure a single peer to be leader and disseminate blocks, or could configure N peers (potentially all peers) to be leader if you want many peers to pull blocks from orderer.  If that is what you are saying, it probably makes sense to mention this at the beginning of the section, rather than in a note.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L86](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L86)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L101)<br><strong>Comment</strong>: <pre>a</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L101)<br><strong>Comment</strong>: <pre>the</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L101)<br><strong>Comment</strong>: <pre>selecting</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L101)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L101)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L101](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L101)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L103)<br><strong>Comment</strong>: <pre>, allowing the organization's peers to continue making progress.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L103)<br><strong>Comment</strong>: <pre>the network partition is</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L103)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L103](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L103)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L105)<br><strong>Comment</strong>: <pre>there will</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L105](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L105)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L118)<br><strong>Comment</strong>: <pre>the following parameters need to be configured</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L118](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L118)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L135)<br><strong>Comment</strong>: <pre>Question, the configuration examples in this section are either:

    export CORE_PEER_GOSSIP_USELEADERELECTION=true
    export CORE_PEER_GOSSIP_ORGLEADER=false

or

    export CORE_PEER_GOSSIP_USELEADERELECTION=false
    export CORE_PEER_GOSSIP_ORGLEADER=true

In what scenarios would you utilize true/true or false/false?  Which combinations are invalid?  Does ORGLEADER mean a peer 'can' be a leader as opposed to mean it 'will' be a leader?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L135](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L135)<br><strong>Comment</strong>: <pre>Setting both to true/true is ambiguous, hence will lead to the error, while false/false means that peer won't try to become a leader. Added sentence clarifying this.</pre><strong>Commenter</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L152](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L152)<br><strong>Comment</strong>: <pre>Is there any state reconciliation beyond providing peers block to catch them up to current height?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L152](https://github.com/hyperledger-gerrit-archive/fabric/blob/535243319d26e20b56401e669adbe82c5f5f7301/docs/source/gossip.rst#L152)<br><strong>Comment</strong>: <pre>This is exactly what written here.</pre></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Uploader</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Created</strong>: 3/4/2018, 1:46:52 PM<br><strong>UnmergedRevision</strong>: [eaf537c52982f718a2d427a9ad182efbef0b234b](https://github.com/hyperledger-gerrit-archive/fabric/commit/eaf537c52982f718a2d427a9ad182efbef0b234b)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/4/2018, 2:10:10 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L58)<br><strong>Comment</strong>: <pre>blocks</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L58](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L58)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L64)<br><strong>Comment</strong>: <pre>a / the set</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L64)<br><strong>Comment</strong>: <pre>manually</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L64)<br><strong>Comment</strong>: <pre>an / the organization</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L64)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L64)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L64](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L64)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L65)<br><strong>Comment</strong>: <pre>a single</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L65)<br><strong>Comment</strong>: <pre>lets change this to "it should be taken into account that - " without the since afterwards

wdyt?</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L65)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L65](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L65)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L96](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L96)<br><strong>Comment</strong>: <pre>an</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [docs/source/gossip.rst#L96](https://github.com/hyperledger-gerrit-archive/fabric/blob/eaf537c52982f718a2d427a9ad182efbef0b234b/docs/source/gossip.rst#L96)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Uploader</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Created</strong>: 3/4/2018, 3:05:00 PM<br><strong>GitHubMergedRevision</strong>: [f78e0ab7c86243545c60239441aef5107386f7a2](https://github.com/hyperledger-gerrit-archive/fabric/commit/f78e0ab7c86243545c60239441aef5107386f7a2)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 3/4/2018, 3:29:10 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 3/4/2018, 4:24:26 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: David Enyeart - enyeart@us.ibm.com<br><strong>Approved</strong>: 3/4/2018, 9:58:28 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: David Enyeart<br><strong>Merged</strong>: 3/4/2018, 9:58:30 PM<br><br></blockquote>