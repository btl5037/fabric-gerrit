<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 2513<br><strong>Subject</strong>: sbft: rework new view null requests<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Assignee</strong>:<br><strong>Created</strong>: 11/16/2016, 6:15:06 AM<br><strong>LastUpdated</strong>: 11/22/2016, 5:27:05 AM<br><strong>CommitMessage</strong>:<br><pre>sbft: rework new view null requests

Previously we would use our own concept of LastBatch() for the null
request batch prevHash.  This was unsound and replicas that were in view
change for one or more requests could not verify the correctness of this
hash.  Instead we now base our choice of prevHash on the now properly
reported most recent checkpoint.

Change-Id: Ia6794113672d64700b05ed10cac8e81539428f5b
Signed-off-by: Simon Schubert <sis@zurich.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Reviewed</strong>: 11/16/2016, 6:15:06 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2016, 6:22:13 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1665/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2016, 6:22:15 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2820/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/16/2016, 6:47:15 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1665/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/2820/ : SUCCESS</pre><strong>Reviewer</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Reviewed</strong>: 11/16/2016, 8:55:29 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review+1</pre><strong>Reviewer</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Reviewed</strong>: 11/16/2016, 10:03:10 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review+1</pre><strong>Reviewer</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Reviewed</strong>: 11/17/2016, 9:26:46 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review+2</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 11/17/2016, 5:53:23 PM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review+2</pre><strong>Reviewer</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Reviewed</strong>: 11/21/2016, 4:34:07 AM<br><strong>Message</strong>: <pre>Patch Set 1: Code-Review+2</pre><strong>Reviewer</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Reviewed</strong>: 11/21/2016, 5:17:29 AM<br><strong>Message</strong>: <pre>Patch Set 2: Patch Set 1 was rebased</pre><strong>Reviewer</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Reviewed</strong>: 11/21/2016, 5:18:18 AM<br><strong>Message</strong>: <pre>Patch Set 3: Published edit on patch set 2.</pre><strong>Reviewer</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Reviewed</strong>: 11/21/2016, 5:19:28 AM<br><strong>Message</strong>: <pre>Patch Set 4: Patch Set 3 was rebased</pre><strong>Reviewer</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Reviewed</strong>: 11/21/2016, 5:21:22 AM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 5:34:03 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1892/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 5:34:05 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3054/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 5:34:06 AM<br><strong>Message</strong>: <pre>Patch Set 3: -Verified

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1893/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 5:34:07 AM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3055/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 5:52:14 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1902/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 5:54:28 AM<br><strong>Message</strong>: <pre>Patch Set 4:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3064/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 6:15:12 AM<br><strong>Message</strong>: <pre>Patch Set 2: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1892/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3054/ : FAILURE</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 6:38:20 AM<br><strong>Message</strong>: <pre>Patch Set 4: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1902/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3064/ : SUCCESS</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 11/21/2016, 6:49:58 AM<br><strong>Message</strong>: <pre>Patch Set 3: Verified-1

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-behave-x86_64/1893/ : FAILURE (skipped)

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/3055/ : FAILURE</pre><strong>Reviewer</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Reviewed</strong>: 11/21/2016, 4:11:35 PM<br><strong>Message</strong>: <pre>Patch Set 4: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 11/22/2016, 5:27:05 AM<br><strong>Message</strong>: <pre>Change has been successfully merged by Gabor Hosszu</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Uploader</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Created</strong>: 11/16/2016, 6:15:06 AM<br><strong>UnmergedRevision</strong>: [4acaae69c20584202a1ebc8bdb7fc6edcd83ee23](https://github.com/hyperledger-gerrit-archive/fabric/commit/4acaae69c20584202a1ebc8bdb7fc6edcd83ee23)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/16/2016, 6:47:15 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Approved</strong>: 11/21/2016, 4:34:07 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Approved</strong>: 11/17/2016, 9:26:46 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Approved</strong>: 11/16/2016, 8:55:29 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 11/17/2016, 5:53:23 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Uploader</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Created</strong>: 11/21/2016, 5:17:29 AM<br><strong>UnmergedRevision</strong>: [5d303f220c22d89988f7f1757d9e96a3e6ec861d](https://github.com/hyperledger-gerrit-archive/fabric/commit/5d303f220c22d89988f7f1757d9e96a3e6ec861d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/21/2016, 6:15:12 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Uploader</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Created</strong>: 11/21/2016, 5:18:18 AM<br><strong>UnmergedRevision</strong>: [6a436b83109dd2723e756cfb37ab80c436c271c3](https://github.com/hyperledger-gerrit-archive/fabric/commit/6a436b83109dd2723e756cfb37ab80c436c271c3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/21/2016, 6:49:58 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: -1<br><br><strong>Approver</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Approved</strong>: 11/21/2016, 4:34:07 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Approved</strong>: 11/17/2016, 9:26:46 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Tuan Dang - tuan.dang.27613@gmail.com<br><strong>Approved</strong>: 11/16/2016, 8:55:29 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 11/17/2016, 5:53:23 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Uploader</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Created</strong>: 11/21/2016, 5:19:28 AM<br><strong>GitHubMergedRevision</strong>: [ab67f342430ef14d97d4097808a902e04d0b1840](https://github.com/hyperledger-gerrit-archive/fabric/commit/ab67f342430ef14d97d4097808a902e04d0b1840)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 11/21/2016, 6:38:20 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gabor Hosszu - gabor@digitalasset.com<br><strong>Approved</strong>: 11/21/2016, 4:11:35 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Gabor Hosszu<br><strong>Merged</strong>: 11/22/2016, 5:27:05 AM<br><br><strong>Approver</strong>: Simon Schubert - 2-hl-gerrit@0x2c.org<br><strong>Approved</strong>: 11/21/2016, 5:21:22 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>