<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 4557<br><strong>Subject</strong>: [FAB-1755] Replace orderer GRPC Server<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/19/2017, 7:36:57 AM<br><strong>LastUpdated</strong>: 1/20/2017, 6:21:15 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-1755] Replace orderer GRPC Server

https://jira.hyperledger.org/browse/FAB-1755

This sets the stage for enabling TLS for the
orderer by replacing the direct use of the grpc
pacakge for creating a server with the use of
the GRPC server from the core/comm package

* use comm.GRPCServer in main.go
* add TLS config struct to localconfig
* add config paramters to orderer.yaml

Fixes FAB-1755

Change-Id: Icba2776c1e503021b2873c149949b2b3b0c686fa
Signed-off-by: Gari Singh <gari.r.singh@gmail.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 7:36:57 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/19/2017, 7:37:51 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5386/</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 7:39:21 AM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/19/2017, 8:16:59 AM<br><strong>Message</strong>: <pre>Patch Set 1: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5386/ : SUCCESS</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/19/2017, 1:02:57 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 1:18:14 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 1:20:24 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/19/2017, 2:17:47 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 2:25:49 PM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/19/2017, 2:30:06 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5407/</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/19/2017, 2:52:20 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/19/2017, 2:56:49 PM<br><strong>Message</strong>: <pre>Patch Set 2: Verified+1

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-x86_64/5407/ : SUCCESS</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 3:15:57 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 3:18:37 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/19/2017, 3:31:33 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 4:30:30 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/19/2017, 4:45:38 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/19/2017, 5:10:25 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 3:35:46 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 4:07:51 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/20/2017, 4:56:01 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/20/2017, 4:57:00 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 5:06:48 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 5:06:58 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 1/20/2017, 5:11:07 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 5:16:38 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 5:25:23 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(2 comments)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 5:31:24 PM<br><strong>Message</strong>: <pre>Patch Set 1:

(1 comment)</pre><strong>Reviewer</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Reviewed</strong>: 1/20/2017, 5:31:34 PM<br><strong>Message</strong>: <pre>Patch Set 2: Code-Review+2</pre><strong>Reviewer</strong>: Gerrit Code Review - gerrit@hyperledger.org<br><strong>Reviewed</strong>: 1/20/2017, 5:31:37 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Yacov Manevich</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/20/2017, 5:34:23 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/823/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/20/2017, 6:21:15 PM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/823/ : FAILURE</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Uploader</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Created</strong>: 1/19/2017, 7:36:57 AM<br><strong>UnmergedRevision</strong>: [af5635791973c49119fcd26901b7d5f742330fbc](https://github.com/hyperledger-gerrit-archive/fabric/commit/af5635791973c49119fcd26901b7d5f742330fbc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/19/2017, 8:16:59 AM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L59)<br><strong>Comment</strong>: <pre>Is this for server to server communication? If so, then should this also be derived from the ordering system chain?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L59)<br><strong>Comment</strong>: <pre>I should probably document what this is for - but basically it contains one or more root or intermediate certificates which the server would send over to the client as part of the full PKIX chain.   The most basic example config here would be to included the root certificate (chain) which issued the server's X509 ServerCertificate</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L59](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L59)<br><strong>Comment</strong>: <pre>Ah, got it, that makes much more sense, so this is very much local to this particular orderer.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>Should the root CAs not be derived from the ordering system chain genesis block MSPs?  How do you see this being updated at runtime?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>Yes - indeed the major goal of the GRPCServer was to allow runtime updates to the list of trusted roots to use for client certificate validation.  GRPCServer provides a function ( https://github.com/hyperledger/fabric/blob/master/core/comm/server.go#L222 ) which does exactly that.  There's an analogous function for removing them as well.

So that's where the question of how best to pass / reference the GRPCServer instance in the rest of the code so that you can invoke this function when channel / chain are created or when membership is modified</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>Whether or not we should allow this to be configured via bootstrap is an open question.  I'm happy either way - the only thought I had was that you might want to add some at boot time for the initial admin(s) who can create the initial chain</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>So, at the orderer, I think it makes sense to do this at bootstrap, since the orderer process cannot start without a genesis block for the orderer system chain.

At the peer, this is less obvious to me, do we want the admins to explicitly whitelist which orgs are allowed to connect? Obviously not all channels have the same set of participants, so where do you get this list from?

With respect to the interface in server.go, what would you think of either adding (or even replacing) the Append/Remove methods with a simple Set method.  The rough flow I would see at the orderer (and would encourage the peer to replicate) would be that when a config transaction comes through, there's a TLSClientCertCAs item which enumerates who is allowed to connect, and we simply call SetClientRootCAs with whatever the current config is.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>But, the transaction is per chain, right? won't it override the configuration of the gRPC server each time? the certificate pools there are not multi-tenant from what I remember when I read that code.</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>ah - good point - because the config tx has the entire current membership list not just the delta.   I'll add a SetClientRootCAs function
in a separate change set</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>well the trust / verify check is only done on initial connection establishment.  modifying the certpool would not affect existing connections from the testing I have done - only new ones.  The only case where it could affect an existing one would be in the "refresh" case where if a root cert were no longer trusted you would no longer be able to reconnect</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>I'm not talking about existing connections. I'm talking about the fact that you get configuration blocks which are per channels, and may even contain mutual exclusive sets of root CA certificates.
Therefore, if you completely replace the TLS config of the gRPC server with the data from a configuration block of channel A- you may block any connections from channel B if channel B has a different set of root CAs.

Or- perhaps I'm missing something fundamental here, and the configuration block somehow magically contains all the root CAs of all organizations *across all channels*</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>yes - sorry - I was not thinking.
so my assumption from reading Jason's suggestion was that the orderer and peer would need to be able to generate a master list of all root certificates in use across all channels</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>I think that the problem should be offloaded to the logic of the peer and the orderer, but it makes sense to write some module that does that for chains.
Perhaps some kind of "certificate chain updater" that simply holds internally ALL root CA certs but PER CHAIN (a map between chain and cert pool), and whenever a config block comes, it puts it into the map, and computes the new set of all certificate pools and *then* overwrites it into the gRPC server. So instead of AppendClientRootCAs and RemoveClientRootCAs, we can have as Jason said- SetClientRootCAs and we would compute the new set each time. It's the easiest way I see to implement this.

another way will be this "certificat chain updater" to hold the root CA cert pools and just compute the delta and apply the changes. 

The selection between the two will be of course whether we expect these changes to be frequent or not, and the amount of channels we would expect (and development time, we don't have much of it left :) )</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>I'm happy to take a stab at it  - we can also build the master list but just emit the deltas as well depending on the size of the update.  But in any case we'll need a master list</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>Sorry I'm a little late to reply on this, but a little context from an orderer perspective.

I actually think that this is probably much easier to integrate from a configtx perspective at the orderer.  I always tend to frame things in the 'as a service' model, and from that perspective, the orderer would actually prefer to maintain the authorized client cert list based on a single authoritative source (the ordering system chain).

So, rather than try to compute some set of authorized client certs as the union or intersection of the chains, it simplifies management drastically to take it from the ordering system chain.  In this way, if someone doesn't pay their bill, easy, you remove them from the authorized list on the system chain, and now all their TLS connections fail.

I this this doubly makes sense for connection success, as the TLS layer must happen before chain ID is selected.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>We must not forget though, that we still have the peers, and they can still do state transfer between organizations via gossip, so the blocks would arrive later, but eventually will.

But- Why do you say their TLS connections fail? Doesn't it make sense to think that if the connection was alive before, changing of the root CA pool won't close it?</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>it would only happen if the client was trying to use TLS renegociation - although I think I disabled support for it anyway.</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>so I am fine adding a method to do a full replace.  Can we still merge this CR and add the change to the server in a separate CR?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/localconfig/config.go#L61](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/localconfig/config.go#L61)<br><strong>Comment</strong>: <pre>Fine by me.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/main.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L50)<br><strong>Comment</strong>: <pre>conf isn't passed into the ctor.</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/main.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L50)<br><strong>Comment</strong>: <pre>does this have to do with my change?  isn't this just creating and initializing the conf variable?</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/main.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L50)<br><strong>Comment</strong>: <pre>I selected this for the comment, but I think it does has something to do with the change, because you add params to the yaml, but you don't use them (line 69). 
If you didn't plan on using them, that's another thing of course.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/main.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L50)<br><strong>Comment</strong>: <pre>My assumption was that these variables were going to be used later, but certainly they are defined in the config and yaml, but never seemed to be used anywhere.</pre><strong>Commenter</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>CommentLine</strong>: [orderer/main.go#L50](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L50)<br><strong>Comment</strong>: <pre>hmmm, I was worried that if someone turns on the TLS in the orderer.yaml, the server would crash with a NPE, but it turns out it won't, and it prints "Failed to return new GRPC server:  secureConfig must contain both ServerKey and ServerCertificate when UseTLS is true"</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [orderer/main.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L72)<br><strong>Comment</strong>: <pre>moving forward, where do we want to hold the GRPCServer since we'll need to modify some of its settings at runtime?   I considered making it a package level var or perhaps we attach it as a property of the manager?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [orderer/main.go#L72](https://github.com/hyperledger-gerrit-archive/fabric/blob/af5635791973c49119fcd26901b7d5f742330fbc/orderer/main.go#L72)<br><strong>Comment</strong>: <pre>Ultimately, I think we'll want to attach this to the 'systemChain', but this will become more obvious once we start extracting configuration from the config block.</pre></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Uploader</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Created</strong>: 1/19/2017, 2:25:49 PM<br><strong>GitHubMergedRevision</strong>: [14f1aeab921fdc55ab56a84b6e4788d3ab8a6ead](https://github.com/hyperledger-gerrit-archive/fabric/commit/14f1aeab921fdc55ab56a84b6e4788d3ab8a6ead)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/19/2017, 2:56:49 PM<br><strong>Type</strong>: Verified<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Approved</strong>: 1/20/2017, 5:06:58 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Yacov Manevich - yacovm@il.ibm.com<br><strong>Approved</strong>: 1/20/2017, 5:31:34 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Yacov Manevich<br><strong>Merged</strong>: 1/20/2017, 5:31:37 PM<br><br></blockquote>