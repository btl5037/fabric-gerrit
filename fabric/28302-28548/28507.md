<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 28507<br><strong>Subject</strong>: FAB-13503 Add IsSerialized checker<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 1/6/2019, 10:49:58 PM<br><strong>LastUpdated</strong>: 1/21/2019, 1:37:22 PM<br><strong>CommitMessage</strong>:<br><pre>FAB-13503 Add IsSerialized checker

Because agreement is going to be stored in private-data collections
which are only accessible to the owning organization, other orgs will
need to be able to verify agreement without being able to actually read
the data (only its hashes).

Change-Id: I40618aa9ef3f63d7f16560534199e4f895a01677
Signed-off-by: Jason Yellick <jyellick@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/6/2019, 10:49:58 PM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/6/2019, 10:52:36 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8662/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/6/2019, 10:53:06 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/6/2019, 10:55:03 PM<br><strong>Message</strong>: <pre>Patch Set 1: F1-VerifyBuild-1

code checks are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/6/2019, 10:56:02 PM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8662/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/8662</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/7/2019, 8:56:39 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2: Patch Set 1 was rebased.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/7/2019, 10:09:43 AM<br><strong>Message</strong>: <pre>Patch Set 2:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:12:14 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8690/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:12:47 AM<br><strong>Message</strong>: <pre>Patch Set 2: -F1-VerifyBuild

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:18:55 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:21:41 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7648/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:21:55 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4461/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:22:27 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:22:41 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:55:46 AM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:58:58 AM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 10:59:42 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4461/ : FAILURE (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4461

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/8690/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/8690

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/7648/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/7648</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/7/2019, 11:06:10 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Run IntegrationTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 11:09:22 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4471/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 11:09:53 AM<br><strong>Message</strong>: <pre>Patch Set 2: -F3-IntegrationTest

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 11:35:16 AM<br><strong>Message</strong>: <pre>Patch Set 2: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/7/2019, 11:35:48 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4471/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4471</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/9/2019, 10:03:17 PM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Patch Set 2 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 1/10/2019, 10:33:04 AM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Reviewed</strong>: 1/11/2019, 2:27:03 PM<br><strong>Message</strong>: <pre>Uploaded patch set 5: Patch Set 4 was rebased.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/14/2019, 10:28:34 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6: Patch Set 5 was rebased.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/16/2019, 9:45:35 PM<br><strong>Message</strong>: <pre>Uploaded patch set 7: Patch Set 6 was rebased.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/16/2019, 9:46:12 PM<br><strong>Message</strong>: <pre>Patch Set 7:

VerifyBuild</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 9:49:42 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9102/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 9:50:13 PM<br><strong>Message</strong>: <pre>Patch Set 7: -F2-DocBuild -F1-VerifyBuild -F3-IntegrationTest -F3-UnitTest

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 9:56:20 PM<br><strong>Message</strong>: <pre>Patch Set 7: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run IntegrationTest, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 9:59:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8034/ (2/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 10:00:07 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4781/ (3/3)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 10:00:34 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 10:00:52 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Starting Integration tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 10:30:01 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 10:39:34 PM<br><strong>Message</strong>: <pre>Patch Set 7: F3-IntegrationTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/16/2019, 10:40:20 PM<br><strong>Message</strong>: <pre>Patch Set 7:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/9102/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/9102

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/8034/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/8034

https://jenkins.hyperledger.org/job/fabric-verify-integration-tests-x86_64/4781/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-integration-tests-x86_64/4781</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/17/2019, 11:58:34 PM<br><strong>Message</strong>: <pre>Uploaded patch set 8: Patch Set 7 was rebased.</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/18/2019, 12:41:16 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/18/2019, 1:00:28 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 1/18/2019, 1:50:34 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(4 comments)

Thanks Jason, a couple of Qs from my side - mostly sanity checks to make sure I understand + the open Q on deterministic marshalling. Thx!</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/18/2019, 2:20:36 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(2 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/20/2019, 9:48:56 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(5 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/20/2019, 10:18:57 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/20/2019, 11:57:34 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 1/21/2019, 12:13:11 PM<br><strong>Message</strong>: <pre>Patch Set 8:

(1 comment)</pre><strong>Reviewer</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Reviewed</strong>: 1/21/2019, 12:19:22 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 1/21/2019, 12:50:37 PM<br><strong>Message</strong>: <pre>Patch Set 8: Code-Review+2

Thanks Jason - LGTM</pre><strong>Reviewer</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Reviewed</strong>: 1/21/2019, 12:50:39 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Alessandro Sorniotti</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/21/2019, 12:53:08 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/4175/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/21/2019, 12:53:28 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/5491/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 1/21/2019, 1:37:22 PM<br><strong>Message</strong>: <pre>Patch Set 8:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/4175/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/4175

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/5491/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/5491</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 1/6/2019, 10:49:58 PM<br><strong>UnmergedRevision</strong>: [c11b5a8616849a11ca8b3f69ad3123eec860875c](https://github.com/hyperledger-gerrit-archive/fabric/commit/c11b5a8616849a11ca8b3f69ad3123eec860875c)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/6/2019, 10:55:03 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 1/7/2019, 8:56:39 AM<br><strong>UnmergedRevision</strong>: [3dc84a2b7cefe5a18e2c729afe125b692db6a7c7](https://github.com/hyperledger-gerrit-archive/fabric/commit/3dc84a2b7cefe5a18e2c729afe125b692db6a7c7)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 11:35:16 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:55:46 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 1/9/2019, 10:03:17 PM<br><strong>UnmergedRevision</strong>: [f2d07e6c9ec69ab6784ec9a875f549f40f90c24d](https://github.com/hyperledger-gerrit-archive/fabric/commit/f2d07e6c9ec69ab6784ec9a875f549f40f90c24d)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 11:35:16 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:55:46 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 1/10/2019, 10:33:04 AM<br><strong>UnmergedRevision</strong>: [84b3c2bce5b9f87d1290f03f0fd1d366023d66e8](https://github.com/hyperledger-gerrit-archive/fabric/commit/84b3c2bce5b9f87d1290f03f0fd1d366023d66e8)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 11:35:16 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:55:46 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Will Lahti - wtlahti@us.ibm.com<br><strong>Created</strong>: 1/11/2019, 2:27:03 PM<br><strong>UnmergedRevision</strong>: [d156b95acd630b324ce2f45be74ad9e6766b6a01](https://github.com/hyperledger-gerrit-archive/fabric/commit/d156b95acd630b324ce2f45be74ad9e6766b6a01)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 11:35:16 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:55:46 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 1/14/2019, 10:28:34 PM<br><strong>UnmergedRevision</strong>: [64df57e538616dab83cc6829dc33c5e9a9a35dc3](https://github.com/hyperledger-gerrit-archive/fabric/commit/64df57e538616dab83cc6829dc33c5e9a9a35dc3)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:18:55 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 11:35:16 AM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/7/2019, 10:55:46 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 7</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 1/16/2019, 9:45:35 PM<br><strong>UnmergedRevision</strong>: [5868d0969019c0773a454d1e4ce8886d4b1158e4](https://github.com/hyperledger-gerrit-archive/fabric/commit/5868d0969019c0773a454d1e4ce8886d4b1158e4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 9:56:20 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 9:56:20 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 10:39:34 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 10:30:01 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 8</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Uploader</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Created</strong>: 1/17/2019, 11:58:34 PM<br><strong>GitHubMergedRevision</strong>: [6241bac2ac5c640d6e5c540c0de5d6b5260055b9](https://github.com/hyperledger-gerrit-archive/fabric/commit/6241bac2ac5c640d6e5c540c0de5d6b5260055b9)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 9:56:20 PM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 9:56:20 PM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 10:39:34 PM<br><strong>Type</strong>: F3-IntegrationTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 1/16/2019, 10:30:01 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>Approved</strong>: 1/21/2019, 12:19:22 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>Approved</strong>: 1/21/2019, 12:50:37 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Alessandro Sorniotti<br><strong>Merged</strong>: 1/21/2019, 12:50:39 PM<br><br><h2>Comments</h2><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L188)<br><strong>Comment</strong>: <pre>I suppose this retrieves the hash values from the expected implicit collection, which is why you don't need to supply a collection name?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L188)<br><strong>Comment</strong>: <pre>At least that's how I interpreted it.... potentially this function will be called with different `OpaqueState` one of each unique org that you want to check against.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L188](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L188)<br><strong>Comment</strong>: <pre>Correct, it's up to the caller to provide a shim which directs calls to the appropriate namespace and collection.  Essentially, all of these serialization interfaces assume that the state access is available directly, in this way, whether access is via the chaincode shim (namespace is implied, but collections is not), query executor (namespace and collections are both not implicit), whether private or public, the access is uniform.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L199](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L199)<br><strong>Comment</strong>: <pre>If we use protobuf there don't we run the risk of non-deterministic unmarshalling?</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L199](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L199)<br><strong>Comment</strong>: <pre>This is underneath using protobuf only for the metadata. My concern in the above comment is about the length/order of fields in the slice vs in the latest struct definition.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L199](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L199)<br><strong>Comment</strong>: <pre>We certainly run the risk of non-deterministic marshaling.  However, fortunately, this is on the chaincode side, so non-determinism isn't much of an issue.  Worst case, endorsement fails.  Corruption is not possible.

I would note, we assume deterministic proto marshaling a number of places, most notably in the proposal response, so this is really not a new assumption.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L205)<br><strong>Comment</strong>: <pre>This adds a limitaiton that the order of the fields cannot be changed in a struct definition. For instance, a code change from 

`type MyStruct struct {field1, field2 string}` to
 `type MyStruct struct {field2, field1 string}` 

(which may look trivial in a CR) will break it. protobuf solves this by the tag numbers.

I am fine if you want this behavior... Just want to make sure that this aspect does not go unnoticed. Else, you may want to keep the field's list in sorted order.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L205)<br><strong>Comment</strong>: <pre>Also, this backward compatibility issue could be there if you add additional field in the struct definition?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L205)<br><strong>Comment</strong>: <pre>Yes, I concur (and was aware) that the field order here matters.  I wouldn't be strictly opposed to sorting the keys, but, we must also remember that in general, two different versions of the lifecycle chaincode will not work together.  This is a known limitation of system chaincodes today, and one we should work to address in the future.  Before this release is out, I would like to code up some hypothetical lifecycle upgrade scenarios and make sure we can make them work in a sane way.  If you'd like to open a JIRA to make sure we don't lose track, that would be great.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L205)<br><strong>Comment</strong>: <pre>My concern is not about two different versions of the lifecycle chaincodes working together. My concern was about later version (say 2.1) binary working with the data persisted by the binary of version 2.0.

Since this CR is generic code and I still have to see the usage of this function I am just anticipating where it would be used.

Say, you add a new filed in the struct in version 2.1, will it be able to match the votes given by the binary 2.0? Also, other place I think was to check my own org's definition before executing chaincode. The latter case, I believe that you finalized to check against in-memory data but for the former, will it impose a limitation that after an upgrade, voting needs to happen again?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L205)<br><strong>Comment</strong>: <pre>Right, I understand the concern about v2.0/v2.1  So let me preface this with a few facts:

1. If you invoke lifecycle on a v2.0 peer and a v2.1 peer, and the readwrite sets match identically and they return the same result, the transaction will still fail EP checking because the chaincode version is a part of the proposal response and it will differ.
2. There is no forking potential here, only failure to obtain a valid tx.

> Also, other place I think was to check my own org's definition before executing chaincode. The latter case, I believe that you finalized to check against in-memory data but for the former, will it impose a limitation that after an upgrade, voting needs to happen again?

For our own org, we can actually get the real private data, and zero-out uninitialized values.  But yes, if the fields in the definition change between fabric versions, then the votes must all be across matching versions.</pre><strong>Commenter</strong>: Manish Sethi - manish.sethi@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L205](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L205)<br><strong>Comment</strong>: <pre>Sure Jason. As I said earlier, I am fine with the limitations so long we will document this limitation "if the fields in the definition change between fabric versions, then the votes must all be across matching versions."</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L228](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L228)<br><strong>Comment</strong>: <pre>Same concern about deterministic marshalling as above</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L228](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L228)<br><strong>Comment</strong>: <pre>Same response.  I don't like relying on the deterministic marshaling, but, it's not new.  If you have another marshaling scheme, I'd be happy to hear it.  Note, the idea behind abstracting out these serialization functions is that we can swap this component out if we decide there's a better idea.</pre><strong>Commenter</strong>: Alessandro Sorniotti - ale.linux@sopit.net<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L233](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L233)<br><strong>Comment</strong>: <pre>Just a sanity check: theoretically, it is possible for a rogue key "ns/fields/name/__rogue__" to exist in the ledger, and yet we are not bothered because we only consider the fields that are reflected in the metadata. Also, the 2 cases
1) argument struct has one more field than on-ledger struct
2) on-ledger struct has one more field than argument struct
are caught by a non-identical metadata hash, correct?</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L233](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L233)<br><strong>Comment</strong>: <pre>Certainly, if the metadata does not reflect the key, then it would slip by undetected.  If the struct definition does not match exactly across peers, or, the struct encoding the data on the ledger is different from the struct the peer has, we can expect a failure.

For dealing with serialized values, I'm not sure we can give much better of a guarantee.  We could change the logic to check that all fields this peer knows about (ignoring the metadata) match, but, then we could be dealing with mismatched types, or ignoring new fields which fundamentally change the interpretation of the definition.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/lifecycle/serializer.go#L233](https://github.com/hyperledger-gerrit-archive/fabric/blob/6241bac2ac5c640d6e5c540c0de5d6b5260055b9/core/chaincode/lifecycle/serializer.go#L233)<br><strong>Comment</strong>: <pre>One more note, I'd actually written an entirely different implementation of these serialization interfaces which depended upon RangeScan to enumerate the fields which were defined in a namespace.  However, in the case of collections, where keys are hashed, range scanning isn't meaningful, so it's exceptionally hard to catch 'extra fields', unless they're encoded in the metadata.</pre></blockquote>