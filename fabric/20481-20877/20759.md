<strong>Project</strong>: fabric<br><strong>Branch</strong>: master<br><strong>ID</strong>: 20759<br><strong>Subject</strong>: [FAB-9588] runningChaincodes to separate file<br><strong>Status</strong>: MERGED<br><strong>Owner</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Assignee</strong>:<br><strong>Created</strong>: 4/19/2018, 8:50:56 AM<br><strong>LastUpdated</strong>: 4/24/2018, 4:16:21 PM<br><strong>CommitMessage</strong>:<br><pre>[FAB-9588] runningChaincodes to separate file

Change-Id: Id30ba008633edf4203850a88e1abdf2903627e74
Signed-off-by: Matthew Sykes <sykesmat@us.ibm.com>
</pre><h1>Comments</h1><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/19/2018, 8:50:56 AM<br><strong>Message</strong>: <pre>Uploaded patch set 1.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 10:21:43 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/568/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 10:22:13 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 10:22:16 AM<br><strong>Message</strong>: <pre>Patch Set 1: F1-VerifyBuild-1

$CHECKS_CMD are failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 10:22:48 AM<br><strong>Message</strong>: <pre>Patch Set 1:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/568/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/568/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/568</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/19/2018, 11:09:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 2.</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:12:26 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/572/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:12:57 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting verify build</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:20:14 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-DocBuild+1 F1-VerifyBuild+1

Succeeded, Run SmokeTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:20:54 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-build-checks-x86_64/572/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-build-checks-x86_64/572</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:25:05 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/402/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:25:33 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting smoke tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:29:42 AM<br><strong>Message</strong>: <pre>Patch Set 2: F2-SmokeTest+1

Succeeded, Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:31:41 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/1067/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:32:05 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:38:11 AM<br><strong>Message</strong>: <pre>Patch Set 2: F3-UnitTest-1

Failed</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 11:38:33 AM<br><strong>Message</strong>: <pre>Patch Set 2:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/1067/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/1067/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/1067

https://jenkins.hyperledger.org/job/fabric-smoke-tests-x86_64/402/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-smoke-tests-x86_64/402</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/19/2018, 11:49:32 AM<br><strong>Message</strong>: <pre>Uploaded patch set 3: Patch Set 2 was rebased.</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/19/2018, 12:23:23 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Run UnitTest</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 12:26:03 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Started https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/1074/</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 12:26:31 PM<br><strong>Message</strong>: <pre>Patch Set 3: -F3-UnitTest

Starting unit tests</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 12:42:18 PM<br><strong>Message</strong>: <pre>Patch Set 3: F3-UnitTest+1

Succeeded</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/19/2018, 12:42:59 PM<br><strong>Message</strong>: <pre>Patch Set 3:

Build Successful 

https://jenkins.hyperledger.org/job/fabric-verify-unit-tests-x86_64/1074/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-verify-unit-tests-x86_64/1074</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/20/2018, 2:12:00 PM<br><strong>Message</strong>: <pre>Uploaded patch set 4: Patch Set 3 was rebased.</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 4/21/2018, 9:08:49 AM<br><strong>Message</strong>: <pre>Patch Set 5: Patch Set 4 was rebased</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 4/21/2018, 9:18:18 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(2 comments)</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/21/2018, 10:09:58 AM<br><strong>Message</strong>: <pre>Patch Set 5:

(2 comments)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/21/2018, 10:23:40 AM<br><strong>Message</strong>: <pre>Patch Set 4:

(3 comments)</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 4/21/2018, 12:19:05 PM<br><strong>Message</strong>: <pre>Patch Set 5:

(2 comments)</pre><strong>Reviewer</strong>: Artem Barger - bartem@il.ibm.com<br><strong>Reviewed</strong>: 4/21/2018, 4:23:32 PM<br><strong>Message</strong>: <pre>Patch Set 4:

(2 comments)</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 4/24/2018, 12:59:19 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2

(1 comment)</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/24/2018, 1:25:59 AM<br><strong>Message</strong>: <pre>Patch Set 5:

> (1 comment)

Jason, perhaps you missed my comments above... there are some deviations from the current locking logic.</pre><strong>Reviewer</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>Reviewed</strong>: 4/24/2018, 1:36:17 AM<br><strong>Message</strong>: <pre>Patch Set 5: -Code-Review

Actually, sorry about that, I missed Murali's comments, will wait for Matt to respond.</pre><strong>Reviewer</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Reviewed</strong>: 4/24/2018, 11:21:44 AM<br><strong>Message</strong>: <pre>Patch Set 5: Code-Review+2

LGTM based on the whole series of changes</pre><strong>Reviewer</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Reviewed</strong>: 4/24/2018, 12:19:05 PM<br><strong>Message</strong>: <pre>Uploaded patch set 6: Patch Set 5 was rebased.</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/24/2018, 3:54:03 PM<br><strong>Message</strong>: <pre>Patch Set 6: Code-Review+2

Wrt my comments, the thought was that the sections under lock could be sensible functions on "runningChaincodes" which would also help preserve current semantics so we don't have to don't have to worry about something unthought of creeping in. But as mentioned in one of the comments, there maybe no inherent harm in splitting the sections in a way to let multiple chaincodes access runningChaincodes safely. So +2ing with some caution.</pre><strong>Reviewer</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Reviewed</strong>: 4/24/2018, 3:54:45 PM<br><strong>Message</strong>: <pre>Change has been successfully merged by Srinivasan Muralidharan</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2018, 3:56:29 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/2262/ (1/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2018, 3:56:55 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Started https://jenkins.hyperledger.org/job/fabric-merge-x86_64/3593/ (2/2)</pre><strong>Reviewer</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Reviewed</strong>: 4/24/2018, 4:16:21 PM<br><strong>Message</strong>: <pre>Patch Set 6:

Build Failed 

https://jenkins.hyperledger.org/job/fabric-merge-x86_64/3593/ : FAILURE (skipped)

No problems were identified. If you know why this problem occurred, please add a suitable Cause for it. ( https://jenkins.hyperledger.org/job/fabric-merge-x86_64/3593/ )

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-x86_64/3593

https://jenkins.hyperledger.org/job/fabric-merge-end-2-end-x86_64/2262/ : SUCCESS (skipped)

Logs: https://logs.hyperledger.org/production/vex-yul-hyp-jenkins-3/fabric-merge-end-2-end-x86_64/2262</pre><h1>PatchSets</h1><h3>PatchSet Number: 1</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 4/19/2018, 8:50:56 AM<br><strong>UnmergedRevision</strong>: [26d716fdc1bf6020616266ccd6d4e94fdaf1516a](https://github.com/hyperledger-gerrit-archive/fabric/commit/26d716fdc1bf6020616266ccd6d4e94fdaf1516a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 10:22:16 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 2</h3><blockquote><strong>Type</strong>: REWORK<br><strong>Author</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 4/19/2018, 11:09:32 AM<br><strong>UnmergedRevision</strong>: [1b9d484ac348f106b2c9a9c0e4e5f52c1bd714a4](https://github.com/hyperledger-gerrit-archive/fabric/commit/1b9d484ac348f106b2c9a9c0e4e5f52c1bd714a4)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:29:42 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:38:11 AM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: -1<br><br></blockquote><h3>PatchSet Number: 3</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 4/19/2018, 11:49:32 AM<br><strong>UnmergedRevision</strong>: [2544209084de874edec06326a35d66ad836c7d8a](https://github.com/hyperledger-gerrit-archive/fabric/commit/2544209084de874edec06326a35d66ad836c7d8a)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:29:42 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 12:42:18 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br></blockquote><h3>PatchSet Number: 4</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 4/20/2018, 2:12:00 PM<br><strong>UnmergedRevision</strong>: [9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5](https://github.com/hyperledger-gerrit-archive/fabric/commit/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:29:42 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 12:42:18 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/chaincode_support.go#L203](https://github.com/hyperledger-gerrit-archive/fabric/blob/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5/core/chaincode/chaincode_support.go#L203)<br><strong>Comment</strong>: <pre>Consider moving this function into runningchaincodes and access its datastructure under one lock (we are splitting lock based access across GetChaincode and RegisterChaincode) ? This is similar to the "SetLaunchStarted" refactor.

I understand we are only protecting the map and not chaincodeRTE itself, but I like the notion of "chaincode registration is atomic - only one CC registering at a time". Has the bonus of safety if we need to do other things during this process in future.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/chaincode_support.go#L522](https://github.com/hyperledger-gerrit-archive/fabric/blob/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5/core/chaincode/chaincode_support.go#L522)<br><strong>Comment</strong>: <pre>Similar to previous comment, could we move this to running chaincodes as a single atomic function - say  "GetChaincodeIfNotLaunched" ? It can return rtenv only if it has not been launched.

Further the returned rtenv can be used and we wouldn't need line 567.</pre><strong>Commenter</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/chaincode_support.go#L567](https://github.com/hyperledger-gerrit-archive/fabric/blob/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5/core/chaincode/chaincode_support.go#L567)<br><strong>Comment</strong>: <pre>See comment in line 522 please.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5/core/chaincode/running_chaincodes.go#L29)<br><strong>Comment</strong>: <pre>since this is only a read operation, IMO RLock will be better to use here.</pre><strong>Commenter</strong>: Jason Yellick - jyellick@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L29](https://github.com/hyperledger-gerrit-archive/fabric/blob/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5/core/chaincode/running_chaincodes.go#L29)<br><strong>Comment</strong>: <pre>Given that this is a straight port of the existing locking logic, I'd say leaving as a standard lock is preferable for the time being.</pre><strong>Commenter</strong>: Artem Barger - bartem@il.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L57](https://github.com/hyperledger-gerrit-archive/fabric/blob/9ea984bf69cee4a96d95d1e8afdd3efd61c8f9d5/core/chaincode/running_chaincodes.go#L57)<br><strong>Comment</strong>: <pre>RLock?</pre></blockquote><h3>PatchSet Number: 5</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Uploader</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Created</strong>: 4/21/2018, 9:08:49 AM<br><strong>UnmergedRevision</strong>: [4042210ed7b649232303c60e4578ee5497b7c5d6](https://github.com/hyperledger-gerrit-archive/fabric/commit/4042210ed7b649232303c60e4578ee5497b7c5d6)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:29:42 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 12:42:18 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 4/24/2018, 11:21:44 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><h2>Comments</h2><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L56](https://github.com/hyperledger-gerrit-archive/fabric/blob/4042210ed7b649232303c60e4578ee5497b7c5d6/core/chaincode/running_chaincodes.go#L56)<br><strong>Comment</strong>: <pre>nit ... but should this be GetChaincodeRTE given it returns RTE?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L56](https://github.com/hyperledger-gerrit-archive/fabric/blob/4042210ed7b649232303c60e4578ee5497b7c5d6/core/chaincode/running_chaincodes.go#L56)<br><strong>Comment</strong>: <pre>Yes. That said, for context, this is part of a chain of refactors that I'm working on with Saad. The one that's in flight right now completely replaces this with a HandlerRegistry and removes the chaincodeRTEnv type altogether.

If you want to -2 this for now until that shows up, I'm cool with that - we just wanted to make sure we did *really small* refactor steps so reviewers wouldn't throw up their hands with large change sets.</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L56](https://github.com/hyperledger-gerrit-archive/fabric/blob/4042210ed7b649232303c60e4578ee5497b7c5d6/core/chaincode/running_chaincodes.go#L56)<br><strong>Comment</strong>: <pre>Done</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/4042210ed7b649232303c60e4578ee5497b7c5d6/core/chaincode/running_chaincodes.go#L77)<br><strong>Comment</strong>: <pre>nit ... but do we need the Get prefix here given this returns a bool?</pre><strong>Commenter</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/4042210ed7b649232303c60e4578ee5497b7c5d6/core/chaincode/running_chaincodes.go#L77)<br><strong>Comment</strong>: <pre>No, we don't. In the next refactor (in fight now) this whole object gets replace with something else that helps choreograph launch and location of chaincode handlers on the peer side. If you want to see where we are going:

https://github.com/sykesm/fabric/blob/5686264ad09ab5c4dd0a5920a8dd3cee18ecd302/core/chaincode/handler_registry.go#L33-L74</pre><strong>Commenter</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>CommentLine</strong>: [core/chaincode/running_chaincodes.go#L77](https://github.com/hyperledger-gerrit-archive/fabric/blob/4042210ed7b649232303c60e4578ee5497b7c5d6/core/chaincode/running_chaincodes.go#L77)<br><strong>Comment</strong>: <pre>Done</pre></blockquote><h3>PatchSet Number: 6</h3><blockquote><strong>Type</strong>: TRIVIAL_REBASE<br><strong>Author</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Uploader</strong>: Matthew Sykes - sykesmat@us.ibm.com<br><strong>Created</strong>: 4/24/2018, 12:19:05 PM<br><strong>GitHubMergedRevision</strong>: [ad62847a8db6ca66e1c7f14ce0f256911136cedc](https://github.com/hyperledger-gerrit-archive/fabric/commit/ad62847a8db6ca66e1c7f14ce0f256911136cedc)<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F1-VerifyBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:20:14 AM<br><strong>Type</strong>: F2-DocBuild<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 11:29:42 AM<br><strong>Type</strong>: F2-SmokeTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Hyperledger Jobbuilder - jobbuilder@jenkins.hyperledger.org<br><strong>Approved</strong>: 4/19/2018, 12:42:18 PM<br><strong>Type</strong>: F3-UnitTest<br><strong>Value</strong>: 1<br><br><strong>Approver</strong>: Srinivasan Muralidharan - srinivasan.muralidharan99@gmail.com<br><strong>Approved</strong>: 4/24/2018, 3:54:03 PM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br><strong>MergedBy</strong>: Srinivasan Muralidharan<br><strong>Merged</strong>: 4/24/2018, 3:54:45 PM<br><br><strong>Approver</strong>: Gari Singh - gari.r.singh@gmail.com<br><strong>Approved</strong>: 4/24/2018, 11:21:44 AM<br><strong>Type</strong>: Code-Review<br><strong>Value</strong>: 1<br><br></blockquote>